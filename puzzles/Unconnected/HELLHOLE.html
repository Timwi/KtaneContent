<!DOCTYPE html>
<html>
<head>
    <title>HELLHOLE</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8" />
    <link rel="stylesheet" type="text/css" href="../css/puzzles.css">
    <link rel="stylesheet" type="text/css" href="../../HTML/css/font.css">
    <script src="highlighter.js"></script>
</head>
<style>
    @font-face {
        font-family: 'Gugi';
        font-style: normal;
        font-weight: 400;
        src: local('Gugi-Regular'), url(HELLHOLE/Gugi-Regular.ttf);
    }
</style>
<body>
    <div id="everything">
        <div class="page">
            <div class="author">Blananas2</div>
            <h1>HELLHOLE</h1>
            <p class="flavour-text">The angels have done the process for you, not that it makes it any easier.</p>
			<canvas id="puzzlewindow" width="1200" height="570"></canvas>
        </div>
    </div>
</body>
<script>
const canvas = document.getElementById("puzzlewindow");
canvas.addEventListener("pointermove", function (evt) {
    let mousePos = getMousePos(canvas, evt);
    hovered(mousePos.x, mousePos.y);
}, false);

const TWO_PI = 2 * Math.PI;
let which = null;
let circles = [];
const cletters = "0120231301415450656424520132072742740072575706067511576647242337";
const colors = ["#FF00FF", "#F67800", "#0000FF", "#FF0000", "#00FFFF", "#C3B61C", "#FFFFFF", "#FFFF00"];
const cwords = "WRINKLESHEADWINDCONTENDSUNBIASEDCOMPLETECORRUPTSFURTHERS";
const kwords = "FROTHINGDOMINATEMINGLINGVASTNESSPLAGUINGHONOREESPOLITICS????????";
const mysteryVariable = [3,6,4,0,2,7,1,5,15,11,13,9,14,10,12,8,18,22,16,21,23,19,17,20,28,null,null,30,24,31,27,29,35,39,38,32,37,36,34,33,42,43,40,41,46,47,44,45,53,52,51,50,49,48,55,54,59,63,60,56,58,62,61,57];

for (r = 0; r < 8; r++) {
    for (k = 0; k < 8; k++) {
        circles.push([k*70 + 40, r*70 + 40, 30]);
    }
}

draw();

function draw() {
    if (canvas.getContext) {
        const ctx = canvas.getContext("2d");
        ctx.fillStyle = "transparent";
        ctx.clearRect(0, 0, canvas.width, canvas.height);

        ctx.fillStyle = "#000000";
        if (mysteryVariable[which] != null) {
            drawCirc(ctx, [circles[which][0], circles[which][1], 35]);
            drawCirc(ctx, [circles[mysteryVariable[which]][0], circles[mysteryVariable[which]][1], 35])
        }

        ctx.fillStyle = "#58595D";
        for (q = 0; q < circles.length; q++) {
            if (q >= 56) { ctx.fillStyle = colors[Number.parseInt(cletters[q])]; }
            drawCirc(ctx, circles[q]);
        }

        ctx.textAlign = "center";
        ctx.font = "36px Gugi";
        for (l = 0; l < cwords.length; l++) {
            ctx.fillStyle = colors[Number.parseInt(cletters[l])];
            ctx.fillText(cwords[l], circles[l][0], circles[l][1]+14);
        }
        ctx.fillStyle = "#000000";
        for (z = 0; z < kwords.length; z++) {
            ctx.fillText(kwords[z], circles[z][0]+600, circles[z][1]+14);
        }
    }
}

function hovered(x, y) {
    which = null;
    for (q = 0; q < circles.length; q++) {
        if (pointInCirc([x,y], circles[q])) {
            which = q;
            break;
        }
    }
    draw();
}

function getMousePos(canvas, evt) {
    let rect = canvas.getBoundingClientRect();
    return {
        x: evt.clientX - rect.left,
        y: evt.clientY - rect.top
    };
}

function drawCirc(ctx, params) {
    ctx.beginPath();
    ctx.arc(params[0], params[1], params[2], 0, TWO_PI);
    ctx.fill();
}

function pointInCirc(p, circ) {
    let x = Math.abs(p[0] - circ[0]);
    let y = Math.abs(p[1] - circ[1]);
    return (x*x + y*y) < circ[2]*circ[2];
}
</script>
</html>