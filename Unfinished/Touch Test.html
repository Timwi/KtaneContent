<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Touch Test — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
	<script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/ruleseed.js"></script>
	<script>
		const usedShapes = [ 'Arrow', 'Circle', 'Diamond', 'Equilateral', 'Heart', 'Isosceles', 'Octagon', 'Oval', 'Pentagon', 'Square', 'Star', 'Trapezoid' ];
		const arrs = '▲►▼◄';
		
		function setDefaultRules(rnd) {
			setRules(rnd);
		}
		function setRules(rnd) {
			rnd.shuffleFisherYates(usedShapes);
			let dirIndices = [ ];
			for (let i = 0; i < 256; i++) {
				dirIndices.push(i);
			}
			rnd.shuffleFisherYates(dirIndices);
			let dirStrings = [ ];
			for (let i = 0; i < Math.min(usedShapes.length, 12); i++){
				let str = '';
				let startD = dirIndices[i];
				for (let j = 0; j < 4; j++) {
					str += arrs[startD % 4];
					startD >>= 2;
				}
				dirStrings.push(str);
			}
			
			let shapeConts = $('th');
			let arrowConts = $('td');
			
			for (let i = 0; i < Math.min(usedShapes.length, 12); i++) {
				let img = $('<img>').addClass('shape').attr('src', `Touch Test/Shapes/${usedShapes[i]}.svg`);
				$(shapeConts[i]).append(img);
				$(arrowConts[i]).html(dirStrings[i]);
			}
			
		}
		
		
	</script>
    <style>
		table {
			margin: 1em auto;
		}
		.schematics {
			display: flex;
			flex-flow: row wrap;
			justify-content: space-around;
			margin-top: 1em;
		}	
		figcaption {
			text-align: center;
			font-style: italic;
		}
		figure img {
			width: 3.5in;
			height: 3.5in;
			margin-bottom: .5em;
		}
		.shape {
			width: .75in;
			height: .75in;
		}
		.dark figure img,
		.dark .shape {
			filter: invert(87%);
		}
		
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Touch Test</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="Touch Test.svg">
                <h2>On the Subject of the Touch Test</h2>

                <p class="flavour-text">Plumb Bob Forever!</p>
				
				<p>Inside the module is a 2-dimensional shape and a plumb bob hanging from a string, which can be moved using the arrow buttons.</p>
				<p>The hologram at the center of the module displays the current orientation of the plumb bob.</p>
				<p>To solve the module, identify the shape inside the module, press the center of the module, and then enter the series of arrow presses depending on the shape.</p>
				<br>
				<h3>Plumb Bob Mechanism Schematics</h3>
				<div class='schematics'>
					<figure>
						<img src="Touch Test/Top view.svg">
						<figcaption>Top view</figcaption>
					</figure>
					<figure>
						<img src="Touch Test/Side view.svg">
						<figcaption>Side view</figcaption>
					</figure>
					
				</div>
				
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Guide</span>
                <span class="page-header-section-title">Touch Test</span>
            </div>
            <div class="page-content">
                <h3>Available Shapes</h3>
				
				<table> 
					<tr> <th></th> <th></th> <th></th> <th></th> </tr>
					<tr> <td></td> <td></td> <td></td> <td></td> </tr>
					<tr> <th></th> <th></th> <th></th> <th></th> </tr>
					<tr> <td></td> <td></td> <td></td> <td></td> </tr>
					<tr> <th></th> <th></th> <th></th> <th></th> </tr>
					<tr> <td></td> <td></td> <td></td> <td></td> </tr>
					
				</table>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>
