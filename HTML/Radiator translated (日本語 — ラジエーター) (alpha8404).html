<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ラジエーター — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src='js/ruleseed.js'></script>
    <script>
        function setRules(rnd)
        {
            var LitIndicators = rnd.shuffleArray(["FRK", "BOB", "CAR", "CLR", "FRQ", "IND", "MSA", "NLL", "NSA", "SIG", "SND", "TRN"]);
            var UnlitIndicators = rnd.shuffleArray(["BOB", "NSA", "FRQ", "MSA", "FRK", "CAR", "CLR", "IND", "NLL", "SIG", "SND", "TRN"]);
            var SerialString;
            var possibleChars = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789".split('');
            var chars = new Array(8);
            for (var i = 0; i < chars.length; i++)
            {
                var character = possibleChars[rnd.next(0, possibleChars.length)];
                while (chars.includes(character))
                {
                    character = possibleChars[rnd.next(0, possibleChars.length)];
                }
                chars[i] = character;
            }
            SerialString = chars.join('');
            var TempMultiplier = rnd.next(5, 16, true);
            var BatteryAddAmount = rnd.next(0, 8, true);
            var BatterySubtractAmount = rnd.next(0, 7, true);
            var UnicornTempAmount = rnd.next(0, 100, true);
            var DivideAmount = rnd.next(2, 6, true);
            var UnicornWaterAmount = rnd.next(1, 100, true);
            var BatteryOrder = rnd.shuffleArray(["単1バッテリー", "二本の単3バッテリーが付いているホルダー", "三本の単3バッテリーが付いているホルダー", "四本の単3バッテリーが付いているホルダー", "空のバッテリーホルダー"]);
            var PortOrder = rnd.shuffleArray(["RJ-45", "HDMI", "パラレル", "AC", "Component Video", "Composite Video", "DVI-D", "PCMCIA", "PS/2", "シリアル", "ステレオRCA", "USB", "VGA"]);
            var GeneralAmounts = rnd.shuffleArray([50, 20, 40, 10, 2, 25, 1]);

            document.getElementsByClassName('UnicornIndicator1')[0].innerText = LitIndicators[0];
            document.getElementsByClassName('UnicornIndicator2')[0].innerText = LitIndicators[1];
            document.getElementsByClassName('UnicornTempAmount')[0].innerText = UnicornTempAmount;
            document.getElementsByClassName('UnicornWaterAmount')[0].innerText = UnicornWaterAmount;
            document.getElementsByClassName('SerialChars')[0].innerText = SerialString;
            document.getElementsByClassName('TempMultiplier')[0].innerText = TempMultiplier;
            document.getElementsByClassName('Batteries1')[0].innerText = BatteryOrder[1];
            document.getElementsByClassName('BatteryAddAmount')[0].innerText = BatteryAddAmount;
            document.getElementsByClassName('Batteries2')[0].innerText = BatteryOrder[0];
            document.getElementsByClassName('BatterySubtractAmount')[0].innerText = BatterySubtractAmount;
            document.getElementsByClassName('DivideAmount')[0].innerText = DivideAmount;
            document.getElementsByClassName('Port1')[0].innerText = PortOrder[0];
            document.getElementsByClassName('GeneralAmount1')[0].innerText = GeneralAmounts[0];
            document.getElementsByClassName('GeneralAmount2')[0].innerText = GeneralAmounts[1];
            document.getElementsByClassName('GeneralAmount3')[0].innerText = GeneralAmounts[2];
            document.getElementsByClassName('GeneralAmount4')[0].innerText = GeneralAmounts[3];
            document.getElementsByClassName('GeneralAmount5')[0].innerText = GeneralAmounts[4];
            document.getElementsByClassName('GeneralAmount6')[0].innerText = GeneralAmounts[5];
            document.getElementsByClassName('GeneralAmount7')[0].innerText = GeneralAmounts[6];
            document.getElementsByClassName('UnlitIndicator1')[0].innerText = UnlitIndicators[0];
            document.getElementsByClassName('UnlitIndicator2')[0].innerText = UnlitIndicators[1];
            document.getElementsByClassName('UnlitIndicator3')[0].innerText = UnlitIndicators[2];
            document.getElementsByClassName('UnlitIndicator4')[0].innerText = UnlitIndicators[3];
            document.getElementsByClassName('UnlitIndicator5')[0].innerText = UnlitIndicators[4];
        }

        function setDefaultRules()
        {
            var list = document.getElementsByClassName('rule');
            for (var i = 0; i < list.length; i++)
                list[i].innerText = list[i].getAttribute('data-original');
        }
    </script>
    <style>
        table {
            margin-top: 1em;
        }
        .SerialChars { font-family: 'Roboto Mono'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ラジエーター</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Radiator.svg" class="diagram">
                <h2>モジュール詳細：ラジエーター</h2>
                <p class="flavour-text">
                    このへん暑くなってきているんだけど、私だけかな？
                </p>

                <p>このモジュールには2つのステージがある。温度ステージと水ステージである。水ステージを求めるには温度ステージの値を記録しておく必要がある。</p>
                <p>水の値の前に温度の値を送信する必要がある。間違えた場合はリセットボタンを押す。</p>
                <p>各ステージで間違った値を送信した場合、ミスが記録され、最初からモジュールをやり直す必要がある。</p>
                <p><b>ただし</b>、点灯した<span class='rule UnicornIndicator1' data-original='FRK'>FRK</span>インジケーターと点灯した<span class='rule UnicornIndicator2' data-original='BOB'>BOB</span>インジケーターがある場合、温度を<span class='rule UnicornTempAmount' data-original='13'>13</span>、水を<span class='rule UnicornWaterAmount' data-original='37'>37</span>で送信する。</p>
                <p>数値が99を超える場合、下2桁を使用する。</p>

                <table>
                    <tr>
                        <td>
                            <b><em>温度</em></b><br>
                            0から開始し、シリアルナンバーに「<span class='rule SerialChars' data-original='RADI4T07'>RADI4T07</span>」*のいずれかが含まれる場合、該当するシリアルナンバー1つにつき<span class='rule TempMultiplier' data-original='10'>10</span>を加算する。<br>
                            <span class='rule Batteries1' data-original='単3バッテリーのペア'>単3バッテリーのペア</span>がある度に<span class='rule BatteryAddAmount' data-original='5'>5</span>を追加する。<br>
                            <span class='rule Batteries2' data-original='単1バッテリー'>単1バッテリー</span>がある度に<span class='rule BatterySubtractAmount' data-original='5'>5</span>を減算する。<br>
                            結果が負の場合、－1を乗算する。<br>
                            結果の数字を送信し、水ステージに移行する。<br>
                        </td>
                    </tr>
                    <tr>
                        <td>
                            <b><em>水</em></b><br>
                            送信した温度の数を<span class='rule DivideAmount' data-original='3'>3</span>で除算する。<br>
                            数が整数ではない場合、整数部分のみを使用する。<br>
                            <span class='rule Port1' data-original='RJ-45'>RJ-45</span>ポートがある場合、<span class='rule GeneralAmount1' data-original='50'>50</span>を追加する。<br>
                            点灯したインジケーターがある場合、<span class='rule GeneralAmount2' data-original='20'>20</span>を追加する。<br>
                            点灯していないインジケーターがある場合、以下の表に従う。<br>
                            結果が負の場合、－1を乗算する。<br>
                            結果を送信する。<br>
                        </td>
                    </tr>
                </table>

                <table>
                    <tr>
                        <td>
                            <b><em>消灯インジケーター表</em></b><br>
                            <span class='rule UnlitIndicator1' data-original='BOB'>BOB</span> --&gt; +<span class='rule GeneralAmount3' data-original='40'>40</span><br>
                            <span class='rule UnlitIndicator2' data-original='NSA'>NSA</span> --&gt; -<span class='rule GeneralAmount4' data-original='10'>10</span><br>
                            <span class='rule UnlitIndicator3' data-original='FRQ'>FRQ</span> --&gt; +<span class='rule GeneralAmount5' data-original='2'>2</span><br>
                            <span class='rule UnlitIndicator4' data-original='MSA'>MSA</span> --&gt; +<span class='rule GeneralAmount6' data-original='25'>25</span><br>
                            <span class='rule UnlitIndicator5' data-original='FRK'>FRK</span> --&gt; -<span class='rule GeneralAmount7' data-original='1'>1</span><br>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
</body>
</html>