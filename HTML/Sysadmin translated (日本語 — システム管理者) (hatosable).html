<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>システム管理者 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script>
        const data = [
            ["8BP5", "52SA", "G0ST", "6XTT", "7Y79", "0JK0", "FT37", "965B", "Z7C4", "FZY3"],
            ["6ZP8", "6446", "5L1O", "4D9A", "7T7X", "8IWL", "5841", "56OW", "4AX8", "3WY0"],
            ["3EAM", "09R0", "KAY6", "2Z3O", "7004", "012J", "1M67", "2G6X", "006K", "437Y"],
            ["523G", "8MR3", "JW99", "6X6C", "4HZZ", "UMP9", "5UCF", "6S82", "5IM7", "7FX2"],
            ["V0SR", "2TF5", "4958", "CYB6", "2484", "73T1", "88K2", "4Q1F", "4L73", "93HV"],
            ["0P3T", "3X80", "3577", "5JVK", "3W31", "20ZK", "1MD1", "3QB2", "5T5U", "6PHO"],
            ["3O4X", "6N8N", "46UC", "5K27", "0F5V", "74GE", "15UT", "680W", "CMK9", "6WMJ"],
            ["3D40", "K329", "1J7R", "V5Z9", "8LO4", "5U9H", "975Z", "8S8C", "J27H", "8868"],
            ["2E3D", "S5Y5", "7Q12", "0CU2", "Y9DD", "E4DR", "6XXS", "6FVU", "547C", "5TVT"],
            ["6D44", "742X", "D86Q", "S912", "7B2Z", "OEX9", "BB35", "7Y11", "274A", "836C"],
            ["8567", "PT68", "5RN4", "WIQ2", "0KAY", "0PQ8", "6AG0", "M7S4", "2ROV", "6RO0"],
            ["391M", "M4NF", "ZUY2", "67W9", "70CW", "6530", "7F4Q", "5PA5", "693M", "6W2F"],
            ["57T1", "14V2", "0JW4", "8TH7", "WAX1", "6SH6", "7XGD", "250K", "78EU", "4YKZ"],
            ["86V2", "1X2X", "8NWD", "478A", "823O", "L509", "5BI0", "2267", "TL08", "42J0"],
            ["4EUE", "4355", "TGZ2", "4Y7Z", "4769", "5NCR", "8A0V", "A9E1", "212K", "1366"],
            ["1RM6", "6X6O", "1PCO", "7OXG", "X8IZ", "UHW4", "G61J", "01OA", "083J", "2WP1"],
            ["9JZ8", "4768", "2KRB", "5QNO", "Y2GA", "7A4T", "GBZ2", "XKU3", "U291", "65HQ"],
            ["89DE", "J9FZ", "3ZJA", "9MLG", "C7FG", "1ZWL", "81J5", "34LZ", "W73I", "SZG1"],
            ["130Q", "886C", "75ZC", "8IK5", "2C91", "P84G", "7055", "30C2", "FR8H", "8A9S"],
            ["54JH", "0168", "128J", "11JZ", "22HW", "16UD", "2143", "43CU", "7N47", "7S74"],
            ["3G15", "0Z4Z", "6K8I", "Y50L", "961B", "1576", "0L60", "IZ47", "9K77", "049I"],
            ["51P0", "37V1", "HR71", "5J46", "V1VP", "5340", "1ZHJ", "1KRZ", "VF8H", "241X"],
            ["7QU3", "73ND", "4998", "74FU", "E308", "8V94", "6UMZ", "YBZ6", "2Y99", "103Q"],
            ["0K4U", "8EN8", "89N2", "0TZ5", "6648", "923B", "8613", "8F28", "1KV4", "1OD3"],
            ["6ZG0", "0978", "41C5", "8065", "1D21", "23JJ", "57N2", "130U", "30ZB", "P57Y"],
            ["II6C", "9139", "51YS", "F65N", "0346", "9SC5", "25BI", "I38I", "632R", "8NWB"],
            ["924U", "22S8", "44HK", "608D", "7353", "24J3", "CW49", "15QF", "JV7M", "2B7G"],
            ["9988", "UJ98", "44B7", "ZK58", "0C7A", "8Y69", "9MPW", "500G", "634Y", "DY5O"],
            ["B2J7", "55WZ", "GD9L", "7PT6", "H89I", "7J15", "3516", "YBL4", "664P", "9D50"],
            ["L149", "629Q", "0ZQD", "8SV1", "N14K", "243X", "956O", "12O0", "7MZN", "1054"],
        ];
        const lastColumn = [
            "I",
            "S",
            "M",
            "3 + K",
            "F + 5",
            "K",
            "T",
            "7 + E",
            "E",
            "S",
            "T",
            "M",
            "B",
            "M + 2",
            "E",
            "R",
            "T + R",
            "B + 2",
            "4 + M",
            "F",
            "K",
            "8 - S",
            "K - F",
            "B",
            "S",
            "F",
            "T",
            "F + 7",
            "2 + B",
            "B - T",
        ];
        document.addEventListener("DOMContentLoaded", () => {
            const table = document.getElementById("error-codes");
            for (let i = 0; i < data.length; i++) {
                const row = data[i];
                const tr = table.appendChild(document.createElement("tr"));
                for (const error of row) {
                    const td = tr.appendChild(document.createElement("td"));
                    td.innerText = error;
                }
                const lastTd = tr.appendChild(document.createElement("td"));
                lastTd.innerText = lastColumn[i];
            }
        });
    </script>
    <style>
        code {
            background-color: black;
            font-family: 'Consolas';
            padding: 2px 8px;
            color: lightgreen;
            font-weight: bold;
        }

        li {
            margin-top: 4px;
            margin-bottom: 4px;
        }

        .mono {
            font-family: 'Consolas';
        }

        p {
            font-size: 15px;
        }
    </style>
</head>

<body>
    <div class="section">
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">
                    Keep Talking and Nobody Explodes Mod
                </span>
                <span class="page-header-section-title">システム管理者</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Sysadmin.svg" class="diagram">
                <h2>モジュール詳細：システム管理者</h2>
                <p class="flavour-text">sudo rm -rf /*</p>

                <p>このモジュールはコンソールである。コマンドの入力を待機している時は、緑色の<code>&nbsp;> _</code>を表示する。</p>

                <p>このコンソールはバス型トポロジーネットワークに接続されている。ネットワークには100個のノードが含まれている。各ノードは繰り返さずに0から99の番号が割り当てられている。すべてのノードはIDによって分類される。これらのノードのうち最大10個はサーバーであり、残りはデータストレージである。各ストレージのサイズは1TBである。また、ノードに攻撃を加えるウイルスがネットワーク上に存在している。処理担当者はこれを修正することができるが、なるべく早く行わなければいけない。放置している時間が長くなるほど、より多くのノードが攻撃されてしまう。</p>

                <p>
                    ノードが破損した場合、3ページの表にあるエラーコードを探す。
                    その後、同じ段の最後の列にある値を計算する(このページの表を使用)。
                    この値が9より大きいまたは0より小さい場合、値が0から9の範囲に収まるまで繰り返し10を足し引きする。
                    エラーコードと同じ列で、求めた値を含むすべてのコードを探す。
                    回復コードはエラーコードの次の段から下に進み、見つけたコード群の最初の文字からなる文字列に等しい。
                    このアクションは垂直にループするため、最後の段を通過した後は先頭に戻る。
                    モジュールは回復コードが有効かどうかについて、エラーコード受信時ではなく、回復コード送信時にチェックする。
                </p>

                <p>
                 モジュールの解除方法、ミスが記録される条件については、2ページを参照すること。
                 2ページにはコンソールに入力可能なコマンドの説明とリストが含まれている。
                </p>

                <p>すべてのコマンド(コードを含む)は、大文字と小文字を区別しない。</p>

                <table style="margin: auto;">
                    <tr>
                        <td class="mono">T</td>
                        <td>開始分数</td>
                    </tr>
                    <tr>
                        <td class="mono">F</td>
                        <td>回復済みノードの個数</td>
                    </tr>
                    <tr>
                        <td class="mono">B</td>
                        <td>バッテリーの個数</td>
                    </tr>
                    <tr>
                        <td class="mono">I</td>
                        <td>インジケーターの個数</td>
                    </tr>
                    <tr>
                        <td class="mono">K</td>
                        <td>2ファクタの最下位桁。<br>
                            2ファクタが存在しない場合は、解除済みモジュールの個数</td>
                    </tr>
                    <tr>
                        <td class="mono">R</td>
                        <td>残り分数</td>
                    </tr>
                    <tr>
                        <td class="mono">M</td>
                        <td>モジュールの個数</td>
                    </tr>
                    <tr>
                        <td class="mono">S</td>
                        <td>シリアルナンバー内の最小の数</td>
                    </tr>
                    <tr>
                        <td class="mono">E</td>
                        <td>ミスの回数</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>
        <div class="page page-bg-07">
            <div class="page-header">
                <span class="page-header-doc-title">
                    Keep Talking and Nobody Explodes Mod
                </span>
                <span class="page-header-section-title">システム管理者</span>
            </div>
            <div class="page-content">

                <h2>コマンド一覧</h2>
                <ul>
                    <li><code>serverlist</code> - 全サーバーに関する情報を表示する。各サーバーについて、ノードのIDと作業に必要なストレージのサイズに関する情報を表示する。このサーバーにストレージノードが既に割り当てられている場合は、割り当てられたノードの範囲も表示される。</li>
                    <li><code>status</code> - ネットワークの現在の状態に関する一般的な情報が表示される。ここでは、ストレージノードが既に割り当てられたサーバーの数とモジュール解除に必要なストレージノードの割り当て数(Allocated servers)、破損ノード(Damaged nodes)と回復済みノード(recovered)の数を確認することができる。</li>
                    <li><code>allocate {NODE_ID} {DIRECTION}</code> - 指定されたノードID(NODE_ID)を持つサーバーに対して、指定された方向(DIRECTION)に必要な数のノードを割り当てる。方向は一つを使用しなければならず、IDを減少させるには<code>left</code>または<code>down</code> 、IDを増加させるには<code>right</code>または<code>up</code>でなければならない。コマンドが正しく実行されるように、以下の条件に従わなければならない。
                        <ul>
                            <li>選択されたノードは、サーバーでなければならない。</li>
                            <li>* 割り当てるノードは、データストレージ(サーバーではない)でなければならない。</li>
                            <li>0より小さいまたは99より大きいIDのノードを割り当てようとしてはならない。</li>
                            <li>サーバーノード、割り当てるノードはいずれも破損していてはならない。</li>
                            <li>* 割り当てるノードは、他のサーバーに割り当てられていてならない。</li>
                        </ul>
                        アスタリスク(*)付きの条件が一致しない場合、すべての割り当ては元の状態に戻り、ミスが記録される。</li>
                    <li><code>debug {NODE_ID}</code> - ノードID(NODE_ID)に従うノードの状態を確認する。それが破損している場合、エラーコードが最終的に表示される。</li>
                    <li><code>recover {NODE_ID} {FIX_CODE}</code> - 回復コード(FIX_CODE)を使用して、ノードID(NODE_ID)に従うノードのデータ回復を試みる。FIX_CODEが正しければ、そのノードは回復する。FIX_CODEが間違っていたりこのノードが破損していない場合、すべての割り当ては元の状態に戻り、ミスが記録される。</li>
                    <li><code>commit</code> - すべての変更を適用する。必要な数の割り当てに到達した場合、モジュールは解除される。そうでない場合、すべての割り当ては元の状態に戻り、ミスが記録される。</li>
                    <li><code>revert</code> - すべての割り当てを元の状態に戻し、ミスを記録する。</li>
                    <li><code>clear</code> - コンソール上の内容を消去する。</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">
                    Keep Talking and Nobody Explodes Mod
                </span>
                <span class="page-header-section-title">システム管理者</span>
            </div>
            <div class="page-content">
                <table style="margin: auto;" class="mono">
                    <tbody id="error-codes" style="text-align: center;"></tbody>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>

</html>