<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Forget Enigma — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        input {
            width: 16px;
            text-align: center;
        }
        figure { text-align: center;}
        figcaption { margin-top: 0.5em;}
        .interactive
        {
            border-collapse: separate;
            font-size: 72%;
        }
        .dark table, table { border: none; }
        button {
            font-family: Special Elite;
            background-color: white;
            color: black;
            padding: 1px 3px;
            border-radius: 5px;
            border: black 2px solid;
            transition: 0.3s;
        }

        button:hover {
            background-color: black;
            color: white;
        }
        .reflector { font-size: 14px; }
        .spacer { height: 20px; }
        .label {
            font-size: 40px;
            line-height: 1;
            text-align: center;
            padding: 0.2em 0.6em 0
        }
        .dark img:not(.diagram) { filter: invert(87%) hue-rotate(180deg); }
    </style>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script>
        const rotors = ["EKMFLGDQVZNTOWYHXUSPAIBRCJ",
                        "AJDKSIRUXBLHWTMCQGZNPYFVOE",
                        "BDFHJLCPRTXVZNYEIWGAKMUSQO",
                        "ESOVPZJAYQUIRHXLNFTGKDCMWB",
                        "VZBRGITYUPSDNHLXAWMJQOFECK",
                        "JPGVOUMFYQBENHZRDKASXLICTW",
                        "NZJHGRCXMYSWBOUFAIVLPEKQDT",
                        "FKQHTLXOCBJSPDZRAMEWNIUYGV",]
        const reflectorsNormal = ["LUSNPQOMJIYAHDGEFXCVBTZRKW","XQUMFEPOWLTJDZHGBVYKCRIASN","ESKOAQMJYHCPGTDLFUBNRXZVIW"];
        const baseString = "ABCDEFGHIJKLMNOPQRSTUVWXYZ";
        var rotorIDxMarkLists = [
            [3,16],
            [4,17],
            [8,21],
            [9,22],
            [12,25],
            [11,24],
            [7,20],
            [2,15]];
        var rotorTopIdx = 0;
        var rotorMiddleIdx = 0;
        var rotorBottomIdx = 0;
        var reflectorIdx = 0;
        var rotorShiftsAll = [0, 0];

        function ChangeTopRotor()
        {
            var topRotorSet = document.getElementById("tRotorVal");
            rotorTopIdx = topRotorSet.value;
            rotorShiftsAll[0] = 0;
            UpdateInteractive();
        }
        function ChangeMiddleRotor()
        {
            var midRotorSet = document.getElementById("mRotorVal");
            rotorMiddleIdx = midRotorSet.value;
            rotorShiftsAll[1] = 0;
            UpdateInteractive();
        }
        function ChangeReflector()
        {
            var reflectorSet = document.getElementById("reflectorVal");
            reflectorIdx = reflectorSet.value;
            UpdateInteractive();
        }
        function ShiftTopRotor(delta)
        {
            if (delta == 1 && (rotorShiftsAll[0] == rotorIDxMarkLists[rotorTopIdx][0] || rotorShiftsAll[0] == rotorIDxMarkLists[rotorTopIdx][1]))
                {
                    rotorShiftsAll[0] = (rotorShiftsAll[0] + 1) % 26;
                    ShiftMiddleRotor(1);
                }
            else {rotorShiftsAll[0] = (rotorShiftsAll[0] + delta) % 26;};
            document.getElementById("toptext").value = baseString[rotorShiftsAll[0]];
            UpdateInteractive();
        }
        function ShiftMiddleRotor(delta)
        {
            rotorShiftsAll[1] = (rotorShiftsAll[1] + delta) % 26;
            document.getElementById("bottomtext").value = baseString[rotorShiftsAll[1]];
            UpdateInteractive();
        }
        function UpdateInteractive()
        {
            var topRotorTHalf = document.getElementsByClassName("toprotorT");
            var topRotorBHalf = document.getElementsByClassName("toprotorB");
            for (var x = 0; x < topRotorTHalf.length; x++)
                {
                    topRotorTHalf[x].textContent = rotors[rotorTopIdx].charAt((x + rotorShiftsAll[0]) % 26);
                    topRotorBHalf[x].textContent = baseString.charAt((x + rotorShiftsAll[0]) % 26);
                    var success = false;
                    var usedIdxList = rotorIDxMarkLists[rotorTopIdx];
                    //console.log(usedIdxList);
                    for (var y in usedIdxList)
                        if (usedIdxList[y] == (x + rotorShiftsAll[0]) % 26)
                            success = true;
                    if (success)
                        {
                            topRotorBHalf[x].style.backgroundColor = "rgba(170,170,170,0.5)";
                        }
                    else
                        {
                            topRotorBHalf[x].style.backgroundColor = "";
                        }
                }

            var midRotorTHalf = document.getElementsByClassName("midrotorT");
            var midRotorBHalf = document.getElementsByClassName("midrotorB");
            for (var x = 0; x < midRotorTHalf.length; x++)
                {
                    midRotorTHalf[x].textContent = rotors[rotorMiddleIdx].charAt((x + rotorShiftsAll[1]) % 26);
                    midRotorBHalf[x].textContent = baseString.charAt((x + rotorShiftsAll[1]) % 26);
                    var success = false;
                    var usedIdxList = rotorIDxMarkLists[rotorMiddleIdx];
                    //console.log(usedIdxList);
                    for (var y in usedIdxList)
                        if (usedIdxList[y] == (x + rotorShiftsAll[1]) % 26)
                            success = true;
                    if (success)
                        {
                            midRotorBHalf[x].style.backgroundColor = "rgba(170,170,170,0.5)";
                        }
                    else
                        {
                            midRotorBHalf[x].style.backgroundColor = "";
                        }
                }
            var reflectorTHalf = document.getElementsByClassName("reflectorT");
            var reflectorBHalf = document.getElementsByClassName("reflectorB");
            for (var x = 0; x < reflectorTHalf.length; x++)
                {
                    reflectorBHalf[x].textContent = reflectorsNormal[reflectorIdx].charAt(x);
                    reflectorTHalf[x].textContent = baseString.charAt(x);
                }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Forget Enigma</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Forget Enigma.svg" class="diagram">
                <h2>On the Subject of Forget Enigma</h2>
                <p class="flavour-text">“My mind is like an enigma.” - the bomb</p>
                <p>On the module, you will see a configuration of the rotors/reflector, the rotors set up below that, and a keyboard that lights up a single letter.</p>
                <p>Every time a <a href="../More/Ignore Table.html#mod=forgetEnigma">non-ignored module</a> is solved, the stage number goes up by 1, the rotors turn, and a new letter will light up.</p>
                <p>To disarm this module, you have to decrypt the letter using the mechanics below.</p>
                <h3>Step 1: Configuration of the Rotors/Reflector</h3>
                <p>The screen at top shows what type of rotors are used, the order they are in, and which reflector is used. Use the correct rotor charts and correct reflector chart to use to create an Enigma Decryptor.</p>
                <p><em>They are read in this order:</em> Reflector-Bottom Rotor-Top Rotor. Above the top rotor, you will type A–Z to use as the keyboard.</p>
                <p>Use the schematic below to help you create the Enigma Decryptor.</p>
                <p>The rotors below the screen shows what letter each one is at. Shift the letters until the bottom left letter is equal to the letter on the rotor.</p>

                <table class="interactive" style="border: none">
                    <caption>Configuration:
                        <select id="reflectorVal" onchange="ChangeReflector()">
                            <option value="0">Reflector A</option>
                            <option value="1">Reflector B</option>
                            <option value="2">Reflector C</option>
                        </select> - 
                        <select id="mRotorVal" onchange="ChangeMiddleRotor()">
                            <option value="0">Rotor I</option>
                            <option value="1">Rotor II</option>
                            <option value="2">Rotor III</option>
                            <option value="3">Rotor IV</option>
                            <option value="4">Rotor V</option>
                            <option value="5">Rotor VI</option>
                            <option value="6">Rotor VII</option>
                            <option value="7">Rotor VIII</option>
                        </select> - 
                        <select id="tRotorVal" onchange="ChangeTopRotor()">
                            <option value="0">Rotor I</option>
                            <option value="1">Rotor II</option>
                            <option value="2">Rotor III</option>
                            <option value="3">Rotor IV</option>
                            <option value="4">Rotor V</option>
                            <option value="5">Rotor VI</option>
                            <option value="6">Rotor VII</option>
                            <option value="7">Rotor VIII</option>
                        </select>
                                     
                        <input style="margin-left: 20px;" maxlength="1" id="bottomtext" value="A" disabled> <input maxlength="1" id="toptext" value="A" disabled>
                    </caption>
                    <tr>
                        <td class="empty" rowspan="2"></td><td>A</td><td>B</td><td>C</td><td>D</td><td>E</td><td>F</td><td>G</td><td>H</td><td>I</td><td>J</td><td>K</td><td>L</td><td>M</td>
                        <td>N</td><td>O</td><td>P</td><td>Q</td><td>R</td><td>S</td><td>T</td><td>U</td><td>V</td><td>W</td><td>X</td><td>Y</td><td>Z</td><td class="empty" rowspan="2"></td>
                    </tr>
                    <tr>
                        <td colspan="26" class="corner"></td>
                    </tr>
                    <tr>
                        <td class="empty" rowspan="2"><button onclick="ShiftTopRotor(1)">&larr;</button></td>
                        <td class="toprotorT">E</td>
                        <td class="toprotorT">K</td>
                        <td class="toprotorT">M</td>
                        <td class="toprotorT">F</td>
                        <td class="toprotorT">L</td>
                        <td class="toprotorT">G</td>
                        <td class="toprotorT">D</td>
                        <td class="toprotorT">Q</td>
                        <td class="toprotorT">V</td>
                        <td class="toprotorT">Z</td>
                        <td class="toprotorT">N</td>
                        <td class="toprotorT">T</td>
                        <td class="toprotorT">O</td>
                        <td class="toprotorT">W</td>
                        <td class="toprotorT">Y</td>
                        <td class="toprotorT">H</td>
                        <td class="toprotorT">X</td>
                        <td class="toprotorT">U</td>
                        <td class="toprotorT">S</td>
                        <td class="toprotorT">P</td>
                        <td class="toprotorT">A</td>
                        <td class="toprotorT">I</td>
                        <td class="toprotorT">B</td>
                        <td class="toprotorT">R</td>
                        <td class="toprotorT">C</td>
                        <td class="toprotorT">J</td>
                        <td class="empty" rowspan="2"><button onclick="ShiftTopRotor(25)">&rarr;</button></td>
                    </tr>
                    <tr>
                        <td class="toprotorB">A</td>
                        <td class="toprotorB">B</td>
                        <td class="toprotorB">C</td>
                        <td class="toprotorB" style="background-color: rgba(170,170,170,0.5)">D</td>
                        <td class="toprotorB">E</td>
                        <td class="toprotorB">F</td>
                        <td class="toprotorB">G</td>
                        <td class="toprotorB">H</td>
                        <td class="toprotorB">I</td>
                        <td class="toprotorB">J</td>
                        <td class="toprotorB">K</td>
                        <td class="toprotorB">L</td>
                        <td class="toprotorB">M</td>
                        <td class="toprotorB">N</td>
                        <td class="toprotorB">O</td>
                        <td class="toprotorB">P</td>
                        <td class="toprotorB" style="background-color: rgba(170,170,170,0.5)">Q</td>
                        <td class="toprotorB">R</td>
                        <td class="toprotorB">S</td>
                        <td class="toprotorB">T</td>
                        <td class="toprotorB">U</td>
                        <td class="toprotorB">V</td>
                        <td class="toprotorB">W</td>
                        <td class="toprotorB">X</td>
                        <td class="toprotorB">Y</td>
                        <td class="toprotorB">Z</td>
                    </tr>
                    <tr>
                        <td class="empty"></td>
                        <td colspan="26" class="corner"></td>
                        <td class="empty"></td>
                    </tr>
                    <tr>
                        <td class="empty" rowspan="2"><button onclick="ShiftMiddleRotor(1)">&larr;</button></td>
                        <td class="midrotorT">E</td>
                        <td class="midrotorT">K</td>
                        <td class="midrotorT">M</td>
                        <td class="midrotorT">F</td>
                        <td class="midrotorT">L</td>
                        <td class="midrotorT">G</td>
                        <td class="midrotorT">D</td>
                        <td class="midrotorT">Q</td>
                        <td class="midrotorT">V</td>
                        <td class="midrotorT">Z</td>
                        <td class="midrotorT">N</td>
                        <td class="midrotorT">T</td>
                        <td class="midrotorT">O</td>
                        <td class="midrotorT">W</td>
                        <td class="midrotorT">Y</td>
                        <td class="midrotorT">H</td>
                        <td class="midrotorT">X</td>
                        <td class="midrotorT">U</td>
                        <td class="midrotorT">S</td>
                        <td class="midrotorT">P</td>
                        <td class="midrotorT">A</td>
                        <td class="midrotorT">I</td>
                        <td class="midrotorT">B</td>
                        <td class="midrotorT">R</td>
                        <td class="midrotorT">C</td>
                        <td class="midrotorT">J</td>
                        <td class="empty" rowspan="2"><button onclick="ShiftMiddleRotor(25)">&rarr;</button></td>
                    </tr>
                    <tr>
                        <td class="midrotorB">A</td>
                        <td class="midrotorB">B</td>
                        <td class="midrotorB">C</td>
                        <td class="midrotorB" style="background-color: rgba(170,170,170,0.5)">D</td>
                        <td class="midrotorB">E</td>
                        <td class="midrotorB">F</td>
                        <td class="midrotorB">G</td>
                        <td class="midrotorB">H</td>
                        <td class="midrotorB">I</td>
                        <td class="midrotorB">J</td>
                        <td class="midrotorB">K</td>
                        <td class="midrotorB">L</td>
                        <td class="midrotorB">M</td>
                        <td class="midrotorB">N</td>
                        <td class="midrotorB">O</td>
                        <td class="midrotorB">P</td>
                        <td class="midrotorB" style="background-color: rgba(170,170,170,0.5)">Q</td>
                        <td class="midrotorB">R</td>
                        <td class="midrotorB">S</td>
                        <td class="midrotorB">T</td>
                        <td class="midrotorB">U</td>
                        <td class="midrotorB">V</td>
                        <td class="midrotorB">W</td>
                        <td class="midrotorB">X</td>
                        <td class="midrotorB">Y</td>
                        <td class="midrotorB">Z</td>
                    </tr>
                    <tr>
                        <td class="empty" rowspan="3"></td>
                        <td colspan="26" class="corner"></td>
                        <td class="empty" rowspan="3"></td>
                    </tr>
                    <tr>
                        <td class="reflectorT">A</td>
                        <td class="reflectorT">B</td>
                        <td class="reflectorT">C</td>
                        <td class="reflectorT">D</td>
                        <td class="reflectorT">E</td>
                        <td class="reflectorT">F</td>
                        <td class="reflectorT">G</td>
                        <td class="reflectorT">H</td>
                        <td class="reflectorT">I</td>
                        <td class="reflectorT">J</td>
                        <td class="reflectorT">K</td>
                        <td class="reflectorT">L</td>
                        <td class="reflectorT">M</td>
                        <td class="reflectorT">N</td>
                        <td class="reflectorT">O</td>
                        <td class="reflectorT">P</td>
                        <td class="reflectorT">Q</td>
                        <td class="reflectorT">R</td>
                        <td class="reflectorT">S</td>
                        <td class="reflectorT">T</td>
                        <td class="reflectorT">U</td>
                        <td class="reflectorT">V</td>
                        <td class="reflectorT">W</td>
                        <td class="reflectorT">X</td>
                        <td class="reflectorT">Y</td>
                        <td class="reflectorT">Z</td>
                    </tr>
                    <tr>
                        <td class="reflectorB">L</td>
                        <td class="reflectorB">U</td>
                        <td class="reflectorB">S</td>
                        <td class="reflectorB">N</td>
                        <td class="reflectorB">P</td>
                        <td class="reflectorB">Q</td>
                        <td class="reflectorB">O</td>
                        <td class="reflectorB">M</td>
                        <td class="reflectorB">J</td>
                        <td class="reflectorB">I</td>
                        <td class="reflectorB">Y</td>
                        <td class="reflectorB">A</td>
                        <td class="reflectorB">H</td>
                        <td class="reflectorB">D</td>
                        <td class="reflectorB">G</td>
                        <td class="reflectorB">E</td>
                        <td class="reflectorB">F</td>
                        <td class="reflectorB">X</td>
                        <td class="reflectorB">C</td>
                        <td class="reflectorB">V</td>
                        <td class="reflectorB">B</td>
                        <td class="reflectorB">T</td>
                        <td class="reflectorB">Z</td>
                        <td class="reflectorB">R</td>
                        <td class="reflectorB">K</td>
                        <td class="reflectorB">W</td>
                    </tr>
                </table>
                <p>Note: Unlike the old interactive, the bottom rotor will now automatically rotate upon the top rotor hitting a marking.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Forget Enigma</span>
            </div>
            <div class="page-content">
                <h3>Step 2: Using the Enigma Decryptor</h3>
                <ol>
                    <li>Take the lit letter and find it on the keyboard row of the decryptor.</li>
                    <li>Go straight down to the top row of the top rotor to receive a new letter.</li>
                    <li>Find the new letter in the bottom row of the top rotor.</li>
                    <li>Go straight down to the top row of the bottom rotor to receive a new letter.</li>
                    <li>Find the new letter in the bottom row of the bottom rotor.</li>
                    <li>Go straight down to the top row of the reflector to receive a new letter.</li>
                    <li>Find the new letter in the bottom row of the reflector.</li>
                    <li>Go straight up to the bottom row of the bottom rotor to receive a new letter.</li>
                    <li>Find the new letter in the top row of the bottom rotor.</li>
                    <li>Go straight up to the bottom row of the top rotor to receive a new letter.</li>
                    <li>Find the new letter in the top row of the top rotor.</li>
                    <li>Go straight up to the keyboard row to receive your decrypted letter.</li>
                </ol>
                <figure>
                    <img src="img/Forget Enigma/DecryptSteps.png" style="width: 16cm">
                    <figcaption>The example above uses I as the lit letter which gets decrypted to W.</figcaption>
                </figure>
                <h3>Step 3: Rotor Turning Mechanics</h3>
                <p>On each solve, the rotors will turn. This next section talks about how the rotor turning mechanics work.</p>
                <p>You will notice a couple letters on the bottom row of the rotors have a darker color. This will affect the turning of the rotors:</p>
                <ul>
                    <li>If the marking is at the leftmost edge of the top rotor, on the next solve, both the top and bottom rotor will turn.</li>
                    <li>Otherwise, on the next solve, only the top rotor will turn</li>
                    <li>Each turn only goes up 1 step on the rotor (Ex: A -> B, G -> H, Z -> A, etc.). Simply press the left arrow of the top rotor after every stage.</li>
                    <li>Markings on the bottom rotor can be ignored.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>
