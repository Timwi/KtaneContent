<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>3D Tunnels — Keep Talking and Nobody Explodes Module</title>
    <meta name="viewport" content="initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        @font-face {
            font-family: 'TM';
            font-style: normal;
            font-weight: normal;
            src: local('Tunnel-maze'), url(font/Tunnel-maze.ttf);
        }

        #tunnels {
            width: 13cm;
            height: 11cm;
            position: relative;
            perspective: 75cm;
            perspective-origin: 200% -150%;
            margin-top: 2.75cm;
            margin-left: .5cm;
        }

            #tunnels > * {
                position: absolute;
                top: 0;
                left: 0;
                transform-origin: 0 0 0;
                transform-style: preserve-3d;
                perspective: 75cm;
            }

            #tunnels > .symbol {
                font-family: TM;
                font-size: 25pt;
                background: white;
                border-radius: 40%;
                width: 1cm;
                height: 1cm;
            }

                #tunnels > .symbol > span {
                    position: absolute;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                }

            #tunnels > .tunnel {
                width: 5cm;
                height: .1cm;
                background: #ccc;
                border-radius: .05cm;
            }

            #tunnels > #man {
                width: 2cm;
                height: 2cm;
            }
                #tunnels > #man > .pic {
                    position: absolute;
                    width: 2cm;
                    height: 2cm;
                    background: url('img/3D Tunnels/stickman.png');
                    background-size: 4cm 2cm;
                    background-repeat: no-repeat;
                    background-color: rgba(255, 255, 255, .5);
                    border-radius: 40%;
                    transform-style: preserve-3d;
                    backface-visibility: hidden;
                }
                #tunnels > #man > #pic-front {
                    background-position: 0 0;
                }
                #tunnels > #man > #pic-back {
                    background-position: -2cm 0;
                    transform: rotate3d(0, 1, 0, 180deg);
                }

        #controls {
            float: right;
            clear: right;
            width: 4.2cm;
        }

            #controls #moveNY {
                margin-left: 1cm;
            }

            #controls #moveNX {
                margin-left: .5cm;
            }

            #controls button {
                width: 1.5cm;
                height: 1.5cm;
                font-size: 21pt;
            }

        #interactive {
            position: relative;
            min-width: 17.5cm;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">3D Tunnels</span>
            </div>
            <div class="page-content">
                <img src="img/Component/3D Tunnels.svg" class="diagram">
                <h2>On the Subject of 3D Tunnels</h2>
                <p class="flavour-text">Let’s take this to another dimension.</p>
                <div id="interactive">
                    <div id="controls">
                        <div>Move:</div>
                        <div><button id="moveNY">▲</button><button id="moveZ">↗</button></div>
                        <div><button id="moveNX">◀</button><button id="moveX">▶</button></div>
                        <div><button id="moveNZ">↙</button><button id="moveY">▼</button></div>
                        <div>Rotate:</div>
                        <div>X <button id="xCw">⟳</button><button id="xCcw">⟲</button></div>
                        <div>Y <button id="yCw">⟳</button><button id="yCcw">⟲</button></div>
                        <div>Z <button id="zCw">⟳</button><button id="zCcw">⟲</button></div>
                    </div>
                    <div id='tunnels'>
                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>

                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  0cm, -10cm)'><span>s</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  0cm, -10cm)'><span>t</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  0cm, -10cm)'><span>u</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  5cm, -10cm)'><span>v</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  5cm, -10cm)'><span>w</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  5cm, -10cm)'><span>x</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm, 10cm, -10cm)'><span>y</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm, 10cm, -10cm)'><span>z</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm, 10cm, -10cm)'><span>.</span></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm, 10cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>

                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  0cm,  -5cm)'><span>j</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  0cm,  -5cm)'><span>k</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  0cm,  -5cm)'><span>l</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  5cm,  -5cm)'><span>m</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  5cm,  -5cm)'><span>n</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  5cm,  -5cm)'><span>o</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm, 10cm,  -5cm)'><span>p</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm, 10cm,  -5cm)'><span>q</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm, 10cm,  -5cm)'><span>r</span></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm,   0cm)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm, 10cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>

                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  0cm,  -0cm)'><span>a</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  0cm,  -0cm)'><span>b</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  0cm,  -0cm)'><span>c</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  5cm,  -0cm)'><span>d</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  5cm,  -0cm)'><span>e</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  5cm,  -0cm)'><span>f</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm, 10cm,  -0cm)'><span>g</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm, 10cm,  -0cm)'><span>h</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm, 10cm,  -0cm)'><span>i</span></div>

                        <div id='man' style='transform: translate3d(-1cm, -1cm, 0)'>
                            <div class='pic' id='pic-front'></div>
                            <div class='pic' id='pic-back'></div>
                        </div>
                    </div>
                </div>
                <p>You control a hovercraft inside a grid of nodes connected by tunnels. Nodes are identified by a unique symbol. Use the four arrow buttons to travel through the grid. There’s also a button with a symbol on it, representing your next goal node. Travel there and press the goal button. Repeat this three times to solve the module.</p>
                <ul>
                    <li>
                        Only a few nodes will show the symbol of that node. Locate some symbols to determine your current location and orientation.
                    </li>
                    <li>
                        The arrow buttons <i>rotate</i> the hovercraft in that direction. The thrust button is broken and has been removed. (But no worries! I’ve fixed it!) <b>After every rotate</b> command, the hovercraft will go <b>one node forward</b>.
                    </li>
                    <li>
                        If you fly into a wall, you’ll get a strike.
                    </li>
                    <li>
                        If you press the goal button while not at the goal node, you’ll get a strike.
                    </li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
    <script>
        var man = document.getElementById('man');
        var rotations = '';
        var x = 0, y = 0, z = 0;

        function update()
        {
            man.style.transform = `translate3d(${5 * x}cm, ${5 * y}cm, -${5 * z}cm)${rotations} translate3d(-1cm, -1cm, 0)`;
        }
        document.getElementById('moveX').onclick = function() { if (x < 2) x++; update(); return false; };
        document.getElementById('moveNX').onclick = function() { if (x > 0) x--; update(); return false; };
        document.getElementById('moveY').onclick = function() { if (y < 2) y++; update(); return false; };
        document.getElementById('moveNY').onclick = function() { if (y > 0) y--; update(); return false; };
        document.getElementById('moveZ').onclick = function() { if (z < 2) z++; update(); return false; };
        document.getElementById('moveNZ').onclick = function() { if (z > 0) z--; update(); return false; };

        document.getElementById('xCw').onclick = function() { rotations = ` rotate3d(1, 0, 0, -90deg)${rotations}`; update(); return false; }
        document.getElementById('xCcw').onclick = function() { rotations = ` rotate3d(1, 0, 0, 90deg)${rotations}`; update(); return false; }
        document.getElementById('yCw').onclick = function() { rotations = ` rotate3d(0, 1, 0, -90deg)${rotations}`; update(); return false; }
        document.getElementById('yCcw').onclick = function() { rotations = ` rotate3d(0, 1, 0, 90deg)${rotations}`; update(); return false; }
        document.getElementById('zCw').onclick = function() { rotations = ` rotate3d(0, 0, 1, 90deg)${rotations}`; update(); return false; }
        document.getElementById('zCcw').onclick = function() { rotations = ` rotate3d(0, 0, 1, -90deg)${rotations}`; update(); return false; }
    </script>
</body>
</html>
