<html>
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
    <meta content="IE=edge" http-equiv="X-UA-Compatible">
    <title>The Ultracube — Keep Talking and Nobody Explodes Module</title>
    <meta content="initial-scale=1" name="viewport">
    <link rel='stylesheet' type='text/css' href='css/font.css'>
    <link rel='stylesheet' type='text/css' href='css/normalize.css'>
    <link rel='stylesheet' type='text/css' href='css/main.css'>
    <script src='js/ktane-utils.js'></script>
    <script src='js/ruleseed.js'></script>
    <style>
        p {
            margin: .5em 0;
        }
        table.ultracube-rotations {
            border: none;
            margin: 1em auto;
        }
            td.sep {
                border: none;
            }
    </style>
    <script>
        function setDefaultRules(rnd) { setRules(rnd); }
        function setRules(rnd)
        {
            let faceDimensions = [
				[ 'ping', 'pong' ],
                [ 'zig', 'zag' ],
                [ 'bottom', 'top' ],
                [ 'front', 'back' ],
                [ 'left', 'right' ]
            ];

            let faces = [];
            for (let i = 0; i < faceDimensions.length; i++)
                for (let j = i+1; j < faceDimensions.length; j++)
                {
                    let which = rnd.next(0, 2);
                    if (rnd.next(0, 2) === 0)
                    {
                        faces.push(`${faceDimensions[i][0]}-${faceDimensions[j][which]}`);
                        faces.push(`${faceDimensions[i][1]}-${faceDimensions[j][which]}`);
                    }
                    else
                    {
                        faces.push(`${faceDimensions[i][which]}-${faceDimensions[j][0]}`);
                        faces.push(`${faceDimensions[i][which]}-${faceDimensions[j][1]}`);
                    }
                }
            rnd.shuffleFisherYates(faces);
            let colorPermutations = rnd.shuffleFisherYates([ "RYGB", "RYBG", "RGYB", "RGBY", "RBYG", "RBGY", "YRGB", "YRBG", "YGRB", "YGBR", "YBRG", "YBGR", "GRYB", "GRBY", "GYRB", "GYBR", "GBRY", "GBYR", "BRYG", "BRGY", "BYRG", "BYGR", "BGRY", "BGYR"]);

            let faceTds = document.getElementsByClassName('face');
            let orderTds = document.getElementsByClassName('order');
            for (let i = 0; i < 12; i++)
            {
                faceTds[i].innerText = faces[i];
                orderTds[i].innerText = colorPermutations[i];
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Ultracube</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/The Ultracube.svg">
                <h2>On the Subject of The Ultracube</h2>

                <p class="flavour-text">Oh I know this one! Wait, it looks different... Why are there more lines now?</p>

                <p>Observe the sequence of five 5D rotations of the Ultracube. There is a brief pause when the sequence repeats.</p>
                <p>From the first four rotations, obtain four Ultracube faces as listed in the <em>Face</em> column in the below table.</p>
                <p>From the fifth rotation, obtain a sequence of colors as listed in the <em>Order</em> column in the below table.</p>

                <table class="ultracube-rotations">
                    <tr><th>Rot.</th><th>Face</th><th>Order</th><td class="sep" rowspan="20"></td><th>Rot.</th><th>Face</th><th>Order</th></tr>
					<tr><th>XY</th><td class="face">pong-zag-front</td><td class="order">RBYG</td><th>YX</th><td class="face">pong-zag-right</td><td class="order">YBRG</td></tr>
					<tr><th>XZ</th><td class="face">zag-top-left</td><td class="order">YBGR</td><th>ZX</th><td class="face">ping-zag-left</td><td class="order">RYBG</td></tr>
					<tr><th>XW</th><td class="face">top-front-right</td><td class="order">GRBY</td><th>WX</th><td class="face">pong-front-right</td><td class="order">BRYG</td></tr>
					<tr><th>XV</th><td class="face">ping-zag-back</td><td class="order">GBYR</td><th>VX</th><td class="face">ping-bottom-left</td><td class="order">BGRY</td></tr>

					<tr><th>YZ</th><td class="face">zig-front-right</td><td class="order">BGYR</td><th>ZY</th><td class="face">ping-zag-top</td><td class="order">GYRB</td></tr>
					<tr><th>YW</th><td class="face">zag-top-back</td><td class="order">RBGY</td><th>WY</th><td class="face">pong-zig-bottom</td><td class="order">YGRB</td></tr>
					<tr><th>YV</th><td class="face">pong-top-left</td><td class="order">BYRG</td><th>VY</th><td class="face">pong-zig-front</td><td class="order">GBRY</td></tr>

					<tr><th>ZW</th><td class="face">pong-top-right</td><td class="order">BRGY</td><th>WZ</th><td class="face">zag-top-front</td><td class="order">YGBR</td></tr>
					<tr><th>ZV</th><td class="face">ping-zig-left</td><td class="order">GYBR</td><th>VZ</th><td class="face">zig-front-left</td><td class="order">GRYB</td></tr>

					<tr><th>WV</th><td class="face">pong-zag-back</td><td class="order">YRGB</td><th>VW</th><td class="face">ping-bottom-back</td><td class="order">BYGR</td></tr>

				</table>
				<p>The rotations are identified by observing a vertex and checking where it came from and where it moves to. Those two movements will give you an axis pair.</p>
				<p>If you end up with a rotation pair like <code>-X+W</code> or <code>+V-Z</code> then you need to flip the letters and remove the minuses, resulting in <code>WX</code> and <code>ZV</code>. If there are two minuses then remove them both, so <code>-X-Z</code> would turn into <code>XZ</code>.</p>

                <svg style='width: 6.5cm; float: right' xmlns="http://www.w3.org/2000/svg" viewBox="-5 0 125 110">
					<defs>
						<marker id="b" orient="auto" overflow="visible">
						<path fill="#a0a0a0" fill-rule="evenodd" stroke="#a0a0a0" stroke-width="1.0664" d="M-10 0l-4 4L0 0l-14-4z"/></marker>
						<marker id="a" orient="auto" overflow="visible"><path fill="#a0a0a0" fill-rule="evenodd" stroke="#a0a0a0" stroke-width="1.0664" d="M10 0l4-4L0 0l14 4z"/></marker>
						<marker id="f" orient="auto" overflow="visible"><path fill="#a0a0a0" fill-rule="evenodd" stroke="#a0a0a0" stroke-width="1.0664" d="M-10 0l-4 4L0 0l-14-4z"/></marker>
						<marker id="e" orient="auto" overflow="visible"><path fill="#a0a0a0" fill-rule="evenodd" stroke="#a0a0a0" stroke-width="1.0664" d="M10 0l4-4L0 0l14 4z"/></marker>
						<marker id="d" orient="auto" overflow="visible"><path fill="#a0a0a0" fill-rule="evenodd" stroke="#a0a0a0" stroke-width="1.0664" d="M-10 0l-4 4L0 0l-14-4z"/></marker>
						<marker id="c" orient="auto" overflow="visible"><path fill="#a0a0a0" fill-rule="evenodd" stroke="#a0a0a0" stroke-width="1.0664" d="M10 0l4-4L0 0l14 4z"/></marker>
					</defs>
					<g transform="translate(0 -464.953)">
						<path fill="#d2d2d2" stroke="#000" stroke-linecap="round" stroke-width=".5" d="M20 478.953v80h80v-60a20 20 0 0 1-20-20z" style="marker:none"/>
						<path fill="none" stroke="#a0a0a0" marker-end="url(#b)" marker-start="url(#a)" d="M105 488.953l-77.5 77.5"/>
						<path fill="none" stroke="#000" stroke-linecap="round" d="M90 528.953H50M30 548.953l20-20M50 488.953l-20 20M90 528.953l-20 20"/>
						<circle cx="92.5" cy="486.453" r="7.5" fill="silver" fill-opacity=".667" stroke="#000" stroke-linecap="round" stroke-width=".5" style="marker:none"/>
						<path fill="none" stroke="#000" stroke-linecap="round" d="M50 488.953h40"/>
						<path fill="none" stroke="#a0a0a0" marker-end="url(#d)" marker-start="url(#c)" d="M110 533.953H10"/>
						<text x="17.5" y="523.953" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:end" text-anchor="end" word-spacing="0">
							<tspan x="17.5" y="523.953">−X</tspan>
							<tspan x="17.5" y="529.953">left</tspan>
						</text>
						<text x="102.5" y="523.953" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:start" word-spacing="0">
							<tspan x="102.5" y="523.953">+X</tspan>
							<tspan x="102.5" y="529.953">right</tspan>
						</text>
						<text x="37.5" y="536.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:center" text-anchor="middle" word-spacing="0">
							<tspan x="37.5" y="536.453">X</tspan>
						</text>
							<path fill="none" stroke="#a0a0a0" marker-end="url(#f)" marker-start="url(#e)" d="M60 468.953v100"/>
							<path fill="none" stroke="#000" stroke-linecap="round" d="M70 548.953H30"/>
						<text x="60" y="501.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:center" text-anchor="middle" word-spacing="0">
							<tspan x="60" y="501.453">Z</tspan>
						</text>
						<text x="62.5" y="471.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:start" word-spacing="0">
							<tspan x="62.5" y="471.453">+Z</tspan>
							<tspan x="62.5" y="477.453">back</tspan>
						</text>
						<text x="62.5" y="566.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:start" word-spacing="0">
							<tspan x="62.5" y="566.453">−Z</tspan>
							<tspan x="62.5" y="572.453">front</tspan>
						</text>
						<path fill="none" stroke="#000" stroke-linecap="round" d="M70 508.953v40M90 488.953v40M30 548.953v-40"/>
						<text x="81.25" y="520.203" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:center" text-anchor="middle" word-spacing="0">
							<tspan x="80" y="515.203">W</tspan>
						</text>
						<text x="50" y="566.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:end" text-anchor="end" word-spacing="0">
							<tspan x="25" y="566.453">−W</tspan>
							<tspan x="25" y="572.453">zig</tspan>
						</text>
						<path fill="none" stroke="#a0a0a0" marker-end="url(#b)" marker-start="url(#a)" d="M85 468.953l-45 100"/>

						<text x="55" y="566.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:end" text-anchor="end" word-spacing="0">
							<tspan x="55" y="567.453">+V</tspan>
							<tspan x="55" y="573.453">pong</tspan>
						</text>
						<text x="85" y="468.453" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:end" text-anchor="end" word-spacing="0">
							<tspan x="97" y="470.453">-V</tspan>
							<tspan x="101" y="477.453">ping</tspan>
						</text>
						<text x="118.75" y="495.203" font-family="Special Elite" font-size="6.667" font-weight="400" letter-spacing="0" style="line-height:89.99999762%;-inkscape-font-specification:'Special Elite';text-align:end" text-anchor="end" word-spacing="0">
							<tspan x="118.75" y="495.203">+W</tspan>
							<tspan x="118.75" y="501.203">zag</tspan>
						</text>
						<path fill="none" stroke="#000" stroke-linecap="round" d="M90 488.953l-20 20M50 488.953v40M70 508.953H30"/>
					</g>
				</svg>



				<p>To begin, touch any vertex of the Ultracube. This will cause the rotations to cease.</p>
                <p>On the face identified by the first rotation, touch the vertex of the color identified by the first color in the color order obtained earlier.</p>
                <p>Repeat this with the remaining rotations and colors in the sequence.</p>
                <p>A mistake will cause the rotations to resume and your progress to reset. The sequence of rotations remains the same, but the vertices may be colored differently.</p>
                <p>The Y axis not shown has +Y/top and −Y/bottom and is perpendicular to X and Z, meaning that it points out of the module, away from the bomb.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>