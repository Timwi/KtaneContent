<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Backdoor Keypad — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .keypad-table { margin-top: 1.5em; }
    </style>
    <script>
        const filenames = [
            "1-copyright.png", "2-filledstar.png", "3-hollowstar.png", "4-smileyface.png", "5-doublek.png", "6-omega.png", "7-squidknife.png", "8-pumpkin.png",
            "9-hookn.png", "10-teepee.png", "11-six.png", "12-squigglyn.png", "13-at.png", "14-ae.png", "15-meltedthree.png", "16-euro.png", "17-circle.png",
            "18-nwithhat.png", "19-dragon.png", "20-questionmark.png", "21-paragraph.png", "22-rightc.png", "23-leftc.png", "24-pitchfork.png", "25-tripod.png",
            "26-cursive.png", "27-tracks.png", "28-balloon.png", "29-weirdnose.png", "30-upsidedowny.png", "31-bt.png"
        ];

        function setRules(rnd) {
            const precedenceLists = PopulatePLists(rnd);

            const trs = document.getElementsByClassName('keypad-table')[0].getElementsByTagName('TR');
            for (let row = 0; row < trs.length; row++) {
                const imgs = trs[row].getElementsByClassName('keypad-symbol-image');
                for (let col = 0; col < imgs.length; col++)
                    imgs[col].setAttribute('src', `img/Keypad/${filenames[precedenceLists[col][row]]}`);
            }
        }

        function setDefaultRules(rnd) {
            setRules(rnd);
        }

        function PopulatePLists(rnd) {
            const resultLists = []
            resultLists[0] = [27, 12, 29, 11, 6, 8, 22];
            resultLists[1] = [15, 27, 22, 25, 2, 8, 19];
            resultLists[2] = [0, 7, 25, 4, 14, 29, 2];
            resultLists[3] = [10, 20, 30, 6, 4, 19, 3];
            resultLists[4] = [23, 3, 30, 21, 20, 18, 1];
            resultLists[5] = [10, 15, 26, 13, 23, 17, 5];
            for (let i = 0; i < resultLists.length; i++)
                RandomizePList(resultLists[i], rnd);

            return resultLists;
        }

        // Note: this shuffling function needs to match the one in the game
        function RandomizePList(pList, rnd) {
            for (let i = 0; i < pList.length; i++) {
                const value = pList[i];
                const index = rnd.next(0, pList.length);
                pList[i] = pList[index];
                pList[index] = value;
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Backdoor Keypad</span>
            </div>
            <div class="page-footer absolute-footer"></div>
            <div class="page-content">
                <img src="img/Component/Backdoor Keypad.svg" class="diagram">
                <h2>On the Subject of Backdoor Keypads</h2>
                <p class="flavour-text">But when Hunger comes to rap rat-a-tat rat-a-tat at the window, “At the window!” Who’s there? “Hunger” Oh, Hunger!</p>
                <p>
                    This module uses two rule seeds. To visit the necessary pages for this module, copy <code><em>https://ktane.timwi.de/HTML/Backdoor%20Keypad.html#</em></code> into your search bar and append any
                    necessary rule seed.
                </p>
                <p>
                    This module features a 2x2 array of buttons with digits on them. These digits make a ruleseed when read in reading order. To advance to the first stage, press all four buttons.
                    Visit the rule-seeded page using this first rule seed.
                </p>
                <p>The first stage will feature four symbols. Only one column will contain all four symbols. Note the column and the four positions of each symbol.</p>
                <p>To advance further, the defuser must press the four symbols from top to bottom in the unique column.</p>
                <p>The defuser should tell the expert the order of the pressed buttons.</p>
                <p>Pressing in the wrong order results in a strike.</p>
                <p>
                    Next, four more digits will appear on the module in place of the symbols. The order of the pressed buttons is the order in which to append the digits to the end of the current
                    ruleseed. This will be the ruleseed for the second stage. To advance to the second stage, press all four buttons.
                </p>
                <p>The 2x2 keypad will transform into a 4x4 keypad. Each of the 16 buttons will display a symbol.</p>
                <p>To solve the module, the defuser must press the buttons with the symbols located in the exact column and positions from the first stage. The symbols may be different from the first stage.</p>
                <p>Pressing a button with a symbol that is not any of the four symbols will result in a strike.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Backdoor Keypad</span>
            </div>
            <div class="page-content">
                <table class="keypad-table invertible">
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/28-balloon.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/16-euro.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/1-copyright.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/11-six.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/24-pitchfork.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/11-six.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/13-at.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/28-balloon.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/8-pumpkin.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/21-paragraph.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/4-smileyface.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/16-euro.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/30-upsidedowny.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/23-leftc.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/26-cursive.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/31-bt.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/31-bt.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/27-tracks.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/12-squigglyn.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/26-cursive.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/5-doublek.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/7-squidknife.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/22-rightc.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/14-ae.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/7-squidknife.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/3-hollowstar.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/15-meltedthree.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/5-doublek.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/21-paragraph.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/24-pitchfork.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/9-hookn.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/9-hookn.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/30-upsidedowny.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/20-questionmark.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/19-dragon.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/18-nwithhat.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/23-leftc.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/20-questionmark.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/3-hollowstar.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/4-smileyface.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/2-filledstar.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/6-omega.png"></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>