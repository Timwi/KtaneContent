<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ルービックキューブ — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.1.1.min.js"></script>
    <script>
        $(function() {
            let table = $(".interactive");
            let vstack = $("<div>").addClass("vstack").appendTo(table);
            let row1 = $("<div>").addClass("hstack").appendTo(vstack);
            let row2 = $("<div>").addClass("hstack").appendTo(vstack);
            let row3 = $("<div>").addClass("hstack").appendTo(vstack);
            const buttonText = ["▲", "▼", "0"];
            const U = ["0", "3", "6", "9", "C", "F", "I", "L", "O", "R", "U", "X"];
            const L = ["1", "4", "7", "A", "D", "G", "J", "M", "P", "S", "V", "Y"];
            const R = ["2", "5", "8", "B", "E", "H", "K", "N", "Q", "T", "W", "Z"];
            const col = [U,L,R];
            let offset = [0,0,0];
            let cell = $(".interactive table")[0].getElementsByTagName("td");

            function writeOffsetColumn(c) {
                for (r = 0; r < U.length; r++)
                    cell[r*5 + c].innerText = col[c][ (r + (U.length - offset[c])) % U.length ];
            }

            for (let c = 0; c < 3; c++) {
                $("<button>").text(buttonText[0]).appendTo(row1).click(function() {
                    offset[c] = Math.max(0, offset[c] - 1);
                    writeOffsetColumn(c);
                });
            }
            for (let c = 0; c < 3; c++) {
                $("<button>").text(buttonText[1]).appendTo(row2).click(function() {
                    offset[c] = Math.min(U.length, offset[c] + 1);
                    writeOffsetColumn(c);
                });
            }
            for (let c = 0; c < 3; c++) {
                $("<button>").text(buttonText[2]).appendTo(row3).click(function() {
                    offset[c] = 0;
                    writeOffsetColumn(c);
                });
            }

        });
    </script>
    <style>
        .hstack {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }
        .vstack {
            display: flex;
            flex-direction: column;
            align-items: start;
            justify-content: center;
        }
        .float {
            margin: 1em 0 1em 1.5em;
            float: right;
            clear: right;
            width: 50mm;
        }
        button {
            font-size: 12px;
            font-weight: bold;
            width: 34px;
            margin: 1px;
        }

        table.rubiks-cube {
            width: 50mm;
            border: 2px solid;
        }

            table.rubiks-cube th, table.rubiks-cube td {
                text-align: center;
            }

            table.rubiks-cube th {
                border-bottom: 2px solid;
            }

        .dark .bar, .bar {
            border-left: 3px solid;
        }

        .footnote hr {
            width: 30%;
            border: none;
            border-top: 1px solid;
        }

        .footnote p {
            font-size: 85%;
        }

        ul {
            margin-right: 5.5cm;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ルービックキューブ</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Rubik's Cube.svg">

                <div class="float interactive">
                    <table class="rubiks-cube">
                        <caption>表1</caption>
                        <tr><th>U</th><th>L</th><th>F</th><th class="bar" colspan="2">動き</th></tr>
                        <tr><td>0</td><td>1</td><td>2</td><td class="bar">L’</td><td>F’</td></tr>
                        <tr><td>3</td><td>4</td><td>5</td><td class="bar">D’</td><td>U’</td></tr>
                        <tr><td>6</td><td>7</td><td>8</td><td class="bar">U</td><td>B’</td></tr>
                        <tr><td>9</td><td>A</td><td>B</td><td class="bar">F</td><td>B</td></tr>
                        <tr><td>C</td><td>D</td><td>E</td><td class="bar">L</td><td>D</td></tr>
                        <tr><td>F</td><td>G</td><td>H</td><td class="bar">R’</td><td>U</td></tr>
                        <tr><td>I</td><td>J</td><td>K</td><td class="bar">U’</td><td>F</td></tr>
                        <tr><td>L</td><td>M</td><td>N</td><td class="bar">B’</td><td>L’</td></tr>
                        <tr><td>O</td><td>P</td><td>Q</td><td class="bar">B</td><td>R</td></tr>
                        <tr><td>R</td><td>S</td><td>T</td><td class="bar">D</td><td>L</td></tr>
                        <tr><td>U</td><td>V</td><td>W</td><td class="bar">R</td><td>D’</td></tr>
                        <tr><td>X</td><td>Y</td><td>Z</td><td class="bar">F’</td><td>R’</td></tr>
                    </table>
                </div>

                <div class="float">
                    <table class="rubiks-cube">
                        <caption>表2</caption>
                        <tr><th>色</th><th class="bar">数字</th></tr>
                        <tr><td>黄</td><td class="bar">1</td></tr>
                        <tr><td>青</td><td class="bar">2</td></tr>
                        <tr><td>赤</td><td class="bar">3</td></tr>
                        <tr><td>緑</td><td class="bar">4</td></tr>
                        <tr><td>オレンジ</td><td class="bar">5</td></tr>
                        <tr><td>白</td><td class="bar">6</td></tr>
                    </table>
                </div>

                <h2>モジュール詳細：ルービックキューブ</h2>
                <p class="flavour-text">あの絶対解けないパズル覚えてる?それが今爆弾に付属されている。楽しんでね。</p>

                <p>
                    モジュールには揃っていないルービックキューブが表示される。モジュールを解除するには、ルービックキューブを全面揃える必要がある。次の手順を使用し、揃えるための10個の動きを特定して実行しても良い。「RESET」を押すと最初の状態に戻すことができる。
                </p>

                <ul>
                    <li>U/L/F面の色に対応する数字を表2を使用して決定する。表1のそれぞれの列をその数字分下にシフトする。表は上下に循環している。</li>
                    <li>次の工程でシリアルナンバーを使用する。ただし、D面の色を表2で数字に変換し、その数字の位置にある英数字を削除し、5つの英数字にする。</li>
                    <li>シリアルナンバーの英数字を左から順に使用し、シフトされた表1にて動きを特定する。</li>
                    <li>R面の色が赤/緑/青のいずれかの場合、各文字ごとの動きを順番に2つとも行う。それ以外の場合、各文字の左側の動きを5つ全て行った後、各文字の右側の動きを5つ行う。<br></li>
                    <li>R面の色が赤または黄の場合は、最初の5つの動きを時計回りは反時計回りに、反時計回りは時計回りに変換する。</li>
                    <li>R面の色が緑または白の場合は、全ての動きを逆順で行う。</li>
                    <li>最終結果の動きをルービックキューブに実行する。</li>
                </ul>

                <h3>表の見方/動きの説明</h3>

                <ul>
                    <li>F面は「RESET」がある面である。モジュールを正面から見たときに見える面はU・L・Fである。</li>
                    <li>面の色とは、その面の中心の色を示す。</li>
                    <li>動かし方は、その面を正面から見て時計回りに回す動作を表す。ただし、「’」がある場合は逆向きの回転(つまり反時計回り)を表す。</li>
                </ul>
                <div class="footnote">
                    <hr>
                    <p>面の読み方: U = 上, D = 下, L = 左, R = 右, F = 前, B = 後</p>
                </div>
            </div>
            <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
</body>
</html>