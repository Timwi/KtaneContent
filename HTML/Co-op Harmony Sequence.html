<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Co-op Harmony Sequence — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        li { margin: .7em 0; }
        .ruleseed-active .rule {
        font-weight: bold;
        text-decoration: underline;}
    </style>
    <script>
        function setDefaultRules(rnd){setRules(rnd);}
        function setRules(rnd){
            let s1cond1 = ['greater', 'less'];
            let s1cond2 = ['batteries', 'indicators', 'ports', 'battery holders + port plates'];
            let s2cond1 = ['more', 'less'];
            let s2cond2 = ['15', '6', '7', '8', '9', '10', '11', '12', '13', '14', '5', '16', '17', '18', '19', '20'];
            let s3cond1 = ['2', '3', '4'];
            let s3cond2 = ['letters', 'digits'];
            let s4cond = ['A', 'B', 'C', 'D', 'F', 'G', 'I', 'K', 'L', 'M', 'N', 'O', 'Q', 'R', 'S', 'T'];
            let s1inst = ['MUSIC BOX', 'PIANO', 'XYLOPHONE', 'HARP'];
            let s2inst = ['MUSIC BOX', 'PIANO', 'XYLOPHONE', 'HARP'];
            let s3inst = ['MUSIC BOX', 'PIANO', 'XYLOPHONE', 'HARP'];
            let s4inst = ['MUSIC BOX', 'PIANO', 'XYLOPHONE', 'HARP'];
            let pos1 = ['first', 'second', 'third', 'fourth'];
            let lr = ['left', 'right'];
            let pos3 = ['first', 'second', 'third', 'fourth'];
            let pos4 = ['first', 'second', 'third', 'fourth'];
            if (rnd.seed !== 1) {
            rnd.shuffleFisherYates(s1cond1);
            rnd.shuffleFisherYates(s1cond2);
            rnd.shuffleFisherYates(s2cond1);
            rnd.shuffleFisherYates(s2cond2);
            rnd.shuffleFisherYates(s3cond1);
            rnd.shuffleFisherYates(s3cond2);
            rnd.shuffleFisherYates(s4cond);
            rnd.shuffleFisherYates(s1inst);
            rnd.shuffleFisherYates(s2inst);
            rnd.shuffleFisherYates(s3inst);
            rnd.shuffleFisherYates(s4inst);
            rnd.shuffleFisherYates(pos1);
            rnd.shuffleFisherYates(lr);
            rnd.shuffleFisherYates(pos3);
            rnd.shuffleFisherYates(pos4);}
            document.getElementById('instcond1-1').innerHTML = s1cond1[0];
            document.getElementById('instcond1-2').innerHTML = s1cond2[0];
            document.getElementById('instcond2-1').innerHTML = s2cond1[0];
            document.getElementById('instcond2-2').innerHTML = s2cond2[0];
            document.getElementById('instcond3-1').innerHTML = s3cond1[0];
            document.getElementById('instcond3-2').innerHTML = s3cond2[0];
            document.getElementById('instcond4').innerHTML = s4cond[0];
            document.getElementById('inst1-1').innerHTML = s1inst[0];
            document.getElementById('inst1-2').innerHTML = s1inst[1];
            document.getElementById('inst1-3').innerHTML = s1inst[2];
            document.getElementById('inst1-4').innerHTML = s1inst[3];
            document.getElementById('inst2-1').innerHTML = s2inst[1];
            document.getElementById('inst2-2').innerHTML = s2inst[2];
            document.getElementById('inst2-3').innerHTML = s2inst[3];
            document.getElementById('inst2-4').innerHTML = s2inst[0];
            document.getElementById('inst3-1').innerHTML = s3inst[2];
            document.getElementById('inst3-2').innerHTML = s3inst[3];
            document.getElementById('inst3-3').innerHTML = s3inst[0];
            document.getElementById('inst3-4').innerHTML = s3inst[1];
            document.getElementById('inst4-1').innerHTML = s4inst[3];
            document.getElementById('inst4-2').innerHTML = s4inst[0];
            document.getElementById('inst4-3').innerHTML = s4inst[1];
            document.getElementById('inst4-4').innerHTML = s4inst[2];
            document.getElementById('mani1-1').innerHTML = pos1[3];
            document.getElementById('mani1-2').innerHTML = pos1[1];
            document.getElementById('mani1-3').innerHTML = pos1[2];
            document.getElementById('mani1-4').innerHTML = pos1[0];
            document.getElementById('mani3-1').innerHTML = lr[0];
            document.getElementById('mani3-2').innerHTML = pos3[0];
            document.getElementById('mani4-1').innerHTML = pos4[0];
            document.getElementById('mani4-2').innerHTML = pos4[2];
            document.getElementById('mani4-3').innerHTML = pos4[1];
            document.getElementById('mani4-4').innerHTML = pos4[3];
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Co-op Harmony Sequence</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Harmony Sequence.svg" class="diagram">
                <h2>On the Subject of Co-op Harmony Sequence</h2>
                <p class="flavour-text">A harmony is to the musician’s ears as a 2-by-4 is to the woodworker.</p>
                <p>Co-op Harmony Sequence is a module where you have to listen to a sequence of notes and arrange them in the correct order.</p>
                <h3>How it works</h3>
                <ul>
                    <li>Identify the instruments used to identify the order and input the order (see page 2).</li>
                    <li>Select the correct instrument for any given stage and identify the order in which the notes go lowest to highest (from here on called “sorted order”).
                        <ul>
                            <li>To listen to the notes, press and hold the red button.</li>
                            <li>To cycle the instruments, press the up or down button above or below the screen where the instrument is shown.</li>
                        </ul></li>
                    <li>Manipulate the sorted order for all four stages (from here on called “new order”) (see page 3).</li>
                    <li>Select the correct instrument for any given stage and input the new order.
                        <ul>
                            <li>To input a sequence, press the 4 flashing buttons</li>
                        </ul></li>
                    <li>What stage is currently active can be seen on the bottom left of the module. Solved stages are lit, unsolved unlit</li>
                    <li>If a wrong button is pressed or an input was made on an incorrect instrument, the current stage is reset and a strike is issued.</li>
                    <li><b>WARNING: Listening to the notes on the wrong instrument will give you an incorrect order!</b></li>
                </ul>
            </div>
           <div class="page-footer relative-footer">Page 1 of 3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Co-op Harmony Sequence</span>
            </div>
            <div class="page-content">
                <h3>Identify the instruments</h3>
                <ul>
                    <li><b>Stage 1</b>
                    <ul>
                        <li>If the sum of the digits in the serial number is <span class='rule' id='instcond1-1'>greater</span> than or equal to the number of the <span class='rule' id='instcond1-2'>batteries</span>, then <em><span class='rule' id='inst1-1'>MUSIC BOX</span></em> is the instrument used to <em>identify</em> the sorted order and <em><span class='rule' id='inst1-2'>PIANO</span></em> is used to <em>input</em> the new order.</li>
                        <li>Otherwise the instruments are <em><span class='rule' id='inst1-3'>XYLOPHONE</span></em> to <em>input</em> and <em><span class='rule' id='inst1-4'>HARP</span></em> to <em>identify</em>.
                        </li>
                    </ul></li>
                    <li><b>Stage 2</b>
                    <ul>
                        <li>If there are <span class='rule' id='instcond2-1'>more</span> than <span class='rule' id='instcond2-2'>15</span> solvable modules on the bomb, then <em><span class='rule' id='inst2-1'>PIANO</span></em> is the instrument used to <em>identify</em> the sorted order and <em><span class='rule' id='inst2-2'>XYLOPHONE</span></em> is used to <em>input</em> the new order.</li>
                        <li>Otherwise the instruments are <em><span class='rule' id='inst2-3'>HARP</span></em> to <em>input</em> and <em><span class='rule' id='inst2-4'>MUSIC BOX</span></em> to <em>identify</em>.
                        </li>
                    </ul></li>
                    <li><b>Stage 3</b>
                    <ul>
                        <li>If there are exactly <span class='rule' id='instcond3-1'>2</span> <span class='rule' id='instcond3-2'>letters</span> in the serial number, then <em><span class='rule' id='inst3-1'>XYLOPHONE</span></em> is the instrument used to <em>identify</em> the sorted order and <em><span class='rule' id='inst3-2'>HARP</span></em> is used to <em>input</em> the new order.</li>
                        <li>Otherwise the instruments are <em><span class='rule' id='inst3-3'>MUSIC BOX</span></em> to <em>input</em> and <em><span class='rule' id='inst3-4'>PIANO</span></em> to <em>identify</em>.
                        </li>
                    </ul></li>
                    <li><b>Stage 4</b>
                    <ul>
                        <li>If an indicator with the letter <span class='rule' id='instcond4'>A</span> is present on the bomb, then <em><span class='rule' id='inst4-1'>HARP</span></em> is the instrument used to <em>identify</em> the sorted order and <em><span class='rule' id='inst4-2'>MUSIC BOX</span></em> is used to <em>input</em> the new order.</li>
                        <li>Otherwise the instruments are <em><span class='rule' id='inst4-3'>PIANO</span></em> to <em>input</em> and <em><span class='rule' id='inst4-4'>XYLOPHONE</span></em> to <em>identify</em>.
                        </li>
                    </ul></li>
                </ul>
            </div>
           <div class="page-footer relative-footer">Page 2 of 3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Co-op Harmony Sequence</span>
            </div>
            <div class="page-content">
                <h3>Manipulate the sorted order</h3>
                <p> Write down the positions of the buttons in the sorted order, for example 3412 (lowest to highest note).<br><br>Manipulate the order of the buttons for each stage by following the steps given for the stages.<br><br>Input the new order on the correct instrument for any given stage.<br><br><br></p>
                <ul>
                    <li><b>Stage 1</b>
                    <ul>
                        <li>Swap the <em><span class='rule' id='mani1-1'>fourth</span></em> with the <em><span class='rule' id='mani1-2'>second</span></em> position and the <em><span class='rule' id='mani1-3'>third</span></em> with the <em><span class='rule' id='mani1-4'>first</span></em> position.</li>
                    </ul></li>
                    <li><b>Stage 2</b>
                    <ul>
                        <li><em>Reverse</em> the order.</li>
                    </ul></li>
                    <li><b>Stage 3</b>
                    <ul>
                        <li>Cycle the order to the <em><span class='rule' id='mani3-1'>left</span></em> according to the <em><span class='rule' id='mani3-2'>first</span></em> position.</li>
                    </ul></li>
                    <li><b>Stage 4</b>
                    <ul>
                        <li>Input the <em><span class='rule' id='mani4-1'>first</span></em>, then the <em><span class='rule' id='mani4-2'>third</span></em>, followed by the <em><span class='rule' id='mani4-3'>second</span></em> and lastly the <em><span class='rule' id='mani4-4'>fourth</span></em> position.</li>
                    </ul></li>
                </ul>
            </div>
           <div class="page-footer relative-footer">Page 3 of 3</div>
        </div>
    </div>
</body>
</html>
