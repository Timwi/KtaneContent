<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Seven Choose Four — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <script>
    $(function() {
        let grid = $(".gridholder");
        let svg = MakeSvgTag(430,412).appendTo(grid);

        let rows = 4;
        let cols = 4;
        let h = 100;
        let w = 103.5;
        for (let r = 0; r < rows; r++) {
            for (let c = 0; c < cols; c++) {
                let cell = MakeSvgElem("rect", {
                    class: "highlightable", x:(11+c*w), y:(3+r*h),
                    width:w, height:h, fill:"transparent"
                });
                svg.append(cell);
            }
        }
    });
    </script>
    <style>
        .dark table, table { border: none; }
        .linestable { width: 60%; }
        .dark .linestable { filter: invert(87%); }
        .gridholder {
            position: relative;
            width: 80%;
            height: 430px;
        }
        .gridholder img, .gridholder svg {
            position: absolute;
            width: 80%;
        }
        @media screen and (max-width: 899px) {
            .gridholder { height: 515px; }
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Seven Choose Four.svg" class="diagram">
                <h2>On the Subject of Seven Choose Four</h2>
                <p class="flavour-text">What... is your favourite colour? Blue. No, yellOOOOOOOW!!</p>

                <p> This module consists of four pink buttons, each with a flashing color next to them. </p>

                <h3>Tips for Success</h3>
                <ul>
                    <li>In order to solve this module, you must submit four 4-digit codes in sequence. Each 4-digit code you enter has a sequence number. The first 4-digit code you enter has a sequence number of 1, the second has a sequence number of 2, etc.</li>
                    <li>Each button from top to bottom has a color flashing next to it.</li>
                    <li>These flashing lights can be decoded into 4 "keys", each of which is a letter.</li>
                    <li>Each flashing light follows one of four patterns: Morse Code, Tap Code, a sequence of colors, and a number of long flashes between 1 and 7.</li>
                    <li>The Morse code and tap codes are deciphered in the usual way (see <a href="Morse%20Code.html">Morse code</a> or <a href="Tap%20Code.html">tap code</a> manuals for help). These will provide you with the <strong>Morse Key</strong> and <strong>Tap Key</strong>.</li>
                    <li>The sequence of colors corresponds to the 4 colors associated with the buttons, in order, from top to bottom, and a fifth color, which is the <strong>Color Key</strong>. Use the first letter of the name of this color as the <strong>Color Key</strong>.</li>
                    <li>The last code will simply be a number of flashes between 1 and 7. These flashes are longer than the Morse code dash length to help differentiate between the two. The <strong>Number Key</strong> is the letter in the corresponding position of this list <strong>R G B M C Y W</strong>.</li>
                    <li>Now that you have the four keys, you will use these keys as inputs to decrypt the 4-digit codes from each color.</li>
                    <li>You only need to determine the 4-digit codes for the colors which correspond to each button.</li>
                    <li>The order you need to submit the codes is the same as the order of the colors from top to bottom, or the first four colors of the color sequence, which is equivalent.</li>
                    <li>The key for the first color is the <strong>Color Key</strong>. The order of the keys for the remaining colors continues from the location of the <strong>Color Key</strong> downward, wrapping around as necessary.</li>
                    <li>The instructions to determine the 4-digit code for each color can be found below.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 1 of 7</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <ul>
                    <li>When you are ready to submit the codes, note the following things:
                        <ul>
                            <li>When you enter a 4-digit code, treat the buttons as numbered 1–4 starting from the button associated with the current color and proceeding downward, and wrapping around as necessary.</li>
                            <li>The module will only issue a strike after the 4-digit code is submitted. If you receive a strike, the current color code will be deleted and you need to enter it again.</li>
                            <li>When a 4-digit code is entered correctly, the button associated with that color will turn green. Once all four buttons are green the module is solved.</li>
                        </ul>
                    </li>
                </ul>
                <h3>Red</h3>
                <ol>
                    <li>Convert the input key to a 2-digit number using the alphabetic position of the key with A = 1, etc.</li>
                    <li>If the number is less than 10, keep the leading 0. (01, 02, etc.)</li>
                    <li>Add to this number the number of ports on the bomb which contain the letter <strong>R</strong> in their name. If the number is now greater than 99, use the 2 least significant digits.</li>
                    <li>Convert each of the two digits to 1 if they are odd, and 0 if they are even.</li>
                    <li>Consult the table of logic gates to determine which gate you should use, where the sequence number corresponds with which 4-digit code you are currently calculating.</li>
                    <li>Use the two digits as the input for the gate, with 1 being true and 0 being false (See Appendix A for help with logic gates).</li>
                    <li>Now, find your code in the table based on whether the output of the logic gate.</li>
                </ol>

                <table class="center">
                    <tr><td class='corner'></td><th colspan="4">Sequence Number</th></tr>
                    <tr><th class='corner'></th><th>1</th><th>2</th><th>3</th><th>4</th></tr>
                    <tr><th>Logic Output</th><th>NOR</th><th>XOR</th><th>OR</th><th>AND</th></tr>
                    <tr><th>True</th><td>1423</td><td>2314</td><td>4123</td><td>2341</td></tr>
                    <tr><th>False</th><td>2313</td><td>4231</td><td>2233</td><td>1231</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 2 of 7</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <h3>Green</h3>
                <ol>
                    <li>Convert the input key to a 2-digit number using the alphabetic position of the key with A = 1, etc.</li>
                    <li>If the number is less than 10, keep the leading 0. (01, 02, etc.)</li>
                    <li>Add to each digit independently the number of G's and 7's in the serial number, and then take each digit modulo 4.</li>
                    <li>Use these two digits in all four combinations as row and column (top-left is 0,0) to find four cells in the <strong>Lines Table</strong> (example AB => AA, AB, BA, BB).</li>
                    <li>Add up the number of lines in all four cells, and use this information to find the 4-digit combination in the table below.</li>
                    <li>Take the combination associated with the current sequence number. If the number of lines you counted is even, reverse the sequence.</li>
                </ol>

                <h3>Lines Table</h3>
                <div class="gridholder"><img class="linestable" src="img/Seven Choose Four/Lines Table.png"/></div>

                <table class="center">
                    <tr><th colspan="4">Sequence Number</th></tr>
                    <tr><th>1</th><th>2</th><th>3</th><th>4</th></tr>
                    <tr><td>3241</td><td>1122</td><td>4332</td><td>1231</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 3 of 7</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <h3>Blue</h3>
                <ol>
                    <li>Convert the input key to its alphabetic position (A=1,B=2,etc.).</li>
                    <li>Subtract 5 from the value until it is within the range 1–5. This is the row value.</li>
                    <li>For the column, first check the serial number for first letter that appears between A and E. If no such letter exists, then convert the row number to a letter (A=1,B=2,etc.) and use this letter as the column.</li>
                    <li>This is your starting coordinate in the grid below.</li>
                    <li>First, point in the direction which allows you to travel the longest possible distance before hitting the edge of the grid. Ties are broken in favor of North and Clockwise.</li>
                    <li>Travel in this direction a number of spaces equal to the number of AA batteries on the bomb.</li>
                    <li>Then, reorient yourself again following the rules from step 5 using South-Clockwise for ties, and travel a number of spaces equal to the number of D batteries on the bomb.</li>
                    <li>The space you land on has the 4-digit combination.</li>
                </ol>

                <table class="center">
                    <tr><th class='corner'></th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th></tr>
                    <tr><th>1</th><td>1234</td><td>1243</td><td>2134</td><td>2143</td><td>3124</td></tr>
                    <tr><th>2</th><td>3142</td><td>1324</td><td>1342</td><td>1423</td><td>1432</td></tr>
                    <tr><th>3</th><td>4123</td><td>4132</td><td>2314</td><td>2341</td><td>3214</td></tr>
                    <tr><th>4</th><td>3241</td><td>2413</td><td>2431</td><td>4213</td><td>4231</td></tr>
                    <tr><th>5</th><td>3412</td><td>3421</td><td>4312</td><td>4321</td><td>1234</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 4 of 7</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <h3>Magenta</h3>
                <ol>
                    <li>Find the key letter in the grid below.</li>
                    <li>Also locate the first four characters of the serial number in the grid, converting numbers to letters (A=0,B=1,etc.).</li>
                    <li>Calculate the number of spaces it would take to travel the shortest path, only moving orthogonally (not diagonally), to each of the four characters noted from the serial.</li>
                    <li>Restart from the key letter each time, and subtract or add 4 to each distance to make sure it stays within the range 1–4.</li>
                    <li>These four modified distances in order, are the 4-digit combination.</li>
                    <li>A and Z are interchangeable in the grid.</li>
                </ol>

                <table class="center">
                    <tr><th>L</th><th>P</th><th>R</th><th>I</th><th>S</th></tr>
                    <tr><th>X</th><th>O</th><th>F</th><th>B</th><th>V</th></tr>
                    <tr><th>A</th><th>Y</th><th>D</th><th>C</th><th>T</th></tr>
                    <tr><th>K</th><th>G</th><th>W</th><th>Q</th><th>N</th></tr>
                    <tr><th>M</th><th>E</th><th>U</th><th>H</th><th>J</th></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 5 of 7</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <h3>Cyan</h3>
                <ol>
                    <li>Convert the key to a number (A=1,B=2,etc.) and subtract 7 until the number is between 1 and 7.</li>
                    <li>This number corresponds with the color in the corresponding position of this list <strong>R G B M C Y W</strong>.</li>
                    <li>You need 3 other colors to find the combination, so you will use the 3 other colors corresponding to the other 3 buttons on the module.</li>
                    <li>Find your combination by concatenating the 4 values you obtain based on the number of primary and secondary colors among these 4 colors. The two primary numbers should be placed before the two secondary numbers (<strong>XXYY</strong>).</li>
                    <li>For the purposes of calculating <strong>P</strong> and <strong>S</strong>, the number of primary and secondary colors, respectively, <strong>R G B</strong> and <strong>W</strong> count as primary, and <strong>M C Y</strong> and <strong>W</strong> count as secondary.</li>
                </ol>

                <table class="center">
                    <tr><th>#P</th><th>XX</th><th>#S</th><th>YY</th></tr>
                    <tr><th>1P</th><td>13</td><th>4S</th><td>14</td></tr>
                    <tr><th>3P</th><td>42</td><th>0S</th><td>34</td></tr>
                    <tr><th>4P</th><td>43</td><th>1S</th><td>23</td></tr>
                    <tr><th>0P</th><td>12</td><th>3S</th><td>24</td></tr>
                    <tr><th>2P</th><td>13</td><th>2S</th><td>31</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 6 of 7</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Seven Choose Four</span>
            </div>
            <div class="page-content">
                <h3>Yellow</h3>
                <ol>
                    <li>To find the 4-digit combination, we will use a special encryption on the word <strong>YELLOW</strong>, which will depend on the key.</li>
                    <li>First remove the letter from the word <strong>YELLOW</strong> which is closest to the key letter. Ties are broken in favor of the letter further in the alphabet. If the letter to remove is <strong>L</strong> only remove one of them.</li>
                    <li>Now find the inverse letter of the key (A->Z,B->Y,C->X,etc.) and repeat step 2.</li>
                    <li>You should have 4 letters left in the word <strong>YELLOW</strong>. Shift these letters to the right based on the sequence number, wrapping the letters around as needed.</li>
                    <li>Now replace the letters with numbers 1–4 based on the order in which they appear in the alphabet (Ex. AFDH = 1324). This is your solution.</li>
                </ol>

                <h3>White</h3>
                <ul>
                    <li>Using the key, and the current sequence number, choose any of the other 6 colors, and any of the 4-digit combinations they produce will work as the solution for this color.</li>
                    <li><strong>NOTE:</strong> Since you are using a new key and this 4-digit code corresponds to a different sequence number, it is highly unlikely that the 4-digit code produced by a color will be the same, so entering the same code you already entered for another color on the module likely will not work!</li>
                </ul>

                <h3>Appendix A</h3>
                <table class="center">
                    <tr><th rowspan="2">Decimal</th><th rowspan="2">Binary</th><th colspan="4">Logic Gates</th></tr>
                    <tr><th>NOR</th><th>XOR</th><th>OR</th><th>AND</th></tr>
                    <tr><td>0</td><td>00</td><td>1</td><td>0</td><td>0</td><td>0</td></tr>
                    <tr><td>1</td><td>01</td><td>0</td><td>1</td><td>1</td><td>0</td></tr>
                    <tr><td>2</td><td>10</td><td>0</td><td>1</td><td>1</td><td>0</td></tr>
                    <tr><td>3</td><td>11</td><td>0</td><td>0</td><td>1</td><td>1</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 7 of 7</div>
        </div>
    </div>
</body>
</html>