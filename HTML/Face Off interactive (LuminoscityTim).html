<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Face Off — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script>
    $(function() {
        let grid = $('<div>').addClass('grid-input vstack top').appendTo('.grid');
        let textBoxes = [];
        for (let i = 0; i < 8; i++) {
            let row = $('<div>').addClass('row').appendTo(grid);
            let numCells = (i === 4) ? 5 : 3;
            for (let j = 0; j < numCells; j++) {
                let textBox = $('<input type="text">').addClass(`transparent-input`).val('A').click(function() {
                    $(this).select();
                }).on('input', function() {
                    $(this).val($(this).val().toUpperCase());
                    let currentIndex = textBoxes.indexOf(this);
                    $(textBoxes[(currentIndex + 1) % textBoxes.length]).select();
                }).appendTo(row);
                textBoxes.push(textBox[0]);
            }
        }

        let saveStates = [];
        let currentState = 0;

        $(".reset-saves").click(function() {
            saveStates.forEach(x => x.remove());
            saveStates = [];
            currentState = 0;
        });
        $(".reset-all").click(function() {
            $("input.transparent-input").val("A");

            saveStates.forEach(x => x.remove());
            saveStates = [];
            currentState = 0;
        });

        function removeFutureSaves() {
            if (currentState < saveStates.length - 1) {
                for (let i = currentState + 1; i < saveStates.length; i++) {
                    saveStates[i].remove();
                }
                saveStates.splice(currentState + 1, saveStates.length - currentState);
            }
        }

        $("button.save").click(function() {
            removeFutureSaves();

            let saveInputs = Array.from($("input.transparent-input")).map(x => $(x)).map(x => x.val() || "");
            console.log(saveStates);
            let stateNumber = saveStates.length;
            currentState = stateNumber;

            let button = $("<button>").text(stateNumber + 1).click(function() {
                $("input.transparent-input").each((i, x) => $(x).val(saveInputs[i]));
                currentState = stateNumber;
            }).addClass("flash").appendTo(".saves");
            setTimeout(() => {
                button.removeClass("flash");
            }, 100);

            saveStates.push(button);
        });
    });
    </script>
    <style>
        .grid {
            position: relative;
            display: inline-block;
            max-width: 284px;
            height: 562px;
            margin-left: 5px;
        }
        .grid svg {
            width: 7.5cm;
            height: auto;
        }
        .grid-input {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
        }
        .grid-input .row {
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 2px 0;
            height: 9.3%;
        }
        .transparent-input {
            width: 20%;
            height: 100%;
            margin: 0;
            background-color: transparent;
            padding: 0;
            border: none;
            outline: none;
            text-align: center;
        }
        .dark .transparent-input {
            color: #DDD;
        }
        .dark table, table {
            border: none;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }
        .small-text {
            font-size: 12pt;
        }
        .dark .left-symbol, .left-symbol {
            border-left: none;
            border-right: none;
        }
        .dark .right-symbol, .right-symbol {
            border-left: none;
        }
        svg path { fill: transparent; }
        .dark svg path { stroke: #DDD; }
        .dark td img { filter: invert(87%); }

        button {
            font-family: Special Elite;
            background-color: white;
            color: black;
            font-size: 18px;
            border-radius: 5px;
            border: black 3px solid;
            padding: 9px 10px 5px;
            transition: color 0.5s, background-color 0.5s;
            margin: 2.5px;
        }
        button:hover {
            background-color: black;
            color: white;
        }
        button.flash {
            color: white;
            background-color: blue;
        }
        .page {
            background-repeat: repeat-y;
            background-position: top;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Face Off</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Face Off.svg" class="diagram">
                <h2>On the Subject of Face Off</h2>
                <p class="flavour-text">It’s about bombs, it’s about modules, we stay winning, we use solvers.</p>
                <ul>
                    <li>This module contains a rhombicuboctahedron, which is a polyhedron with 18 square faces and 8 triangular faces, for a total of 26. Each face contains a symbol.</li>
                    <li>The 6 buttons along the bottom can be used to freely rotate the rhombicuboctahedron.</li>
                    <li>Use the color of the 3 buttons along the left as the row and the color of the 3 buttons along the right as the column in the table below to obtain a word.
                    <div class="grid" style="float: right">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1019.217 1628.426">
                            <g stroke="#000" stroke-width="6.241">
                            <path d="M408.31 3.12h202.596v202.595H408.31Z"/>
                            <path d="M610.907 3.12h202.595v202.595H610.907Zm-405.191 0H408.31v202.595H205.716ZM408.31 205.715h202.595V408.31H408.31Zm0 202.596h202.595v202.595H408.31Zm0 202.596h202.595V813.5H408.31Z"/>
                            <path d="M408.31 813.501h202.596v202.596H408.31Z"/>
                            <path d="M408.31 1016.096h202.596v202.595H408.31Zm0 202.596h202.596v202.596H408.31Zm0 202.596h202.596v202.595H408.31Zm202.597-202.595h202.595v202.595H610.907Zm-405.191 0H408.31v202.595H205.716Zm405.19-810.381h202.596v202.594H610.907Zm-405.19 0H408.31v202.595H205.716zm405.19 405.19h202.596v202.595H610.907Zm202.596 0h202.595v202.595H813.501Zm-607.786 0H408.31v202.595H205.716zm-202.595 0h202.595v202.595H3.12z"/>
                            <path d="M610.907 407.45V205.715l194.706 100.866zm0 405.19V610.906l194.707 100.867zm0 405.19v-201.733l194.707 100.867zm0 405.192v-201.734l194.707 100.867ZM408.31 1421.288v201.734l-194.706-100.867Zm0-405.191v201.734l-194.706-100.867zm0-405.19V812.64L213.605 711.774Zm0-405.191V407.45L213.605 306.582Z"/>
                            <circle cx="459.363" cy="964.901" r="37.43" fill="#a819a8"/>
                            </g>
                        </svg>
                        <div class="saves hstack wrap left">
                            <button class="save">Save</button>
                        </div>
                        <div class="hstack left" style="margin-top: 5mm">
                            <button class="reset-saves">Reset Saves</button>
                            <button class="reset-all">Reset All</button>
                        </div>
                    </div></li>
                    <li>Take the 20 letters of the alphabet that are not in this word. If the first digit of the serial number is even, reverse them. If the last digit of the serial number is even, place the letters after the word, doing the opposite if the last digit is odd.</li>
                    <li>Observe the unfolded rhombicuboctahedron to the right. The purple circle represents the position of the LED (to assist with folding). Associate each face of this net in reading order with the corresponding letter in the rearranged alphabet.</li>
                    <li>Each symbol corresponds to a letter. Exactly one face contains a letter that does not match up with the mapping to the net.</li>
                    <li>Find the letter in the center of the gap between the real and fake letter going forwards through the alphabet, looping around if necessary. Do this once more, but this time going backwards. Take the alphabetic positions of these letters, and add 1 to each of them.</li>
                    <li>Press the red button when the total seconds remaining on the bomb’s timer is a multiple of exactly one of these numbers to solve the module. Submitting at any other time will strike. Submitting when the total seconds remaining is less than the lower number will simultaneously strike and solve the module.</li>
                </ul>
                <table class='small-text'>
                    <tr>
                        <td class='empty'></td>
                        <th>Cyan</th>
                        <th>Yellow</th>
                        <th>Magenta</th>
                    </tr>
                    <tr>
                        <th>Cyan</th>
                        <td>SUCKLE</td>
                        <td>FIDGET</td>
                        <td>KNIGHT</td>
                    </tr>
                    <tr>
                        <th>Yellow</th>
                        <td>RINSED</td>
                        <td>ALBINO</td>
                        <td>SQUAWK</td>
                    </tr>
                    <tr>
                        <th>Magenta</th>
                        <td>KLUTZY</td>
                        <td>DUVETS</td>
                        <td>QUENCH</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Face Off</span>
            </div>
            <div class="page-content">
                <table>
                    <tr>
                        <th>A</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/A - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/A - 2.svg'></td>
                        <th>B</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/B - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/B - 2.svg'></td>
                        <th>C</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/C - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/C - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>D</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/D - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/D - 2.svg'></td>
                        <th>E</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/E - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/E - 2.svg'></td>
                        <th>F</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/F - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/F - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>G</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/G - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/G - 2.svg'></td>
                        <th>H</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/H - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/H - 2.svg'></td>
                        <th>I</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/I - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/I - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>J</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/J - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/J - 2.svg'></td>
                        <th>K</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/K - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/K - 2.svg'></td>
                        <th>L</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/L - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/L - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>M</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/M - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/M - 2.svg'></td>
                        <th>N</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/N - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/N - 2.svg'></td>
                        <th>O</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/O - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/O - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>P</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/P - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/P - 2.svg'></td>
                        <th>Q</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/Q - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/Q - 2.svg'></td>
                        <th>R</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/R - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/R - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>S</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/S - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/S - 2.svg'></td>
                        <th>T</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/T - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/T - 2.svg'></td>
                        <th>U</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/U - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/U - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>V</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/V - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/V - 2.svg'></td>
                        <th>W</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/W - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/W - 2.svg'></td>
                        <th>X</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/X - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/X - 2.svg'></td>
                    </tr>
                    <tr>
                        <th>Y</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/Y - 1.svg'></td>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/Y - 2.svg'></td>
                        <th>Z</th>
                        <td class='left-symbol'><img style='width: 2cm;' src='img/Face Off/Z - 1.svg'></td>
                        <td class='right-symbol'><img style='width: 2cm;' src='img/Face Off/Z - 2.svg'></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>