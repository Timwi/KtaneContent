<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Ultimate Cycle Optimized — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.1.1.min.js"></script>
    <style>
        .j {
            font-family: 'DragonAlphabet';
        }
        table {
            margin: 1em auto;
        }

        .underline {
            text-decoration: underline;
        }

        .bold {
            font-weight: bold;
        }

        .alpha {
            font-size: 13px;
        }

        .rotor {
            font-size: 13px;
        }

        .reflector {
            font-size: 14px;
        }
        /* Interactive */
        .borderless {
            border: none;
        }
        .fixed-width {
            font-family: 'Courier New', Courier, monospace;
        }
        .center {
            text-align: center;
            margin: auto;
        }
        #interactive {
            font-size: 13px;
        }

            #interactive td.borderless:first-child {
                padding: .3em;
            }

        button {
            font-family: Special Elite;
            background-color: white;
            color: black;
            padding: 1px 3px;
            border-radius: 5px;
            border: black 2px solid;
            transition: 0.3s;
        }

            button:hover {
                background-color: black;
                color: white;
            }

        @media print {
            #interactive {
                display: none;
            }
        }
        
        .dark img:not(.diagram) { filter: invert(87%); }

        .dark .invert {
            filter: invert(100%);
            color: #000000;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Ultimate Cycle.svg" class="diagram">
                <h2>On the Subject of Ultimate Cycles</h2>
                <p class="flavour-text">How insecure are these words???</p>
                <p>This module consists of a screen, eight dials with red labels, and a QWERTY keyboard.</p>
                <p>The labels on the dials, when decrypted and read from left to right, spell out an eight-letter word.</p>
                <p>The word has been encrypted through a series of ciphers, indicated by the direction each dial is pointing, from left to right.</p>
                <p>The objective of the module is to decrypt the eight letter word using the 45° clockwise rotations, starting from north, of the dials from <strong>right to left</strong>, then taking the response and encrypting it through the same ciphers from <strong>left to right.</strong></p>
                <p>Once deciphered, find the word in the table below, the word written below it is the word that should be entered.</p>
                <p>Apply the same sequence of encryptions to the response word, and type out the encrypted response word using the keys.</p>
                <p>The word is automatically submitted when eight keys are pressed.</p>
                <p>The red button can be pressed at any time before the eighth key is pressed to cancel the input.</p>
                <p>Inputting any of the eight letters incorrectly will cause a strike to be issued and reset the module.</p>
                <p>Note: Unless stated otherwise, any reference to a letter’s alphabetic position starts at A = 1. Similarly, any reference to the position of a dial starts from the leftmost dial = 1.</p>
                <p>(d) = Decryption process. <br> (e) = Encryption process.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 13</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h4>0/N: <s>Atbash</s> Logic Cipher</h4>
                <p>Construct an 8-bit binary string, where each bit is the number of 45° clockwise rotations, starting from north, of each dial from left to right, modulo 2. Create eight pairs of bits using the following positions in the string: <strong>12 34 56 78 13 57 24 68</strong>.</p>
                <p>Using the operator corresponding to the position of the current cipher dial (starting with AND = 1), find the truth values of each pair; the encrypted letter depends on whether each is true or false.</p>
                <p>If the LED below the current cipher dial is <strong>lit</strong>, use the top half of the table below. <br> Otherwise, use the bottom half.</p>
                <p>To decrypt, reference the row corresponding to the truth value obtained from the binary pair and the logic gate in the half of the table determined earlier. Within that row, find the encrypted letter, and the decrypted letter will be in the same column, in the shaded row.</p>
                <p>To encrypt, reference the row corresponding to the truth value obtained from the binary pair and the logic gate in the half of the table determined earlier. Find the unencrypted letter in the shaded row, and the encrypted letter will be in the same column, in the referenced row.</p>
                <table class="alpha">
                    <tr><th>B<sub>1</sub></th><th>B<sub>2</sub></th><th>AND (P1)</th><th>OR (P2)</th><th>XOR (P3)</th><th>IMP ⇒ (P4)</th><th>NAND (P5)</th><th>NOR (P6)</th><th>XNOR (P7)</th><th>IMPBY ⇐ (P8)</th></tr>
                    <tr><th>1</th><th>1</th><th>T</th><th>T</th><th>F</th><th>T</th><th>F</th><th>F</th><th>T</th><th>T</th></tr>
                    <tr><th>1</th><th>0</th><th>F</th><th>T</th><th>T</th><th>F</th><th>T</th><th>F</th><th>F</th><th>T</th></tr>
                    <tr><th>0</th><th>1</th><th>F</th><th>T</th><th>T</th><th>T</th><th>T</th><th>F</th><th>F</th><th>F</th></tr>
                    <tr><th>0</th><th>0</th><th>F</th><th>F</th><th>F</th><th>T</th><th>T</th><th>T</th><th>T</th><th>T</th></tr>
                </table>
                <table style="margin-left: -25px;" class="alpha">
                    <tr><th rowspan="2">Lit</th>
                        <th>F</th><td>E</td><td>J</td><td>Z</td><td>K</td><td>S</td><td>B</td><td>X</td><td>T</td><td>L</td><td>R</td><td>I</td><td>D</td><td>F</td><td>G</td><td>U</td><td>M</td><td>C</td><td>Q</td><td>O</td><td>H</td><td>A</td><td>W</td><td>P</td><td>Y</td><td>V</td><td>N</td></tr>
                    <tr><th>T</th><td>A</td><td>R</td><td>P</td><td>O</td><td>E</td><td>T</td><td>Y</td><td>K</td><td>X</td><td>G</td><td>Q</td><td>N</td><td>M</td><td>J</td><td>I</td><td>H</td><td>S</td><td>L</td><td>C</td><td>V</td><td>B</td><td>D</td><td>W</td><td>Z</td><td>F</td><td>U</td></tr>
                    <tr style="background-color: lightgray; color: black;"><th colspan = "2">Letter</th><th>A</th><th>B</th><th>C</th><th>D</th><th>E</th><th>F</th><th>G</th><th>H</th><th>I</th><th>J</th><th>K</th><th>L</th><th>M</th><th>N</th><th>O</th><th>P</th><th>Q</th><th>R</th><th>S</th><th>T</th><th>U</th><th>V</th><th>W</th><th>X</th><th>Y</th><th>Z</th></tr>
                    <tr>        <th rowspan="2">Unlit</th><th>T</th><td>F</td><td>U</td><td>A</td><td>D</td><td>W</td><td>Y</td><td>E</td><td>X</td><td>O</td><td>H</td><td>S</td><td>R</td><td>Q</td><td>N</td><td>M</td><td>J</td><td>T</td><td>C</td><td>P</td><td>B</td><td>G</td><td>V</td><td>L</td><td>K</td><td>I</td><td>Z</td></tr>
                    <tr>        <th>F</th><td>M</td><td>E</td><td>B</td><td>K</td><td>D</td><td>Z</td><td>S</td><td>L</td><td>J</td><td>X</td><td>N</td><td>F</td><td>T</td><td>U</td><td>W</td><td>R</td><td>I</td><td>O</td><td>G</td><td>C</td><td>Y</td><td>H</td><td>P</td><td>A</td><td>Q</td><td>V</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 2 of 13</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h4>1/NE: Caesar Cipher</h4>
                <p>Shift each letter of the word <strong>forwards (e)/backwards (d)</strong> through the alphabet by the number of 45° clockwise rotations, starting from north, of each dial individually.</p>
                <p>If the LED of the current cipher dial is <strong>lit</strong>, shift all letters further <strong>forwards (e)/backwards (d)</strong> by the number corresponding to the position of the current cipher dial.<br>Otherwise, shift all letters <strong>backwards (e)/forwards (d)</strong> by the number corresponding to the position of the current cipher dial.</p>
                <h4>2/E: Playfair Cipher</h4>
                <ul>
                    <li>The indexing of the lists starts at zero.</li>
                    <li>Use the keyword corresponding to the number of 45° clockwise rotations, starting from north, of the first dial <strong>after</strong> the current cipher dial, wrapping around back to the first dial if necessary.</li>
                    <li>If there are less than three unique ports on the bomb, use the keyword from <strong>List A</strong>. Otherwise, use the keyword from <strong>List B</strong>.</li>
                    <li>The keyword gives the first ten letters/top two rows of the keysquare.
                        <ul>
                            <li>If the LED corresponding to the current cipher dial is <strong>lit</strong>, reverse the keyword.</li>
                        </ul>
                    </li>
                    <li>The remaining fifteen letters not present in the keyword fill out the remaining three rows of the keysquare in alphabetical order, excluding X.</li>
                    <li>Split the word into four pairs of letters.</li>
                    <li>For each pair of letters:
                        <ul>
                            <li>If both letters are identical, the encrypted pair is two of the letter diametrically opposite in the keysquare.</li>
                            <li>Otherwise, if both letters are in the same row of the keysquare, replace them with the letters to their immediate <strong>right (e)/left (d)</strong> respectively, wrapping around to the other side of the row if necessary.</li>
                            <li>Otherwise, if both letters are in the same column of the keysquare, replace them with the letters immediately <strong>below (e)/above (d)</strong> them respectively, wrapping around to the other side of the column if necessary.</li>
                            <li>Otherwise, if the letters are on different rows and columns, replace each of them with the letter on the same row but in the column of the other letter in the original pair.</li>
                        </ul>
                    </li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 3 of 13</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <table style="text-align:center">
                    <tr><th>List</th><th>Keyword</th><th>KW Reversed (lit)<th>Remaining letters</th></tr>
                    <tr><th>A0</th><td>ALGORITHMS</td><td>SMHTIROGLA</td><td>BCDEFJKNPQUVWYZ</td></tr>
                    <tr><th>A1</th><td>AUTHORIZED</td><td>DEZIROHTUA</td><td>BCFGJKLMNPQSVWY</td></tr>
                    <tr><th>A2</th><td>BLUEPRINTS</td><td>STNIRPEULB</td><td>ACDFGHJKMOQVWYZ</td></tr>
                    <tr><th>A3</th><td>DESPICABLY</td><td>YLBACIPSED</td><td>FGHJKMNOQRTUVWZ</td></tr>
                    <tr><th>A4</th><td>FORMIDABLE</td><td>ELBADIMROF</td><td>CGHJKNPQSTUVWYZ</td></tr>
                    <tr><th>A5</th><td>HYPERBOLIC</td><td>CILOBREPYH</td><td>ADFGJKMNQSTUVWZ</td></tr>
                    <tr><th>A6</th><td>IMPORTANCE</td><td>ECNATROPMI</td><td>BDFGHJKLQSUVWYZ</td></tr>
                    <tr><th>A7</th><td>LABYRINTHS</td><td>SHTNIRYBAL</td><td>CDEFGJKMOPQUVWZ</td></tr>
                    <tr><th>B0</th><td>WANDERLUST</td><td>TSULREDNAW</td><td>BCFGHIJKMOPQVYZ</td></tr>
                    <tr><th>B1</th><td>VANQUISHED</td><td>DEHSIUQNAV</td><td>BCFGJKLMOPRTWYZ</td></tr>
                    <tr><th>B2</th><td>ULTRASONIC</td><td>CINOSARTLU</td><td>BDEFGHJKMPQVWYZ</td></tr>
                    <tr><th>B3</th><td>SCRAMBLING</td><td>GNILBMARCS</td><td>DEFHJKOPQTUVWYZ</td></tr>
                    <tr><th>B4</th><td>PRECAUTION</td><td>NOITUACERP</td><td>BDFGHJKLMQSVWYZ</td></tr>
                    <tr><th>B5</th><td>OSTRACIZED</td><td>DEZICARTSO</td><td>BFGHJKLMNPQUVWY</td></tr>
                    <tr><th>B6</th><td>METHODICAL</td><td>LACIDOHTEM</td><td>BFGJKNPQRSUVWYZ</td></tr>
                    <tr><th>B7</th><td>MAGNITUDES</td><td>SEDUTINGAM</td><td>BCFHJKLOPQRVWYZ</td></tr>
                </table>
                <p><strong>Important:</strong></p>
                <ul>
                    <li>If the pair of letters is <strong>XX</strong>, the pair is unchanged by the cipher.</li>
                    <li>If the pair of letters is either <strong>X#</strong> or <strong>#X</strong>, where # is a letter other than X, the X is changed to be identical to the other letter in the pair, and the pair is then enciphered/deciphered normally.<br>Then, the new letter is changed back to an X.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 4 of 13</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h4>3/SE: Pigpen Cipher</h4>
                <p style="font-size: 13px">Translate each letter of the word using one of the two pigpen ciphers below. If the LED corresponding to this cipher dial is <strong>unlit</strong>, use Cipher I. Otherwise, use Cipher II.</p>
                <p style="font-size: 13px;">Rotate the shape corresponding to the letter 45° <strong>clockwise (e)/counter-clockwise (d)</strong> an amount equal to the number of 45° clockwise rotations, starting from north, of its respective dial. Then, translate it back into a letter using the same pigpen diagram determined earlier, shown below.</p>
                <div style="display: flex; justify-content: space-between">
                    <img src="img/Pigpen/pigpen1.svg" width="300">
                    <img src="img/Pigpen/pigpen2.svg" width="300">
                </div>
                <h4>3/SE <span class="j">j</span>: Pigpen Cipher, The Way That Speakingevil Coded It, But Visualised!!!</h4>
                <p style="font-size: 14px;">Use the left/right half of the table corresponding to the state of the current cipher dial's LED. Find the letter and move <strong>right (e)/left (d)</strong> within the row, a number of times equal to the number of 45° clockwise rotations of the corresponding dial, starting from north. Should you reach a coloured square, teleport to the other coloured square of the same colour, without modifying your movement direction. The coloured cells do not count as cells themselves, but rather as portals.</p>
                <table style="text-align: center;">
                    <tr>
                        <th style="background-color: #222222; width: 10px;" class="invert" colspan="2"></th>
                        <th colspan="8">Cipher I (unlit)</th>
                        <th style="background-color: #222222; width: 10px;" class="invert" colspan="2"></th>
                        <th colspan="8">Cipher II (lit)</th>
                        <th style="background-color: #222222; width: 10px;" class="invert"></th>
                    </tr>
                    <tr>
                        <th rowspan="3">Left Two Grids</th>
                        <th style="background-color: #FF0000; width: 10px;" class="invert"></th>
                        <td>A</td><td>S</td><td>C</td><td>U</td><td>I</td><td>V</td><td>G</td><td>T</td>
                        <th style="background-color: #FF0000; width: 10px;" class="invert"></th>
                        <th style="background-color: #FF8000; width: 10px;" class="invert"></th>
                        <td>A</td><td>S</td><td>E</td><td>W</td><td>Q</td><td>Y</td><td>M</td><td>U</td>
                        <th style="background-color: #FF8000; width: 10px;" class="invert"></th>
                    </tr>
                    <tr>
                        <th style="background-color: #FFFF00; width: 10px;" class="invert"></th>
                        <td>B</td><td>K</td><td>F</td><td>O</td><td>H</td><td>Q</td><td>D</td><td>M</td>
                        <th style="background-color: #FFFF00; width: 10px;" class="invert"></th>
                        <th style="background-color: #80FF00; width: 10px;" class="invert"></th>
                        <td>C</td><td>D</td><td>K</td><td>L</td><td>O</td><td>P</td><td>G</td><td>H</td>
                        <th style="background-color: #80FF00; width: 10px;" class="invert"></th>
                    </tr>
                    <tr>
                        <th style="background-color: #00FF00; width: 10px;" class="invert"></th>
                        <td colspan="4">E</td><td colspan="4">N</td>
                        <th style="background-color: #00FF00; width: 10px;" class="invert"></th>
                        <th style="background-color: #00FF80; width: 10px;" class="invert"></th>
                        <td colspan="4">I</td><td colspan="4">J</td>
                        <th style="background-color: #00FF80; width: 10px;" class="invert"></th>
                    </tr>
                    <tr>
                        <td colspan="21" style="background-color: #222222; height: 20px;" class="invert"></td>
                    </tr>
                    <tr>
                        <th rowspan="3">Right Two Grids</th>
                        <th style="background-color: #00FFFF; width: 10px;" class="invert"></th>
                        <td>J</td><td>W</td><td>L</td><td>Y</td><td>R</td><td>Z</td><td>P</td><td>X</td>
                        <th style="background-color: #00FFFF; width: 10px;" class="invert"></th>
                        <th style="background-color: #0080FF; width: 10px;" class="invert"></th>
                        <td>B</td><td>T</td><td>F</td><td>X</td><td>R</td><td>Z</td><td>N</td><td>V</td>
                        <th style="background-color: #0080FF; width: 10px;" class="invert"></th>
                    </tr>
                    <tr>
                        <th style="background-color: #0000FF; width: 10px;" class="invert"></th>
                        <td>K</td><td>F</td><td>O</td><td>H</td><td>Q</td><td>D</td><td>M</td><td>B</td>
                        <th style="background-color: #0000FF; width: 10px;" class="invert"></th>
                        <th style="background-color: #8000FF; width: 10px;" class="invert"></th>
                        <td>D</td><td>K</td><td>L</td><td>O</td><td>P</td><td>G</td><td>H</td><td>C</td>
                        <th style="background-color: #8000FF; width: 10px;" class="invert"></th>
                    </tr>
                    <tr>
                        <th style="background-color: #FF00FF; width: 10px;" class="invert"></th>
                        <td colspan="4">N</td><td colspan="4">E</td>
                        <th style="background-color: #FF00FF; width: 10px;" class="invert"></th>
                        <th style="background-color: #FF0080; width: 10px;" class="invert"></th>
                        <td colspan="4">J</td><td colspan="4">I</td>
                        <th style="background-color: #FF0080; width: 10px;" class="invert"></th>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 5 of 13</div>
        </div>
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h4>4/S: Chaocipher</h4>
                <p>The indexing of the lists starts at zero. <strong>For this cipher, the leftmost dial has a position of zero.</strong></p>
                <ul>
                    <li>The two lists give the keywords for two keystrings, the keyword from <strong>List A</strong> is used for the first keystring and the keyword from <strong>List B</strong> is used for the second keystring:
                        <ul>
                            <li>If the sum of the digits in the serial is greater than 9, the position of the current cipher dial determines the keyword in List A and the number of 45° clockwise rotations, starting from north, of the <strong>previous</strong> dial determines the keyword from List B.</li>
                            <li>Otherwise, the position of the current cipher dial determines the keyword in List B and the number of 45° clockwise rotations, starting from north, of the <strong>previous</strong> dial determines the keyword from List A.</li>
                            <li>If the current cipher dial is the first dial, use the last dial.</li>
                        </ul>
                    </li>
                </ul>
                <ul>
                    <li>Take the two keywords, and append the remaining unused sixteen letters in alphabetical order to form your Chaocipher.</li>
                    <li>For each letter in the encrypted word, consider the status of the LED below the dial, referenced by its position from left to right:
                        <ul>
                            <li>If the LED of the current cipher dial is the same as the LED of the referenced dial, shift the <strong>second</strong> keystring to the <strong>left</strong> by the number of 45° clockwise rotations, starting from north, of the referenced dial.</li>
                            <li>Otherwise, shift the <strong>first</strong> keystring to the <strong>left</strong> by the number of 45° clockwise rotations, starting from north, of the referenced dial.</li>
                        </ul>
                    </li>
                    <li>Find the letter in the <strong>first (e)/second (d)</strong> keystring. Take the letter in the same position in the <strong>other</strong> keystring to get your enciphered/deciphered letter.</li>
                </ul>
                <p>Note: The shifted keystrings are <strong>NOT</strong> reset to default after the encryption/decryption of each letter. Shifting is always performed on the latest iteration of the keystrings.</p>
                <p>The interactive is on the next page.</p>
            </div>
            <div class="page-footer relative-footer">Page 6 of 13</div>
        </div>
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <table id="interactive" class="borderless"></table>
            </div>
            <div class="page-footer relative-footer">Page 7 of 13</div>
        </div>
        <div class="page page-bg-07">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h4>5/SW: Monoalphabetic Substitution Cipher</h4>
                <p>The position of the current cipher dial corresponds to which of the eight words in the list below is the keyword for this cipher.</p>
                <p>Make a new string consisting of the thirteen letters of the alphabet that are <strong>not</strong> present in the chosen keyword in alphabetical order.<br>If the LED corresponding to the current cipher dial is <strong>lit</strong>, then reverse this string.</p>
                <table style="text-align:center">
                    <tr><th>Pos.</th><th>Keyword</th><th>Remaining letters (unlit)</th><th>Remaining Letters (lit)</th></tr>
                    <tr><th>1</th><td>DOCUMENTARILY</td><td>BFGHJKPQSVWXZ</td><td>ZXWVSQPKJHGFB</td></tr>
                    <tr><th>2</th><td>FLAMETHROWING</td><td>BCDJKPQSUVXYZ</td><td>ZYXVUSQPKJDCB</td></tr>
                    <tr><th>3</th><td>FLOWCHARTINGS</td><td>BDEJKMPQUVXYZ</td><td>ZYXVUQPMKJEDB</td></tr>
                    <tr><th>4</th><td>HYDROMAGNETIC</td><td>BFJKLPQSUVWXZ</td><td>ZXWVUSQPLKJFB</td></tr>
                    <tr><th>5</th><td>METALWORKINGS</td><td>BCDFHJPQUVXYZ</td><td>ZYXVUQPJHFDCB</td></tr>
                    <tr><th>6</th><td>MULTIBRANCHED</td><td>FGJKOPQSVWXYZ</td><td>ZYXWVSQPOKJGF</td></tr>
                    <tr><th>7</th><td>TROUBLEMAKING</td><td>CDFHJPQSVWXYZ</td><td>ZYXWVSQPJHFDC</td></tr>
                    <tr><th>8</th><td>UNPREDICTABLY</td><td>FGHJKMOQSVWXZ</td><td>ZXWVSQOMKJHGF</td></tr>
                </table>
                <ul>
                    <li>If the number of batteries on the bomb is <strong>even</strong>, then place this string at the <strong>end</strong> of the keyword.</li>
                    <li>Otherwise, place this string at the <strong>beginning</strong> of the keyword.</li>
                </ul>
                <p>Write the full alphabet underneath this new keystring. Find the letter in the <strong>alphabet (e)/keystring (d)</strong> and take the letter at the same position in the <strong>other</strong> string.</p>
                <h4>6/W: Hill Cipher</h4>
                <p>The indexing of the lists starts at zero.</p>
                <p>If the bomb has <strong>more lit than unlit</strong> indicators, the keyword for this cipher belongs to <strong>List A</strong>. Otherwise, the keyword for this cipher belongs to <strong>List B</strong>.</p>
                <p>The keyword used for this cipher depends on the number of 45° clockwise rotations, starting from north, of the dials adjacent to the current cipher dial:</p>
            </div>
            <div class="page-footer relative-footer">Page 8 of 13</div>
        </div>
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <p>If the current cipher dial:</p>
                <ul>
                    <li>Is the <strong>first</strong> dial, use the keyword corresponding to six plus the number of 45° clockwise rotations, starting from north, of the <strong>second</strong> dial.</li>
                    <li>Is the <strong>last</strong> dial, use the keyword corresponding to six plus the number of 45° clockwise rotations, starting from north, of the <strong>seventh</strong> dial.</li>
                    <li>Otherwise, use the keyword corresponding to the sum of the numbers of 45° clockwise rotations, starting from north, of the two dials adjacent to the current cipher dial.</li>
                </ul>
                <table style="text-align:center">
                    <tr><th>List</th><th>Keyword</th><th>Key Matrix</th><th>N</th><td rowspan="16" style="background-color: #222222;" class="invert"></td><th>List</th><th>Keyword</th><th>Key Matrix</th><th>N</th></tr>
                    <tr><th>A0</th><td>AEON</td><td>1-5-15-14</td><td>23</td><th>B0</th><td>BOMB</td><td>2-15-13-2</td><td>23</td></tr>
                    <tr><th>A1</th><td>COPY</td><td>3-15-16-25</td><td>23</td><th>B1</th><td>BUSY</td><td>2-21-19-25</td><td>7</td></tr>
                    <tr><th>A2</th><td>EACH</td><td>5-1-3-8</td><td>19</td><th>B2</th><td>DICE</td><td>4-9-3-5</td><td>11</td></tr>
                    <tr><th>A3</th><td>GOOD</td><td>7-15-15-4</td><td>19</td><th>B3</th><td>FAUX</td><td>6-1-21-24</td><td>11</td></tr>
                    <tr><th>A4</th><td>IOTA</td><td>9-15-20-1</td><td>5</td><th>B4</th><td>HUSK</td><td>8-21-19-11</td><td>1</td></tr>
                    <tr><th>A5</th><td>KILO</td><td>11-9-12-15</td><td>21</td><th>B5</th><td>JUKE</td><td>10-21-11-5</td><td>1</td></tr>
                    <tr><th>A6</th><td>MARK</td><td>13-1-18-11</td><td>5</td><th> B6</th><td>LIMA</td><td>12-9-13-1</td><td>25</td></tr>
                    <tr><th>A7</th><td>ONCE</td><td>15-14-3-5</td><td>15</td><th>B7</th><td>LOCI</td><td>12-15-3-9</td><td>19</td></tr>
                    <tr><th>A8</th><td>QUIT</td><td>17-21-9-20</td><td>5</td><th>B8</th><td>NAME</td><td>14-1-13-5</td><td>21</td></tr>
                    <tr><th>A9</th><td>RIOT</td><td>18-9-15-20</td><td>23</td><th>B9</th><td>PUSH</td><td>16-21-19-8</td><td>7</td></tr>
                    <tr><th>A10</th><td>SYNC</td><td>19-25-14-3</td><td>11</td><th>B10</th><td>RISE</td><td>18-9-19-5</td><td>17</td></tr>
                    <tr><th>A11</th><td>UNDO</td><td>21-14-4-15</td><td>25</td><th>B11</th><td>TASK</td><td>20-1-19-11</td><td>11</td></tr>
                    <tr><th>A12</th><td>WORK</td><td>23-15-18-11</td><td>3</td><th>B12</th><td>VOID</td><td>22-15-9-4</td><td>21</td></tr>
                    <tr><th>A13</th><td>YEAR</td><td>25-5-1-18</td><td>9</td><th>B13</th><td>XYST</td><td>24-25-19-20</td><td>21</td></tr>
                    <tr><th>A14</th><td>ZEAL</td><td>26-5-1-12</td><td>5</td><th>B14</th><td>ZOOM</td><td>26-15-15-13</td><td>3</td></tr>
                </table>
                <p>Create a 2×2 square keymatrix consisting of the alphabetical positions of the letters in the keyword modulo 26.</p>
                <p>If the LED of the current cipher dial is <strong>lit</strong>, swap the top-right and bottom-left values in the matrix.</p>
            </div>
            <div class="page-footer relative-footer">Page 9 of 13</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <p>Find the multiplicative inverse, N, of the determinant of the keymatrix using the following equation, where N is any integer and A, B, C, D are the four values in the keymatrix in reading order:</p>
                <p style="text-align: center;"><strong>N(AD - BC) mod 26 = 1</strong></p>
                <p>Next, create the adjugate matrix of the keymatrix by copying the original matrix, and swapping A and D and negating B and C (in other words, slapping on a negative sign :P).</p>
                <p>Then, multiply the values of the adjugate matrix by the multiplicative inverse, and take each value modulo 26. This is the inverse matrix.</p>
                <p>Split the encrypted word into four pairs.</p>
                <p>For each pair in order, using the <strong>original keymatrix (e)/inverse matrix (d)</strong>:</p>
                <ul>
                    <li>Turn the letters into their alphabetical positions.</li>
                    <li>Take the sum of the products of the first number with A and the second number with B, modulo 26.</li>
                    <li>Turn this back into a letter to get the first letter.</li>
                    <li>Take the sum of the products of the first number with C and the second number with D, modulo 26.</li>
                    <li>Turn this back into a letter to get the second letter.</li>
                </ul>
                <p><strong>Important:</strong> Because Z has an alphabetic position of 26, its corresponding alphabetical position for this cipher is zero.</p>
            </div>
            <div class="page-footer relative-footer">Page 10 of 13</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h4>7/NW: Bitshift Cipher</h4>
                <p>Create a string of 24 bits of binary consisting of the 3 bit binary representations of the numbers of 45° clockwise rotations, starting from north, of each dial from left to right. If the LED corresponding to a given dial is <strong>lit</strong>, invert the bits of its respective binary representation.</p>
                <p>Concatenate all binary representations together, then prepend a zero and append a one.</p>
                <p>Write the alphabet out in order above the binary string.</p>
                <p>Split the alphabet into two sets, with each set containing the letters corresponding to the zeros and ones in the 26-bit string, retaining their orders.</p>
                <p>Find the letter in the correct set:</p>
                <ul>
                    <li>If the LED of the current cipher dial is <strong>lit</strong>, shift the letter to the <strong>right (e)/left (d)</strong> within its set by the position of the current cipher dial from left to right.</li>
                    <li>Otherwise, shift the letter to the <strong>left (e)/right (d)</strong> within its set by the position of the current cipher dial from left to right.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 11 of 13</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h3>Keyword Table</h3>
                <div style="font-family: 'Courier New', Courier, monospace;">
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>ADVANCED</th><th>ADVERTED</th><th>ADVOCATE</th><th>ADDITION</th><th>ALLOCATE</th><th>ALLOTYPE</th><th>ALLOTTED</th><th>ALTERING</th></tr>
                    <tr><td>PROGRESS</td><td>ZYGOTENE</td><td>QUARTICS</td><td>LINKAGES</td><td>QUICKEST</td><td>ORDERING</td><td>UNDOINGS</td><td>ZUGZWANG</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>BINARIES</th><th>BINORMAL</th><th>BINOMIAL</th><th>BILLIONS</th><th>BULKHEAD</th><th>BULLHORN</th><th>BULLETED</th><th>BULWARKS</th></tr>
                    <tr><td>YOKOZUNA</td><td>COMMANDO</td><td>GLOOMING</td><td>TRICKIER</td><td>GATEWAYS</td><td>INCOMING</td><td>ZYGOMATA</td><td>FORMULAE</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>CIPHERED</th><th>CIRCUITS</th><th>CONNECTS</th><th>CONQUERS</th><th>COMMANDO</th><th>COMPILER</th><th>COMPUTER</th><th>CONTINUE</th></tr>
                    <tr><td>BULKHEAD</td><td>RELATION</td><td>LINKWORK</td><td>NANOTUBE</td><td>MONOTONE</td><td>YIELDING</td><td>ILLUMINE</td><td>KILOBYTE</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>DECRYPTS</th><th>DECEIVED</th><th>DECIMATE</th><th>DIVISION</th><th>DISCOVER</th><th>DISCRETE</th><th>DISPATCH</th><th>DISPOSAL</th></tr>
                    <tr><td>NANOBOTS</td><td>QUINTICS</td><td>ZIGZAGGY</td><td>MONOMIAL</td><td>ULTERIOR</td><td>KNUCKLED</td><td>UNDERWAY</td><td>ULTRARED</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>ENCIPHER</th><th>ENCRYPTS</th><th>ENCODING</th><th>ENTRANCE</th><th>EQUALISE</th><th>EQUATORS</th><th>EQUATION</th><th>EQUIPPED</th></tr>
                    <tr><td>JUNKYARD</td><td>QUADRANT</td><td>TRIANGLE</td><td>RELAYING</td><td>NANOGRAM</td><td>CONNECTS</td><td>INDICATE</td><td>BINORMAL</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>FINALISE</th><th>FINISHED</th><th>FINDINGS</th><th>FINNICKY</th><th>FORMULAE</th><th>FORTUNES</th><th>FORTRESS</th><th>FORWARDS</th></tr>
                    <tr><td>DISCRETE</td><td>JUNCTION</td><td>KILOWATT</td><td>ROTATION</td><td>POSITRON</td><td>DISPATCH</td><td>ENCIPHER</td><td>STANDOUT</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>GARRISON</th><th>GARNERED</th><th>GATEPOST</th><th>GATEWAYS</th><th>GAUNTLET</th><th>GAMBLING</th><th>GATHERED</th><th>GLOOMING</th></tr>
                    <tr><td>STOCKADE</td><td>FINDINGS</td><td>ADVANCED</td><td>JOURNEYS</td><td>STOPPING</td><td>LANDMARK</td><td>EQUATORS</td><td>VICELESS</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>HAZARDED</th><th>HAZINESS</th><th>HOTLINKS</th><th>HOTHEADS</th><th>HUNDREDS</th><th>HUNKERED</th><th>HUNTSMAN</th><th>HUNTRESS</th></tr>
                    <tr><td>DISCOVER</td><td>JUNCTURE</td><td>TOGETHER</td><td>GARRISON</td><td>WHATNOTS</td><td>DIVISION</td><td>TOGGLING</td><td>YEASAYER</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>INCOMING</th><th>INDICATE</th><th>INDIRECT</th><th>INDIGOES</th><th>ILLUDING</th><th>ILLUSION</th><th>ILLUSORY</th><th>ILLUMINE</th></tr>
                    <tr><td>VENOMOUS</td><td>FORTUNES</td><td>OBSERVED</td><td>QUITTERS</td><td>HUNKERED</td><td>HOTHEADS</td><td>TOMOGRAM</td><td>KNOWABLE</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>JIGSAWED</th><th>JIMMYING</th><th>JOURNEYS</th><th>JOUSTING</th><th>JUNCTION</th><th>JUNCTURE</th><th>JUNKYARD</th><th>JUDGMENT</th></tr>
                    <tr><td>YEARNING</td><td>TRIGONAL</td><td>VOLITION</td><td>DECRYPTS</td><td>LABELING</td><td>STARTING</td><td>OCTUPLES</td><td>ROTATORS</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>KILOWATT</th><th>KILOVOLT</th><th>KILOBYTE</th><th>KINETICS</th><th>KNOCKING</th><th>KNOCKOUT</th><th>KNOWABLE</th><th>KNUCKLED</th></tr>
                    <tr><td>POSITIVE</td><td>BILLIONS</td><td>WHATEVER</td><td>FINALISE</td><td>ENCRYPTS</td><td>OBSTACLE</td><td>ENCODING</td><td>ADVOCATE</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>LANGUAGE</th><th>LANDMARK</th><th>LIMITING</th><th>LINEARLY</th><th>LINGERED</th><th>LINKAGES</th><th>LINKWORK</th><th>LABELING</th></tr>
                    <tr><td>CONQUERS</td><td>EQUATION</td><td>GATEPOST</td><td>ILLUSION</td><td>QUIRKISH</td><td>NUMERATE</td><td>STANDARD</td><td>POSTSYNC</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>MONOGRAM</th><th>MONOLITH</th><th>MONOMIAL</th><th>MONOTONE</th><th>MULTITON</th><th>MULTIPLY</th><th>MULCTING</th><th>MULLIGAN</th></tr>
                    <tr><td>HUNTRESS</td><td>WINNABLE</td><td>ZYMOLOGY</td><td>ILLUSORY</td><td>VOLATILE</td><td>TOMAHAWK</td><td>OCTANGLE</td><td>ADVERTED</td></tr>
                </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 12 of 13</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Cycle</span>
            </div>
            <div class="page-content">
                <h3>Keyword Table cont.</h3>
                <div style="font-family: 'Courier New', Courier, monospace;">
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>NANOBOTS</th><th>NANOGRAM</th><th>NANOWATT</th><th>NANOTUBE</th><th>NUMBERED</th><th>NUMEROUS</th><th>NUMERALS</th><th>NUMERATE</th></tr>
                    <tr><td>ZIPPERED</td><td>STOCCATA</td><td>VENDETTA</td><td>LINGERED</td><td>FINNICKY</td><td>JUDGMENT</td><td>HUNDREDS</td><td>ILLUDING</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>OCTANGLE</th><th>OCTUPLES</th><th>ORDERING</th><th>ORDINALS</th><th>OBSERVED</th><th>OBSCURED</th><th>OBSTRUCT</th><th>OBSTACLE</th></tr>
                    <tr><td>KNOCKING</td><td>WINGDING</td><td>UNDERLIE</td><td>LINEARLY</td><td>TRIGGERS</td><td>PROJECTS</td><td>ALLOTYPE</td><td>YIELDERS</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>PROGRESS</th><th>PROJECTS</th><th>PROPHASE</th><th>PROPHECY</th><th>POSTSYNC</th><th>POSSIBLE</th><th>POSITRON</th><th>POSITIVE</th></tr>
                    <tr><td>JIGSAWED</td><td>KILOVOLT</td><td>ALLOTTED</td><td>RELATIVE</td><td>PROPHASE</td><td>COMPILER</td><td>LIMITING</td><td>NANOWATT</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>QUADRANT</th><th>QUADRICS</th><th>QUARTILE</th><th>QUARTICS</th><th>QUICKEST</th><th>QUIRKISH</th><th>QUINTICS</th><th>QUITTERS</th></tr>
                    <tr><td>YELLOWED</td><td>MULCTING</td><td>GATHERED</td><td>WEAKENED</td><td>WHATNESS</td><td>HAZINESS</td><td>REVOLVED</td><td>ENTRANCE</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>REVERSED</th><th>REVOLVED</th><th>REVEALED</th><th>ROTATION</th><th>ROTATORS</th><th>RELATION</th><th>RELATIVE</th><th>RELAYING</th></tr>
                    <tr><td>FORTRESS</td><td>WHATSITS</td><td>BULLHORN</td><td>GARNERED</td><td>INDIGOES</td><td>LANGUAGE</td><td>CIRCUITS</td><td>VOLTAGES</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>STARTING</th><th>STANDARD</th><th>STANDOUT</th><th>STANZAIC</th><th>STOCCATA</th><th>STOCKADE</th><th>STOPPING</th><th>STOPWORD</th></tr>
                    <tr><td>REVERSED</td><td>JIMMYING</td><td>DECEIVED</td><td>QUARTILE</td><td>GAUNTLET</td><td>HAZARDED</td><td>MULTIPLY</td><td>ZYMOGRAM</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>TRICKIER</th><th>TRIGONAL</th><th>TRIGGERS</th><th>TRIANGLE</th><th>TOMOGRAM</th><th>TOMAHAWK</th><th>TOGGLING</th><th>TOGETHER</th></tr>
                    <tr><td>MULLIGAN</td><td>ZIGGURAT</td><td>ALLOCATE</td><td>NUMERALS</td><td>BULWARKS</td><td>BINARIES</td><td>INDIRECT</td><td>REVEALED</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>UNDERRUN</th><th>UNDERWAY</th><th>UNDERLIE</th><th>UNDOINGS</th><th>ULTERIOR</th><th>ULTIMATE</th><th>ULTRARED</th><th>ULTRAHOT</th></tr>
                    <tr><td>JOUSTING</td><td>VICINITY</td><td>QUADRICS</td><td>MONOLITH</td><td>ORDINALS</td><td>KNOCKOUT</td><td>NUMEROUS</td><td>STOPWORD</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>VENOMOUS</th><th>VENDETTA</th><th>VICINITY</th><th>VICELESS</th><th>VOLITION</th><th>VOLTAGES</th><th>VOLATILE</th><th>VOLUMING</th></tr>
                    <tr><td>UNDERRUN</td><td>DISPOSAL</td><td>WEAPONED</td><td>HUNTSMAN</td><td>BULLETED</td><td>ALTERING</td><td>MONOGRAM</td><td>POSSIBLE</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>WEAKENED</th><th>WEAPONED</th><th>WINGDING</th><th>WINNABLE</th><th>WHATEVER</th><th>WHATNESS</th><th>WHATNOTS</th><th>WHATSITS</th></tr>
                    <tr><td>EQUALISE</td><td>OBSTRUCT</td><td>COMPUTER</td><td>STANZAIC</td><td>DECIMATE</td><td>EQUIPPED</td><td>BINOMIAL</td><td>YEARLONG</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>YELLOWED</th><th>YEARLONG</th><th>YEARNING</th><th>YEASAYER</th><th>YIELDING</th><th>YIELDERS</th><th>YOKOZUNA</th><th>YOURSELF</th></tr>
                    <tr><td>CIPHERED</td><td>CONTINUE</td><td>KINETICS</td><td>FORWARDS</td><td>ADDITION</td><td>FINISHED</td><td>GAMBLING</td><td>MULTITON</td></tr>
                </table>
                <table class="alpha">
                    <tr style="background-color: lightgray;"><th>ZIPPERED</th><th>ZIGGURAT</th><th>ZIGZAGGY</th><th>ZUGZWANG</th><th>ZYGOMATA</th><th>ZYGOTENE</th><th>ZYMOLOGY</th><th>ZYMOGRAM</th></tr>
                    <tr><td>VOLUMING</td><td>ULTIMATE</td><td>HOTLINKS</td><td>NUMBERED</td><td>PROPHECY</td><td>YOURSELF</td><td>ULTRAHOT</td><td>OBSCURED</td></tr>
                </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 13 of 13</div>
        </div>
    </div>

    <script>
        const setA =
        {
            "A0": [
                ["A", "F", "T", "E", "R", "S", "H", "O", "C", "K", "B", "D", "G", "I", "J", "L", "M", "N", "P", "Q", "U", "V", "W", "X", "Y", "Z"],
            ],
            "A1": [
                ["D", "E", "S", "T", "R", "O", "Y", "I", "N", "G", "A", "B", "C", "F", "H", "J", "K", "L", "M", "P", "Q", "U", "V", "W", "X", "Z"],
            ],
            "A2": [
                ["D", "U", "P", "L", "I", "C", "A", "T", "E", "S", "B", "F", "G", "H", "J", "K", "M", "N", "O", "Q", "R", "V", "W", "X", "Y", "Z"],
            ],
            "A3": [
                ["F", "A", "R", "S", "I", "G", "H", "T", "E", "D", "B", "C", "J", "K", "L", "M", "N", "O", "P", "Q", "U", "V", "W", "X", "Y", "Z"],
            ],
            "A4": [
                ["G", "R", "A", "C", "I", "O", "U", "S", "L", "Y", "B", "D", "E", "F", "H", "J", "K", "M", "N", "P", "Q", "T", "V", "W", "X", "Z"],
            ],
            "A5": [
                ["I", "N", "F", "A", "M", "O", "U", "S", "L", "Y", "B", "C", "D", "E", "G", "H", "J", "K", "P", "Q", "R", "T", "V", "W", "X", "Z"],
            ],
            "A6": [
                ["N", "I", "G", "H", "T", "M", "A", "R", "E", "S", "B", "C", "D", "F", "J", "K", "L", "O", "P", "Q", "U", "V", "W", "X", "Y", "Z"],
            ],
            "A7": [
                ["P", "A", "L", "I", "N", "D", "R", "O", "M", "E", "B", "C", "F", "G", "H", "J", "K", "Q", "S", "T", "U", "V", "W", "X", "Y", "Z"],
            ],
        };
        const setB =
        {
            "B0": [
                ["D", "O", "W", "N", "S", "T", "R", "E", "A", "M", "B", "C", "F", "G", "H", "I", "J", "K", "L", "P", "Q", "U", "V", "X", "Y", "Z"],
            ],
            "B1": [
                ["E", "M", "O", "R", "D", "N", "I", "L", "A", "P", "B", "C", "F", "G", "H", "J", "K", "Q", "S", "T", "U", "V", "W", "X", "Y", "Z"],
            ],
            "B2": [
                ["F", "L", "A", "S", "H", "P", "O", "I", "N", "T", "B", "C", "D", "E", "G", "J", "K", "M", "Q", "R", "U", "V", "W", "X", "Y", "Z"],
            ],
            "B3": [
                ["I", "N", "T", "R", "O", "D", "U", "C", "E", "S", "A", "B", "F", "G", "H", "J", "K", "L", "M", "P", "Q", "V", "W", "X", "Y", "Z"],
            ],
            "B4": [
                ["P", "A", "T", "H", "F", "I", "N", "D", "E", "R", "B", "C", "G", "J", "K", "L", "M", "O", "Q", "S", "U", "V", "W", "X", "Y", "Z"],
            ],
            "B5": [
                ["Q", "U", "A", "D", "R", "I", "C", "E", "P", "S", "B", "F", "G", "H", "J", "K", "L", "M", "N", "O", "T", "V", "W", "X", "Y", "Z"],
            ],
            "B6": [
                ["T", "R", "A", "P", "E", "Z", "O", "I", "D", "S", "B", "C", "F", "G", "H", "J", "K", "L", "M", "N", "Q", "U", "V", "W", "X", "Y"],
            ],
            "B7": [
                ["W", "A", "V", "E", "R", "I", "N", "G", "L", "Y", "B", "C", "D", "F", "H", "J", "K", "M", "O", "P", "Q", "S", "T", "U", "X", "Z"],
            ],
        };

        function mod26(n)
        {
            return ((n % 26) + 26) % 26;
        }

        const interactive = $("#interactive");
        
        // Make the cyclers
        function makeCycler(namesA, namesB)
        {
            let nameA = namesA[0];
            let nameB = namesB[0];
            
            const update = () =>
            {
                for (let j = 0; j < 8; j++)
                {
                    for (let i = 0; i < 26; i++)
                    {
                        topRow[j].children().eq(i+1).text(setA[nameA][0][mod26(i + positionA[j])]);
                        bottomRow[j].children().eq(i+1).text(setB[nameB][0][mod26(i + positionB[j])]);
                    }
                }
            };

            const selectorA = $("<select>");
            for (const nameA of namesA)
            {
                $("<option>").attr("value", nameA).text(nameA).appendTo(selectorA);
            }
            selectorA.change(() => { nameA = selectorA.val(); update();});
            const selectorB = $("<select>");
            for (const nameB of namesB)
            {
                $("<option>").attr("value", nameB).text(nameB).appendTo(selectorB);
            }
            selectorB.change(() => { nameB = selectorB.val(); update();});
            
            $("<tr>").appendTo(interactive);
            $("<td colspan=14>").addClass("center").append("List A: ").append(selectorA).appendTo(interactive);
            $("<td colspan=14>").addClass("center").append("List B: ").append(selectorB).appendTo(interactive);
                
            const offsetA = [];
            const offsetB = [];
            const positionA = [];
            const positionB = [];
            const shiftLeftA  = [];
            const shiftRightA = [];
            const shiftLeftB  = [];
            const shiftRightB = [];
            const topRow = [];
            const bottomRow = [];
            
            for (let l = 0; l < 8; l++) 
            {
                positionA[l] = 0;
                positionB[l] = 0;

                offsetA[l] = $("<select>");
                for (let i = 0; i < 26; i++)
                {
                    $("<option>").attr("value", i).text(i).appendTo(offsetA[l]);
                }
                offsetA[l].change(() => { positionA[l] = Number(offsetA[l].val()); update(); });
                
                offsetB[l] = $("<select>");
                for (let i = 0; i < 26; i++)
                {
                    $("<option>").attr("value", i).text(i).appendTo(offsetB[l]);
                }
                offsetB[l].change(() => { positionB[l] = Number(offsetB[l].val()); update(); });
                
                $("<tr>").appendTo(interactive);
                    $("<td colspan=28>")
                        .append("Letter " + (l+1) + " - ")
                        .append(" Offset ").append(offsetA[l])
                        .append(" // ")
                        .append(" Offset ").append(offsetB[l])
                        .appendTo(interactive);

                shiftLeftA[l]  = $("<button>").text("←").click(() => { for (let r = l; r < 8; r++) { positionA[r]++; offsetA[r].val(mod26(positionA[r])).trigger('change'); } update(); });
                shiftRightA[l] = $("<button>").text("→").click(() => { for (let r = l; r < 8; r++) { positionA[r]--; offsetA[r].val(mod26(positionA[r])).trigger('change'); } update(); });
                shiftLeftB[l]  = $("<button>").text("←").click(() => { for (let r = l; r < 8; r++) { positionB[r]++; offsetB[r].val(mod26(positionB[r])).trigger('change'); } update(); });
                shiftRightB[l] = $("<button>").text("→").click(() => { for (let r = l; r < 8; r++) { positionB[r]--; offsetB[r].val(mod26(positionB[r])).trigger('change'); } update(); });

                topRow[l] = $("<tr>").appendTo(interactive);
                $("<td>").addClass("borderless").append(shiftLeftA[l]).appendTo(topRow[l]);
                for (let i = 0; i < 26; i++)
                {
                    $("<td>").addClass("fixed-width").appendTo(topRow[l]);
                }
                $("<td>").addClass("borderless").append(shiftRightA[l]).appendTo(topRow[l]);

                bottomRow[l] = $("<tr>").appendTo(interactive);
                $("<td>").addClass("borderless").append(shiftLeftB[l]).appendTo(bottomRow[l]);
                for (let i = 0; i < 26; i++)
                {
                    $("<td>").addClass("fixed-width").appendTo(bottomRow[l]);
                }
                $("<td>").addClass("borderless").append(shiftRightB[l]).appendTo(bottomRow[l]);
            }
            update();
        }

        // Make the rotors
        const seta = Object.keys(setA);
        const setb = Object.keys(setB);
        makeCycler(seta, setb);
    </script>
</body>
</html>
