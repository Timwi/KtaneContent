<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ハエ叩き — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.1.1.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <script>
    $(function() {
        let svg = $("svg.dgrm");
        svg.prepend(RegularPolygon(230, 250, 250, 10, 18, {
            fill:"none", stroke:"#000", "stroke-width":4
        }));

        var selected;
        $("svg.dgrm path").addClass("invisible");
        $("svg.dgrm circle").click(function() {
            let c1 = this.getAttribute("class").split(" ").find(x => x.includes("circ")).replace("circ", "");
            let elem = $(this);
            if (selected) {
                selected.removeClass("selected");
                let c2 = selected[0].getAttribute("class").split(" ").find(x => x.includes("circ")).replace("circ", "");
                let n = [ c1, c2 ].sort();
                $(`svg path.line${n[0]}${n[1]}`).toggleClass("invisible");
                selected = null;
            }
            else {
                elem.addClass("selected");
                selected = elem;
            }
        });

        $("button.reset").click(function() {
            $("svg.dgrm path").addClass("invisible");
            $("svg.dgrm circle").removeClass("selected");
            selected = null;
        });
    });
    </script>
    <style>
        svg.dgrm {
            width: 90%;
        }
        svg.dgrm path {
            stroke-width: 2;
            stroke: #F00;
            stroke-linecap: round;
        }
        svg.dgrm circle {
            stroke: #000;
            stroke-width: 3;
            fill: #FFF;
            cursor: pointer;
        }
        svg.dgrm circle.selected { fill: #888; }
        svg.dgrm text {
            user-select: none;
            pointer-events: none;
        }
        svg.dgrm path.invisible { stroke: transparent; }
        .dark svg text { fill: #DDD;  }
        .dark svg circle { fill: #222; }
        .dark svg polygon, .dark svg circle { stroke: #DDD; }
        .dark img:not(.diagram) { filter: invert(87%); }

        button {
            font-family: Special Elite;
            background-color: white;
            color: black;
            font-size: 20px;
            border-radius: 5px;
            border: black 2px solid;
            padding: 4px 7px;
            transition: color 1s, background-color 1s;
            margin: 5px;
        }
        button:hover {
            background-color: black;
            color: white;
        }
        .hstack {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: space-around;
        }

        .page {
            background-repeat: repeat-y;
            background-position: top;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ハエ叩き</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Flyswatting.svg" class="diagram">
                <h2>モジュール詳細：ハエ叩き</h2>
                <p class="flavour-text">くそ。人類は良くなっていると思ったが、今ではこの地球上に存在している中で最も厄介な活動を<span style="background-color: #000000">&amp;&amp;$&amp;*ing</span>爆弾に乗せることにしたのか…</p>

                <p>このモジュールは、英字が書かれた5匹のハエと、モジュールにある3つの数字で構成されている。下の図を使用し、どのハエをたたくことができるかを判断する。間違ったハエを叩こうとするとミスが記録される。たたくことができるハエを特定するには、モジュールの角の３つの数字を使用して三角形を作成する。三角形の内側にいるハエはたたくことができ、外側にある英字は避ける必要がある。</p>

                <svg class="centered-img dgrm" viewbox="-9 -3 520 510" xmlns="http://www.w3.org/2000/svg" text-anchor="middle" font-size="25">
                    <g transform="translate(0, -8)">
                        <circle r="15" cx="174" cy="26" class="circ0"></circle>
                        <circle r="15" cx="325" cy="26" class="circ1"></circle>
                        <circle r="15" cx="448" cy="115" class="circ2"></circle>
                        <circle r="15" cx="494" cy="258" class="circ3"></circle>
                        <circle r="15" cx="448" cy="401" class="circ4"></circle>
                        <circle r="15" cx="325" cy="490" class="circ5"></circle>
                        <circle r="15" cx="174" cy="490" class="circ6"></circle>
                        <circle r="15" cx="50" cy="401" class="circ7"></circle>
                        <circle r="15" cx="8" cy="258" class="circ8"></circle>
                        <circle r="15" cx="50" cy="115" class="circ9"></circle>
                    </g>
                    <text x="174" y="26">0</text>
                    <text x="325" y="26">1</text>
                    <text x="448" y="115">2</text>
                    <text x="494" y="258">3</text>
                    <text x="448" y="401">4</text>
                    <text x="325" y="490">5</text>
                    <text x="174" y="490">6</text>
                    <text x="50" y="401">7</text>
                    <text x="8" y="258">8</text>
                    <text x="50" y="115">9</text>
                    <text x="250" y="76">F</text>
                    <text x="169" y="107">Q</text>
                    <text x="330.5" y="107">K</text>
                    <text x="136" y="135">W</text>
                    <text x="226" y="141">C</text>
                    <text x="299.5" y="151">N</text>
                    <text x="163" y="176">H</text>
                    <text x="336" y="176">A</text>
                    <text x="77" y="201">S</text>
                    <text x="107" y="213">J</text>
                    <text x="196" y="243">T</text>
                    <text x="279" y="217">P</text>
                    <text x="337" y="229">X</text>
                    <text x="391" y="213.5">U</text>
                    <text x="423" y="202">G</text>
                    <text x="128" y="274">M</text>
                    <text x="220" y="298">Z</text>
                    <text x="278" y="298">B</text>
                    <text x="368" y="273.5">O</text>
                    <text x="356" y="314.5">E</text>
                    <text x="421" y="315.5">R</text>
                    <text x="162" y="340">D</text>
                    <text x="225" y="377">L</text>
                    <text x="298.5" y="365">Y</text>
                    <text x="190" y="410">V</text>
                    <text x="330" y="409">I</text>
                    <path d="M180 32 321 32" class="line01"/>
                    <path d="M180 32 434 115" class="line02"/>
                    <path d="M180 32 478 249" class="line03"/>
                    <path d="M180 32 434 384" class="line04"/>
                    <path d="M180 32 321 468" class="line05"/>
                    <path d="M180 32 180 468" class="line06"/>
                    <path d="M180 32 66 384" class="line07"/>
                    <path d="M180 32 21 250" class="line08"/>
                    <path d="M180 32 66 115" class="line09"/>
                    <path d="M321 32 434 115" class="line12"/>
                    <path d="M321 32 478 249" class="line13"/>
                    <path d="M321 32 434 384" class="line14"/>
                    <path d="M321 32 321 468" class="line15"/>
                    <path d="M321 32 180 468" class="line16"/>
                    <path d="M321 32 66 384" class="line17"/>
                    <path d="M321 32 21 250" class="line18"/>
                    <path d="M321 32 66 115" class="line19"/>
                    <path d="M435 115 478 249" class="line23"/>
                    <path d="M435 115 434 384" class="line24"/>
                    <path d="M435 115 321 468" class="line25"/>
                    <path d="M435 115 180 468" class="line26"/>
                    <path d="M435 115 66 384" class="line27"/>
                    <path d="M435 115 21 250" class="line28"/>
                    <path d="M435 115 66 115" class="line29"/>
                    <path d="M478 249 434 384" class="line34"/>
                    <path d="M478 249 321 468" class="line35"/>
                    <path d="M478 249 180 468" class="line36"/>
                    <path d="M478 249 66 384" class="line37"/>
                    <path d="M478 249 21 250" class="line38"/>
                    <path d="M478 249 66 115" class="line39"/>
                    <path d="M434 384 321 468" class="line45"/>
                    <path d="M434 384 180 468" class="line46"/>
                    <path d="M434 384 66 384" class="line47"/>
                    <path d="M434 384 21 250" class="line48"/>
                    <path d="M434 384 66 115" class="line49"/>
                    <path d="M321 468 180 468" class="line56"/>
                    <path d="M321 468 66 384" class="line57"/>
                    <path d="M321 468 21 250" class="line58"/>
                    <path d="M321 468 66 115" class="line59"/>
                    <path d="M180 468 66 384" class="line67"/>
                    <path d="M180 468 21 250" class="line68"/>
                    <path d="M180 468 66 115" class="line69"/>
                    <path d="M66 384 21 250" class="line78"/>
                    <path d="M66 384 66 115" class="line79"/>
                    <path d="M21 250 66 115" class="line89"/>
                </svg>
                <div class="hstack">
                    <button class="reset">リセット</button>
                    <p>2つの数字をクリックして、線を引くことが出来る。</p>
                </div>
            </div>
            <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
</body>
</html>