<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>色変え格子 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        ul {
            padding-left: 1.5em;
        }
        table.order {
            float: left;
            margin-right: .7cm;
        }
            table.order td {
                padding: .3em 0 .2em;
                text-align: center;
                width: 2.1em;
            }
        table#rules {
            width: 100%;
        }
        caption {
            font-weight: bold;
            text-decoration: underline;
        }
        .instr {
            float: left;
            width: 1.125cm;
            height: 1.125cm;
            margin-right: .2cm;
            background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="900" height="900" viewBox="0 0 900 900"><defs><marker id="Z" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M5.23115268 2.42024112L-1.3243737.00960795l6.55552674-2.41063263C4.183854-.97778814 4.18988856.96944646 5.23115268 2.42024112z"/></marker><marker id="Y" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M-5.23115268-2.42024112L1.3243737-.00960795l-6.55552674 2.41063263c1.04729904-1.42323654 1.04126448-3.37047114 3.6e-7-4.8212658z"/></marker><marker id="T" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M-5.23115268-2.42024112L1.3243737-.00960795l-6.55552674 2.41063263c1.04729904-1.42323654 1.04126448-3.37047114 3.6e-7-4.8212658z"/></marker><marker id="U" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M5.23115268 2.42024112L-1.3243737.00960795l6.55552674-2.41063263C4.183854-.97778814 4.18988856.96944646 5.23115268 2.42024112z"/></marker><marker id="V" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M-5.23115268-2.42024112L1.3243737-.00960795l-6.55552674 2.41063263c1.04729904-1.42323654 1.04126448-3.37047114 3.6e-7-4.8212658z"/></marker><marker id="W" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M5.23115268 2.42024112L-1.3243737.00960795l6.55552674-2.41063263C4.183854-.97778814 4.18988856.96944646 5.23115268 2.42024112z"/></marker><marker id="R" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M-5.23115268-2.42024112L1.3243737-.00960795l-6.55552674 2.41063263c1.04729904-1.42323654 1.04126448-3.37047114 3.6e-7-4.8212658z"/></marker><marker id="S" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M5.23115268 2.42024112L-1.3243737.00960795l6.55552674-2.41063263C4.183854-.97778814 4.18988856.96944646 5.23115268 2.42024112z"/></marker><marker id="P" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M-5.23115268-2.42024112L1.3243737-.00960795l-6.55552674 2.41063263c1.04729904-1.42323654 1.04126448-3.37047114 3.6e-7-4.8212658z"/></marker><marker id="Q" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-linejoin="round" stroke-width=".375" d="M5.23115268 2.42024112L-1.3243737.00960795l6.55552674-2.41063263C4.183854-.97778814 4.18988856.96944646 5.23115268 2.42024112z"/></marker><marker id="b" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="c" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="d" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="e" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="f" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="a"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><clipPath id="k"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="l" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="m" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="n" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="o" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="p" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="g"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="h" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="i" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="j" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="q"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="r" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="s" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="t" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="u"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="v" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="w" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="x" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="y" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="z" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="A"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="B" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="C" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="D" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="E"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="F" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="G" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="H" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="I" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="J" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="K"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><marker id="L" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="M" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><marker id="N" orient="auto" overflow="visible"><path fill-rule="evenodd" stroke="%23000" stroke-width=".53333335" d="M-4 0l-2 2 7-2-7-2z"/></marker><clipPath id="O"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath><clipPath id="X"><rect width="200" height="200" y="-225.04724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></clipPath></defs><g transform="translate(0 325.04724)"><g fill="none" stroke="%23000" clip-path="url(%23a)" transform="translate(12.5 -87.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23b)" d="M175-200.04724l-50-50"/><path stroke-width="5" marker-end="url(%23c)" d="M175-.0472393L125-50.047239"/><path stroke-width="5" marker-end="url(%23d)" d="M25.000001-100.04724l-50-50"/><path stroke-width="5" marker-end="url(%23e)" d="M225-100.04724l-50-50"/><path stroke-width="5" marker-end="url(%23f)" d="M125-100.04724l-49.999999-50"/></g><g fill="none" stroke="%23000" clip-path="url(%23g)" transform="translate(237.5 -87.499999)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23h)" d="M75-200.04724v-50"/><path stroke-width="5" marker-end="url(%23i)" d="M75-.047241v-50.000001"/><path stroke-width="5" marker-end="url(%23j)" d="M75-100.04724v-50"/></g><g fill="none" stroke="%23000" clip-path="url(%23k)" transform="translate(462.5 -87.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23l)" d="M175-100.04724l50-50"/><path stroke-width="5" marker-end="url(%23m)" d="M-25-100.04724l50-50"/><path stroke-width="5" marker-end="url(%23n)" d="M75-200.04724l50-50"/><path stroke-width="5" marker-end="url(%23o)" d="M75-.047241l50-50"/><path stroke-width="5" marker-end="url(%23p)" d="M75-100.04724l50-50"/></g><g fill="none" stroke="%23000" clip-path="url(%23q)" transform="translate(687.5 -87.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23r)" d="M175-150.04724h50"/><path stroke-width="5" marker-end="url(%23s)" d="M-25-150.04724h50"/><path stroke-width="5" marker-end="url(%23t)" d="M75-150.04724h50"/></g><g fill="none" stroke="%23000" clip-path="url(%23u)" transform="translate(12.5 137.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23v)" d="M175-150.04724l50 50"/><path stroke-width="5" marker-end="url(%23w)" d="M-25-150.04724l50 50"/><path stroke-width="5" marker-end="url(%23x)" d="M75-250.04724l50 50"/><path stroke-width="5" marker-end="url(%23y)" d="M75-50.047241L125-.04724"/><path stroke-width="5" marker-end="url(%23z)" d="M75-150.04724l50 50"/></g><g fill="none" stroke="%23000" clip-path="url(%23A)" transform="translate(237.5 137.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23B)" d="M125-250.04724v50"/><path stroke-width="5" marker-end="url(%23C)" d="M125-50.04724V-.047242"/><path stroke-width="5" marker-end="url(%23D)" d="M125-150.04724v50"/></g><g fill="none" stroke="%23000" clip-path="url(%23E)" transform="translate(462.5 137.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23F)" d="M225-150.04724l-50 50"/><path stroke-width="5" marker-end="url(%23G)" d="M25-150.04724l-50 50"/><path stroke-width="5" marker-end="url(%23H)" d="M125-250.04724l-50 50"/><path stroke-width="5" marker-end="url(%23I)" d="M125-50.04724l-50 50"/><path stroke-width="5" marker-end="url(%23J)" d="M125-150.04724l-50 50"/></g><g fill="none" stroke="%23000" clip-path="url(%23K)" transform="translate(687.5 137.5)"><path d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke-width="5" marker-end="url(%23L)" d="M225-100.04724h-50"/><path stroke-width="5" marker-end="url(%23M)" d="M25-100.04724h-50"/><path stroke-width="5" marker-end="url(%23N)" d="M125-100.04724H75"/></g><g fill="none" clip-path="url(%23O)" transform="translate(12.5 362.5)"><path stroke="gray" d="M50-225.04724v200m100-200v200m-150-150h200m-200 50h200m-200 50h200"/><path stroke="%23000" stroke-width="2" d="M100-225.04724v200"/><path stroke="%23000" stroke-width="5" marker-end="url(%23P)" marker-start="url(%23Q)" d="M50-125.04724s25-25 50-25 50 25 50 25"/></g><g fill="none" clip-path="url(%23O)" transform="translate(237.5 362.5)"><path stroke="gray" d="M50-225.04724v200m100-200v200m-150-150h200m-200 100h200m-100-150v200"/><path stroke="%23000" stroke-width="5" marker-end="url(%23R)" marker-start="url(%23S)" d="M100-175.04724s25 25 25 50-25 50-25 50"/><path stroke="%23000" stroke-width="2" d="M0-125.04724h200"/></g><g fill="none" clip-path="url(%23O)" transform="translate(462.5 362.5)"><path stroke="gray" d="M50-225.04724v200m100-200v200m-150-150h200m-200 50h200m-200 50h200m-100-150v200"/><path stroke="%23000" stroke-width="5" marker-end="url(%23T)" marker-start="url(%23U)" d="M50-75.04724s0-50 25-75 75-25 75-25"/><path stroke="%23000" stroke-width="2" d="M0-225.04724l200 200"/></g><g fill="none" clip-path="url(%23O)" transform="translate(687.5 362.5)"><path stroke="gray" d="M50-225.04724v200m100-200v200m-150-150h200m-200 50h200m-200 50h200m-100-150v200"/><path stroke="%23000" stroke-width="5" marker-end="url(%23V)" marker-start="url(%23W)" d="M50-175.04724s50 0 75 25 25 75 25 75"/><path stroke="%23000" stroke-width="2" d="M200-225.04724l-200 200"/></g><g clip-path="url(%23X)" transform="translate(12.5 587.5)"><path fill="none" stroke="%23000" d="M50-225.04724v200m100-200v200m-150-150h200m-200 50h200m-200 50h200m-100-150v200"/><path fill="none" stroke="%23000" stroke-width="5" marker-end="url(%23Y)" d="M164.95191-87.547241a75 75 0 0 1-84.363338 34.944437A75 75 0 0 1 25-125.04724a75 75 0 0 1 55.58857-72.44444 75 75 0 0 1 84.36333 34.94444"/><circle cx="100" cy="-125.04724" r="40" fill="%23fff" fill-opacity=".8627451"/><text x="99.90625" y="-109.73474" font-family="Special Elite" font-size="43" text-anchor="middle"><tspan x="99.90625" y="-109.73474">90°</tspan></text></g><g clip-path="url(%23X)" transform="translate(237.5 587.5)"><path fill="none" stroke="%23000" d="M50-225.04724v200m100-200v200m-150-150h200m-200 50h200m-200 50h200m-100-150v200"/><path fill="none" stroke="%23000" stroke-width="5" marker-start="url(%23Z)" d="M164.95191-87.547241a75 75 0 0 1-84.363338 34.944437A75 75 0 0 1 25-125.04724a75 75 0 0 1 55.58857-72.44444 75 75 0 0 1 84.36333 34.94444"/><circle cx="100" cy="-125.04724" r="40" fill="%23fff" fill-opacity=".8627451"/><text x="99.90625" y="-109.73474" font-family="Special Elite" font-size="43" text-anchor="middle"><tspan x="99.90625" y="-109.73474">90°</tspan></text></g><g clip-path="url(%23X)" transform="translate(462.5 587.5)"><path fill="none" stroke="%23000" d="M50-225.04724v200m100-200v200m-150-150h200m-200 50h200m-200 50h200m-100-150v200"/><path fill="none" stroke="%23000" stroke-width="5" marker-end="url(%23Y)" d="M164.95191-87.547241a75 75 0 0 1-84.363338 34.944437A75 75 0 0 1 25-125.04724a75 75 0 0 1 55.58857-72.44444 75 75 0 0 1 84.36333 34.94444"/><circle cx="100" cy="-125.04724" r="40" fill="%23fff" fill-opacity=".8627451"/><text x="99.90625" y="-109.73474" font-family="Special Elite" font-size="43" text-anchor="middle"><tspan x="99.90625" y="-109.73474">180°</tspan></text></g><g clip-path="url(%23a)" transform="translate(687.5 587.5)"><path fill="none" stroke="%23000" d="M50-225.04724v200m50-200v200m50-200v200m-150-150h200m-200 50h200m-200 50h200"/><circle cx="75" cy="-150.04724" r="12.5"/></g><rect width="200" height="200" x="12.5" y="-312.54724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="237.5" y="-312.54724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="462.5" y="-312.54724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="687.5" y="-312.54724" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="12.5" y="-87.547241" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="237.5" y="-87.547241" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="462.5" y="-87.547241" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="687.5" y="-87.547241" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="12.5" y="137.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="237.5" y="137.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="462.5" y="137.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="687.5" y="137.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="12.5" y="362.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="237.5" y="362.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="462.5" y="362.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/><rect width="200" height="200" x="687.5" y="362.45276" fill="none" stroke="%23000" stroke-width="3" rx="0" ry="0"/></g></svg>');
            background-size: 4.5cm 4.5cm;
            background-repeat: no-repeat;
        }
            .instr-0 { background-position: 0cm 0cm; }
            .instr-1 { background-position: -1.125cm 0cm; }
            .instr-2 { background-position: -2.25cm 0cm; }
            .instr-3 { background-position: -3.375cm 0cm; }
            .instr-4 { background-position: 0cm -1.125cm; }
            .instr-5 { background-position: -1.125cm -1.125cm; }
            .instr-6 { background-position: -2.25cm -1.125cm; }
            .instr-7 { background-position: -3.375cm -1.125cm; }
            .instr-8 { background-position: 0cm -2.25cm; }
            .instr-9 { background-position: -1.125cm -2.25cm; }
            .instr-10 { background-position: -2.25cm -2.25cm; }
            .instr-11 { background-position: -3.375cm -2.25cm; }
            .instr-12 { background-position: 0cm -3.375cm; }
            .instr-13 { background-position: -1.125cm -3.375cm; }
            .instr-14 { background-position: -2.25cm -3.375cm; }
            .instr-15 { background-position: -3.375cm -3.375cm; }
    </style>
    <script>
        var _instructions = [
            "北西に移動<br>(ループする)",
            "北に移動<br>(ループする)",
            "北東に移動<br>(ループする)",
            "東に移動<br>(ループする)",
            "南東に移動<br>(ループする)",
            "南に移動<br>(ループする)",
            "南西に移動<br>(ループする)",
            "西に移動<br>(ループする)",
            "|の線で<br>折り返す",
            "—の線で<br>折り返す",
            "\\の線で<br>折り返す",
            "/の線で<br>折り返す",
            "90°時計<br>回りに回転",
            "90°反時計<br>回りに回転",
            "180°回転",
            "その場に<br>留まる"
        ];

        function setDefaultRules(rnd) { setRules(rnd); }

        function setRules(rnd)
        {
            var skip = rnd.next(0, 6);
            for (var i = 0; i < skip; i++)
                rnd.nextDouble();
            var four = [0, 1, 2, 3];
            var numbers = [];
            for (var i = 0; i < 16; i++)
                numbers.push(i);
            rnd.shuffleFisherYates(numbers);
            document.getElementById('rules').innerHTML = '<caption>命令テーブル</caption>' + four.map(row =>
                `<tr>${four.map(col => `<td><div class='instr instr-${numbers[col + 4*row]}'></div>${_instructions[numbers[col + 4*row]]}</td>`).join('')}</tr>`
            ).join('');

            numbers = [];
            for (var i = 0; i < 16; i++)
                numbers.push(i);
            var html = '';
            for (var stage = 0; stage < 4; stage++)
            {
                rnd.shuffleFisherYates(numbers);
                html += `<table class='order'><caption>ステージ${(stage + 1)}</caption>${four.map(row => `<tr>${four.map(col => `<td>${numbers[col + 4*row] + 1}</td>`).join('')}</tr>`).join('')}</table>`;
            }
            document.getElementById('orders').innerHTML = html;
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">色変え格子</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Discolored Squares.svg">
                <h2>モジュール詳細：色変え格子</h2>
                <p class="flavour-text">秩序はエントロピーに取って代わられる｡エントロピーは秩序の消失である｡真のカオスへようこそ｡</p>

                <ul>
                    <li>開始時に､4つの異なる色がちょうど一度のみ出現していない場合､間違ったモジュールを参照している｡</li>
                    <li>その4つの色の正方形を押して開始する｡<em>押した順番で､位置と色を覚える｡</em>そして､ステージ1が開始する｡もし､覚えた色の正方形がステージ1で表れない場合､間違ったモジュールを参照している｡</li>
                    <li>各ステージで､命令テーブルを見て､ステージ数に対応した押した順番の<em>覚えた位置</em>のセルを参照する｡</li>
                </ul>
                <table id="rules">
                    <caption>命令テーブル</caption>
                    <tbody>
                        <tr>
                            <td><div class="instr instr-0"></div>北西に移動<br>(ループする)</td>
                            <td><div class="instr instr-2"></div>北東に移動<br>(ループする)</td>
                            <td><div class="instr instr-1"></div>北に移動<br>(ループする)</td>
                            <td><div class="instr instr-14"></div>180°回転</td>
                        </tr>
                        <tr>
                            <td><div class="instr instr-10"></div>\の線で<br>折り返す</td>
                            <td><div class="instr instr-6"></div>南西に移動<br>(ループする)</td>
                            <td><div class="instr instr-8"></div>|の線で<br>折り返す</td>
                            <td><div class="instr instr-15"></div>その場に<br>留まる</td>
                        </tr>
                        <tr>
                            <td><div class="instr instr-11"></div>/の線で<br>折り返す</td>
                            <td><div class="instr instr-3"></div>Move E<br>(ループする)</td>
                            <td><div class="instr instr-12"></div>90°時計<br>回りに回転</td>
                            <td><div class="instr instr-7"></div>西に移動<br>(ループする)</td>
                        </tr>
                        <tr>
                            <td><div class="instr instr-9"></div>—の線で<br>折り返す</td>
                            <td><div class="instr instr-5"></div>南に移動<br>(ループする)</td>
                            <td><div class="instr instr-13"></div>90°反時計<br>回りに回転</td>
                            <td><div class="instr instr-4"></div>南東に移動<br>(ループする)</td>
                        </tr></tbody>
                </table>
                <ul>
                    <li>ステージ数に対応した押した順番の<em>覚えた色</em>と同じ色の全ての正方形について､後述の順序で次の手順を踏む:
                        <ul>
                            <li>命令テーブルの命令のとおりに位置を調整する｡</li>
                            <li>調整された位置が既に白い正方形である場合は､白い正方形でなくなるまで同じ調整を行う｡</li>
                            <li>最初に当てはまったの白以外の正方形を押す｡</li>
                            <li>押した正方形が現在の<em>覚えた色</em>である場合､このステージ中ではその正方形に関する手順を踏まない｡</li>
                        </ul>
                    </li>
                    <li>正方形の手順は次の順序で行う:</li>
                </ul>
                <div id="orders">
                    <table class="order">
                        <caption>ステージ1</caption>
                        <tbody>
                            <tr><td>5</td><td>12</td><td>1</td><td>15</td></tr>
                            <tr><td>14</td><td>13</td><td>7</td><td>3</td></tr>
                            <tr><td>9</td><td>4</td><td>6</td><td>10</td></tr>
                            <tr><td>16</td><td>2</td><td>8</td><td>11</td></tr>
                        </tbody>
                    </table>
                    <table class="order">
                        <caption>ステージ2</caption>
                        <tbody>
                            <tr><td>1</td><td>14</td><td>6</td><td>7</td></tr>
                            <tr><td>12</td><td>15</td><td>3</td><td>10</td></tr>
                            <tr><td>16</td><td>4</td><td>2</td><td>11</td></tr>
                            <tr><td>9</td><td>8</td><td>13</td><td>5</td></tr>
                        </tbody>
                    </table>
                    <table class="order">
                        <caption>ステージ3</caption>
                        <tbody>
                            <tr><td>16</td><td>9</td><td>7</td><td>12</td></tr>
                            <tr><td>6</td><td>15</td><td>3</td><td>5</td></tr>
                            <tr><td>11</td><td>8</td><td>13</td><td>14</td></tr>
                            <tr><td>2</td><td>10</td><td>1</td><td>4</td></tr>
                        </tbody>
                    </table>
                    <table class="order">
                        <caption>ステージ4</caption>
                        <tbody>
                            <tr><td>4</td><td>11</td><td>3</td><td>14</td></tr>
                            <tr><td>16</td><td>12</td><td>7</td><td>8</td></tr>
                            <tr><td>5</td><td>2</td><td>6</td><td>9</td></tr>
                            <tr><td>1</td><td>13</td><td>15</td><td>10</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
</body>
</html>
