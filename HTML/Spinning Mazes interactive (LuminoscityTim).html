<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Spinning Mazes — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.1.1.min.js"></script>
    <script>
    $(function() {
        var mazeRotation = 0;
        let maze = $("svg");
        $("button.rotate-cc").click(function() {
            rotateMaze(false, false);
        });
        $("button.rotate-cw").click(function() {
            rotateMaze(true, false);
        });
        $("button.reset").click(function() {
            rotateMaze(false, true);
        });

        function rotateMaze(clockwise, reset) {
            if (clockwise) {
                mazeRotation += 1;
            } else if (!reset) {
                mazeRotation -= 1;
            } else {
                mazeRotation = 0;
            }

            maze.css("transform", `rotate(${mazeRotation * 90}deg)`);
        }
    });
    </script>
    <style>
        svg {
            width: 82%;
            transition: transform 0.5s;
        }
        .rotate-cc, .rotate-cw, .reset {
            font-size: 15px;
            height: 28.5px;
            width: 51px;
            background-position: 1px 0;
            background-repeat: no-repeat;
        }
        .rotate-cc {
            background-image: url('img/Common/ccw-arrow.svg');
        }
        .rotate-cw {
            background-image: url('img/Common/cw-arrow.svg');
        }
        .buttons {
            display: flex;
            flex-direction: row;
            justify-content: center;
            padding: .1em 0 1em;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Spinning Mazes</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Spinning Mazes.svg" class="diagram">
                <h2>On the Subject of Spinning Mazes</h2>
                <p class="flavour-text">Don’t go getting lost on me, now.</p>
                <p>
                    This module has four buttons, each of which will move you one space in the maze below. Only one button is colored. Their directions are random, but consistent.<br/>
                    You always start in the center of the maze and go there upon striking. To solve the module, you must pass through the colored exit with the button that is that color.<br />
                    You pass through the curved spaces in a straight line, and as you do so, you rotate relative to the maze. They still count as spaces.<br />
                    The four LEDs at the top of the module will light up when you are in the same row or column as the corresponding exits.
                </p>
                <div class="buttons">
                    <button class="rotate-cc floating"></button>
                    <button class="reset">0</button>
                    <button class="rotate-cw floating"></button>
                </div>
                <svg xmlns="http://www.w3.org/2000/svg" viewBox=".9 .9 9.2 9.2" class="centered-img">
                    <g id="cells" fill="#eee" stroke="#999" stroke-width=".05">
                        <path class="highlightable" d="M1 3a2 2 0 0 1 2 -2v1a1 1 0 0 0 -1 1z"/>
                        <path class="highlightable" d="M1 3a2 2 0 0 1 2 -2v1a1 1 0 0 0 -1 1z" transform="rotate(90 5.5 5.5)"/>
                        <path class="highlightable" d="M1 3a2 2 0 0 1 2 -2v1a1 1 0 0 0 -1 1z" transform="rotate(180 5.5 5.5)"/>
                        <path class="highlightable" d="M1 3a2 2 0 0 1 2 -2v1a1 1 0 0 0 -1 1z" transform="rotate(270 5.5 5.5)"/>
                        <g transform="translate(0 0)">
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 1)">
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 2)">
                            <rect class="highlightable" x="1" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="2" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="8" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="9" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 3)">
                            <rect class="highlightable" x="1" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="2" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="8" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="9" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 4)">
                            <rect class="highlightable" x="1" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="2" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1" fill="#666"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="8" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="9" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 5)">
                            <rect class="highlightable" x="1" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="2" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="8" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="9" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 6)">
                            <rect class="highlightable" x="1" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="2" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="8" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="9" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 7)">
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                        </g>
                        <g transform="translate(0 8)">
                            <rect class="highlightable" x="3" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="4" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="5" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="6" y ="1" width="1" height="1"/>
                            <rect class="highlightable" x="7" y ="1" width="1" height="1"/>
                        </g>
                    </g>
                    <g id="walls" fill="none" stroke="#000" stroke-width=".075">
                        <!--Outer and Curved Walls-->
                        <path d="M8 1a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-5a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2z"/>
                        <path d="M3 3h-1a1 1 0 0 1 1-1z"/>
                        <path d="M3 3h-1a1 1 0 0 1 1-1z" transform="rotate(90 5.5 5.5)"/>
                        <path d="M3 3h-1a1 1 0 0 1 1-1z" transform="rotate(180 5.5 5.5)"/>
                        <path d="M3 3h-1a1 1 0 0 1 1-1z" transform="rotate(270 5.5 5.5)"/>

                        <!--Entrance Region-->
                        <g transform="translate(-5 -5)">
                            <path d="M10 10v-1"/>
                            <path d="M9 9v3"/>
                            <path d="M10 8h1"/>
                            <path d="M12 8h1"/>
                            <path d="M14 8v1"/>
                            <path d="M14 10v2h1"/>
                            <path d="M10 11v1"/>
                            <path d="M11 10h2"/>
                            <path d="M12 10v-1h1"/>
                            <path d="M10 13h1"/>
                            <path d="M12 13v-1h1"/>
                            <path d="M13 13h1"/>
                            <path d="M11 11h1"/>
                        </g>

                        <!--Surrounding Entrance Region-->
                        <path d="M4 8v2"/>
                        <path d="M5 8v2"/>
                        <path d="M6 9h2"/>
                        <path d="M1 7h1"/>
                        <path d="M3 7h1"/>
                        <path d="M2 6h1v-2"/>
                        <path d="M1 5h1"/>
                        <path d="M1 4h2"/>
                        <path d="M3 3h1"/>
                        <path d="M4 2h3v-1"/>
                    </g>
                    <g id="goal-walls" fill="none" stroke-width=".1">
                        <path d="M6 1h1" stroke="#F00"/>
                        <path d="M1 4v1" stroke="#FF0"/>
                        <path d="M10 6v1" stroke="#0F0"/>
                        <path d="M4 10h1" stroke="#00F"/>
                    </g>
                </svg>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>