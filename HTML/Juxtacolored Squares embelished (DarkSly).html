<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Juxtacolored Squares â€” Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>
        var colors = {
            "Azure": "#528df7",
            "Black": "#444444",
            "Blue": "#001dba",
            "Brown": "#e3892d",
            "Chestnut": "#930400",
            "Cyan": "#00FEFF",
            "Forest": "#1f5e3d",
            "Green": "#2af738",
            "Gray": "#dedcdc",
            "Jade": "#a4ff9c",
            "Magenta": "#E728F1",
            "Mauve": "#ffbaff",
            "Orange": "#ffbb00",
            "Purple": "#8516CA",
            "Red": "#E13838",
            "Yellow": "#e7ff30"
        }

        function setDefaultRules(rnd) { setRules(rnd); }

        function setRules(rnd)
        {
            let table = document.getElementsByClassName("rule-td");
            let originalColors =
            [
                "Azure",
                "Black",
                "Blue",
                "Brown",
                "Chestnut",
                "Cyan",
                "Forest",
                "Green",
                "Gray",
                "Jade",
                "Magenta",
                "Mauve",
                "Orange",
                "Purple",
                "Red",
                "Yellow"
            ];
            let colors = originalColors.slice(0);
            let order = [6, 0, 5, 11,  15, 7, 10, 9,  1, 8, 3, 2,  13, 4, 14, 12]

            for (let row = 0; row < originalColors.length; row++)
            {
                rnd.shuffleFisherYates(colors);
                let theseColors = colors.slice(0).filter(c => c !== originalColors[row]);

                for (let i = 0; i < 6; i++) {
                    table[6*order[row] + i].innerText = theseColors[i];   
                }
            }
            applyTextColor();
        }

        function applyTextColor() {
            var cells = document.querySelectorAll("td");

            cells.forEach(cell => {
                setTextColor(cell, "Azure");
                setTextColor(cell, "Black");
                setTextColor(cell, "Blue");
                setTextColor(cell, "Brown");

                setTextColor(cell, "Chestnut");
                setTextColor(cell, "Cyan");
                setTextColor(cell, "Forest");
                setTextColor(cell, "Green");

                setTextColor(cell, "Gray");
                setTextColor(cell, "Jade");
                setTextColor(cell, "Magenta");
                setTextColor(cell, "Mauve");

                setTextColor(cell, "Orange");
                setTextColor(cell, "Purple");
                setTextColor(cell, "Red");
                setTextColor(cell, "Yellow");
            });
        }

        function applyColors() {
            var cells = document.querySelectorAll("th");

            cells.forEach(cell => {
                setColor(cell, "Azure");
                setColor(cell, "Black", true);
                setColor(cell, "Blue", true);
                setColor(cell, "Brown");

                setColor(cell, "Chestnut", true);
                setColor(cell, "Cyan");
                setColor(cell, "Forest", true);
                setColor(cell, "Green");

                setColor(cell, "Gray");
                setColor(cell, "Jade");
                setColor(cell, "Magenta");
                setColor(cell, "Mauve");

                setColor(cell, "Orange");
                setColor(cell, "Purple", true);
                setColor(cell, "Red");
                setColor(cell, "Yellow");
            });
        }

        function setColor(cell, name, isTextLight) {
            if(cell.textContent.includes(name)) {
                    cell.style.backgroundColor =  colors[name];
                    cell.style.color = isTextLight ? "white" : "black";
            }
        }

        function setTextColor(cell, name) {
            if(cell.textContent.includes(name)) {
                    cell.style.color =  colors[name];
            }
        }
    </script>
    <style>
        table.centered {
            margin-left: auto;
            margin-right: auto;
        }

        .color-table th {
            width: 1.5cm;
            height: 1.5cm;
            text-align: center;
        }
        td {
            background-color: #333;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Juxtacolored Squares</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Juxtacolored Squares.svg">
                <h2>On the Subject of Juxtacolored Squares</h2>
                <p class="flavour-text">You are influenced by the ones around you. You are but a product of your surroundings. Let your surroundings become a product of you.</p>

                <table class='color-table centered'>
                    <tr>
                        <th>Brown<br>(N)</th>
                        <th>Forest<br>(F)</th>
                        <th>Blue<br>(B)</th>
                        <th>Purple<br>(P)</th>
                    </tr>
                    <tr>
                        <th>Orange<br>(O)</th>
                        <th>Green<br>(G)</th>
                        <th>Azure<br>(Z)</th>
                        <th style="font-size: small;">Magenta<br>(M)</th>
                    </tr>
                    <tr>
                        <th>Yellow<br>(Y)</th>
                        <th>Jade<br>(J)</th>
                        <th>Cyan<br>(C)</th>
                        <th>Mauve<br>(V)</th>
                    </tr>
                    <tr>
                        <th style="font-size: small;">Chestnut<br>(H)</th>
                        <th>Red<br>(R)</th>
                        <th>Gray<br>(A)</th>
                        <th>Black</th>
                    </tr>
                </table>
                <p></p>
                <table class="centered">
                    <tr><th>Color</th><th colspan="3">Left/Right</th><th colspan="3">Above/Below</th></tr>
                    <tr><th>Black</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Gray</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Mauve</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Magenta</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Purple</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Blue</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Azure</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Cyan</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Jade</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Green</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Forest</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Brown</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Yellow</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Orange</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Red</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                    <tr><th>Chestnut</th><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td><td class="rule-td"></td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
    <script>
        applyColors();
    </script>
</body>
</html>