<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Character Shift â€” Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>

    function setRules(rnd){
        var numberOptions = ["1", "1", "2", "2", "3", "3", "4", "5", "6"];
        var addFunc = ["Add", "Add", "Subtract", "Add", "Subtract", "Add", "Subtract", "Add", "Add", "Add", "Subtract", "Add", "Add", "Subtract", "Add", "Add", "Add"];
        var stopTime = ["1", "0", "2", "3", "4", "5", "6", "7", "8", "9"];

        var functions = document.getElementsByClassName("func");
        var numbers = document.getElementsByClassName("num");
        var stop = document.getElementById("stop");

        rnd.shuffleFisherYates(numberOptions);
        rnd.shuffleFisherYates(addFunc);
        rnd.shuffleFisherYates(stopTime);

        stop.innerText = stopTime[0];

        for(var i = 0; i < 12; i++){
          functions[i].innerText = addFunc[i];
        }

        functions[12].innerText = addFunc[11];

        for(var i = 13; i <= 15; i++){
          functions[i].innerText = addFunc[i-1];
        }

        if(addFunc[15] == "Add"){
          functions[16].innerText = "Add";
          functions[17].innerText = "Subtract";
        } else {
          functions[17].innerText = "Add";
          functions[16].innerText = "Subtract";
        }
        if(addFunc[16] == "Add"){
          functions[18].innerText = "Add";
          functions[19].innerText = "Subtract";
        } else {
          functions[19].innerText = "Add";
          functions[18].innerText = "Subtract";
        }

        numbers[0].innerText = numberOptions[4];
        numbers[1].innerText = numberOptions[2];
        numbers[2].innerText = numberOptions[5];
        numbers[3].innerText = numberOptions[4];

        for(var i = 0; i < functions.length; i++){
          if(i == 4 || i == 7 || i == 9 || i == 10 || i == 12 || i==14||i==15||i==17||i==19){
              functions[i].innerText = functions[i].innerText.toLowerCase();
          }
        }
    }

    function setDefaultRules(){
        var numberOptions = ["1", "1", "2", "2", "3", "3", "4", "5", "6"];
        var addFunc = ["Add", "Add", "Subtract", "Add", "Subtract", "Add", "Subtract", "Add", "Add", "Add", "Subtract", "Add", "Add", "Subtract", "Add", "Add", "Add"];
        var stopTime = ["1", "0", "2", "3", "4", "5", "6", "7", "8", "9"];

        var functions = document.getElementsByClassName("func");
        var numbers = document.getElementsByClassName("num");
        var stop = document.getElementById("stop");

        stop.innerText = stopTime[0];

        for(var i = 0; i < 12; i++){
          functions[i].innerText = addFunc[i];
        }

        functions[12].innerText = addFunc[11];

        for(var i = 13; i <= 15; i++){
          functions[i].innerText = addFunc[i-1];
        }

        if(addFunc[15] == "Add"){
          functions[16].innerText = "Add";
          functions[17].innerText = "Subtract";
        } else {
          functions[17].innerText = "Add";
          functions[16].innerText = "Subtract";
        }
        if(addFunc[16] == "Add"){
          functions[18].innerText = "Add";
          functions[19].innerText = "Subtract";
        } else {
          functions[19].innerText = "Add";
          functions[18].innerText = "Subtract";
        }
        numbers[0].innerText = numberOptions[4];
        numbers[1].innerText = numberOptions[2];
        numbers[2].innerText = numberOptions[5];
        numbers[3].innerText = numberOptions[4];

        for(var i = 0; i < functions.length; i++){
          if(i == 4 || i == 7 || i == 9 || i == 10 || i == 12 || i==14||i==15||i==17||i==19){
              functions[i].innerText = functions[i].innerText.toLowerCase();
          }
        }
    }
    </script>
    <style>
        table {
            margin: 1em auto;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Character Shift</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Character Shift.svg" class="diagram">
                <h2>On the Subject of Character Shift</h2>
                <p class="flavour-text">haha what is shape shift?</p>
                <ul>
                    <li>This module features two sliders, and a red LED.</li>
                    <li>Each slider cycles between five options: its default of *, and 4 numbers/letters.</li>
                    <li>The slider on the left cycles between different letters, while the slider on the right cycles between different numbers.</li>
                    <li>Using the table below, shift the letters according to the numbers. Loop around at A/Z. Apply each number to all four characters so that sixteen different possibilities are made, excluding the original letters.</li>
                    <li>Submit the one shifted letter that results in a letter included in the Serial #. The letter/number combination that resulted in that solution must be submitted.</li>
                    <li><strong>Note:</strong> This module has no submit button. As long as the module is not on its default of */*, the module will try to submit its current configuration every time the last digit of the bomb's timer is <span id="stop">1</span>. An indication of when this automatic submit is armed is provided by the red LED.</li>
                </ul>
                <p>Calculate <strong>X</strong> by adding up Ports + Serial # letters.</p>
                <p>Calculate <strong>Y</strong> by adding up Indicators + Serial # numbers.</p>
                <table>
                    <tr><th>Number:</th><th>Operation:</th></tr>
                    <tr><td>0</td><td><span class="func">Add</span> <span class="num">3</span>.</td></tr>
                    <tr><td>1</td><td><span class="func">Add</span> <strong>X</strong>.</td></tr>
                    <tr><td>2</td><td><span class="func">Subtract</span> <strong>Y</strong>.</td></tr>
                    <tr><td>3</td><td><span class="func">Add</span> <strong>Y</strong>, then <span class="func">subtract</span> the number of port plates.</td></tr>
                    <tr><td>4</td><td><span class="func">Add</span> the last digit of the Serial #.</td></tr>
                    <tr><td>5</td><td><span class="func">Subtract</span> the number of battery holders, then <span class="func">add</span> <strong>X</strong> * <span class="num">2</span>.</td></tr>
                    <tr><td>6</td><td><span class="func">Add</span> the number of lit indicators, <span class="func">add</span> <strong>Y</strong>, then <span class="func">subtract</span> the number of unlit indicators.</td></tr>
                    <tr><td>7</td><td><span class="func">Add</span> <strong>X</strong> if there is a lit SIG indicator, Otherwise <span class="func">add</span> <strong>Y</strong>.</td></tr>
                    <tr><td>8</td><td><span class="func">Add</span> <strong>X</strong> and <strong>Y</strong>, then <span class="func">subtract</span> the number of indicators, then <span class="func">add</span> the number of D batteries.</td></tr>
                    <tr><td>9</td><td><span class="func">Add</span> <strong>X</strong> if there are more than <span class="num">3</span> batteries, Otherwise <span class="func">subtract</span> it. <span class="func">Add</span> <strong>Y</strong> if there are more than <span class="num">3</span> indicators, Otherwise <span class="func">subtract</span> it.</td></tr>
                </table>
            </div>
        </div>
    </div>
</body>
</html>
