<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Koi-Koi — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <!-- Remove the whole style tag if empty -->
    <style>
        /* Remove this if you do not have any tables */
        .dark table, table {
            margin: 1em auto;
            border: none;
        }

        /* Remove this if you only have a single page */
        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 6'; }
        
        .hanafuda {
            height: 60px;
        }
        
        table.hcards td:nth-child(1){
            border-left: 1px solid black !IMPORTANT;
        }
        
        table.hcards td:nth-child(4), td:nth-child(8){
            border-right: 1px solid black !IMPORTANT;
        }
        
        table.hcards td {
            border: none;
            font-size: 0.9em;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Koi-Koi</span>
            </div>
            <div class="page-content" style="font-size: 0.95em">
                <img src="img/Component/Koi-Koi.svg" class="diagram">
                <h2>On the Subject of Koi-Koi</h2>
                <p class="flavour-text">Wait... I thought this was about fish?</p>
                <p>In order to defuse this module, the defuser has to win a 3-round game of the Japanese Hanafuda game Koi-Koi.</p>
                <p>The defuser can either play against:</p>
                <ul>
                    <li>Another defuser playing the module at the same time*</li>
                    <li>Against a bot opponent by pressing the "Play against bot" button on the large display.</li>
                </ul>
                <p>After the 3 rounds, the module of the winner will solve. The other player has to play a new game. In the case of a tie, both players will have to play a new game. Strikes will not be issued in any case.</p>
                <p class="flavour-text">*Online play is not available on Twitch Plays or when the game was started outside of Steam or for duplicate Koi-Koi modules. In either case the game will automatically start against a bot.</p>
                <h3>Module controls</h3>
                <ul>
                    <li>Click on the card in your hand / on the table to select it to take.</li>
                    <li>To call Koi-Koi! or stop the round, press their respective buttons when you're given the choice (the lid on them will open).</li>
                    <li>
                        On the display next to the cards the player has taken, 3 numbers will appear from top to bottom:
                        <ol>
                            <li>The final score of the player (without the current round)</li>
                            <li>The multiplier of the current round</li>
                            <li>The sum of the base scores of the yakus formed by the player in the current round</li>
                        </ol>
                    </li>
                    <li>This display will also contain 2 buttons (◄ and ►). These will cycle which type of cards the player has taken to show. The symbol above them will symbolise the currently shown type. You can press these buttons on your opponent's display as well.</li>
                    <li>
                        During the game, the large display next to the table will contain:
                        <ul>
                            <li>A <img src="img/Koi-Koi/CurrentPlayerMarker.png" height="25"> symbol on the side of the player whoose turn it currently is. This marker will be orange, red and green during round 1, 2 and 3 respectively.</li>
                            <li>The formed yakus and their base points of the current player if a new one was formed or a previous one was improved during their turn (while they choose to either call Koi-Koi or stop the game)</li>
                            <li>When playing online, a "Leave game"</li>
                        </ul>
                        After a game in the case of a lose or tie, the player can search for a new game by pressing the "New game" button that appears on this display.
                    </li>
                    <li>On Twitch Plays, the ID of the module is shown on the card stack.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Koi-Koi</span>
            </div>
            <div class="page-content">
                <h3>Hanafuda cards</h3>
                <p>
                    A Hanafuda deck consists of 48 cards each of them representing one of the 12 months (suits), with each month having 4 cards that belong to it.
                    <br>
                    Two cards of the same month have the same flower painted on them (except the plain card of November).
                    <br>
                    Each card is one of 4 types:
                </p>
                <ul>
                        <li><strong>Plain</strong> cards will only have the flower painted on them.</li>
                        <li><strong>Ribbon</strong> cards will also have a red or blue ribbon painted on them.</li>
                        <li><strong>Animal</strong> cards will also have an animal (usually) painted on them.</li>
                        <li><strong>Bright</strong> cards: there are only 5 in the deck and have some reference to light or mythology painted on them.</li>
                </ul>
                <p>
                    The Sake Cup <img src="img/Koi-Koi/September_Sake.png" height="30"> (September) is both a plain and an animal.
                    <br>
                    Although Rain <img src="img/Koi-Koi/November_Rain.png" height="30"> (November) is considered a bright, it is much less powerful than the others.
                    <br>
                    See Appendix H for the complete list of Hanafuda cards.
                </p>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Koi-Koi</span>
            </div>
            <div class="page-content" style="font-size: 0.93em">
                <h3>Koi-Koi rules</h3>
                <p>A game of Koi-Koi typically consists of 3, 6 or 12 rounds. In this module they will always consist of 3 rounds. Each player is dealt 8 cards and 8 cards also get dealt on the table face-up. In each turn, the dealer is the starting player.</p>
                <p>In this module, the defuser who joined first will become the first dealer playing against another defuser. The defuser will always become the first dealer against a bot opponent.</p>
                <p>In a round of Koi-Koi players take turns collecting cards from the table by matching them to the ones in their hand in order to form combinations called yakus (see appendix Y for the list of yakus). A turn goes as follows:</p>
                <ol>
                    <li>
                        The player selects a card from their hand
                        <ul>
                            <li>If there are no other cards on the table representing the same month, the player places the card face-up on the table.</li>
                            <li>If there is 1 card of the same month on the table, the player takes both (the selected one and the one from the table) cards and puts them face-up in front of themselves.</li>
                            <li>If there are 2 cards of the same month on the table, the player chooses which card to take alongside their selected one.</li>
                            <li>If there are 3 cards of the same month on the table, the player takes all 4 cards.</li>
                        </ul>
                    </li>
                    <li>The player draws a card from the pile and repeats step 1 with the drawn card being the selected card instead of choosing one from their hand.</li>
                    <li>
                        The player checks if the cards they have collected (the cards in their hand don't count) forms a new or improves (Plains, Ribbons, Animals yakus worth more points for each extra card of their respective types) on a previously formed yaku.
                        <br>
                        If so, they have 2 options:
                        <ul>
                            <li>If they call "Koi-Koi!" (can't do this if they have no more cards in their hand), the round continues and the multiplier at the end of the round increases by 1.</li>
                            <li>
                                If they stop the game, the round ends with them being the winner. The amount of points they receive is calculated by p*(k+1) where p is the sum of the base points of their yakus formed, and k is the number of Koi-Koi's called during the round (by either player).
                                <br>
                                For example, if they have 12 plain cards and all 3 blue ribbons with one Koi-Koi having been called during the round, they get (3+6)*(1+1)=18 points.
                                <br>
                                The other player gets no points. The player who stopped the game will also be the dealer in the next round.
                            </li>
                        </ul>
                        If the round doesn't end,the other player takes their turn. If they don't have any more cards in their hand, the round ends with a tie and neither players get points. The dealer stays the same in the next round.
                    </li>
                </ol>
                At the end of all the rounds, the player who collected more points wins.
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>

        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Koi-Koi</span>
            </div>
            <div class="page-content">
                <h3>Appendix H: List of Hanafuda cards</h3>
                <table class="hcards" style="text-align: center;">
                    <tr>
                        <th colspan=4>January</th>
                        <th colspan=4>July</th>
                    </tr>
                    <tr>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/January_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/January_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/January_Poetry.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/January_Bright.png">
                            <br>
                            Bright
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/July_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/July_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/July_Ribbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/July_Boar.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <th colspan=4>February</th>
                        <th colspan=4>August</th>
                    </tr>
                    <tr>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/February_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/February_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/February_Poetry.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/February_Animal.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/August_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/August_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/August_Animal.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/August_Moon.png">
                            <br>
                            Bright
                            <br>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <th colspan=4>March</th>
                        <th colspan=4>September</th>
                    </tr>
                    <tr>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/March_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/March_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/March_Poetry.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/March_Curtain.png">
                            <br>
                            Bright
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/September_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/September_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/September_BRibbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/September_Sake.png">
                            <br>
                            Animal
                            <br>
                            Plain
                        </td>
                    </tr>
                    <tr>
                        <th colspan=4>April</th>
                        <th colspan=4>October</th>
                    </tr>
                    <tr>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/April_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/April_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/April_Ribbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/April_Animal.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/October_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/October_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/October_BRibbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/October_Deer.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <th colspan=4>May</th>
                        <th colspan=4>November</th>
                    </tr>
                    <tr>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/May_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/May_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/May_Ribbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/May_Animal.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/November_Plain.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/November_Ribbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/November_Animal.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/November_Rain.png">
                            <br>
                            Bright
                            <br>
                            &nbsp;
                        </td>
                    </tr>
                    <tr>
                        <th colspan=4>June</th>
                        <th colspan=4>December</th>
                    </tr>
                    <tr style="border-bottom: 1px solid black">
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/June_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/June_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/June_BRibbon.png">
                            <br>
                            Ribbon
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/June_Butterflies.png">
                            <br>
                            Animal
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/December_Plain_1.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/December_Plain_2.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/December_Plain_3.png">
                            <br>
                            Plain
                            <br>
                            &nbsp;
                        </td>
                        <td>
                            <img class="hanafuda" src="img/Koi-Koi/December_Bright.png">
                            <br>
                            Bright
                            <br>
                            &nbsp;
                        </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">4</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Koi-Koi</span>
            </div>
            <div class="page-content">
                <h3>Appendix Y: Yaku list</h3>
                <table style="text-align: center;">
                    <tr>
                        <td colspan="3">
                            <strong>Bright yakus</strong>
                            <br>
                            This group is mutually exclusive
                        </td>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <th>Condition</th>
                        <th>Base points</th>
                    </tr>
                    <tr>
                        <td>Five brights</td>
                        <td>All 5 bright cards</td>
                        <td>15</td>
                    </tr>
                    <tr>
                        <td>Four brights</td>
                        <td>4 bright cards excluding Rain</td>
                        <td>8</td>
                    </tr>
                    <tr>
                        <td>Four brights with rain</td>
                        <td>Rain + 3 other bright cards</td>
                        <td>7</td>
                    </tr>
                    <tr>
                        <td>Three brights</td>
                        <td>3 bright cards excluding Rain</td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <th colspan="3">Other yakus</th>
                    </tr>
                    <tr>
                        <th>Name</th>
                        <th>Condition</th>
                        <th>Base points</th>
                    </tr>
                    <tr>
                        <td>Plains</td>
                        <td>At least 10 plain cards</td>
                        <td># of plains - 9</td>
                    </tr>
                    <tr>
                        <td>Ribbons</td>
                        <td>At least 5 ribbon cards</td>
                        <td># of ribbons - 4</td>
                    </tr>
                    <tr>
                        <td>Animals</td>
                        <td>At least 5 animal cards</td>
                        <td># of animals - 4</td>
                    </tr>
                    <tr>
                        <td>Poetry ribbons</td>
                        <td><img src="img/Koi-Koi/January_Poetry.png" height="70">&nbsp;<img src="img/Koi-Koi/February_Poetry.png" height="70">&nbsp;<img src="img/Koi-Koi/March_Poetry.png" height="70"></td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td>Blue ribbons</td>
                        <td><img src="img/Koi-Koi/June_BRibbon.png" height="70">&nbsp;<img src="img/Koi-Koi/September_BRibbon.png" height="70">&nbsp;<img src="img/Koi-Koi/October_BRibbon.png" height="70"></td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td>Boar-Deer-Butterflies</td>
                        <td><img src="img/Koi-Koi/July_Boar.png" height="70">&nbsp;<img src="img/Koi-Koi/October_Deer.png" height="70">&nbsp;<img src="img/Koi-Koi/June_Butterflies.png" height="70"></td>
                        <td>6</td>
                    </tr>
                    <tr>
                        <td>Cherry blossom viewing</td>
                        <td><img src="img/Koi-Koi/September_Sake.png" height="70">&nbsp;<img src="img/Koi-Koi/March_Curtain.png" height="70"></td>
                        <td>5</td>
                    </tr>
                    <tr>
                        <td>Moon viewing</td>
                        <td><img src="img/Koi-Koi/September_Sake.png" height="70">&nbsp;<img src="img/Koi-Koi/August_Moon.png" height="70"></td>
                        <td>5</td>
                    </tr>
                </table>
                <p class="flavour-text">
                    In a 12-round game (not in this module) each round corresponds to a month (1 - January, 2 - February, etc.).
                    <br>
                    In these matches, collecting all 4 cards representing the current round's month counts as a 4 point yaku.
                </p>
            </div>
            <div class="page-footer relative-footer">5</div>
        </div>
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Koi-Koi</span>
            </div>
            <div class="page-content">
                <h3>Lucky Hands in real world Koi-Koi</h3>
                <p>
                    When dealing the cards in real world Koi-Koi, there are certain combinations known as Lucky Hands. These will never appear when playing this module.
                    <br>
                    These combinations are:
                </p>
                <ul>
                    <li>Having all 4 cards of any month</li>
                    <li>Having 2-2-2-2 cards of 4 different months</li>
                </ul>
                <p>Contrary to their name, these hands are disadvantageous, so the player holding them gets points instantly:</p>
                <ul>
                    <li>If only one of the players hold a Lucky Hand, they get 6 points and the round ends with them becoming the dealer for the next round.</li>
                    <li>If both players hold Lucky Hands, the round ends in a tie with the same player staying the dealer.</li>
                    <li>If the table is dealt a Lucky Hand, the cards are reshuffled and re-dealt by the dealer (the turn doesn't end).</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">6</div>
        </div>
    </div>
</body>
</html>
