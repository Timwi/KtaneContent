<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Bridges — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/math-utils.js"></script>
    <script>
        $(function() {
            let page = $(".page-bg-02 .page-content");
            let row = $("<div>").addClass("hstack").appendTo(page);
            const buttonText = ["▼", "▼", "↻"];
            const images = [ "biohazard", "boxes", "fire", "glass", "recycle", "snowflake", "thiswayup", "umbrella" ];
            let offset = 0;
            let cell = $("table.interactive")[0].getElementsByTagName("td");

            function offsetTable(c) {
                for (let c = 0; c < images.length; c++)
                    cell[c].innerHTML = `<img src="img/Bridges/${images[ UMod(images.length + offset + c, images.length) ]}M.png">`;
            }

            $("<button>").addClass("btn-l").text(buttonText[0]).appendTo(row).click(function() {
                offset += 1;
                offsetTable(offset);
            });
            $("<button>").addClass("btn-r").text(buttonText[1]).appendTo(row).click(function() {
                offset -= 1;
                offsetTable(offset);
            });
            $("<button>").text(buttonText[2]).appendTo(row).click(function() {
                offset = 0;
                offsetTable(offset);
            });
            offsetTable(offset);
        });
    </script>
    <style>
        .hstack {
            display: flex;
            flex-direction: row;
            align-items: center;
            justify-content: center;
        }
        button {
            font-weight: bold;
            height: 40px;
            width: 40px;
            font-size: 30px;
        }
        button.btn-l, button.btn-r {
            font-size: 25px;
            text-align: center;
        }
        button.btn-l { transform: rotateZ(90deg); }
        button.btn-r { transform: rotateZ(-90deg); }
        td img {
            width: 60px;
            height: 60px;
        }
        .dark td img { filter: invert(90%); }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Bridges</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Bridges.svg" class="diagram">
                <h2>On the Subject of Bridges</h2>
                <p class="flavour-text">London Bridge is falling down. Falling down, falling down...</p>

                <p>
                    You will be presented with a Hashiwokakero puzzle, sometimes known as "Bridges" in English. The goal is to connect all the circular "islands" with a series of "bridges". If the small LED at the top-right of the module is green, there is one unique solution. Otherwise, it is not guaranteed that there is one unique solution. This is just for your knowledge and will not affect the solving process.
                </p>
                <h4>Building Bridges</h4>
                <p>To build a bridge between two islands, simply click on the two islands you wish to connect. If there is no existing connection, one will be added. If there is an existing single connection, a double connection will be placed. If there is an existing double connection, it will be removed.</p>

                <h4>The Rules for the Bridges</h4>
                <ul>
                    <li>They must begin and end at distinct islands, travelling a straight line in between.</li>
                    <li><em>They must not cross any other bridges or islands.</em></li>
                    <li><em>They may only run orthogonally (i.e. they may not run diagonally).</em></li>
                    <li>At most two bridges connect a pair of islands.</li>
                    <li>The number of bridges connected to each island must match the number on that island.*</li>
                    <li>The bridges must connect the islands into a single connected group (i.e. someone placed on any island must be able to reach any other island simply by traveling across the bridges).</li>
                </ul>
                <p>Attempting to break either of the underlined rules above will result in a strike. The bridge or island that got in the way of the attempted bridge placement will flash red. Or, if the second island is not in line with the first, it and the originally selected island will flash red.</p>
                <p>*Use the table on the following page to convert the symbols on the module into numbers.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Bridges</span>
            </div>
            <div class="page-content">
                <h4>Submission</h4>
                <p>Use the large check-marked button to attempt to submit your solution. If all islands have the correct number of bridge connections and all islands are part of a single connected group, the module will be solved. If all islands have the correct number of connections but not all islands are connected as a single group, all islands will flash yellow but a strike will not be given. Otherwise, a strike will be given and the modules with the incorrect number of connections will briefly flash red.</p>
                <h4>Deciphering the Symbols</h4>
                <p>The table below associates every possible symbol on the module with the number of connections it represents. Shift the row of images to the left (wrapping around from 1 to 8) by the sum total of batteries on the bomb and islands on the module, all taken modulo 8.</p>
                <br>
                <table class="interactive">
                    <tr><th>1</th><th>2</th><th>3</th><th>4</th><th>5</th><th>6</th><th>7</th><th>8</th></tr>
                    <tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
                </table>
                <div class="buttons"></div>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>