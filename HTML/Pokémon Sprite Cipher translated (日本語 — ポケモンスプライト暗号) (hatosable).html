<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ポケモンスプライト暗号 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        table {
            margin: 1em auto;
        }
        table.binary-table {
            float: right;
            margin: 0 0 .5cm .5cm;
            clear: both;
        }
            table.binary-table td, table.binary-table th {
                padding: .1em .5em 0 .5em;
            }

        table.alph {
            border: none;
        }
        table.alph td {
            padding: 0;
            width:  10px;
            height: 10px;
        }
        table.alph td.b {
            background: black;
        }
        table.alph td.w {
            background: white;
        }
        table.alph td.s {
            border: none;
            width: 15px;
        }
        table.alph td.l {
            border: none;
            text-align: center;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ポケモンスプライト暗号</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Pokémon Sprite Cipher.svg" class="diagram">

                <table class='binary-table'>
                    <tr><th>A</th><td>00000</td></tr>
                    <tr><th>B</th><td>00001</td></tr>
                    <tr><th>C</th><td>00010</td></tr>
                    <tr><th>D</th><td>00011</td></tr>
                    <tr><th>E</th><td>00100</td></tr>
                    <tr><th>F</th><td>00101</td></tr>
                    <tr><th>G</th><td>00110</td></tr>
                    <tr><th>H</th><td>00111</td></tr>
                    <tr><th>I</th><td>01000</td></tr>
                    <tr><th>J</th><td>01001</td></tr>
                    <tr><th>K</th><td>01010</td></tr>
                    <tr><th>L</th><td>01011</td></tr>
                    <tr><th>M</th><td>01100</td></tr>
                    <tr><th>N</th><td>01101</td></tr>
                    <tr><th>O</th><td>01110</td></tr>
                    <tr><th>P</th><td>01111</td></tr>
                    <tr><th>Q</th><td>10000</td></tr>
                    <tr><th>R</th><td>10001</td></tr>
                    <tr><th>S</th><td>10010</td></tr>
                    <tr><th>T</th><td>10011</td></tr>
                    <tr><th>U</th><td>1010</td></tr>
                    <tr><th>V</th><td>1011</td></tr>
                    <tr><th>W</th><td>1100</td></tr>
                    <tr><th>X</th><td>1101</td></tr>
                    <tr><th>Y</th><td>1110</td></tr>
                    <tr><th>Z</th><td>1111</td></tr>
                </table>

                <h2>モジュール詳細：ポケモンスプライト暗号</h2>
                <p class="flavour-text">ニンテンドーゲームボーイのメモリは極端に少ないからね。</p>
                <p>モジュールは、3つのディスプレー、キーボード、2つの矢印、及び現在のページを表示するボタン(送信ボタン)で構成されている。</p>
                <p>右の矢印を押すと、次のページに移動できる。左の矢印を押すと前のページに移動できる。ページは全部で2ページある。</p>
                <p>モジュールを解除するには、以下の5ステップに従って単語を復号する。復号された単語を取得したら、キーボードを使用して入力する。入力を開始すると、ディスプレーが空白になり、下のディスプレーに現在入力されている内容が表示される。</p>
                <p>入力を消去するには、いずれかの矢印をクリックする。</p>
                <p>入力に問題がなければ、「SUB」と書かれたボタンを押して、回答を送信する。</p>

                <h3>ステップ1：暗号化二進数復元</h3>
                <p>このステップでは、1ページ目の上、真ん中、下のディスプレーと2ページ目の上のディスプレーの英字を使用する。この順番で連結し、各文字を右表のバイナリコードに置き換えて、このエンコード文字列を二進数に変換する。</p>

                <h3>ステップ2：ランレングス圧縮復号</h3>
                <p>最初に、1桁目を削除する。そのビットが1の場合は<em>通常</em>モードから開始し、そうでない場合、<em>RLE</em>モードから開始する。その後は、2つのモードを交互に繰り返す。</p>
                <p><em>通常モード：</em>ビットのペアを、 00 のペアに到達するまで読む。これらのビットはそのままにし、00のペアを削除する。</p>
                <p><em>RLEモード：</em><var>n</var>を現在の位置から数えた連続する1のビットの個数に1を加えた数とする(現在の位置が0の場合、<var>n</var> = 1とすることに注意)。現在の位置から<var>n</var>ビット(0が1つ、残りすべてのビットが1になる)分を二進数として読み、そこから続いて<var>n</var>ビットを読んで別の二進数を取得する。2つの二進数を合計する。1を足す。2を乗算する。その後、先程の2<var>n</var>ビットを、求めた数と同じ個数分の0のビットに変更する。</p>
            </div>
            <div class="page-footer relative-footer">ページ 1/2</div>
        </div>

        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ポケモンスプライト暗号</span>
            </div>
            <div class="page-content">
                <h3>ステップ3：ビットマップ復元</h3>
                <p>ステップ2で得られたビット文字列から最後のビットを取り除く。残りのビット列は、幅と高さが素数のモノクロ・ビットマップである。ビットマップの幅は、取り除いたビットが1であれば大きい方の素数になり、そうでなければ小さい方の素数になる。ビット文字列は読み順で配置され、ビットが1のマスのみ出力が行われている。</p>

                <h3>ステップ4: XOR変換</h3>
                <p>この変換は、ビットマップの各ピクセルの段にそれぞれ適用される。</p>
                <ul>
                    <li>最初のビットは、そのままにする。</li>
                    <li>その後のビットは、現在のビットと直前のビットとのXOR演算の結果にする必要がある。直前のビットは、変換後の<em>新しい</em>値を使用するようにすること。</li>
                </ul>

                <h3>ステップ5：回答の導出</h3>
                <p>答えの単語は、以下のいずれかの方法で最終的なビットマップ内に表現されている。</p>
                <ul>
                    <li>垂直<a href="./Morse Code translated (日本語 — モールス信号).html">モールス信号</a>：各列のピクセルは、上から下に読むと1文字を形成している。ドットは1マス、ダッシュは3マス、記号と記号の間は1マスである。</li>
                    <li><a href="./Pigpen Rotations translated (日本語 — ピッグペン暗号) (alpha8404).html">ピッグペン暗号</a>：各3×3領域のボックスは、ピッグペン暗号で記された文字になっている。ボックスの中央のマスは点の有無、出力がある部分は壁の位置を示している。S-Zの場合、すべての角と開いている方向以外のマスに出力が行われる。</li>
                    <li><a href="./Semaphore translated (日本語 — セマフォア信号) (tchen).html">セマフォア信号</a>：各3×3領域のボックスは、中央のマスが常に出力され、残り2つのマスがセマフォア信号の旗の位置を示している。</li>
                    <li><a href="./Braille translated (日本語 — 点字) (hatosable).html">統一英語点字</a>：各2×3領域のボックスは、点字の文字を示している。</li>
                    <li>アルファベット：メッセージは、以下の高さ4ピクセルのフォントを使用して、そのまま読み順に記述されている(メッセージ内では、文字同士のスペースはない)。</li>
                </ul>
                <table class='alph'>
                    <tr>
                        <td class='b'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td>
                        <td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='w'></td><td class='b'></td><td class='s' rowspan='4'></td>
                        <td class='b'></td><td class='b'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='b'></td><td class='s' rowspan='4'></td><td class='b'></td>
                        <td class='b'></td><td class='s' rowspan='4'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='b'></td>
                        <td class='s' rowspan='4'></td><td class='w'></td><td class='b'></td><td class='s' rowspan='4'></td><td class='b'></td><td class='w'></td><td class='w'></td>
                        <td class='s' rowspan='4'></td><td class='b'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='w'></td><td class='w'></td>
                        <td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='w'></td><td class='w'></td>
                    </tr>
                    <tr>
                        <td class='w'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='w'></td><td class='w'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td></tr>
                    <tr>
                        <td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td>
                        <td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='b'></td>
                        <td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td>
                    </tr>
                    <tr><td class='b'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td>
                    </tr>
                    <tr>
                        <td class='l' colspan='2'>a</td><td class='s'></td>
                        <td class='l' colspan='3'>b</td><td class='s'></td>
                        <td class='l' colspan='2'>c</td><td class='s'></td>
                        <td class='l' colspan='3'>d</td><td class='s'></td>
                        <td class='l' colspan='2'>e</td><td class='s'></td>
                        <td class='l' colspan='2'>f</td><td class='s'></td>
                        <td class='l' colspan='2'>g</td><td class='s'></td>
                        <td class='l' colspan='3'>h</td><td class='s'></td>
                        <td class='l' colspan='1'>i</td><td class='s'></td>
                        <td class='l' colspan='2'>j</td><td class='s'></td>
                        <td class='l' colspan='3'>k</td><td class='s'></td>
                        <td class='l' colspan='2'>l</td><td class='s'></td>
                        <td class='l' colspan='5'>m</td><td class='s'></td>
                        <td class='l' colspan='3'>n</td>
                    </tr>
                </table>
                <table class='alph'>
                    <tr>
                        <td class='w'></td><td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='b'></td><td class='b'></td><td class='w'></td>
                        <td class='s' rowspan='4'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='s' rowspan='4'></td><td class='w'></td>
                        <td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='b'></td><td class='s' rowspan='4'></td><td class='b'></td>
                        <td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td>
                        <td class='w'></td><td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='w'></td><td class='w'></td>
                        <td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td><td class='w'></td><td class='w'></td><td class='w'></td><td class='s' rowspan='4'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td><td class='s' rowspan='4'></td><td class='b'></td><td class='b'></td>
                    </tr>
                    <tr>
                        <td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='b'></td>
                        <td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='w'></td>
                        <td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td>
                        <td class='w'></td><td class='b'></td>
                    </tr>
                    <tr>
                        <td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='b'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td>
                        <td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td>
                        <td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='w'></td><td class='b'></td>
                        <td class='b'></td><td class='w'></td>
                    </tr>
                    <tr>
                        <td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='w'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='w'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='w'></td><td class='b'></td><td class='w'></td><td class='b'></td><td class='b'></td><td class='b'></td><td class='w'></td>
                        <td class='b'></td><td class='b'></td>
                    </tr>
                    <tr>
                        <td class='l' colspan='3'>o</td><td class='s'></td>
                        <td class='l' colspan='3'>p</td><td class='s'></td>
                        <td class='l' colspan='3'>q</td><td class='s'></td>
                        <td class='l' colspan='2'>r</td><td class='s'></td>
                        <td class='l' colspan='2'>s</td><td class='s'></td>
                        <td class='l' colspan='2'>t</td><td class='s'></td>
                        <td class='l' colspan='3'>u</td><td class='s'></td>
                        <td class='l' colspan='3'>v</td><td class='s'></td>
                        <td class='l' colspan='5'>w</td><td class='s'></td>
                        <td class='l' colspan='3'>x</td><td class='s'></td>
                        <td class='l' colspan='3'>y</td><td class='s'></td>
                        <td class='l' colspan='2'>z</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 2/2</div>
        </div>
    </div>
</body>
</html>