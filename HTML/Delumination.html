<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Delumination — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .dark table, table {
            margin: 1em auto;
            border: none; 
            text-align: center;
        }
        
        .dark .hide, .hide {
            border-right: hidden;
        }
        
        .hide-top {
            border-top: hidden;
        }

        tr {
            height: 38px;
        }
        
        .digit {
            width: 25%;
        }
    </style>
    <script>
        function setDefaultRules(rnd){
            var mainTable = document.getElementById("mainTable").children[0];
            var colors = [ "R K G B W Y", "B Y K G R W", "G R K Y B W", "W B R G Y K", "B R Y W K G", "K W G Y B R", "W R K G Y B", "G W Y K R B", "Y G R K W B", "W K B G R Y", "G K Y B R W", "R Y B K G W", "W Y K G B R", "Y B G R W K", "B K Y R G W", "K Y W B R G", "K B R G Y W", "R K W Y B G", "Y W R B K G", "G R W B K Y" ];
            for(var i = 2; i < 7; i++){
                for(var j = 1; j < 5; j++){
                    mainTable.children[i].children[j].innerHTML = "<b>"+colors[(i-2)*4 + (j-1)]+"</b>";
                }
            }
            
            var orderExtended= ["YELLOW", "BLACK",  "GREEN", "BLUE", "WHITE"];
            
            document.getElementsByClassName("color")[0].innerHTML = orderExtended[0];
            for(var i = 1; i < 5; i++){
                document.getElementsByClassName("color")[i].innerHTML = orderExtended[i-1];
            }
        }
        function setRules(rnd){
            var mainTable = document.getElementById("mainTable").children[0];
            var order = ["R", "B", "G", "W", "K", "Y"];
            var names = ["RED", "BLUE", "GREEN", "WHITE", "BLACK", "YELLOW"];
            var orderExtended = [5, 4, 2, 1, 3];
            rnd.shuffleFisherYates(orderExtended);
            
            for(var i = 2; i < 7; i++){
                for(var j = 1; j < 5; j++){
                   rnd.shuffleFisherYates(order);
                   mainTable.children[i].children[j].innerHTML = "<b>"+order.join(" ")+"</b>";
                }
            }
            
            document.getElementsByClassName("color")[0].innerHTML = names[orderExtended[0]];
            for(var i = 1; i < 5; i++){
                document.getElementsByClassName("color")[i].innerHTML = names[orderExtended[i-1]];
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Delumination</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Delumination.svg" class="diagram">
                <h2>On the Subject of Delumination</h2>
                <p class="flavour-text">Either way, it's lights out.</p>                
                <ul>
                    <li>You must switch all the LEDs ON in the proper order,<br>
                        then OFF in the proper order.</li>
                    <li>Switches flip ON / OFF the LEDs directly above them.</li>
                    <li>Flip switches ON based only on colors & positions of the switches, ignoring the colors of the LED components.<br>
                        Flip LEDs OFF based only on colors & positions of the LEDs,<br>
                        ignoring the colors of the switch components.</li>
                    <li>Use the table below to determine the order to flip the switches.</li>
                    <li>If the <b>RED</b> component is next to a <b class="color">YELLOW</b> component,<br>
                        use the position of the <b class="color">YELLOW</b> component in the table below instead.</li>
                    <li>If the <b>RED</b> component is next to a <b class="color">BLACK</b> component,<br>
                        use the lowest digit of the serial number in the table below instead.</li>
                    <li>If there is no <b class="color">GREEN</b> component, order components left to right,<br>
                        otherwise, order them right to left.</li>
                    <li>If there is no <b class="color">BLUE</b> component, always flip ON the RED switch last,<br>
                        and always flip OFF the RED LED first.</li>
                    <li>If there is no vowel in the serial number, reverse the order given below.</li>
                    <li>Treat an LED that remains off when switched as <b>BLACK</b>.<br>
                        Treat a <b>BLACK</b> LED as OFF; do not flip it's switch again.</li>
                </ul>
                <h3>Switch Order</h3>
                Flip the switches on, and the LEDs off, in the given order.<br>
                B = BLUE, G = GREEN, K = BLACK, R = RED, W = WHITE, Y = YELLOW.
                <table id="mainTable">
                    <tr>
                        <td rowspan=2 class="digit">Highest Digit in Serial Number</td>
                        <td colspan=4>Position of the RED component</td>
                    </tr>
                    <tr class="hide-top">
                        <td class="hide">1st</td>
                        <td class="hide">2nd</td>
                        <td class="hide">3rd</td>
                        <td>4th</td>
                    </tr>
                    <tr>
                        <td>0-3</td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                    </tr>
                    <tr>
                        <td>4-6</td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                    </tr>
                    <tr>
                        <td>7  </td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                    </tr>
                    <tr>
                        <td>8  </td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                    </tr>
                    <tr>
                        <td>9  </td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                        <td><b></b></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>