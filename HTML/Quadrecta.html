<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Quadrecta â€” Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .dark table, table {
            width: 100%;
            margin: auto;
            border: none;
        }
        
        .main {
            width: 25%;
            text-align: center;
            border-top: hidden;
        }
        
        .dark .secondary, .secondary {
            width: 12%;
            text-align: center;
            border-top: hidden;
        }
        
        .dark .hide, .hide {
            border-left: hidden;
            border-right: hidden;
        }
        
        tr {
            text-align: center;
            line-height: 25px;
        }
        
        .colours {
            line-height: 30px;
        }
        
        .colours td:first-child {
            width: 30%;
        }
    </style>
    <script>
        function setDefaultRules(rnd){
            var wordsRuleSeed1 = ["Okay", "Wait", "What", "Now", "When", "Stop", "Where"];
            var indices = [
                [2,3,5,1,4,6],
                [3,4,6,2,5,0],
                [4,5,0,3,6,1],
                [5,6,1,4,0,2],
                [6,0,2,5,1,3],
                [0,1,3,6,2,4],
                [1,2,4,0,3,5]
            ];
            var releaseNumbers = [
                ["4", "7", "1", "8", "3", "2", "5"],
                ["9", "5", "3", "6", "1", "4", "8"],
                ["3", "8", "2", "5", "7", "9", "6"]
            ];
            var firstTable = document.getElementById("firstTable").children[0];
            var secondTable = document.getElementById("secondTable").children[0];
            for(var i = 0; i < 7; i++){
                firstTable.children[i+2].children[0].innerText = wordsRuleSeed1[i];
                secondTable.children[1].children[i].innerText = wordsRuleSeed1[i];
                firstTable.children[i+2].children[1].innerText = wordsRuleSeed1[indices[i][0]]+" or "+wordsRuleSeed1[indices[i][1]];
                firstTable.children[i+2].children[2].innerText = wordsRuleSeed1[indices[i][2]]+" or "+wordsRuleSeed1[indices[i][3]];
                firstTable.children[i+2].children[3].innerText = wordsRuleSeed1[indices[i][4]]+" or "+wordsRuleSeed1[indices[i][5]];
            }
            for(var i = 2; i < 5; i++){
                for(var j = 1; j < 8; j++){
                    secondTable.children[i].children[j].innerHTML = "<b>"+releaseNumbers[i - 2][j - 1]+"</b>";
                }
            }
        }
        function setRules(rnd){
            var words = ["Okay", "Wait", "What", "Now", "When", "Stop", "Where", "Again", "Blank", "Repeat"];
            var indices = [
                [2,3,5,1,4,6],
                [3,4,6,2,5,0],
                [4,5,0,3,6,1],
                [5,6,1,4,0,2],
                [6,0,2,5,1,3],
                [0,1,3,6,2,4],
                [1,2,4,0,3,5]
            ];
            rnd.shuffleFisherYates(words);
            var firstTable = document.getElementById("firstTable").children[0];
            var secondTable = document.getElementById("secondTable").children[0];
            for(var i = 0; i < 7; i++){
                firstTable.children[i+2].children[0].innerText = words[i];
                secondTable.children[1].children[i].innerText = words[i];
                firstTable.children[i+2].children[1].innerText = words[indices[i][0]]+" or "+words[indices[i][1]];
                firstTable.children[i+2].children[2].innerText = words[indices[i][2]]+" or "+words[indices[i][3]];
                firstTable.children[i+2].children[3].innerText = words[indices[i][4]]+" or "+words[indices[i][5]];
            }
            for(var i = 2; i < 5; i++){
                for(var j = 1; j < 8; j++){
                    secondTable.children[i].children[j].innerHTML = "<b>"+rnd.next(0, 10)+"</b>";
                }
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Quadrecta</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Quadrecta.svg" class="diagram">
                <h2>On the Subject of Quadrecta</h2>
                <p class="flavour-text">If there's supposed to be a pattern here, I don't see it.</p>
                <ul>
                    <li>You must press each button and release it at the proper time.</li>
                    <li>The buttons may be pressed in any order, and will illuminate the LED in the center while held.</li>
                    <li>While holding a button, use the first table to find which <strong>Related Word</strong> is currently also present on the module.</li>
                    <li>Use the second table to determine when to release the button, based on the <b>Related Word</b> and the color of the LED.</li>
                </ul>
                <div>
                    <h3>Related Word</h3>
                    Use the table below to find which <b>Related Word</b> is present on another button.
                    <table id="firstTable">
                        <tr>
                            <td rowspan=2>Held Word</td>
                            <td colspan=3 style="border-bottom:hidden">LED Color</td>
                        </tr>
                        <tr>
                            <td class="main">RED</td>
                            <td class="main hide">BLUE</td>
                            <td class="main">GREEN</td>
                        </tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                        <tr><td></td><td></td><td></td><td></td></tr>
                    </table>
                </div>
                <div>
                    <h3>Releasing the Button</h3>
                    Release the button when the given number is anywhere in the countdown timer. 
                    <table id="secondTable">
                        <tr class="colours">
                            <td rowspan=2>LED Color</td>
                            <td colspan=7>Related Word</td>
                        </tr>
                        <tr>
                            <td class="secondary">Okay</td>
                            <td class="secondary hide">Wait</td>
                            <td class="secondary hide">What</td>
                            <td class="secondary hide">Now</td>
                            <td class="secondary hide">When</td>
                            <td class="secondary hide">Stop</td>
                            <td class="secondary">Where</td>
                        </tr>
                        <tr class="colours">
                            <td>Red</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr class="colours">
                            <td>Blue</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr class="colours">
                            <td>Green</td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>
