<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>マフィア — Keep Talking and Nobody Explodes Mod</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
 td {
            font-size: 14px;
        }

        table.interactive, table.interactive td {
            border: none;
        }

        table.interactive input {
            display: inline;
        }

        .person input[type="text"] {
            width: 4em;
        }

        div.person {
            display: flex;
            column-gap: 5px;
        }

        .striked {
            text-decoration: line-through;
        }

        .person span {
            line-height: 2;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">マフィア</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Mafia.svg" class="diagram">
                <h2>モジュール詳細：マフィア</h2>
                <p class="flavour-text">ボスはアイツだ、マフィアはあの女だ、だからアイツらをみんな殺して救ってやってくれよ。俺は無実なんだ！……。ぎゃあああああ！！</p>
                <p>このモジュールには、絞首台の周りに座る八人の人物がいる。あなたの仕事はゴッドファーザー(ボス)を推理し、その人物を処刑することである。以下の指示に従い、ゴッドファーザーを見つける。</p>
                <ul>
                    <li>英字をアルファベット上の位置の数字(A=1, B=2など)に変換し、全てのシリアルナンバーの値を取得し、それらの合計を求める。</li>
                    <li>以下の表で求めた数の段に含まれる名前から始める。それからモジュール上に表示されている名前に到達するまで下に進めていく。#50を通り過ぎる場合、#1に戻る。</li>
                    <li>前のステップで到達した名前の人物を消去し、シリアルナンバーの最後の数字と同じ回数分人物を飛ばす。その後に一つ進んで到達した人物を除外する。インジケーターが二つより少ない場合は時計回りに、そうでない場合は反時計回りに移動する。</li>
                    <li>除外した人をスキップしながら、残り一人になるまで一つ上のルールを進める。</li>
                    <li>残った人物の表に残っている名前を探し、その人物の「無罪の条件」を参照する。条件を満たしていない場合、その人物はゴッドファーザーであり、処刑されるべきである。もしその人物が無実だと判断された場合、「それ以外」の欄で紹介されている人物を処刑する。</li>
                </ul>
                <h3>人物メモ欄</h3>
                <table class="interactive">
                    <tr>
                        <td></td>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                        <td></td>
                        <td></td>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                    </tr>
                    <tr>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                        <td></td>
                        <td></td>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                        <td><div class="person"><input type="text"><input type="checkbox"><span>(?)</span></div></td>
                        <td></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 1/4</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">マフィア</span>
            </div>
            <div class="page-content">
                <p>
                    *FRP = 最初に除外された人物<br>
                    *LRP = 最後に除外された人物<br>
                    *SSN = 隣人(モジュールで同じ側に座っている人物。上下左右に二人ずついる)
                </p>
                <table style="text-align: center;">
                    <tr>
                        <th>#</th>
                        <th>名前</th>
                        <th>無罪/ゴッドファーザーの条件</th>
                        <th>そうでなければ、ゴッドファーザーは…</th>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td>Rob</td>
                        <td>シリアルナンバーに母音が含まれている場合、無罪である。</td>
                        <td>Robから時計回りに進んだ人物。</td>
                    <tr>
                        <td>2</td>
                        <td>Tim</td>
                        <td>「友情(Friendship)」、「オンリーコネクト(Only Connect)」、 「海戦ゲーム(Battleship)」、「ビー玉転がし(Marble Tumble)」のいずれかが存在する場合、無罪である。</td>
                        <td>FRP。</td>
                    <tr>
                        <td>3</td>
                        <td>Mary</td>
                        <td>BobもしくはWalterもしくはCherが存在する場合、無罪である。</td>
                        <td>上側のペアで左にいる人物。<br>それがMaryの場合は、SSN。</td>
                    <tr>
                        <td>4</td>
                        <td>Briane</td>
                        <td>2ファクタもしくは点灯したCARインジケーターが存在する場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>5</td>
                        <td>Hunter</td>
                        <td>バッテリーよりポートが多い場合、無罪である。</td>
                        <td>Rick。もしもRickが存在しない場合、四番目に除外された人物。</td>
                    <tr>
                        <td>6</td>
                        <td>Macy</td>
                        <td>Tommyが存在している場合、無罪である。</td>
                        <td>Tommy。</td>
                    <tr>
                        <td>7</td>
                        <td>John</td>
                        <td>モジュールに「J」から始まる人物がJohnのみの場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>8</td>
                        <td>Will</td>
                        <td>PS/2ポートもしくはDVIポートがありシリアルナンバーに少なくとも一つ偶数がある場合、無罪である。</td>
                        <td>5番目に除外された人物。</td>
                    <tr>
                        <td>9</td>
                        <td>Lacy</td>
                        <td>「ブール論理ベン図(Boolean Venn Diagram)」、「ビット演算子(Bitwise Operations)」、もしくは名前に「論理(Logic)」が含まれているモジュールがある場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>10</td>
                        <td>Claire</td>
                        <td>モジュール数が20未満の場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>11</td>
                        <td>Kenny</td>
                        <td>点灯していないインジケーターが存在し<em>ない</em>場合、無罪である。</td>
                        <td>FRPから時計回りに進んだ人物(Kennyをスキップする)。</td>
                    <tr>
                        <td>12</td>
                        <td>Rick</td>
                        <td>空のポートプレートが存在する場合、無罪である。</td>
                        <td>Rickから反時計回りに進んだ人物。</td>
                    <tr>
                        <td>13</td>
                        <td>Walter</td>
                        <td>シリアルナンバーにWalterの名前の文字のいずれかが含まれている場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>14</td>
                        <td>Bonnie</td>
                        <td>「B」から始まる別の人物が存在する場合、無罪である。</td>
                        <td>Bonnieから時計回りに進んだ「B」から始まる人物。</td>
                    <tr>
                        <td>15</td>
                        <td>Luke</td>
                        <td>常に無罪である。</td>
                        <td>最も番号が小さい人物(Lukeを除く)。</td>
                    <tr>
                        <td>16</td>
                        <td>Bill</td>
                        <td>シリアルナンバーの最後の数字が素数または0である場合、無罪である。</td>
                        <td>最も番号が大きい人物(Billを除く)。</td>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 2/4</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">マフィア</span>
            </div>
            <div class="page-content">
                <table style="text-align: center;">
                    <tr>
                        <th>#</th>
                        <th>名前</th>
                        <th>無罪/ゴッドファーザーの条件</th>
                        <th>そうでなければ、ゴッドファーザーは…</th>
                    </tr>
                    <tr>
                        <td>17</td>
                        <td>Sarah</td>
                        <td>colored indicator*もしくはHDMIポートがある場合、もしくは「S」「H」「3」のいずれかがシリアルナンバーに含まれる場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>18</td>
                        <td>Larry</td>
                        <td>Larryは色覚に異常がある。名前に「色(Color)」が含まれているモジュールが存在<em>しない</em>場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>19</td>
                        <td>Kate</td>
                        <td>シリアルナンバーに「L」「O」「S」「T」 のいずれかが含まれている、もしくは「スワン(The Swan)」が存在している場合、無罪である。</td>
                        <td>John。Johnが存在しない場合はSSN。</td>
                    <tr>
                        <td>20</td>
                        <td>Stacy</td>
                        <td>開始分数よりモジュール数が少ない場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>21</td>
                        <td>Diane</td>
                        <td>VGAポートもしくはUSBポート,もしくは「ザ・ネジ(The Screw)」が存在する場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>22</td>
                        <td>Mac</td>
                        <td>パラレルポートとシリアルポートが同じポートプレート上にある場合、無罪である。</td>
                        <td>6番目に除外された人物。</td>
                    <tr>
                        <td>23</td>
                        <td>Jim</td>
                        <td>Jimはミュージシャンである。「コードクオリティー(Chord Qualities)」,「リズム(Rhythms)」,もしくは名前に「鍵盤(Piano Keys)」,「ジュークボックス(Jukebox)」もしくは「ギター・コード(Guitar Chords)」が含まれるモジュールがある場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>24</td>
                        <td>Clyde</td>
                        <td>Bonnieが存在している場合、無罪である。</td>
                        <td>Bonnie</td>
                    <tr>
                        <td>25</td>
                        <td>Tommy</td>
                        <td>バッテリーとポートが<em>どちらも無い</em>場合、無罪である。</td>
                        <td>4番目に除外された人物。</td>
                    <tr>
                        <td>26</td>
                        <td>Lenny</td>
                        <td>SSNの名前がちょうど3文字で<em>ない</em>場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>27</td>
                        <td>Molly</td>
                        <td>「マフィア(Mafia)」を除く名前が「M」もしくは「The M」から始まるモジュールが<em>ない</em>場合、無罪である。</td>
                        <td>Mollyから時計回りに進んだ人物。</td>
                    <tr>
                        <td>28</td>
                        <td>Benny</td>
                        <td>Hunter、Cher、NickのいずれかがFRPではない場合、無罪である。</td>
                        <td>Bennyから時計回りに進んだ三番目の人物。</td>
                    <tr>
                        <td>29</td>
                        <td>Phil</td>
                        <td>下側のペアの右にいない場合、無罪である。</td>
                        <td>下側のペアで右にいる人物。</td>
                    <tr>
                        <td>30</td>
                        <td>Bob</td>
                        <td>「ランドリー(Laundry)」、「モールス迷路(Morse-A-Maze)」、「ビッグサークル(Big Circle)」、「絵画(Painting)」,「医学博士(Dr. Doctor)」、「コード(The Code)」、BOBインジケーターのいずれかが存在する場合、無罪である。<br><strong>Bob、ありがとう!</strong></td>
                        <td>3番目に除外された人物。</td>
                    <tr>
                        <td>31</td>
                        <td>Gary</td>
                        <td>Garyは怠け者で、食べることが好きだ。「安勘定(Cheap Checkout)、「アイスクリーム(Ice Cream)」、「料理(Cooking)」のいずれかが存在する場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>32</td>
                        <td>Ted</td>
                        <td>Tedは宇宙飛行士である。「ブラックホール(Black Hole)」、「太陽(The Sun)」、「月(The Moon)」「光速(Lightspeed)」、「占星術(Astrology)」のいずれかが存在する場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>33</td>
                        <td>Kim</td>
                        <td>FRPの番号が25以下の場合、無罪である。</td>
                        <td>FRP。</td>
                </table>
                * 「Multiple Widget」を使用可能にすると登場する場合がある。
            </div>
            <div class="page-footer relative-footer">ページ 3/4</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">マフィア</span>
            </div>
            <div class="page-content">
                <table style="text-align: center;">
                    <tr>
                        <th>#</th>
                        <th>名前</th>
                        <th>無罪/ゴッドファーザーの条件</th>
                        <th>そうでなければ、ゴッドファーザーは…</th>
                    </tr>
                    <tr>
                        <td>34</td>
                        <td>Nate</td>
                        <td>点灯していないインジケーターよりも点灯したインジケーターが多い場合、無罪である。</td>
                        <td>Nateから時計回りに進んだ人物。</td>
                    <tr>
                        <td>35</td>
                        <td>Cher</td>
                        <td>特殊モジュールが存在<em>せず</em>、ポートが一つ以上ある場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>36</td>
                        <td>Ron</td>
                        <td>シリアルナンバーの文字と共通の文字があるインジケーターが存在する場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>37</td>
                        <td>Thomas</td>
                        <td>Thomasは迷路で迷うことが好きではない。名前に「迷路(maze)」が含まれるモジュールが<em>無い</em>場合、無罪である。</td>
                        <td>Thomasから反時計回りに進んだ二番目の人物。</td>
                    <tr>
                        <td>38</td>
                        <td>Sam</td>
                        <td>「クリエーション(Creation)」、「ゲームパッド(The Gamepad)」、「マインスイーパー(Minesweeper)」、「歪曲スロット(Skewed Slots)」のいずれかが存在する場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>39</td>
                        <td>Duke</td>
                        <td>LRPの番号が25より大きい場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>40</td>
                        <td>Jack</td>
                        <td>SSNの名前が4文字の場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>41</td>
                        <td>Ed</td>
                        <td>「グリッドロック(Gridlock)」、「人事部(Human Resources)」、「レーザー(Lasers)」、名前に「ダブル・オー(Double-Oh)」が含まれるモジュールの合計がちょうど 1つの場合、無罪である。</td>
                        <td>2番目に除外された人物。</td>
                    <tr>
                        <td>42</td>
                        <td>Ronny</td>
                        <td>バニラモジュールが存在<em>しない</em>、もしくはポートが4つ以上存在する場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>43</td>
                        <td>Terry</td>
                        <td>3つ以上バッテリーが存在する場合、無罪である。</td>
                        <td>3番目に除外された人物。</td>
                    <tr>
                        <td>44</td>
                        <td>Claira</td>
                        <td>RJ-45ポート、ステレオRCAポート、PS/2ポートのいずれかが存在するポートプレートが少なくとも二つ存在する場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>45</td>
                        <td>Nick</td>
                        <td>「動物園(Zoo)」、「お絵描きロジック(Nonogram)」、「殺人(Murder)」「ダーツ(X01)」のいずれかが存在<em>しない</em>場合、無罪である。</td>
                        <td>SSN。</td>
                    <tr>
                        <td>46</td>
                        <td>Cob</td>
                        <td>Cobは恋に目覚めている。同じモジュールが二つ以上存在する場合、無罪である。</td>
                        <td> Cobから時計回りに進んだ、最も名前の長い最初の人物。</td>
                    <tr>
                        <td>47</td>
                        <td>Ash</td>
                        <td>「モンスプロード(Monsplode)」に関連するモジュールが存在する場合、無罪である。</td>
                        <td>LRP。</td>
                    <tr>
                        <td>48</td>
                        <td>Don</td>
                        <td><em>常に有罪である。</em></td>
                        <td>なし。</td>
                    <tr>
                        <td>49</td>
                        <td>Jerry</td>
                        <td>「時計(The Clock)」、「ルービッククロック(Rubik’s Clock)」,「ストップウォッチ(The Stopwatch)」,「タイムゾーン(Timezone)」、「タイムキーパー(The Time Keeper)」のいずれかが存在している場合、無罪である。</td>
                        <td>Jerryから反時計回りに進んだ人物。</td>
                    <tr>
                        <td>50</td>
                        <td>Simon</td>
                        <td>Simonは孤独を好む。「サイモン(Simon)」が含まれているモジュールが<em>ない</em>場合、無罪である。</td>
                        <td>SSN。</td>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 4/4</div>
        </div>
    </div>
    <script>
     let order = 0;
     let checkOrder = [];
     const nextIndex = [1, 3, 0, 5, 2, 7, 4, 6];
     const people = document.querySelectorAll("div.person");

     for (const [index, person] of people.entries()) {
         const name = person.querySelector("[type=\"text\"]");
         const checkbox = person.querySelector("[type=\"checkbox\"]");
         const number = person.querySelector("span");
         checkbox.addEventListener("input", () => {
             name.classList.toggle("striked", checkbox.checked);

             order += checkbox.checked ? 1 : -1;
             number.textContent = `(${checkbox.checked ? order : "?"})`;

             if (checkbox.checked)
             {
                 if (checkOrder.length !== 0)
                     checkOrder[checkOrder.length - 1].disabled = true;

                 checkOrder.push(checkbox);
             }
             else
             {
                 checkOrder.pop();

                 if (checkOrder.length !== 0)
                     checkOrder[checkOrder.length - 1].disabled = false;
             }
         });

         name.addEventListener("keydown", (event) => {
             if (event.key !== "Enter" && event.key !== "Tab")
                 return;

             people[nextIndex[index]].querySelector("[type=\"text\"]").focus();
             event.preventDefault();
         });

         name.value = "";
         checkbox.checked = false;
     }
 </script>
</body>
</html>
