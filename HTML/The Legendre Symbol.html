<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>The Legendre Symbol â€” Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        /* CSS code adapted from how Wikipedia uses CSS to display inline fractions. */
        .boxed {
            border: 0.1em solid;
            /* Special Elite already has some padding on the bottom */
            padding: 0.25em 0.25em 0 0.25em;
        }
        .case-conditions {
            text-align: left;
            margin-left: 1em;
        }
        .case-item {
            display: block;
            line-height: 1.1em;
        }
        .case-values {
            text-align: right;
        }
        .cases2 {
            font-size: 200%;
            margin-right: 0.05em;
        }
        .cases3 {
            font-size: 300%;
            margin-right: 0.05em;
        }
        .cases2-options {
            white-space: nowrap;
            display: inline-block;
            vertical-align: -0.15em;
        }
        .cases3-options {
            white-space: nowrap;
            display: inline-block;
            vertical-align: -0.45em;
        }
        .equation {
            white-space: nowrap;
        }
        .frac {
            white-space: nowrap;
            display: inline-block;
            vertical-align: -0.15em;
            font-size: 50%;
            text-align: center;
        }
        .frac-pure-legendre {
            vertical-align: -0.3em;
        }
        .fracnum {
            display: block;
            line-height: 1em;
            margin: 0 0.1em;
        }
        .fracden {
            display: block;
            line-height: 1em;
            margin: 0 0.1em;
            border-top: 0.1em solid;
        }
        .fracden-numeric-tight {
            padding-top: 0.1em;
        }
        .fracden-numeric {
            padding-top: 0.2em;
        }
        .legendre {
            font-size: 200%;
        }
        .nudge-up {
            vertical-align: 0.3em;
        }
        table.center {
            margin-left: auto;
            margin-right: auto;
        }
        .times-box {
            padding-left: 0.1em;
            padding-right: 0.1em;
        }
        .underneath {
            position: absolute;
            font-size: 10px;
            left: 50%;
            bottom: -20px;
            transform: translateX(-50%);
        }
        .underneath-container {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Legendre Symbol</span>
            </div>
            <div class="page-content">
                <img src="img/Component/The Legendre Symbol.svg" class="diagram">

                <h2>On the Subject of the Legendre Symbol</h2>

                <p class="flavour-text">For those of you who were afraid of fractions in grade school, be thankful you didn&rsquo;t have to deal with these.</p>

                <ul>
                    <li>Each display shows a whole number between 1 and 999.</li>
                    <li>The number on the top display is guaranteed to be less than the number on the bottom display.</li>
                    <li>The number on the bottom display is guaranteed to be a three-digit prime number.</li>
                    <li>To disarm this module, let q and m be the numbers on the top and bottom displays respectively.  If q is a quadratic residue modulo m, press the button labeled &ldquo;R.&rdquo;  Otherwise, press the button labeled &ldquo;N.&rdquo;</li>
                    <li>Pressing the wrong button will administer a strike and cause the numbers on the displays to change.</li>
                </ul>

                <h3>Useful Notes on Quadratic Residues</h3>

                <p>An integer q is said to be a <em>quadratic residue</em> modulo m if it is congruent to some perfect square modulo m, that is, if there exists some integer x such that x<sup>2</sup>&nbsp;&equiv;&nbsp;q&nbsp;(mod&nbsp;m).  If no such value exists, then q is said to be a <em>quadratic nonresidue</em> modulo m.</p>

                <p>For example, since perfect squares leave remainders of 0, 1, 4, 5, 6, and 9 when divided by 10, any number that also leaves one of these remainders when divided by 10 (including said remainders themselves) is a quadratic residue modulo 10.  Any other number is a quadratic nonresidue.</p>

                <p>In the special case where the modulus is an odd prime p, quadratic residuosity can be described using the <em>Legendre symbol</em>, defined as follows:</p>

                <p class="diagram-label equation">
                    <span class="nudge-up"><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span>
                    <span class="nudge-up">=</span></span>
                    <span class="cases3">{</span><span class="cases3-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span><span class="case-item">0</span></span><span class="cases3-options case-conditions"><span class="case-item">if q is a quadratic residue modulo p, but not a multiple of p</span><span class="case-item">if q is a quadratic nonresidue modulo p</span><span class="case-item">if q is a multiple of p</span>
                </p>

                <p>(The notion of a &ldquo;multiple&rdquo; in the above definition includes negative numbers and zero.  For example, 14, 49, 0, and -21 are all considered to be multiples of 7.)</p>

                <p>Note that the third case should never apply in the context of this module, since the Legendre symbol on the module is guaranteed to satisfy 0 &lt; q &lt; p.  The third case is only enumerated here for the sake of mathematical completeness.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Legendre Symbol</span>
            </div>
            <div class="page-content">
                <h3>Properties of the Legendre Symbol</h3>

                <p>The Legendre symbol has several interesting properties, including but not limited to the following:</p>

                <ol>
                    <li>
                        <p><strong>Periodicity.</strong>  Let p be an odd prime.  If a &equiv; b (mod p), then:</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">a</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">=</span>
                            <span class="legendre">(<span class="frac"><span class="fracnum">b</span><span class="fracden">p</span></span>)</span>
                        </p>
                    </li>
                    <li>
                        <p><strong>Total Multiplicativity.</strong>  Let p be an odd prime.  Then for all integers
                         a, b:</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">ab</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">=</span>
                            <span class="legendre">(<span class="frac"><span class="fracnum">a</span><span class="fracden">p</span></span>)</span><span class="legendre">(<span class="frac"><span class="fracnum">b</span><span class="fracden">p</span></span>)</span>
                        </p>
                        <p>This can also be extended to three or more factors, a fact easily proven by induction.</p>
                    </li>
                    <li>
                        <p><strong>Quadratic Reciprocity.</strong>  Let p and q be distinct odd primes.  Then:</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">p</span><span class="fracden">q</span></span>)</span><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">= (-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">p-1</span><span class="fracden fracden-numeric-tight">2</span></span>&centerdot;<span class="frac"><span class="fracnum">q-1</span><span class="fracden fracden-numeric-tight">2</span></span></sup> =</span>
                            <span class="cases2">{</span><span class="cases2-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span></span><span class="cases2-options case-conditions"><span class="case-item">if p &equiv; 1 (mod 4) or q &equiv; 1 (mod 4)</span><span class="case-item">if p &equiv; q &equiv; 3 (mod 4)</span>
                        </p>
                        <p>Since a Legendre symbol consisting of two distinct primes can only take on values of &pm;1 (a prime number can&rsquo;t be a multiple of a different prime), and since multiplying by &pm;1 is the same as dividing by &pm;1, this property can be rewritten as follows:</p>
                        <p class="diagram-label equation">
                            <span class="nudge-up">If p &equiv; 1 (mod 4) or q &equiv; 1 (mod 4), then </span><span class="legendre">(<span class="frac"><span class="fracnum">p</span><span class="fracden">q</span></span>)</span><span class="nudge-up"> = </span><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span><span class="nudge-up">.  Otherwise, </span><span class="legendre">(<span class="frac"><span class="fracnum">p</span><span class="fracden">q</span></span>)</span><span class="nudge-up"> = -</span><span class="legendre">(<span class="frac"><span class="fracnum">q</span><span class="fracden">p</span></span>)</span><span class="nudge-up">.</span>
                        </p>
                    </li>
                    <li>
                        <p><strong>First Supplement to Quadratic Reciprocity.</strong>  Let p be an odd prime.  Then:</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">-1</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">= (-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">p-1</span><span class="fracden fracden-numeric-tight">2</span></span></sup> =</span>
                            <span class="cases2">{</span><span class="cases2-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span></span><span class="cases2-options case-conditions"><span class="case-item">if p &equiv; 1 (mod 4)</span><span class="case-item">if p &equiv; 3 (mod 4)</span>
                        </p>
                    </li>
                    <li>
                        <p><strong>Second Supplement to Quadratic Reciprocity.</strong>  Let p be an odd prime.  Then:</p>
                        <p class="diagram-label equation">
                            <span class="legendre">(<span class="frac"><span class="fracnum">2</span><span class="fracden">p</span></span>)</span>
                            <span class="nudge-up">= (-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">p<sup>2</sup>-1</span><span class="fracden fracden-numeric-tight">8</span></span></sup> =</span>
                            <span class="cases2">{</span><span class="cases2-options case-values"><span class="case-item">+1</span><span class="case-item">-1</span></span><span class="cases2-options case-conditions"><span class="case-item">if p &equiv; 1 or 7 (mod 8)</span><span class="case-item">if p &equiv; 3 or 5 (mod 8)</span>
                        </p>
                    </li>
                </ol>
            </div>
            <div class="page-footer relative-footer">Page 2 of 3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">The Legendre Symbol</span>
            </div>
            <div class="page-content">
                <h3>Computing a Legendre Symbol&rsquo;s Value</h3>

                <p>By iteratively applying the properties on the previous page, it is possible to express the value of a Legendre symbol in terms of other Legendre symbols with smaller moduli.</p>

                <p>Eventually, these moduli will become small enough that the Legendre symbols&rsquo; values can be computed either by listing out the first few perfect squares and checking their remainders by hand (see the section below) or by recognizing a perfect square in a Legendre symbol&rsquo;s &ldquo;top&rdquo; argument, which automatically gives said Legendre symbol a value of +1 by definition.</p>

                <p>For example, here&rsquo;s one way to show that 14 is NOT a quadratic residue modulo 41.  New terms generated using one of the five rules above are marked accordingly:</p>
                <p class="diagram-label equation">
                    <span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">14</span><span class="fracden fracden-numeric">41</span></span>)</span>
                    <span class="nudge-up">=</span>
                    <span class="underneath-container"><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">2</span><span class="fracden fracden-numeric">41</span></span>)</span><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">7</span><span class="fracden fracden-numeric">41</span></span>)</span><span class="underneath">(rule 2)</span></span>
                    <span class="nudge-up">= <span class="underneath-container">(-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">41<sup>2</sup>-1</span><span class="fracden fracden-numeric">8</span></span></sup><span class="underneath">(rule 5)</span></span><span class="times-box">&centerdot;</span></span><span class="underneath-container"><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">41</span><span class="fracden fracden-numeric">7</span></span>)</span><span class="underneath">(rule 3)</span></span>
                    <span class="nudge-up">= (-1)<sup style="top: -0.75em;">210</sup><span class="times-box">&centerdot;</span></span><span class="underneath-container"><span class="legendre">(<span class="frac frac-pure-legendre"><span class="fracnum">-1</span><span class="fracden fracden-numeric">7</span></span>)</span><span class="underneath">(rule 1)</span></span>
                    <span class="nudge-up">= 1<span class="times-box">&centerdot;</span><span class="underneath-container">(-1)<sup style="font-size: 100%;"><span class="frac"><span class="fracnum">7-1</span><span class="fracden fracden-numeric">2</span></span></sup><span class="underneath">(rule 4)</span></span> = (-1)<sup style="top: -0.75em;">3</sup> = <span class="boxed">-1</span></span>
                </p>

                <p>Since the Legendre symbol evaluates to -1, it follows by definition that 14 is not a quadratic residue modulo 41.</p>

                <p>There are multiple ways in which one may apply these rules to arrive at a final answer, some of which are faster and more efficient than others, but they will all lead to the same answer.  Experiment with different algorithms to find one that best suits your needs.</p>

                <h3>Listing Out Quadratic Residues</h3>

                <p>When listing out quadratic residues modulo p (where p is an odd prime) by hand, it may help to know that <em>exactly half</em> of the integers between 1&nbsp;and&nbsp;p-1 inclusive are quadratic residues modulo p, while the rest are nonresidues.  (The proof of this statement is left as an exercise to the reader.)</p>

                <p>The table below lists examples of this for various small odd primes:</p>

                <table class="center">
                    <tr>
                        <th>p</th>
                        <th>Quadratic residues modulo p between 1 and p-1 inclusive</th>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>5</td>
                        <td>1, 4</td>
                    </tr>
                    <tr>
                        <td>7</td>
                        <td>1, 2, 4</td>
                    </tr>
                    <tr>
                        <td>11</td>
                        <td>1, 3, 4, 5, 9</td>
                    </tr>
                    <tr>
                        <td>13</td>
                        <td>1, 3, 4, 9, 10, 12</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 3 of 3</div>
        </div>
    </div>
</body>
</html>
