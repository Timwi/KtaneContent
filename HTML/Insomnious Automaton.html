<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Insomnious Automaton â€” Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        @font-face {
            font-family: 'GOST Common';
            src: url('font/GOST Common.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        table {
            margin: 1em auto;
            border: none;
        }

        body, body.dark{
            background: #000000 url("img/Insomnious Automaton/bg.png");
        }
        .page, .dark .page{
            background-image: none;
        }
        
        .page-bg-00, .dark .page-bg-00{
            background-color: #000010;
            color: #ffffff;
        }
        
        .page-bg-01{
            background-color: #303030;
            color: #ffffff;
        }
        
        .dark .page-bg-01 {
            background-color: #000000;
            color: #ffffff;
        }
        
        .page-bg-02{
            font-family: 'GOST Common';
            font-size: 105%;
        }
        
        .page-bg-02 {
            background-color: #ffffff;
            color: #000000;
        }
        .dark .page-bg-02 {
            background-color: #222222;
            color: #ffffff;
        }
        
        h1{
            text-align: center;
            margin-top: 0;
        }
        
        p{
            margin-bottom: 0;
        }
        
        ul, ol{
            margin-top: 0;
        }
        
        .cell-with-rotated-text span {
            writing-mode: vertical-rl;
  transform: rotate(180deg);
  white-space: nowrap;
        }
        
        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 3'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-00">
            <div class="page-content" style="display: grid; place-items: center;">
                <div>
                    <p class="centered"><i>I don't even know what to do anymore. I feel like I've tried everything possible. And it's all been fruitless.</i></p>
                    <p class="centered"><i>Sometimes I have to lie to him, saying I try every day, that I try something new every day. But that's not true. This string of failures is very demotivating.</i></p>
                    <p class="centered"><i>I truly feel sorry for him. But there's nothing I can do.</i></p>
                </div>
                <div>
                    <p class="centered"><i>Recently, when I was in the library, I noticed a couple of sheets that had fallen out of a book.</i></p>
                    <p class="centered"><i>An instruction manual for debugging a mechanism? What mechanism? I was about to put them back, but then it hit me.</i></p>
                    <p class="centered"><i>There's a mechanism in his head too. Maybe I should try it? I have nothing to lose by trying.</i></p>
                    <p class="centered"><i>I think I should study this instruction manual.</i></p>
                </div>

            </div>
        </div>
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Insomnious Automaton</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Insomnious Automaton.svg" class="diagram">
                <h2>On the Subject of the Insomnious Automaton</h2>
                <p class="flavour-text">Astro, what kind of books are you reading in your "book club"?!</p>

                <p>This module has two screens and a music box. You must put the music box to sleep.</p>
                <ul>
                    <li>The top screen shows three variables that need to be submitted.</li>
                    <li>The bottom screen shows the state of the box or the current input, consisting of a stack string and a bit string.</li>
                    <li>The box has 4 states:
                        <ol>
                            <li><b>Awake</b>: The box is awake. Input is unavailable.</li>
                            <li><b>Ready</b>: The box is trying to fall asleep. Input is available.</li>
                            <li><b>Submitting</b>: Submitting and checking a variable.</li>
                            <li><b>Asleep</b>: The box is asleep. The module is solved.</li>
                        </ol>
                    </li>
                    <li>The sides of the box can be pressed and correspond to different actions:
                    <ul>
                    <li>The left and right sides input 0 and 1 respectively.</li>
                    <li>The bottom side completely resets the input.</li>
                    <li>The front side deletes the last character of the top (stack) string. Pressing it too frequently (at least twice within 0.2 seconds) will cause a strike.</li>
                    <li>Pressing the lid will submit the input. Holding the cursor over the lid for 3 seconds will transition the box from the <b>Awake</b> state to the <b>Ready</b> state.</li>
                    </ul>
                    </li>
                    <li>Any error transitions the box to the <b>Awake</b> state.</li>
                    <li>Holding the module's status light will provide additional visual indication of the box's state. Holding it again will disable this indicator.</li>
                </ul>
            </div>
        </div>

        <div class="page page-bg-02">
            
            <div class="page-content">
                <h1>Mechanism Debugging: Instructions.</h1>
                <p>The mechanism is a finite state machine. If the value (in base-36) of the first character of the serial number is odd, the automaton has 5 states, otherwise - 6. Label the states q0, q1, ...</p>
                <p>State transitions consist of:</p>
                    <ul>
                        <li>Initial state q(t),</li>
                        <li>Input x,</li>
                        <li>Final state q(t+1),</li>
                        <li>Output y.</li>
                    </ul>
                
                <p>This automaton is generated by the following rule:</p>
                    <ul>
                        <li>On input x0: qi transitions to q(i+z0(i)).</li>
                        <li>On input x1: qi transitions to q(i+z1(i)).</li>
                        <li>On input x2: qi transitions to q(|i+z2(i)|).</li>
                    </ul>
                    The functions zi are defined on the last page of the instructions.
                    <p>If a state with that number does not exist, then such a transition does not exist either.</p>
                    The output of the transition qi &rarr; qj is determined as follows:
                    <ul>
                        <li>If i&lt;j, output is y0,</li>
                        <li>If i&gt;j, output is y1,</li>
                        <li>If i=j, output is y2.</li>
                    </ul>
                
                <p>Count the number of uses for the elements of the set of final states, the set of inputs, and the set of outputs. Assign them binary representations such that:</p>
                    <ul>
                        <li>Elements that are not used must be completely ignored.</li>
                        <li>Representations within a set <strong>cannot repeat</strong>.</li>
                        <li>Representations must have the minimum possible length. Furthermore, within a set, all representations must be of the same length.</li>
                        <li>The more frequently an element is used, the fewer ones should be in its representation.</li>
                        <li>In case of equal usage counts, elements with a smaller index get the smallest possible numbers (when converting the binary representation to decimal).</li>
                    </ul>
                    Strict adherence to these rules will yield the <b>one and only correct</b> representation of the set elements.
                
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-content">
                <p>The bits of the q representation are called w0, w1, ...; the bits of the x representation are called u0, ...; the bits of the y representation are called v0, ...</p>
                <p>Construct a truth table for wi(t+1), vi, and also Ri and Si (or Ji and Ki, if clouds are drawn on the box). The module requests Ri or Ji as fi, and Si or Ki as Fi. The table is constructed from all possible values of ui and wi(t). Use the table below to get the values for R, S, J, and K:</p>
                    <table>
                        <tr><th>w(t)</th><th>w(t+1)</th><th>R</th><th>S</th><th>J</th><th>K</th></tr>
                        <tr><td>0</td><td>0</td><td>*</td><td>0</td><td>0</td><td>*</td></tr>
                        <tr><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>*</td></tr>
                        <tr><td>1</td><td>0</td><td>1</td><td>0</td><td>*</td><td>1</td></tr>
                        <tr><td>1</td><td>1</td><td>0</td><td>*</td><td>*</td><td>0</td></tr>
                    </table>
                
                <p>Find (and, if desired, optimize (e.g., using a Karnaugh map)) the expression for the required variables. Since you can only use 2 operators (NOT and NOR), use De Morgan's laws (!x + !y = !(xy); !x!y = !(x+y)). Create a stack from the elements below:</p>
                    <table>
                        <tr><td>0</td><td>Pushes w0 onto the stack.</td></tr>
                        <tr><td>1</td><td>Pushes w1 onto the stack.</td></tr>
                        <tr><td>2</td><td>Pushes w2 onto the stack.</td></tr>
                        <tr><td>3</td><td>Pushes u0 onto the stack.</td></tr>
                        <tr><td>4</td><td>Pushes u1 onto the stack.</td></tr>
                        <tr><td>-</td><td>Inverts the top element of the stack.</td></tr>
                        <tr><td>!</td><td>Applies NOR to the top two elements of the stack.</td></tr>
                    </table>
                
                <p>Submit the stack, replacing its symbols with the given 3-bit sequences:</p>
                <table>
                        <tr><td>000</td><td>3</td><td>100</td><td>0</td></tr>
                        <tr><td>001</td><td>4</td><td>101</td><td>1</td></tr>
                        <tr><td>010</td><td> </td><td>110</td><td>2</td></tr>
                        <tr><td>011</td><td>-</td><td>111</td><td>!</td></tr>
                    </table>

                <p>If the result of the expression is TRUE/FALSE, then submit 1/0 as the bit string with the stack string being empty.</p>
                
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
        
        <div class="page page-bg-02">
            <div class="page-content">
                <p>Represent the fourth and fifth characters of the serial number as their alphabetical positions and convert them to base-3. The numbers should have three trits; if not, pad them with leading zeros to three trits. For z0 use the most significant trit, for z1 the second, and for z2 the least significant.</p>
                <p>Use the fourth character of the serial number for columns and the fifth for rows.</p>
                <p>If any function returns a value with an absolute value greater than 5, then add/subtract 3 until the obtained value is in the range [-5; 5].</p>
                    <table style="font-size: 80%">
                        <tr><td>z0</td><td>0</td><td>1</td><td>2</td></tr>
                        <tr><td>0</td><td>SN6 - 5</td><td>AA - D</td><td>LI - UI</td></tr>
                        <tr><td>1</td><td>EMP - NOEMP</td><td>3 - B</td><td>2 * PP - 3</td></tr>
                        <tr><td>2</td><td>BH - I</td><td>PT - 3</td><td>2 * P - SN3 - 2</td></tr>
                    </table>
                    <table style="font-size: 80%">
                        <tr><td>z1</td><td>0</td><td>1</td><td>2</td></tr>
                        <tr><td>0</td><td>SN3 - 2 * i</td><td>3 * B - D - 2 * i</td><td>4 + FRK + TRN - BOB - SND - 2 * i</td></tr>
                        <tr><td>1</td><td>2 + PAR + SER - 2 * i</td><td>floor(SN2 / 4) - 2 * i</td><td>NOEMP + I - 2 * i</td></tr>
                        <tr><td>2</td><td>4 + P - LI - UI - 2 * i</td><td>PT + AA - EMP - 2 * i</td><td>(SN6 % 4) + BH + floor(PP / 2) - 2 * i</td></tr>
                    </table>
                    <table style="font-size: 80%">
                        <tr><td>z2</td><td>0</td><td>1</td><td>2</td></tr>
                        <tr><td>0</td><td>round((SN2 - SN3 - SN6) / 3 - (1 + EMP) * i / (1 + BH))</td><td>2 + B - floor((D + 7) * i / (3 + UI))</td><td>6 - I - 2 * i * (BOB + SIG + MSA + IND)</td></tr>
                        <tr><td>1</td><td>2 + PP - ceil(i * PT / 2)</td><td>1 + AA - i * (I - CLR - CAR - FRQ - NSA)</td><td>LI - i * (1 + RJ + PS + RCA - DVI)</td></tr>
                        <tr><td>2</td><td>3 + UI - i * (round(2 * (5 - SN3) / 3) + BOB)</td><td>4 - i * (1 + floor((1 + P) / (1 + (SN2 % 3))))</td><td>3 + ceil(round(SN6 / 2) / 2) - i * (2 + ceil(NOEMP / 2))</td></tr>
                    </table>
                <p>Variables in this table:</p>
                <ul>
                    <li>SN2, SN3, SN6 - the second, third, and sixth characters of the serial number respectively. For SN2, convert from base-36 to decimal.</li>
                    <li>B, BH, AA, D - total number of batteries, number of battery holders, number of AA batteries and D batteries respectively.</li>
                    <li>P, PT, PP, EMP, NOEMP, DVI, PS, RCA, RJ, PAR, SER - number of ports, number of distinct port types, number of port plates, number of empty and non-empty plates, number of DVI-D, PS/2, Stereo RCA, RJ-45, Parallel, and Serial ports respectively.</li>
                    <li>I, LI, UI - number of indicators, number of lit and unlit indicators respectively.</li>
                    <li>&lt;indicator name&gt; - presence of an indicator with that name. If such an indicator is present, this variable equals 1, otherwise 0.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>
    </div>
</body>
</html>