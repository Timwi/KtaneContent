<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Ultimate Tic Tac Toe — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .rule-color {
            text-align: center;
        }
        table {
            margin: 1em auto;
            float: center;
        }
        
        td.black    { background: #323232; color: white; }
        td.blue     { background: #324BFF; color: white; }
        td.green    { background: #32C832; color: black; }
        td.cyan     { background: #32FFFF; color: black; }
        td.red      { background: #FF3232; color: white; }
        td.magenta  { background: #FF32FF; color: white; }
        td.yellow   { background: #D7CD32; color: black; }
        td.white    { background: #E1E1E1; color: black; }
    </style>
    <script>
        function setDefaultRules(rnd) { setRules(rnd) };
        function setRules(rnd)
        { 
            let colors = ["Black", "Blue", "Green", "Cyan", "Red", "Magenta", "Yellow", "White"];
            let td = document.getElementsByClassName("rule-color");
            if (rnd.seed != 1) {
                rnd.shuffleFisherYates(colors);
            }
            
            for (let i = 0; i < td.length; i++) {
                td[i].innerText = colors[i];
                td[i].className = `rule-color ${colors[i].toLowerCase()}`;
            }
        };
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-12">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Ultimate Tic Tac Toe</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Ultimate Tic Tac Toe.svg" class="diagram">
                <h2>On the Subject of Ultimate Tic Tac Toe</h2>
                <p class="flavour-text">Torpedo at A2, wait... that’s not right. Bishop to...no no no, it’s not that game either... Ah, now I know! O at A1 A1</p>

                <p>This module consists of 9 3×3 grids.</p>
                <p>Each individual cell is colored in 1 out of 8 possible colors. The possible colors are black, blue, green, cyan, red, magenta, yellow and white.</p>
                <p>To disarm this module, win 1 round of Ultimate Tic Tac Toe against the bomb.</p>

                <h3>The rules of Ultimate Tic Tac Toe</h3>
                <ul>
                    <li>Placing your symbol into a cell in one of the small 3×3 grids will determine where the next player has to place their symbol in the big 3×3 grid.
                        <ul><li>Example: O into A1 (big grid) A2 (small grid) - X has to be placed somewhere into A2 in the big grid.</li></ul>
                    </li>

                    <li>Placing a symbol into a cell that would make the next player play into an already won grid allows the next player to choose where to play.
                        <ul><li>Example: C2 (big grid) is already won by someone. Os turn: B3 (big grid) C2 (small grid) - X gets to choose freely where to place his symbol.</li></ul>
                    </li>

                    <li>Winning a small 3×3 grid will win that cell in the big grid. To win the game, win 3 cells in the big grid that form a valid tic tac toe.</li>
                </ul>

                <h3>Module behavior</h3>
                <p>If the bomb is restricted to a specific small grid, it will choose the cell within that grid with the lowest value, favoring earlier cells in reading order in case of ties.</p>
                <p>Otherwise, it will choose the first small grid in reading order that contains the lowest-value cell, then make a move in that grid as described above.</p>

                <p>A strike will be incurred in the following situations:</p>
                <ul>
                    <li>Attempting to place an O in a small grid when the player is restricted to a different small grid.</li>
                    <li>Allowing the game to end in a draw.</li>
                    <li>Allowing the bomb to win.</li>
                </ul>
                <p>In the latter two situations, a strike will reset the game and generate a new board.</p>
                
                <h3>Color values</h3>
                <table>
                    <tr><td class="rule-color"></td><td>0</td><td class="rule-color"></td><td>1</td><td class="rule-color"></td><td>2</td><td class="rule-color"></td><td>3</td></tr>
                    <tr><td class="rule-color"></td><td>4</td><td class="rule-color"></td><td>5</td><td class="rule-color"></td><td>6</td><td class="rule-color"></td><td>7</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>
