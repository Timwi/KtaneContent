<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>バックドアキーパッド — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .keypad-table { margin-top: 1.5em; }
    </style>
    <script>
        const filenames = [
            "1-copyright.png", "2-filledstar.png", "3-hollowstar.png", "4-smileyface.png", "5-doublek.png", "6-omega.png", "7-squidknife.png", "8-pumpkin.png",
            "9-hookn.png", "10-teepee.png", "11-six.png", "12-squigglyn.png", "13-at.png", "14-ae.png", "15-meltedthree.png", "16-euro.png", "17-circle.png",
            "18-nwithhat.png", "19-dragon.png", "20-questionmark.png", "21-paragraph.png", "22-rightc.png", "23-leftc.png", "24-pitchfork.png", "25-tripod.png",
            "26-cursive.png", "27-tracks.png", "28-balloon.png", "29-weirdnose.png", "30-upsidedowny.png", "31-bt.png"
        ];

        function setRules(rnd) {
            const precedenceLists = PopulatePLists(rnd);

            const trs = document.getElementsByClassName('keypad-table')[0].getElementsByTagName('TR');
            for (let row = 0; row < trs.length; row++) {
                const imgs = trs[row].getElementsByClassName('keypad-symbol-image');
                console.log(filenames[precedenceLists[1][2]])
                for (let col = 0; col < imgs.length; col++)
                    imgs[col].setAttribute('src', `img/Keypad/${filenames[precedenceLists[col][row]]}`);
            }
        }

        function setDefaultRules(rnd) {
            setRules(rnd);
        }

        function PopulatePLists(rnd) {
            const resultLists = []
            resultLists[0] = [27, 12, 29, 11, 6, 8, 22];
            resultLists[1] = [15, 27, 22, 25, 2, 8, 19];
            resultLists[2] = [0, 7, 25, 4, 14, 29, 2];
            resultLists[3] = [10, 20, 30, 6, 4, 19, 3];
            resultLists[4] = [23, 3, 30, 21, 20, 18, 1];
            resultLists[5] = [10, 15, 26, 13, 23, 17, 5];
            for (let i = 0; i < resultLists.length; i++)
                RandomizePList(resultLists[i], rnd);

            return resultLists;
        }

        // Note: this shuffling function needs to match the one in the game
        function RandomizePList(pList, rnd) {
            for (let i = 0; i < pList.length; i++) {
                const value = pList[i];
                const index = rnd.next(0, pList.length);
                pList[i] = pList[index];
                pList[index] = value;
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">バックドアキーパッド</span>
            </div>
            <div class="page-footer absolute-footer"></div>
            <div class="page-content">
                <img src="img/Component/Backdoor Keypad.svg" class="diagram" />
                <h2>モジュール詳細：バックドアキーパッド</h2>
                <p class="flavour-text">でも飢えがやってきて窓をドンドン「コンコン」窓を叩く音「どちら様？」「”飢え”だよ」「まあ、”飢え“ですって！」</p>
                <p>
                    このモジュールは2つのルールシードを使用する。このモジュールに必要なページにアクセスするには、<code><em>https://ktane.timwi.de/HTML/Backdoor%20Keypad.html#</em></code>を検索バーにコピーし、その後ろにルールシードを入力する。
                </p>
                <p>
                    このモジュールは、数字が記載された2×2配列のボタンで構成されている。これらの数字は、読み順に読み取ることでルールシードを形成する。最初のステージに進むには、4つのボタンをすべて押す必要がある。個の最初のルールシードを使用して、ルールシードのマニュアルにアクセスする。
                </p>
                <p>最初のステージには4つのシンボルが表示されている。4つのシンボルすべてが含まれる列は1つしかない。各記号が含まれている列及び4つの記号の位置に注意する必要がある。</p>
                <p>次へ進むには、該当する列に含まれる4つのシンボルを上から順に押す必要がある。</p>
                <p>処理担当者は、押されたボタンの順序を分析担当者に伝える必要がある。</p>
                <p>間違った順序で押すとミスが記録される。</p>
                <p>
                    次に、記号の代わりにさらに4つの数字がモジュールに表示される。押されたボタンの順序は、現在のルールシードの末尾に数字を追加する順序になる。これが第2ステージのルールシードとなる。第2ステージに進むには、4つのボタンをすべて押す。
                </p>
                <p>2×2キーパッドは4×4キーパッドになる。16個のボタンにはそれぞれ記号が表示される。</p>
                <p>モジュールを解除するには、処理担当者は最初のステージで使用した列及び4つの位置にあるシンボルが表示されたボタンを押す必要がある。シンボルは最初のステージとは異なる場合がある。</p>
                <p>4つのシンボルには含まれないいずれかの記号を押すとミスが記録される。</p>
            </div>
            <div class="page-footer relative-footer">ページ 1/2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">バックドアキーパッド</span>
            </div>
            <div class="page-content">
                <table class="keypad-table invertible">
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/28-balloon.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/16-euro.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/1-copyright.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/11-six.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/24-pitchfork.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/11-six.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/13-at.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/28-balloon.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/8-pumpkin.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/21-paragraph.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/4-smileyface.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/16-euro.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/30-upsidedowny.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/23-leftc.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/26-cursive.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/31-bt.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/31-bt.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/27-tracks.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/12-squigglyn.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/26-cursive.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/5-doublek.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/7-squidknife.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/22-rightc.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/14-ae.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/7-squidknife.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/3-hollowstar.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/15-meltedthree.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/5-doublek.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/21-paragraph.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/24-pitchfork.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/9-hookn.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/9-hookn.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/30-upsidedowny.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/20-questionmark.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/19-dragon.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/18-nwithhat.png"></td>
                    </tr>
                    <tr>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/23-leftc.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/20-questionmark.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/3-hollowstar.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/4-smileyface.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/2-filledstar.png"></td><td class="keypad-table-spacer"></td>
                        <td class="keypad-table-column"><img class="keypad-symbol-image" src="img/Keypad/6-omega.png"></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 2/2</div>
        </div>
    </div>
</body>
</html>