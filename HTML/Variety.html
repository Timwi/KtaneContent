<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Variety — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src='js/ruleseed.js'></script>
    <style>
        .dark table, table {
            border: none;
        }
            table.mazes {
                margin: 0 auto 0 0;
            }
            table.width-3 .maze-td svg {
                width: 2.4cm;
            }
            table.width-4 .maze-td svg {
                width: 3.2cm;
            }
        .maze-symbol {
            display: inline-block;
            width: 2cm;
            height: 2cm;
        }
            .maze-symbol.plus {
                background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20"><path d="M7 2h6v5h5v6h-5v5h-6v-5h-5v-6h5z" /></svg>');
            }
            .maze-symbol.star {
                background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -9 100 100"><path d="M 50,0 61.111168,34.79797 97.552826,34.549152 67.89153,55.869663 79.389262,90.450851 49.946406,68.829681 20.610736,90.450849 32.075347,55.76772 2.4471746,34.549149 38.97555,34.734966 Z" /></svg>');
            }
            .maze-symbol.triangle {
                background-image: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 -12.5 100 100"><path d="m 50,0 43.301269,75 -86.6025409,0 z" /></svg>');
            }
        div.maze-explanation {
            float: right;
            width: 5.75cm;
        }
        #variety-order {
            float: right;
            clear: right;
            margin-left: .5cm;
            line-height: 1;
            font-size: 10.5pt;
        }
        div.diagram {
            margin-left: 1cm;
            margin-bottom: 0;
        }
        .layout {
            column-count: 2;
        }
            .layout > div:first-child h3 {
                margin-top: 0;
            }
            .layout > div {
                break-inside: avoid;
            }
        .wire-conditions td svg {
            width: 48px;
            height: 12px;
            border: 1px solid;
        }
        .dark .wire-diagram rect { fill: #DDD; }
        #word-list {
            column-count: 10;
            font-size: 10pt;
            list-style-type: none;
            padding: 0;
        }
        .button-table, .keypads-table {
            float: right;
            margin-left: .5cm;
            margin-bottom: .5cm;
            margin-top: .25cm;
        }
            .button-table td, .button-table th, .keypads-table td, .keypads-table th {
                padding: .1em .6em .05em;
                text-align: left;
            }
        #led-color-rules {
            width: 100%;
        }
            #led-color-rules td {
                padding: .1em 0 .05em;
                text-align: center;
            }

        .narrow {
            display: none;
        }
        .page {
            background-repeat: repeat-y;
            background-position: top;
        }
        .dark .maze-symbol { filter: invert(85%); }
        .dark .maze-td svg path {
            stroke: #DDD;
        }

        @media screen and (max-width: 900px) {
            .wide { display: none; }
            .narrow { display: inline; }

            #variety-order {
                float: none;
                margin: 0;
                line-height: unset;
            }

            .layout {
                column-count: 1;
            }
            div.maze-explanation {
                float: none;
                width: auto;
            }
            .maze-symbol {
                width: 1cm;
                height: 1cm;
            }
            table.width-3 .maze-td svg {
                width: 1.35cm;
            }
            table.width-4 .maze-td svg {
                width: 1.8cm;
            }
        }

        .knobs-table, .bulbs-table {
            float: right;
            margin-left: .5cm;
            margin-bottom: .5cm;
            margin-top: .25cm;
        }
        .knobs-table td, .knobs-table th {
            padding: .1em .6em .05em;
            text-align: left;
        }
    </style>
    <script>
        function setDefaultRules(rnd) { setRules(rnd); }
        function setRules(rnd)
        {
            // WIRES
            let edgeworkTds = Array.from(document.getElementsByClassName('edgework-condition'));
            let edgeworkConditions = [
                'more lit than unlit indicators',
                'more D batteries than AA batteries',
                'more parallel + serial ports than any other ports',
                'more letters than digits in the serial number',
                'more battery holders than port plates'
            ];
            rnd.shuffleFisherYates(edgeworkConditions);
            for (let ec = 0; ec < edgeworkTds.length; ec++)
                edgeworkTds[ec].innerText = edgeworkConditions[ec];

            // LEDS
            let ledColors = ['K', 'R', 'Y', 'B', 'W'];
            let table = '';
            table += `<tr>${ledColors.slice(1).map(lc => `<th>${lc}<${''}/th>`).join('')}<td class='corner'><${''}/td><${''}/tr>`;
            let allAnswers = [];
            for (let color1 = 0; color1 < ledColors.length - 1; color1++)
            {
                let tr = Array(color1).fill('<td class="corner"></td>').join('');
                for (let color2 = color1 + 1; color2 < ledColors.length; color2++)
                {
                    let answers;
                    do
                        answers = rnd.shuffleFisherYates(ledColors.slice(0)).slice(0, rnd.next(2, 6)).join(' ');
                    while (allAnswers.includes(answers));
                    allAnswers.push(answers);
                    tr += `<td>${answers}<${''}/td>`;
                }
                table += `<tr>${tr}<th>${ledColors[color1]}<${''}/th><${''}/tr>`;
            }
            document.getElementById('led-color-rules').innerHTML = table;

            // BULBS
            let bulbTds = Array.from(document.getElementsByClassName('base-letter'));
            let aFirst = rnd.next(0, 2);
            bulbTds[0].innerText = aFirst ? 'A' : 'N';
            bulbTds[1].innerText = aFirst ? 'N' : 'A';

            // COLORED KNOBS
            let coloredKnobTds = Array.from(document.getElementsByClassName('cardinal-direction'));
            let coloredKnobOrder = [0, 1, 2, 3];
            rnd.shuffleFisherYates(coloredKnobOrder);
            for (let cko = 0; cko < coloredKnobOrder.length; cko++)
                coloredKnobTds[cko].innerText = ["North", "East", "South", "West"][coloredKnobOrder[cko]];

            // BUTTONS
            let buttons = Array.from(document.getElementsByClassName('button-color-rule'));
            let buttonValues = buttons.map((_, c) => c);
            rnd.shuffleFisherYates(buttonValues);
            for (let i = 0; i < buttons.length; i++)
                buttons[i].innerText = buttonValues[i];

            // COLORED KEYPADS
            let keypads = Array.from(document.getElementsByClassName('keypad-color-rule'));
            let keypadValues = keypads.map((_, c) => c + 2);
            rnd.shuffleFisherYates(keypadValues);
            for (let i = 0; i < keypads.length; i++)
                keypads[i].innerText = keypadValues[i];

            // MAZES
            let mazeTds = Array.from(document.getElementsByClassName('maze-td'));
            let mazeIx = 0;
            for (let mw = 3; mw <= 4; mw++)
                for (let mh = 3; mh <= 4; mh++)
                    for (let sym = 0; sym < 9; sym++)
                        mazeTds[mazeIx++].innerHTML = generateMaze(rnd, mw, mh);

            let vo = document.getElementById('variety-order');
            let flavors = [
                'Black wire',
                'Blue wire',
                'Red wire',
                'Yellow wire',
                'White wire',
                'Light-on-dark die',
                'Dark-on-light die',
                'Key-in-lock',
                'LED',
                'Blue switch',
                'Red switch',
                'Yellow switch',
                'White switch',
                'Timer (ascending)',
                'Timer (descending)',
                'Red bulb',
                'Yellow bulb',
                'Red knob',
                'Black knob',
                'Blue knob',
                'Yellow knob',
                'White knob',
                'Red button',
                'Yellow button',
                'Blue button',
                'White button',
                'Braille display',
                'Digit display',
                'Horizontal slider',
                'Vertical slider',
                '2×2 white keypad',
                '1×3 white keypad (tall)',
                '1×4 white keypad (tall)',
                '3×1 white keypad (wide)',
                '4×1 white keypad (wide)',
                'Red keypad',
                'Yellow keypad',
                'Blue keypad',
                '3×3 maze',
                '3×4 maze (tall)',
                '4×3 maze (wide)',
                '4×4 maze',
                'Letter display'
            ];
            rnd.shuffleFisherYates(flavors);
            rnd.shuffleFisherYates(flavors);
            vo.innerHTML = flavors.map(fl => `<li>${fl}<${''}/li>`).join('');
        }

        function generateMaze(rnd, w, h)
        {
            let segs = [];
            for (let x = 0; x < w; x++)
                for (let y = 0; y < h; y++)
                {
                    if (y > 0)
                        segs.push({ d1: 1, d2: 3, c: [x | (y << 3), (x + 1) | (y << 3)]});
                    if (x > 0)
                        segs.push({ d1: 2, d2: 0, c: [x | (y << 3), x | ((y + 1) << 3)]});
                }

            let todo = Array(w * h).fill(null).map((_, c) => (c % w) | ((c / w) << 3));
            let active = [];

            let start = rnd.next(0, todo.length);
            active.push(todo[start]);
            todo.splice(start, 1);

            while (todo.length > 0)
            {
                let activeIx = rnd.next(0, active.length);
                let sq = active[activeIx];
                let adjs = [];
                if ((sq & 7) > 0 && todo.includes(sq - 1))
                    adjs.push(sq - 1);
                if ((sq & 7) < w - 1 && todo.includes(sq + 1))
                    adjs.push(sq + 1);
                if ((sq >> 3) > 0 && todo.includes(sq - 8))
                    adjs.push(sq - 8);
                if ((sq >> 3) < h - 1 && todo.includes(sq + 8))
                    adjs.push(sq + 8);

                if (adjs.length == 0)
                {
                    active.splice(activeIx, 1);
                    continue;
                }
                else
                {
                    let adj = adjs[rnd.next(0, adjs.length)];
                    todo.splice(todo.indexOf(adj), 1);
                    active.push(adj);

                    if (adj === sq - 1)
                        segs.splice(segs.findIndex(sg => sg.d1 === 2 && sg.c[0] === sq), 1);
                    else if (adj === sq + 1)
                        segs.splice(segs.findIndex(sg => sg.d1 === 2 && sg.c[0] === adj), 1);
                    else if (adj === sq - 8)
                        segs.splice(segs.findIndex(sg => sg.d1 === 1 && sg.c[0] === sq), 1);
                    else if (adj === sq + 8)
                        segs.splice(segs.findIndex(sg => sg.d1 === 1 && sg.c[0] === adj), 1);
                }
            }

            let svg = [];
            while (segs.length > 0)
            {
                let seg = segs.pop();
                while (true)
                {
                    let extIx = segs.findIndex(sg =>
                        ((sg.d1 ^ 2) === seg.d1 && sg.c[0] === seg.c[0]) ||
                        ((sg.d1 ^ 2) === seg.d2 && sg.c[0] === seg.c[seg.c.length - 1]) ||
                        ((sg.d2 ^ 2) === seg.d1 && sg.c[sg.c.length - 1] === seg.c[0]) ||
                        ((sg.d2 ^ 2) === seg.d2 && sg.c[sg.c.length - 1] === seg.c[seg.c.length - 1]));
                    if (extIx === -1)
                    {
                        extIx = segs.findIndex(sg =>
                            ((sg.c[0] === seg.c[0] || sg.c[0] === seg.c[seg.c.length - 1]) &&
                                !segs.some(s => (s.c[0] === sg.c[0] && (s.d1 ^ 2) === sg.d1) || (s.c[s.c.length - 1] === sg.c[0] && (s.d2 ^ 2) === sg.d1))) ||
                            ((sg.c[sg.c.length - 1] === seg.c[0] || sg.c[sg.c.length - 1] === seg.c[seg.c.length - 1]) &&
                                !segs.some(s => (s.c[0] === sg.c[sg.c.length - 1] && (s.d1 ^ 2) === sg.d2) ||
                                (s.c[s.c.length - 1] === sg.c[sg.c.length - 1] && (s.d2 ^ 2) === sg.d2)))
                        );
                    }
                    if (extIx === -1)
                        break;
                    let ext = segs[extIx];
                    segs.splice(extIx, 1);
                    if (seg.c[0] === ext.c[0])
                    {
                        seg.c.reverse();
                        seg.c.pop();
                        if (seg.d1 === (ext.d1 ^ 2))
                            ext.c.shift();
                        seg.c.push(...ext.c);
                        seg.d1 = seg.d2;
                        seg.d2 = ext.d2;
                    }
                    else if (seg.c[0] === ext.c[ext.c.length - 1])
                    {
                        ext.c.pop();
                        if (seg.d1 === (ext.d2 ^ 2))
                            seg.c.shift();
                        ext.c.push(...seg.c);
                        ext.d2 = seg.d2;
                        seg = ext;
                    }
                    else if (seg.c[seg.c.length - 1] === ext.c[0])
                    {
                        seg.c.pop();
                        if (ext.d1 === (seg.d2 ^ 2))
                            ext.c.shift();
                        seg.c.push(...ext.c);
                        seg.d2 = ext.d2;
                    }
                    else if (seg.c[seg.c.length - 1] === ext.c[ext.c.length - 1])
                    {
                        ext.c.reverse();
                        seg.c.pop();
                        if (seg.d2 === (ext.d2 ^ 2))
                            ext.c.shift();
                        seg.c.push(...ext.c);
                        seg.d2 = ext.d1;
                    }
                }
                svg.push(`M${seg.c.map(p => `${p & 7} ${p >> 3}`).join(' ')}`);
            }

            return `
                <svg viewBox='-.1 -.1 ${w+.2} ${h+.2}'>
                    <path d='${svg.join('')}' fill='none' stroke='black' stroke-width='.05' />
                    <path d='M0 0h${w}v${h}H0z' fill='none' stroke='black' stroke-width='.1' />
                    ${Array(w*h).fill(null).map((_, c) => `<rect class='highlightable' x='${c % w}' y='${(c / w) | 0}' width='1' height='1' fill='transparent' />`).join('')}
                <${''}/svg>
            `;
        }

        const W = 10;
        const H = 8;

        function range(start, count)
        {
            return Array(count).fill(null).map((_, c) => c + start);
        }

        class ItemFactory
        {
            isRectAvailable(taken, cell, width, height)
            {
                let x = cell % W;
                let y = (cell / W) | 0;
                if (x < 0 || x + width > W || y < 0 || y + height > H)
                    return false;
                return range(0, width * height).every(subcell => !taken.has(x + subcell % width + W * (y + ((subcell / width) | 0))));
            }

            claimRect(taken, cell, width, height)
            {
                for (let dx = 0; dx < width; dx++)
                    for (let dy = 0; dy < height; dy++)
                        taken.add(cell % W + dx + W * (((cell / W) | 0) + dy));
            }
        }

        class WireFactory extends ItemFactory
        {
            _allowedDistance = .5;
            WireColors = [ 'BlackWire', 'BlueWire', 'RedWire', 'YellowWire', 'WhiteWire' ];
            WireColorsSvg = [ '#000', '#2244dd', '#dd2222', '#dddd22', '#ccc' ];

            Generate(taken)
            {
                // Decline to create more wires if there are already two
                if (Array.from(taken).filter(obj => this.WireColors.includes(obj)).length >= 2)
                    return null;

                let availableColors = this.WireColors.filter(c => !taken.has(c));
                if (availableColors.length === 0)
                    return null;

                let existingWires = Array.from(taken).filter(s => typeof s === 'string' && s.startsWith("Wire:"))
                    .map(s => s.split(':')).map(arr => ({ Cell1: parseInt(arr[1]), Cell2: parseInt(arr[2]) }));

                let availableCells = range(0, W * H).filter(cell => !taken.has(cell) && !existingWires.some(ew => this.liesOn(cell, ew.Cell1, ew.Cell2)));

                let availableWires = [];
                for (let startIx = 0; startIx < availableCells.length; startIx++)
                    for (let endIx = startIx + 1; endIx < availableCells.length; endIx++)
                        if ((Math.abs(availableCells[startIx] % W - availableCells[endIx] % W) > 1 || Math.abs(((availableCells[startIx] / W) | 0) - ((availableCells[endIx] / W) | 0)) > 1)
                            && !existingWires.some(ew => this.doIntersect(ew.Cell1, ew.Cell2, availableCells[startIx], availableCells[endIx]))
                            && range(0, W * H).every(cell =>
                                this.distance(availableCells[startIx] % W, (availableCells[startIx] / W) | 0, availableCells[endIx] % W, (availableCells[endIx] / W) | 0, cell % W, (cell / W) | 0) >= this._allowedDistance
                                || !taken.has(cell)))
                            availableWires.push(availableCells[endIx] * W * H + availableCells[startIx]);

                if (availableWires.length === 0)
                    return null;

                let color = availableColors[(Math.random() * availableColors.length) | 0];
                let wire = availableWires[(Math.random() * availableWires.length) | 0];
                let cell1 = wire % (W * H);
                let cell2 = (wire / (W * H)) | 0;
                taken.add(cell1);
                taken.add(cell2);
                taken.add(color);
                taken.add(`Wire:${cell1}:${cell2}`);
                for (let cell = 0; cell < W * H; cell++)
                    if (this.distance(cell1 % W, (cell1 / W) | 0, cell2 % W, (cell2 / W) | 0, cell % W, (cell / W) | 0) < this._allowedDistance)
                        taken.add(cell);

                return `
                    <g fill='#5E4000' stroke='none'>
                        <rect x='${(cell1 % W) - .4}' y='${((cell1 / W) | 0) - .4}' width='.8' height='.8' />
                        <rect x='${(cell2 % W) - .4}' y='${((cell2 / W) | 0) - .4}' width='.8' height='.8' />
                    <${''}/g>
                    <path stroke-linecap='round' d='M${cell1 % W} ${(cell1 / W) | 0} ${cell2 % W} ${(cell2 / W) | 0}' fill='none' stroke='${this.WireColorsSvg[this.WireColors.indexOf(color)]}' stroke-width='.25' />
                `;
            }

            doIntersect(wire1s, wire1e, wire2s, wire2e)
            {
                let w1sx = wire1s % W;
                let w1ex = wire1e % W;
                let w2sx = wire2s % W;
                let w2ex = wire2e % W;
                let w1sy = (wire1s / W) | 0;
                let w1ey = (wire1e / W) | 0;
                let w2sy = (wire2s / W) | 0;
                let w2ey = (wire2e / W) | 0;

                let l1dy = w1ey - w1sy;
                let l1dx = w1ex - w1sx;
                let l2dx = w2ex - w2sx;
                let l2dy = w2ey - w2sy;

                let det = l1dx * l2dy - l1dy * l2dx;
                let l1 = l2dx * (w1sy - w2sy) - l2dy * (w1sx - w2sx);
                let l2 = l1dx * (w1sy - w2sy) - l1dy * (w1sx - w2sx);
                return det !== 0 && (det > 0
                    ? l1 >= 0 && l1 <= det && l2 >= 0 && l2 <= det
                    : l1 <= 0 && l1 >= det && l2 <= 0 && l2 >= det);
            }

            liesOn(point, start, end)
            {
                let x = point % W;
                let y = (point / W) | 0;
                let sx = start % W;
                let sy = (start / W) | 0;
                let ex = end % W;
                let ey = (end / W) | 0;

                if (sx === ex)
                    return x === sx && y >= sy && y <= ey;
                if (sx > ex)
                    return this.liesOn(point, end, start);
                return x >= sx && x <= ex && (x - sx) * (ey - sy) === (ex - sx) * (y - sy);
            }

            lambdaOfPointDroppedPerpendicularly(lx1, ly1, lx2, ly2, px, py)
            {
                let dirX = lx2 - lx1;
                let dirY = ly2 - ly1;
                return (dirX * (px - lx1) + dirY * (py - ly1)) / (dirX * dirX + dirY * dirY);
            }

            distance(lx1, ly1, lx2, ly2, px, py)
            {
                let lambda = this.lambdaOfPointDroppedPerpendicularly(lx1, ly1, lx2, ly2, px, py);
                let dx = lx1 + lambda * (lx2 - lx1);
                let dy = ly1 + lambda * (ly2 - ly1);
                return (
                    lambda <= 0 ? Math.sqrt(Math.pow(px - lx1, 2) + Math.pow(py - ly1, 2)) :
                    lambda >= 1 ? Math.sqrt(Math.pow(px - lx2, 2) + Math.pow(py - ly2, 2)) :
                    Math.sqrt(Math.pow(px - dx, 2) + Math.pow(py - dy, 2)));
            }
        }

        class KeyFactory extends ItemFactory
        {
            Generate(taken)
            {
                if (taken.has(this))
                    return null;

                let availableCells = range(0, W * H).filter(i => this.isRectAvailable(taken, i, 2, 2));
                if (availableCells.length === 0)
                    return null;

                let cell = availableCells[(Math.random() * availableCells.length) | 0];
                this.claimRect(taken, cell, 2, 2);
                taken.add(this);

                return `
                    <g transform='translate(${(cell % W) + .5}, ${((cell / W) | 0) + .5})'>
                        <circle cx='0' cy='0' r='.95' fill='#ddd' />
                        <circle cx='0' cy='0' r='.8' fill='#aaa' />
                        <path transform='scale(.02)' d='M -0.113281,-24.999993 A 15,15 0 0 0 -15,-9.999993 15,15 0 0 0 -7.058594,3.234382 L -15,35.000007 H 15 L 7.058594,3.236335 A 15,15 0 0 0 15,-9.999993 a 15,15 0 0 0 -15,-15 15,15 0 0 0 -0.113281,0 z' fill='black' />
                    <${''}/g>
                `;
            }
        }

        class LedFactory extends ItemFactory
        {
            Generate(taken)
            {
                if (taken.has(this))
                    return null;

                let availableCells = range(0, W * H).filter(i => this.isRectAvailable(taken, i, 2, 2));
                if (availableCells.length === 0)
                    return null;

                let cell = availableCells[(Math.random() * availableCells.length) | 0];
                this.claimRect(taken, cell, 2, 2);
                taken.add(this);

                let colors = [ '#312921', '#4D90FF', '#EE4848', '#FFF', '#F5FF4F' ];

                return `<circle transform='translate(${(cell % W) + .5}, ${((cell / W) | 0) + .5})' cx='0' cy='0' r='.5' fill='${colors[(Math.random() * colors.length) | 0]}' stroke='black' stroke-width='.05' />`;
            }
        }

        class SwitchFactory extends ItemFactory
        {
            SwitchColors = [ 'BlueSwitch', 'RedSwitch', 'YellowSwitch', 'WhiteSwitch' ];
            SwitchColorsSvg = [ '#5859FF', '#F23E3E', '#FFEC62', '#FFFFFF' ];

            Generate(taken)
            {
                let availableCells = range(0, W * H).filter(c => this.isRectAvailable(taken, c, 1, 4));
                if (availableCells.length === 0)
                    return null;

                let availableColors = this.SwitchColors.filter(c => !taken.has(c));
                if (availableColors.length === 0)
                    return null;

                let cell = availableCells[(Math.random() * availableCells.length) | 0];
                this.claimRect(taken, cell, 1, 4);

                let color = availableColors[(Math.random() * availableColors.length) | 0];
                taken.add(color);

                return `
                    <g transform='translate(${cell % W}, ${((cell / W) | 0) + 1.5})' fill='${this.SwitchColorsSvg[this.SwitchColors.indexOf(color)]}' stroke='black' stroke-width='.05'>
                        <circle cx='0' cy='0' r='.4' fill='#ccc' />
                        <path d='M-.2 0 h .4 L .4 -1.5 h -.8 z' />
                        <path d='M .4 -1.5 v -.2 h -.8 v .2 z' />
                    <${''}/g>
                `;
            }
        }

        class KnobFactory extends ItemFactory
        {
            KnobPathSvg = 'M0.401 1.236 0.462 1.223 0.520 1.222 0.574 1.229 0.626 1.240 0.677 1.251 0.727 1.257 0.777 1.256 0.828 1.243 0.881 1.213 0.926 1.172 0.954 1.128 0.971 1.080 0.980 1.031 0.985 0.979 0.991 0.926 1.001 0.872 1.020 0.818 1.051 0.764 1.093 0.717 1.139 0.682 1.187 0.656 1.236 0.634 1.283 0.613 1.328 0.590 1.367 0.559 1.401 0.518 1.426 0.463 1.438 0.404 1.435 0.351 1.421 0.303 1.399 0.257 1.373 0.212 1.346 0.166 1.323 0.117 1.306 0.062 1.3 0 1.306 -0.062 1.323 -0.117 1.346 -0.166 1.373 -0.212 1.399 -0.257 1.421 -0.303 1.435 -0.351 1.438 -0.404 1.426 -0.463 1.401 -0.518 1.367 -0.559 1.328 -0.590 1.283 -0.613 1.236 -0.634 1.187 -0.656 1.139 -0.682 1.093 -0.717 1.051 -0.764 1.020 -0.818 1.001 -0.872 0.991 -0.926 0.985 -0.979 0.980 -1.031 0.971 -1.080 0.954 -1.128 0.926 -1.172 0.881 -1.213 0.828 -1.243 0.777 -1.256 0.727 -1.257 0.677 -1.251 0.626 -1.240 0.574 -1.229 0.520 -1.222 0.462 -1.223 0.401 -1.236 0.344 -1.261 0.297 -1.294 0.257 -1.332 0.221 -1.371 0.187 -1.410 0.150 -1.445 0.109 -1.473 0.060 -1.492 0 -1.5 -0.060 -1.492 -0.109 -1.473 -0.150 -1.445 -0.187 -1.410 -0.221 -1.371 -0.257 -1.332 -0.297 -1.294 -0.344 -1.261 -0.401 -1.236 -0.462 -1.223 -0.520 -1.222 -0.574 -1.229 -0.626 -1.240 -0.677 -1.251 -0.727 -1.257 -0.777 -1.256 -0.828 -1.243 -0.881 -1.213 -0.926 -1.172 -0.954 -1.128 -0.971 -1.080 -0.980 -1.031 -0.985 -0.979 -0.991 -0.926 -1.001 -0.872 -1.020 -0.818 -1.051 -0.764 -1.093 -0.717 -1.139 -0.682 -1.187 -0.656 -1.236 -0.634 -1.283 -0.613 -1.328 -0.590 -1.367 -0.559 -1.401 -0.518 -1.426 -0.463 -1.438 -0.404 -1.435 -0.351 -1.421 -0.303 -1.399 -0.257 -1.373 -0.212 -1.346 -0.166 -1.323 -0.117 -1.306 -0.062 -1.3 0 -1.306 0.062 -1.323 0.117 -1.346 0.166 -1.373 0.212 -1.399 0.257 -1.421 0.303 -1.435 0.351 -1.438 0.404 -1.426 0.463 -1.401 0.518 -1.367 0.559 -1.328 0.590 -1.283 0.613 -1.236 0.634 -1.187 0.656 -1.139 0.682 -1.093 0.717 -1.051 0.764 -1.020 0.818 -1.001 0.872 -0.991 0.926 -0.985 0.979 -0.980 1.031 -0.971 1.080 -0.954 1.128 -0.926 1.172 -0.881 1.213 -0.828 1.243 -0.777 1.256 -0.727 1.257 -0.677 1.251 -0.626 1.240 -0.574 1.229 -0.520 1.222 -0.462 1.223 -0.401 1.236 -0.344 1.261 -0.297 1.294 -0.257 1.332 -0.221 1.371 -0.187 1.410 -0.150 1.445 -0.109 1.473 -0.060 1.492 0 1.5 0.060 1.492 0.109 1.473 0.150 1.445 0.187 1.410 0.221 1.371 0.257 1.332 0.297 1.294 0.344 1.261z';

            Generate(taken)
            {
                if (taken.has(this))
                    return null;

                let availableCells = range(0, W * H).filter(i => this.isRectAvailable(taken, i, 3, 3));
                if (availableCells.length === 0)
                    return null;

                let cell = availableCells[(Math.random() * availableCells.length) | 0];
                this.claimRect(taken, cell, 3, 3);
                taken.add(this);

                let numTicks = 5 + ((Math.random() * 6) | 0);
                let ticks = '';
                for (let tick = 0; tick < numTicks; tick++)
                    ticks += `<path d='M0 -1.4 v .4' transform='rotate(${360*tick/numTicks})' stroke='black' stroke-width='.15' />`;

                return `
                    <g transform='translate(${(cell % W) + 1}, ${((cell / W) | 0) + 1})'>
                        ${ticks}
                        <path transform='scale(.55)' d='${this.KnobPathSvg}' fill='#ccc' stroke='black' stroke-width='.091' />
                        <path d='M0 -.6 .2 -.2 -.2 -.2z' transform='rotate(${360*((Math.random() * numTicks) | 0)/numTicks})' />
                    <${''}/g>
                `;
            }
        }

        class ButtonFactory extends ItemFactory
        {
            ButtonColors = [ 'RedButton', 'YellowButton', 'BlueButton', 'WhiteButton' ];
            ButtonColorsSvg = [ '#FF5656', '#FDFF76', '#4F74FF', '#C1C5C9' ];

            Generate(taken)
            {
                let availableColors = this.ButtonColors.filter(col => !taken.has(col));
                if (availableColors.length === 0)
                    return null;

                let availableSpots = range(0, W * H).filter(topleft => this.isRectAvailable(taken, topleft, 3, 3));
                if (availableSpots.length == 0)
                    return null;

                let topLeftCell = availableSpots[(Math.random() * availableSpots.length) | 0];
                let color = availableColors[(Math.random() * availableColors.length) | 0];
                this.claimRect(taken, topLeftCell, 3, 3);
                taken.add(color);
                let numVertices = 3 + ((Math.random() * 4) | 0);

                return `<path fill='${this.ButtonColorsSvg[this.ButtonColors.indexOf(color)]}' stroke='black' stroke-width='.05' d='M${range(0, numVertices).map((_, v) => `${1.25*Math.cos(2*Math.PI*v/numVertices)} ${1.25*Math.sin(2*Math.PI*v/numVertices)}`).join(' ')}z' transform='translate(${topLeftCell % W + 1}, ${((topLeftCell / W) | 0) + 1}) rotate(${Math.random() * 360})' />`;
            }
        }

        class BrailleDisplayFactory extends ItemFactory
        {
            Generate(taken)
            {
                if (taken.has(this))
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 2, 3));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                this.claimRect(taken, location, 2, 3);
                taken.add(this);

                let dots = '';
                for (let dot = 0; dot < 6; dot++)
                    dots += `<circle cx='${-.3 + .6*(dot % 2) + (location % W + .5)}' cy='${-.6 + .6*((dot / 2) | 0) + ((location / W) | 0) + 1}' r='.2' />`;

                return `<rect fill='#581502' stroke='#C46058' stroke-width='.2' x='${location % W - .3}' y='${((location / W) | 0) - .2}' width='1.6' height='2.4' /><g fill='#471C12'>${dots}<${''}/g>`;
            }
        }

        class DigitDisplayFactory extends ItemFactory
        {
            Generate(taken)
            {
                if (taken.has(this))
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 2, 3));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                this.claimRect(taken, location, 2, 3);
                taken.add(this);

                return `
                    <g transform='translate(${location % W + .5}, ${((location / W) | 0) + 1})'>
                        <rect fill='#253C96' stroke='#4B8EE6' stroke-width='.2' x='-.7' y='-1' width='1.4' height='2' />
                        <text font-family='LCDClock' fill='#253365' x='.05' y='.8' text-anchor='middle' font-size='1.55'>8<${''}/text>
                        <path d='M -.5 -1.1 .5 -1.1 0 -1.4 z M -.5 1.1 .5 1.1 0 1.4 z' fill='#EBB16A' />
                    <${''}/g>
                `;
            }
        }

        class SliderFactory extends ItemFactory
        {
            Orientations = [ 'HorizontalSlider', 'VerticalSlider' ];
            LongSlots = 5;
            ShortSlots = 2;
            SW(orientation) { return orientation === 'HorizontalSlider' ? this.LongSlots : this.ShortSlots; }
            SH(orientation) { return orientation === 'HorizontalSlider' ? this.ShortSlots : this.LongSlots; }

            Generate(taken)
            {
                let orientations = this.Orientations.filter(or => !taken.has(or));
                if (orientations.length === 0)
                    return null;

                let positions = [];
                for (let ori of orientations)
                    for (let c of range(0, W*H))
                        if (this.isRectAvailable(taken, c, this.SW(ori), this.SH(ori)))
                            positions.push({ Cell: c, Orientation: ori });
                if (positions.length === 0)
                    return null;

                let position = positions[(Math.random() * positions.length) | 0];
                this.claimRect(taken, position.Cell, this.SW(position.Orientation), this.SH(position.Orientation));
                taken.add(position.Orientation);

                let numTicks = 3 + ((Math.random() * 5) | 0);
                let ticks = range(0, numTicks).map(t => `M${4*t/(numTicks-1)} .2 v -.4`).join('');
                return `
                    <g transform='translate(${position.Cell % W + .5}, ${((position.Cell / W) | 0) + .5}) rotate(${position.Orientation === "HorizontalSlider" ? 0 : 90}) translate(-.5, -.5)'>
                        <path d='M-.3 .35 h 4.6 v .3 h -4.6 z' fill='none' stroke='black' stroke-width='.1' />
                        <path d='${ticks}' fill='none' stroke='black' stroke-width='.1' />
                        <path d='M${4*((Math.random() * numTicks) | 0)/(numTicks-1) - .25} -.2 h .5 v 1.4 h -.5 z' fill='#ccc' stroke='black' stroke-width='.05' />
                    <${''}/g>
                `;
            }
        }

        class KeypadFactory extends ItemFactory
        {
            Sizes = [ 'Keypad2x2', 'Keypad1x3', 'Keypad1x4', 'Keypad3x1', 'Keypad4x1' ];
            Widths = [ 2, 1, 1, 3, 4 ];
            Heights = [ 2, 3, 4, 1, 1 ];

            Generate(taken)
            {
                let availableSlots = [];
                for (let sizeIx = 0; sizeIx < this.Sizes.length; sizeIx++)
                {
                    let size = this.Sizes[sizeIx];
                    if (!taken.has(size))
                        for (let topleft of range(0, W*H))
                            if (this.isRectAvailable(taken, topleft, 2 * this.Widths[sizeIx], 2 * this.Heights[sizeIx]))
                                availableSlots.push({ TopLeft: topleft, Size: size, Width: this.Widths[sizeIx], Height: this.Heights[sizeIx] });
                }
                if (availableSlots.length === 0)
                    return null;

                let slot = availableSlots[(Math.random() * availableSlots.length) | 0];
                this.claimRect(taken, slot.TopLeft, 2 * slot.Width, 2 * slot.Height);
                taken.add(slot.Size);

                let keycaps = '';
                const sf = 1.7;
                const bv = .16;
                const ledW = .3;
                const ledH = .2;
                for (let x = 0; x < slot.Width; x++)
                    for (let y = 0; y < slot.Height; y++)
                        keycaps += `
                            <rect x='${sf*x - slot.Width*sf/2}' y='${sf*y - slot.Height*sf/2}' width='${sf}' height='${sf}' fill='#E7E3DB' stroke='black' stroke-width='.1' />
                            <path d='M${sf*x - slot.Width*sf/2 + sf} ${sf*y - slot.Height*sf/2} v ${sf} h ${-sf} l ${sf*bv} ${-sf*bv} h ${sf*(1-2*bv)} v ${-sf*(1-2*bv)} z' fill='black' opacity='.5' />
                            <path d='M${sf*x - slot.Width*sf/2} ${sf*y - slot.Height*sf/2 + sf} v ${-sf} h ${sf} l ${-sf*bv} ${sf*bv} h ${-sf*(1-2*bv)} v ${sf*(1-2*bv)} z' fill='white' opacity='.5' />
                            <path d='M${sf*x - slot.Width*sf/2 + sf/2 - ledW} ${sf*y - slot.Height*sf/2 + .35} h ${2*ledW} v ${ledH} h ${-2*ledW} z' fill='#292929' />
                        `;

                return `<g transform='translate(${slot.TopLeft % W + slot.Width - .5}, ${((slot.TopLeft / W) | 0) + slot.Height - .5})'>${keycaps}<${''}/g>`;
            }
        }

        class ColoredKeypadFactory extends ItemFactory
        {
            Sizes = [ 'ColoredKeypad1x4', 'ColoredKeypad1x5', 'ColoredKeypad1x6', 'ColoredKeypad2x2', 'ColoredKeypad2x3', 'ColoredKeypad3x2', 'ColoredKeypad4x1', 'ColoredKeypad5x1', 'ColoredKeypad6x1' ];
            Widths = [ 1, 1, 1, 2, 2, 3, 4, 5, 6 ];
            Heights = [ 4, 5, 6, 2, 3, 2, 1, 1, 1 ];
            CWidths = [ 2, 2, 2, 3, 3, 4, 6, 7, 8 ];
            CHeights = [ 6, 7, 8, 3, 4, 3, 2, 2, 2 ];
            Colors = [ 'RedKeypad', 'YellowKeypad', 'BlueKeypad' ];
            ColorsSvg = [ '#F96668', '#E2ED81', '#638EFF' ];

            Generate(taken)
            {
                let availableConfigurations = [];
                for (let color of this.Colors)
                    if (!taken.has(color))
                        for (let sizeIx = 0; sizeIx < this.Sizes.length; sizeIx++)
                        {
                            let size = this.Sizes[sizeIx];
                            for (let topLeftCell of range(0, W*H))
                                if (this.isRectAvailable(taken, topLeftCell, this.CWidths[sizeIx], this.CHeights[sizeIx]))
                                    availableConfigurations.push({ Color: color, Size: size, TopLeftCell: topLeftCell, Width: this.Widths[sizeIx], Height: this.Heights[sizeIx], CWidth: this.CWidths[sizeIx], CHeight: this.CHeights[sizeIx] });
                        }
                if (availableConfigurations.length === 0)
                    return null;

                let config = availableConfigurations[(Math.random() * availableConfigurations.length) | 0];
                taken.add(config.Color);
                this.claimRect(taken, config.TopLeftCell, config.CWidth, config.CHeight);

                let keycaps = '';
                const sf = 1.25;
                const bv = .12;
                const ledW = .22;
                const ledH = .15;
                for (let x = 0; x < config.Width; x++)
                    for (let y = 0; y < config.Height; y++)
                        keycaps += `
                            <rect x='${sf*x - config.Width*sf/2}' y='${sf*y - config.Height*sf/2}' width='${sf}' height='${sf}' fill='${this.ColorsSvg[this.Colors.indexOf(config.Color)]}' stroke='black' stroke-width='.1' />
                            <path d='M${sf*x - config.Width*sf/2 + sf} ${sf*y - config.Height*sf/2} v ${sf} h ${-sf} l ${sf*bv} ${-sf*bv} h ${sf*(1-2*bv)} v ${-sf*(1-2*bv)} z' fill='black' opacity='.5' />
                            <path d='M${sf*x - config.Width*sf/2} ${sf*y - config.Height*sf/2 + sf} v ${-sf} h ${sf} l ${-sf*bv} ${sf*bv} h ${-sf*(1-2*bv)} v ${sf*(1-2*bv)} z' fill='white' opacity='.5' />
                            <path d='M${sf*x - config.Width*sf/2 + sf/2 - ledW} ${sf*y - config.Height*sf/2 + .26} h ${2*ledW} v ${ledH} h ${-2*ledW} z' fill='#292929' />
                        `;

                return `<g transform='translate(${config.TopLeftCell % W + (config.CWidth-1)/2}, ${((config.TopLeftCell / W) | 0) + (config.CHeight-1)/2})'>${keycaps}<${''}/g>`;
            }
        }

        class MazeFactory extends ItemFactory
        {
            MinWidth = 3;
            MaxWidth = 4;
            MinHeight = 3;
            MaxHeight = 4;
            NumShapes = 3*3;
            ShapeColors = [ '#FF3D3D', '#EBEE0B', '#3D94FF' ];
            Shapes = [
                'M 0,-5 1.116792,-1.5371323 4.7552826,-1.5450848 1.8070074,0.58713227 2.9389262,4.0450851 0,1.9 l -2.9389264,2.2550849 1.131919,-3.45795261 -2.9482751,-2.13221739 3.6384905,0.00795 z',
                'M 0,-5 4.330127,2.5 l -8.6602541,0 z',
                'm -1.5,-4 v 2.5 H -4 v 3 h 2.5 V 4 h 3 V 1.5 H 4 v -3 H 1.5 V -4 Z'
            ];

            Generate(taken)
            {
                let availableConfigs = [];
                for (let width of range(this.MinWidth, this.MaxWidth - this.MinWidth + 1))
                    for (let height of range(this.MinHeight, this.MaxHeight - this.MinHeight + 1))
                        if (!taken.has(`Maze:${width}:${height}`))
                            for (let cell of range(0, W * H))
                                if (this.isRectAvailable(taken, cell, width + 1, height + 1))
                                    availableConfigs.push({ Cell: cell, Width: width, Height: height });

                if (availableConfigs.length === 0)
                    return null;

                let configIx = (Math.random() * availableConfigs.length) | 0;
                let config = availableConfigs[configIx];

                this.claimRect(taken, config.Cell, config.Width + 1, config.Height + 1);
                taken.add(`Maze:${config.Width}:${config.Height}`);

                let shape = (Math.random() * this.NumShapes) | 0;

                let cx = config.Cell % W + config.Width / 2;
                let cy = ((config.Cell / W) | 0) + config.Height / 2;
                let dots = '';
                let symbolPosition = (Math.random() * config.Width * config.Height) | 0;
                const sf = .8;
                const ds = .3;
                const bv = .3;
                for (let x = 0; x < config.Width; x++)
                    for (let y = 0; y < config.Height; y++)
                        dots += `<rect x='${cx - sf*(config.Width-1)/2 + sf*x - ds/2}' y='${cy - sf*(config.Height-1)/2 + sf*y - ds/2}' width='${ds}' height='${ds}' fill='#EAEAEA' />`;
                return `
                    <path fill='#241D15' stroke='#aaa' stroke-width='.15' d='M
                        ${cx - config.Width/2} ${cy - config.Height/2 + bv} ${cx - config.Width/2 + bv} ${cy - config.Height/2}
                        ${cx + config.Width/2 - bv} ${cy - config.Height/2} ${cx + config.Width/2} ${cy - config.Height/2 + bv}
                        ${cx + config.Width/2} ${cy + config.Height/2 - bv} ${cx + config.Width/2 - bv} ${cy + config.Height/2}
                        ${cx - config.Width/2 + bv} ${cy + config.Height/2} ${cx - config.Width/2} ${cy + config.Height/2 - bv}z' />
                    ${dots}
                    <path fill='${this.ShapeColors[(shape / 3) | 0]}' d='${this.Shapes[shape % 3]}'
                        transform='translate(${cx - sf*(config.Width-1)/2 + sf*(symbolPosition % config.Width)}, ${cy - sf*(config.Height-1)/2 + sf*((symbolPosition / config.Width) | 0)}) scale(.1) rotate(${360*Math.random()})' />
                    <path fill='#EBB16A' transform='translate(${cx}, ${cy})' d='
                        M -.75 ${-.5*config.Height - .07} .75 ${-.5*config.Height - .07} 0 ${-.5*config.Height - .37} z
                        M -.75 ${.5*config.Height + .07} .75 ${.5*config.Height + .07} 0 ${.5*config.Height + .37} z
                        M ${-.5*config.Width - .07} -.75 ${-.5*config.Width - .07} .75 ${-.5*config.Width - .37} 0 z
                        M ${.5*config.Width + .07} -.75 ${.5*config.Width + .07} .75 ${.5*config.Width + .37} 0 z' />
                `;
            }
        }

        class LetterDisplayFactory extends ItemFactory
        {
            Segments = [
                "M5.104.25L2.855 2.5l2.249 2.25h29.792l2.249-2.25L34.896.25H5.104z",
                "M2.5 2.855L.25 5.104v27.292l2.25 2.249 2.25-2.249V5.104L2.5 2.855z",
                "M5.25 5.25v5.66l9.85 21.34h-.041l4.384 2.193-2.193-4.384v-3.885L7.592 5.25H5.25z",
                "M17.75 5.25v24.691L20 34.443l2.25-4.502V5.25h-4.5z",
                "M32.408 5.25L22.75 26.174v3.885l-2.193 4.384 4.384-2.193h-.04l9.849-21.34V5.25h-2.342z",
                "M37.5 2.855l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V5.104L37.5 2.855z",
                "M5.104 32.75L2.855 35l2.249 2.25h9.837L19.443 35l-4.502-2.25H5.104z",
                "M25.059 32.75L20.557 35l4.5 2.25h9.84L37.254 35l-2.249-2.25H25.06z",
                "M2.5 35.355L.25 37.604v27.292l2.25 2.249 2.25-2.249V37.604L2.5 35.355z",
                "M19.443 35.557L15.06 37.75h.04L5.25 59.09v5.66h2.342l9.658-20.924v-3.885l2.193-4.384z",
                "M20 35.557l-2.25 4.502V64.75h4.5V40.059L20 35.557z",
                "M20.557 35.557l2.193 4.384v3.885l9.658 20.924h2.342v-5.66L24.9 37.75h.041l-4.384-2.193z",
                "M37.5 35.355l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V37.604l-2.25-2.249z",
                "M5.104 65.25L2.855 67.5l2.249 2.25h29.792l2.249-2.25-2.249-2.25H5.104z"
            ];
            SegmentMapping = [ "abfimgh", "adfhkmn", "abin", "adfkmn", "abghin", "abgih", "abinmh", "bighfm", "adkn", "fmn", "bigel", "bin", "ibcefm", "ibclmf", "abfimn", "biafgh", "abfilmn", "abfghil", "abghmn", "adk", "binmf", "bije", "bijlmf", "cejl", "cek", "aejn" ];

            Generate(taken)
            {
                if (taken.has(this))
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 4, 3));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                this.claimRect(taken, location, 4, 3);
                taken.add(this);

                let letters = '';
                for (let ltrIx = 0; ltrIx < 3; ltrIx++)
                {
                    let ltr = (Math.random() * 26) | 0;
                    for (let sgIx = 0; sgIx < this.Segments.length; sgIx++)
                        letters += `<path transform='translate(${45*ltrIx}, 0)' d='${this.Segments[sgIx]}' fill='${this.SegmentMapping[ltr].includes(String.fromCharCode(97 + sgIx)) ? "#FBFFD4" : "#28580D"}' />`;
                }

                return `
                    <g transform='translate(${location % W + 1.5}, ${((location / W) | 0) + 1})'>
                        <rect fill='#227B04' stroke='#56D661' stroke-width='.2' x='-1.8' y='-1' width='3.6' height='2' />
                        <path d='M -.5 1.1 .5 1.1 0 1.4 z' fill='#EBB16A' transform='translate(-1.035, 0)' />
                        <path d='M -.5 1.1 .5 1.1 0 1.4 z' fill='#EBB16A' />
                        <path d='M -.5 1.1 .5 1.1 0 1.4 z' fill='#EBB16A' transform='translate(1.035, 0)' />
                    <${''}/g>
                    <g transform='translate(${location % W + .02}, ${((location / W) | 0) + .2}) scale(.023)'>${letters}<${''}/g>
                `;
            }
        }

        class DieFactory extends ItemFactory
        {
            Pips = [
                "",
                "<circle cx='0' cy='0' r='.1'/>",
                "<circle cx='.25' cy='.25' r='.1'/><circle cx='-.25' cy='-.25' r='.1'/>",
                "<circle cx='0' cy='0' r='.1'/><circle cx='.25' cy='.25' r='.1'/><circle cx='-.25' cy='-.25' r='.1'/>",
                "<circle cx='.25' cy='.25' r='.1'/><circle cx='-.25' cy='-.25' r='.1'/><circle cx='-.25' cy='.25' r='.1'/><circle cx='.25' cy='-.25' r='.1'/>",
                "<circle cx='0' cy='0' r='.1'/><circle cx='.25' cy='.25' r='.1'/><circle cx='-.25' cy='-.25' r='.1'/><circle cx='-.25' cy='.25' r='.1'/><circle cx='.25' cy='-.25' r='.1'/>",
            ];

            Generate(taken)
            {
                let avail = ["DieLOD", "DieDOL"].filter(s => !taken.has(s));
                if (avail.length == 0)
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 2, 2));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                let style = avail[(Math.random() * avail.length) | 0];
                this.claimRect(taken, location, 2, 2);
                taken.add(style);

                let pips = this.Pips[(Math.random() * 6) | 0];
                let rot = (Math.random() * 4) | 0;

                let c1 = `hsl(${360*Math.random()}, ${10 + 10*Math.random()}%, ${80 + 10*Math.random()}%)`;
                let c2 = `hsl(${360*Math.random()}, ${50 + 10*Math.random()}%, ${10 + 10*Math.random()}%)`;
                if(style === "DieLOD")
                    [c1, c2] = [c2, c1];

                return `
                    <g transform='translate(${location % W + .5}, ${((location / W) | 0) + .5}) rotate(${Math.atan2(2.54 + location / W, 8.38 - location % W) / Math.PI * -180 + 90 * rot})'>
                        <path d='M -.3 -.55 0 -.83 .3 -.55 z' fill='#EBB16A' />
                        <path d='M -.3 -.55 0 -.83 .3 -.55 z' fill='#EBB16A' transform='rotate(90)'/>
                        <path d='M -.3 -.55 0 -.83 .3 -.55 z' fill='#EBB16A' transform='rotate(180)'/>
                        <path d='M -.3 -.55 0 -.83 .3 -.55 z' fill='#EBB16A' transform='rotate(270)'/>
                        <rect x='-.5' y='-.5' width='1' height='1' rx='.2' fill='${c1}'/>
                        <g fill='${c2}'>
                            ${pips}
                        <${''}/g>
                    <${''}/g>
                `;
            }
        }

        class TimerFactory extends ItemFactory
        {
            Segments = [
                "<path d='M .08 0.07m.07-.07 .26 0 .07 .07-.07 .07-.26 0-.07-.07z' fill='#{}'/>",
                "<path d='M .07 0.08m-.07 .07 0 .26 .07 .07 .07-.07 0-.26-.07-.07z' fill='#{}'/>",
                "<path d='M .49 0.08m-.07 .07 0 .26 .07 .07 .07-.07 0-.26-.07-.07z' fill='#{}'/>",
                "<path d='M .08 0.49m.07-.07 .26 0 .07 .07-.07 .07-.26 0-.07-.07z' fill='#{}'/>",
                "<path d='M .07 0.50m-.07 .07 0 .26 .07 .07 .07-.07 0-.26-.07-.07z' fill='#{}'/>",
                "<path d='M .49 0.50m-.07 .07 0 .26 .07 .07 .07-.07 0-.26-.07-.07z' fill='#{}'/>",
                "<path d='M .08 0.91m.07-.07 .26 0 .07 .07-.07 .07-.26 0-.07-.07z' fill='#{}'/>"
            ];

            SegmentMapping = [
                [true, true, true, false, true, true, true],
                [false, false, true, false, false, true, false],
                [true, false, true, true, true, false, true],
                [true, false, true, true, false, true, true],
                [false, true, true, true, false, true, false],
                [true, true, false, true, false, true, true],
                [true, true, false, true, true, true, true]
            ];

            Generate(taken)
            {
                let avail = ["TimerA", "TimerD"].filter(s => !taken.has(s));
                if (avail.length == 0)
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 2, 2));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                let style = avail[(Math.random() * avail.length) | 0];
                this.claimRect(taken, location, 2, 2);
                taken.add(style);

                let i = (Math.random() * 4) | 0;
                let maxs = [[2, 3, 5, 7], [2, 3, 5], [2, 3], [7]];
                let maxA = maxs[0][i];
                let maxB = maxs[i][(Math.random() * maxs[i].length) | 0];
                let A = (Math.random() * maxA) | 0;
                let B = (Math.random() * maxB) | 0;

                return `
                    <g transform='translate(${location % W - .5}, ${((location / W) | 0) - .5})'>
                        <rect x='.3' y='.3' width='1.4' height='1.4' fill='#17144E' stroke='#aaa' stroke-width='.2' rx='.1'/>
                        <g fill='#${["DFF3FF", "292E31"][(Math.random() * 2) | 0]}'>
                            <path d='M 1 .8m-.07-.07 0-.07 .07-.07 .07 .07 0 .07-.07 .07z'/>
                            <path d='M 1 1.2m-.07 .07 0 .07 .07 .07 .07-.07 0-.07-.07-.07z'/>
                        <${''}/g>
                        <g transform='translate(.5 .5) scale(.7 1)'>${range(0,7).map(i => this.Segments[i].replace("{}", this.SegmentMapping[A][i] ? "DFF3FF" : "292E31")).join("")}<${''}/g>
                        <g transform='translate(1.108 .5) scale(.7 1)'>${range(0,7).map(i => this.Segments[i].replace("{}", this.SegmentMapping[B][i] ? "DFF3FF" : "292E31")).join("")}<${''}/g>
                    <${''}/g>
                `;
            }
        }

        class BulbFactory extends ItemFactory
        {
            Generate(taken)
            {
                let avail = ["BulbY", "BulbW", "BulbR"].filter(s => !taken.has(s));
                if (avail.length == 0)
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 2, 2));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                let style = avail[(Math.random() * avail.length) | 0];
                this.claimRect(taken, location, 2, 2);
                taken.add(style);

                let color =
                    style == "BulbY" ? ["806A00", "FFD500"] :
                    style == "BulbW" ? ["808080", "FFF"] :
                    ["800000", "F00"];

                return `
                    <g transform='translate(${location % W + .5}, ${((location / W) | 0) + .5}) rotate(${Math.random()*360})'>
                        <circle cx='0' cy='0' r='.6' fill='#EBB16A'/>
                        <path fill='#${color[(Math.random() * 2) | 0]}' transform='scale(0.03)' d='M.4422 19.0468c5.432-.1402 10.4722-2.8575 13.9304-6.7124 1.7727-1.9791 3.1538-4.334 3.646-7.0433a10.8982 10.8982 0 0 0-1.9183-8.2946C13.629-6.3823 9.9805-8.4936 6.263-8.1444 2.5483-7.7951-.4653-5.4721-2.9577-2.395l5.924 4.7942C4.6942.2641 6.2208-.4848 6.9775-.556c.7541-.0715 1.5055.0476 2.9713 2.0505.6562.8996.7409 1.5081.5715 2.4341-.1693.9287-.7726 2.1485-1.823 3.318C6.705 9.4688 3.194 11.2468.4317 11.4161m-.4297 7.631a19.1 19.1 0 0 0 19.05-19.05 19.1 19.1 0 0 0-19.05-19.05c-5.6 0-10.81 2.76-14.36 6.72a14.5 14.5 0 0 0-3.65 7.04c-.5 2.71.1 5.8 1.92 8.3 2.47 3.38 6.12 5.49 9.83 5.14 3.72-.35 6.73-2.67 9.22-5.75l-5.92-4.8c-1.73 2.14-3.26 2.89-4.01 2.96-.75.07-1.5-.05-2.97-2.05a2.73 2.73 0 0 1-.57-2.44 7.3 7.3 0 0 1 1.82-3.31c2.1-2.34 5.87-4.19 8.7-4.19 6.35 0 11.42 5.08 11.42 11.43 0 6.36-5.07 11.43-11.43 11.43m.4297-.011A11.3718 11.3718 0 0 1-11.4217-.0005a11.3718 11.3718 0 0 1 11.4274-11.43v-7.62c-10.4775 0-19.05 8.5751-19.05 19.05 0 10.4775 8.5725 19.05 19.05 19.05l.4365-.0026'/>
                        <path stroke='#000' transform='scale(0.03)' fill='none' stroke-width='1.6' d='M.4422 19.0468c5.432-.1402 10.4722-2.8575 13.9304-6.7124 1.7727-1.9791 3.1538-4.334 3.646-7.0433a10.8982 10.8982 0 0 0-1.9183-8.2946C13.629-6.3823 9.9805-8.4936 6.263-8.1444 2.5483-7.7951-.4653-5.4721-2.9577-2.395m5.924 4.7942C4.6942.2641 6.2208-.4848 6.9775-.556c.7541-.0715 1.5055.0476 2.9713 2.0505.6562.8996.7409 1.5081.5715 2.4341-.1693.9287-.7726 2.1485-1.823 3.318C6.705 9.4688 3.194 11.2468.4317 11.4161m-.4253 7.633a19.195 19.195 0 0 0 .473-.007m0 0c10.3217-.2828 18.55-8.7174 18.577-19.043-.0275-10.5096-8.5404-19.0225-19.05-19.05-5.6 0-10.81 2.76-14.36 6.72a14.5 14.5 0 0 0-3.65 7.04c-.5 2.71.1 5.8 1.92 8.3 2.47 3.38 6.12 5.49 9.83 5.14 3.72-.35 6.73-2.67 9.22-5.75m-5.918-4.7982-.002-.0018c-1.73 2.14-3.26 2.89-4.01 2.96-.75.07-1.5-.05-2.97-2.05a2.73 2.73 0 0 1-.57-2.44 7.3 7.3 0 0 1 1.82-3.31c2.1-2.34 5.87-4.19 8.7-4.19 3.2092 0 6.0914 1.2976 8.1576 3.4008M1.2252 11.3664a11.805 11.805 0 0 1-1.2188.0628m.4209-.015a11.4057 11.4057 0 0 1-.4135.01m0 0A11.3718 11.3718 0 0 1-8.1684 8.02m-8.917-16.4195-.0046.0094c-1.2533 2.5345-1.9586 5.3828-1.9586 8.3874 0 10.4775 8.5725 19.05 19.05 19.05l.4365-.0026'/>
                    <${''}/g>
                `;
            }
        }

        class ColoredKnobFactory extends ItemFactory
        {
            Generate(taken)
            {
                let avail = ["KnobR", "KnobY", "KnobB", "KnobK"].filter(s => !taken.has(s));
                if (avail.length == 0)
                    return null;

                let locations = range(0, W * H).filter(tlc => this.isRectAvailable(taken, tlc, 2, 2));
                if (locations.length === 0)
                    return null;

                let location = locations[(Math.random() * locations.length) | 0];
                let style = avail[(Math.random() * avail.length) | 0];
                this.claimRect(taken, location, 2, 2);
                taken.add(style);

                let color =
                    style == "KnobY" ? "CACA42" :
                    style == "KnobR" ? "FF5A5A" :
                    style == "KnobB" ? "5E72FF" :
                    "4F4F4F";

                return `
                    <g transform='translate(${location % W + .5}, ${((location / W) | 0) + .5}) rotate(${((Math.random()*8) | 0) * 45})' stroke='#000' stroke-width='.1'>
                        <circle cx='0' cy='0' r='.7' fill='#${color}' stroke='none'/>
                        <path d='M.2-.7 .2 .7'/>
                        <path d='M-.2-.7-.2 .7'/>
                        <path d='M0 .7 0 .3' stroke='#fff'/>
                        <!-- Need the knob outline to overpaint the tick-mark -->
                        <circle cx='0' cy='0' r='.7' fill='none'/>
                    <${''}/g>
                `;
            }
        }

        window.addEventListener('DOMContentLoaded', () =>
        {
            let factories = [
                { weight: 1, factory: new WireFactory() },
                { weight: 1, factory: new DieFactory() },
                { weight: 2, factory: new KeyFactory() },
                { weight: 2, factory: new LedFactory() },
                { weight: 2, factory: new SwitchFactory() },
                { weight: 2, factory: new TimerFactory() },
                { weight: 2, factory: new BulbFactory() },
                { weight: 2, factory: new ColoredKnobFactory() },
                { weight: 3, factory: new KnobFactory() },
                { weight: 4, factory: new ButtonFactory() },
                { weight: 5, factory: new BrailleDisplayFactory() },
                { weight: 6, factory: new DigitDisplayFactory() },
                { weight: 7, factory: new SliderFactory() },
                { weight: 7, factory: new KeypadFactory() },
                { weight: 7, factory: new ColoredKeypadFactory() },
                { weight: 10, factory: new MazeFactory() },
                { weight: 10, factory: new LetterDisplayFactory() }
            ];

            // Decide what’s going to be on the module
            let iterations = 0;
            let items = [];
            let takens = new Set();
            const maxItems = 10;
            while (items.length !== maxItems && iterations < 100)
            {
                iterations++;
                let remainingFactories = factories.slice(0);
                takens.clear();
                items = [];
                while (remainingFactories.length > 0 && items.length < maxItems)
                {
                    let cumulativeWeight = remainingFactories.map((_, i) => remainingFactories.slice(0, i + 1).reduce((p, fi) => p + fi.weight, 0));
                    let rnd = (Math.random() * cumulativeWeight[cumulativeWeight.length - 1]) | 0;
                    let fIx = cumulativeWeight[cumulativeWeight.length - 1] == 0 ? 0 : cumulativeWeight.findIndex(w => rnd < w);
                    let item = remainingFactories[fIx].factory.Generate(takens);
                    if (item === null)
                        remainingFactories.splice(fIx, 1);
                    else
                    {
                        remainingFactories[fIx] = { weight: Math.max(1, remainingFactories[fIx].weight - 2), factory: remainingFactories[fIx].factory };
                        items.push(item);
                    }
                }
            }

            document.getElementById('dynamic-svg').innerHTML = items.join('');

            let rndNumber = 0n;
            for (let i = 0; i < 8; i++)
                rndNumber = (rndNumber << 8n) | BigInt((Math.random() * 256) | 0);
            rndNumber %= 1000000000000n;
            document.getElementById('dynamic-number').textContent = rndNumber;

            let componentTypes = arrayShuffle(["knobs", "sliders", "letters", "timers", "dice", "bulbs", "buttons", "keypads", "mazes", "wires", "switches", "LEDs", "Braille", "keys in locks", "7-segment displays"]);
            // The extra space in " LED" will get collapsed when we do x.slice(1) later.
            let componentTypesSingular = arrayShuffle([" knob", " slider", " letter display", " timer", " die", " bulb", " button", " keypad", " maze", " wire", " switch", "n LED", " Braille display", " key in lock", " 7-segment display"]);
            // Extra spaces will get collapsed.
            let colors = arrayShuffle(["red", "yellow", "blue", "white", "black", "", "", "", "", ""]);

            let flavourTexts = [
                'What does it want from me this time?',
                'There is a grace in wild variety surpassing rule and order.',
                'Every time I run across this module, I wonder how long I’ve been gone for.',
                'YOU’RE ALONE IN A ROOM WITH A BOMB. Your friends have the info you need to defuse it. But there’s a catch. They can’t see the bomb. So everyone will need to talk it out–fast!',
                'You matter. Unless you multiply yourself by the speed of light squared, then you energy.',
                arrayShuffle(['change', 'difference', 'diversification', 'diversity', 'heterogeneity', 'many-sidedness', 'multifariousness', 'variation']).join(" "),
                `Take the ${colors[0]} ${componentTypesSingular[0].slice(1)} and ${["turn", "press", "twist", "slide", "rotate", "switch", "flip", "flick", "set", "mash", "hold", "release"][(Math.random() * 12) | 0]} the ${colors[1]} ${componentTypesSingular[1].slice(1)} when the ${colors[2]} ${componentTypesSingular[2].slice(1)} matches the ${[`${colors[3]} number`, `${colors[3]} letter`, `orientation`, `${colors[3]} position`, `sound`, `${colors[3]} dot`, `${colors[3]} indicator`, `${colors[3]} ${componentTypesSingular[3].slice(1)}`][(Math.random() * 8) | 0]} of the ${colors[4]} ${componentTypesSingular[4].slice(1)}’s ${colors[5]} ${componentTypesSingular[5].slice(1)}.`,
                'Life is like a box of chocolates. You never know what you’re gonna get.',
                'Module Designed By Committee™',
                'Note: Each copy of this manual is unique. Please ensure that you have an authentic copy.',
                'This doesn’t feel right… and it definitely doesn’t look right.',
                `You are in a maze of ${["twisty", "moving", "confusing", "ticking", "rolling", "flashing", "clicking", "square", "smaller", "charged", "flicky", "blinking", "raised", "turning", "numeric"][(Math.random() * 15) | 0]}… ${["knobs", "sliders", "letters", "timers", "dice", "bulbs", "buttons", "keypads", "mazes", "wires", "switches", "LEDs", "Braille", "keys", "displays"][(Math.random() * 15) | 0]}? Nothing’s alike.`,
                `A 1 in ${rndNumber} chance.`,
                'So I met a programmer who couldn’t tell the difference between the different vowels. He pointed to: ‘var i’. “it E?” he asked.',
                `There are 10 types of people. Those who like ${range(0, 9).map(i => componentTypes[i]).join(", those who like ")}, and those who like ${componentTypes[9]}.`,
                'Did the fact that this module keeps changing just jump out at you?',
                'Press F5. A lot. You’re welcome.',
                'Life hack: Write down every possible arrangement of items so you will be ready next time!',
                `I swear that module didn’t have a${componentTypesSingular[0]} last time I looked…`,
                'Three time’s the charm, but this is like… 10 times?',
                `You know what my favourite number is? ${rndNumber}.`,
                'This module was manufactured by compulsively obsessed electronics-loving people with no self-control or discipline.',
                'I welcome change as long as nothing is altered or different.',
                'Variety is the very spice of life that gives it all its flavour.',
                'Change is inevitable, except from a vending machine.',
                'If variety is the spice of life, marriage is the big can of leftover spam.',
                'It’s missing a toilet paper holder and a kitchen sink. Oh and, how do I place a call?',
                'Plus ça change, plus c’est la même chose.',
                '47% of the time, it works every time.',
                'Strength lies in differences… and this module has plenty of that.',
                'A real Pollock of a module.',
                'Originally planned to be called “Diversity” before our marketing team realized it sounds like it starts with “Die”.',
                'Variety backwards… is variety!',
                'Worth 13 points in Scrabble.',
                'A module inducing anxiety was unleashed upon our society. With sliders and knobs and some bits and bobs, it rapidly gained notoriety.',
                'Who even reads these?',
                'There was a young lady named Sue, Whose taste was for things old and new; She relished them all, From big to real small; Variety excited her true.',
                'Okay, who asked an AI to design a module?',
                'The world is a pretty big place. Don’t limit yourself to just one flavour.',
                'Life is a journey, not a destination. So enjoy the variety along the way.',
                arrayShuffle(['cake', 'pie', 'cinnamon roll', 'cheesecake', 'tiramisu', 'brownie', 'cookie']).map(s => `The ${s} is a lie.`).join(" "),
                `There are about ${rndNumber} things that would be better than this right now.`,
                'The world is a stage. So don’t be afraid to play different roles.',
                'The only thing that’s constant in life is change.',
                'Life is a roller coaster. So enjoy the ups and downs.',
                '01010110010000010101001001001001010001010101010001011001',
                `You put your ${componentTypesSingular[0].slice(1)} in, you put your ${componentTypesSingular[0].slice(1)} out, you put your ${componentTypesSingular[0].slice(1)} in, and you shake it all about. You do the Hokey Pokey and you turn yourself around. That's what it's all about!`,
                'Has everything in the kitchen sink, and then some.',
                'Variety is not the enemy of order. It is the essential ingredient.',
                'Chaos is what happens when order breaks down. But chaos is also what makes new things possible.',
                'The only way to make sense out of change is to plunge into it, move with it, and join the dance.',
                'Life is a game of chance. The more chances you take, the better your odds of winning.',
                'The future is not an inevitability. It is a possibility.',
                'Creativity is the ability to introduce order into the randomness of nature.',
                'Change is inevitable, but growth is optional. Choose to grow.',
                'Change is the law of life. And those who look only to the past or present are certain to miss the future.',
                'The measure of intelligence is the ability to change.',
                `${rndNumber + 3n}… ${rndNumber + 2n}… ${rndNumber + 1n}… ${rndNumber}…`,
                `${capitalize(componentTypes[0])} are the lifeblood of bombs! Wait, no, ${componentTypes[1]} are the lifeblood. Or was it ${componentTypes[2]}? ${capitalize(componentTypes[3])}? No matter…`,
                `...- .- .-. .. . - -.--`,
                `Even my ${(Math.random() * 3 + 1) | 0}-year-old ${["son", "daughter", "child"][(Math.random() * 3) | 0]} couldn’t make something weirder than this.`,
                range(0, 8).map(i => capitalize(arrayShuffle(['v', 'a', 'r', 'i', 'e', 't', 'y']).join(""))).join(", ") + "…",
                'Truly, change is a beautiful thing.',
            ];
            document.getElementsByClassName('flavour-text')[0].innerText = flavourTexts[(Math.random() * flavourTexts.length) | 0];

            let pages = Array.from(document.getElementsByClassName('page'));
            for (let pIx = 0; pIx < pages.length; pIx++)
                pages[pIx].className = `page page-bg-0${(Math.random() * 7 + 1) | 0}`;
        });

        function arrayShuffle(list) {
            var i = list.length;
            while (i > 1)
            {
                var index = (Math.random() * i) | 0;
                i--;
                var value = list[index];
                list[index] = list[i];
                list[i] = value;
            }
            return list;
        }

        function capitalize(s) {
            return s.slice(0, 1).toUpperCase() + s.slice(1);
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Variety</span>
            </div>
            <div class="page-content">
                <div class="diagram">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 348 348">
                        <g stroke="black" stroke-width="3" fill="none">
                            <rect x="5" y="5" width="338" height="338"></rect>
                            <circle cx="305" cy="43" r="15"></circle>
                        </g>
                        <rect x="30" y="30" width="230" height="50"></rect>
                        <text id="dynamic-number" x="0" y="69" fill="white" text-anchor="end" font-size="35" font-family="LCDClock" transform="translate(255, 0) scale(.65, 1)">996322323919</text>
                        <g id="dynamic-svg" transform="translate(39, 105) scale(30)"><rect fill="#581502" stroke="#C46058" stroke-width=".2" x="4.7" y="3.8" width="1.6" height="2.4"></rect><g fill="#471C12"><circle cx="5.2" cy="4.4" r=".2"></circle><circle cx="5.8" cy="4.4" r=".2"></circle><circle cx="5.2" cy="5" r=".2"></circle><circle cx="5.8" cy="5" r=".2"></circle><circle cx="5.2" cy="5.6" r=".2"></circle><circle cx="5.8" cy="5.6" r=".2"></circle></g>
                    <g transform="translate(8.5, 3.5) rotate(90) translate(-.5, -.5)">
                        <path d="M-.3 .35 h 4.6 v .3 h -4.6 z" fill="none" stroke="black" stroke-width=".1"></path>
                        <path d="M0 .2 v -.4M2 .2 v -.4M4 .2 v -.4" fill="none" stroke="black" stroke-width=".1"></path>
                        <path d="M3.75 -.2 h .5 v 1.4 h -.5 z" fill="#ccc" stroke="black" stroke-width=".05"></path>
                    </g>

                    <g transform="translate(2.5, 5)">
                        <rect fill="#227B04" stroke="#56D661" stroke-width=".2" x="-1.8" y="-1" width="3.6" height="2"></rect>
                        <path d="M -.5 1.1 .5 1.1 0 1.4 z" fill="#EBB16A" transform="translate(-1.035, 0)"></path>
                        <path d="M -.5 1.1 .5 1.1 0 1.4 z" fill="#EBB16A"></path>
                        <path d="M -.5 1.1 .5 1.1 0 1.4 z" fill="#EBB16A" transform="translate(1.035, 0)"></path>
                    </g>
                    <g transform="translate(1.02, 4.2) scale(.023)"><path transform="translate(0, 0)" d="M5.104.25L2.855 2.5l2.249 2.25h29.792l2.249-2.25L34.896.25H5.104z" fill="#28580D"></path><path transform="translate(0, 0)" d="M2.5 2.855L.25 5.104v27.292l2.25 2.249 2.25-2.249V5.104L2.5 2.855z" fill="#FBFFD4"></path><path transform="translate(0, 0)" d="M5.25 5.25v5.66l9.85 21.34h-.041l4.384 2.193-2.193-4.384v-3.885L7.592 5.25H5.25z" fill="#28580D"></path><path transform="translate(0, 0)" d="M17.75 5.25v24.691L20 34.443l2.25-4.502V5.25h-4.5z" fill="#28580D"></path><path transform="translate(0, 0)" d="M32.408 5.25L22.75 26.174v3.885l-2.193 4.384 4.384-2.193h-.04l9.849-21.34V5.25h-2.342z" fill="#FBFFD4"></path><path transform="translate(0, 0)" d="M37.5 2.855l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V5.104L37.5 2.855z" fill="#28580D"></path><path transform="translate(0, 0)" d="M5.104 32.75L2.855 35l2.249 2.25h9.837L19.443 35l-4.502-2.25H5.104z" fill="#28580D"></path><path transform="translate(0, 0)" d="M25.059 32.75L20.557 35l4.5 2.25h9.84L37.254 35l-2.249-2.25H25.06z" fill="#28580D"></path><path transform="translate(0, 0)" d="M2.5 35.355L.25 37.604v27.292l2.25 2.249 2.25-2.249V37.604L2.5 35.355z" fill="#FBFFD4"></path><path transform="translate(0, 0)" d="M19.443 35.557L15.06 37.75h.04L5.25 59.09v5.66h2.342l9.658-20.924v-3.885l2.193-4.384z" fill="#FBFFD4"></path><path transform="translate(0, 0)" d="M20 35.557l-2.25 4.502V64.75h4.5V40.059L20 35.557z" fill="#28580D"></path><path transform="translate(0, 0)" d="M20.557 35.557l2.193 4.384v3.885l9.658 20.924h2.342v-5.66L24.9 37.75h.041l-4.384-2.193z" fill="#28580D"></path><path transform="translate(0, 0)" d="M37.5 35.355l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V37.604l-2.25-2.249z" fill="#28580D"></path><path transform="translate(0, 0)" d="M5.104 65.25L2.855 67.5l2.249 2.25h29.792l2.249-2.25-2.249-2.25H5.104z" fill="#28580D"></path><path transform="translate(45, 0)" d="M5.104.25L2.855 2.5l2.249 2.25h29.792l2.249-2.25L34.896.25H5.104z" fill="#FBFFD4"></path><path transform="translate(45, 0)" d="M2.5 2.855L.25 5.104v27.292l2.25 2.249 2.25-2.249V5.104L2.5 2.855z" fill="#28580D"></path><path transform="translate(45, 0)" d="M5.25 5.25v5.66l9.85 21.34h-.041l4.384 2.193-2.193-4.384v-3.885L7.592 5.25H5.25z" fill="#28580D"></path><path transform="translate(45, 0)" d="M17.75 5.25v24.691L20 34.443l2.25-4.502V5.25h-4.5z" fill="#28580D"></path><path transform="translate(45, 0)" d="M32.408 5.25L22.75 26.174v3.885l-2.193 4.384 4.384-2.193h-.04l9.849-21.34V5.25h-2.342z" fill="#FBFFD4"></path><path transform="translate(45, 0)" d="M37.5 2.855l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V5.104L37.5 2.855z" fill="#28580D"></path><path transform="translate(45, 0)" d="M5.104 32.75L2.855 35l2.249 2.25h9.837L19.443 35l-4.502-2.25H5.104z" fill="#28580D"></path><path transform="translate(45, 0)" d="M25.059 32.75L20.557 35l4.5 2.25h9.84L37.254 35l-2.249-2.25H25.06z" fill="#28580D"></path><path transform="translate(45, 0)" d="M2.5 35.355L.25 37.604v27.292l2.25 2.249 2.25-2.249V37.604L2.5 35.355z" fill="#28580D"></path><path transform="translate(45, 0)" d="M19.443 35.557L15.06 37.75h.04L5.25 59.09v5.66h2.342l9.658-20.924v-3.885l2.193-4.384z" fill="#FBFFD4"></path><path transform="translate(45, 0)" d="M20 35.557l-2.25 4.502V64.75h4.5V40.059L20 35.557z" fill="#28580D"></path><path transform="translate(45, 0)" d="M20.557 35.557l2.193 4.384v3.885l9.658 20.924h2.342v-5.66L24.9 37.75h.041l-4.384-2.193z" fill="#28580D"></path><path transform="translate(45, 0)" d="M37.5 35.355l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V37.604l-2.25-2.249z" fill="#28580D"></path><path transform="translate(45, 0)" d="M5.104 65.25L2.855 67.5l2.249 2.25h29.792l2.249-2.25-2.249-2.25H5.104z" fill="#FBFFD4"></path><path transform="translate(90, 0)" d="M5.104.25L2.855 2.5l2.249 2.25h29.792l2.249-2.25L34.896.25H5.104z" fill="#FBFFD4"></path><path transform="translate(90, 0)" d="M2.5 2.855L.25 5.104v27.292l2.25 2.249 2.25-2.249V5.104L2.5 2.855z" fill="#28580D"></path><path transform="translate(90, 0)" d="M5.25 5.25v5.66l9.85 21.34h-.041l4.384 2.193-2.193-4.384v-3.885L7.592 5.25H5.25z" fill="#28580D"></path><path transform="translate(90, 0)" d="M17.75 5.25v24.691L20 34.443l2.25-4.502V5.25h-4.5z" fill="#FBFFD4"></path><path transform="translate(90, 0)" d="M32.408 5.25L22.75 26.174v3.885l-2.193 4.384 4.384-2.193h-.04l9.849-21.34V5.25h-2.342z" fill="#28580D"></path><path transform="translate(90, 0)" d="M37.5 2.855l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V5.104L37.5 2.855z" fill="#28580D"></path><path transform="translate(90, 0)" d="M5.104 32.75L2.855 35l2.249 2.25h9.837L19.443 35l-4.502-2.25H5.104z" fill="#28580D"></path><path transform="translate(90, 0)" d="M25.059 32.75L20.557 35l4.5 2.25h9.84L37.254 35l-2.249-2.25H25.06z" fill="#28580D"></path><path transform="translate(90, 0)" d="M2.5 35.355L.25 37.604v27.292l2.25 2.249 2.25-2.249V37.604L2.5 35.355z" fill="#28580D"></path><path transform="translate(90, 0)" d="M19.443 35.557L15.06 37.75h.04L5.25 59.09v5.66h2.342l9.658-20.924v-3.885l2.193-4.384z" fill="#28580D"></path><path transform="translate(90, 0)" d="M20 35.557l-2.25 4.502V64.75h4.5V40.059L20 35.557z" fill="#FBFFD4"></path><path transform="translate(90, 0)" d="M20.557 35.557l2.193 4.384v3.885l9.658 20.924h2.342v-5.66L24.9 37.75h.041l-4.384-2.193z" fill="#28580D"></path><path transform="translate(90, 0)" d="M37.5 35.355l-2.25 2.249v27.292l2.25 2.249 2.25-2.249V37.604l-2.25-2.249z" fill="#28580D"></path><path transform="translate(90, 0)" d="M5.104 65.25L2.855 67.5l2.249 2.25h29.792l2.249-2.25-2.249-2.25H5.104z" fill="#28580D"></path></g>
                <path fill="#FF5656" stroke="black" stroke-width=".05" d="M1.25 0 0.6250000000000001 1.0825317547305482 -0.6249999999999998 1.0825317547305484 -1.25 1.5308084989341916e-16 -0.6250000000000006 -1.0825317547305482 0.6250000000000001 -1.0825317547305482z" transform="translate(8, 1) rotate(307.7245109517924)"></path><g transform="translate(3.5, 1)">
                            <rect x="-1.875" y="-1.25" width="1.25" height="1.25" fill="#F96668" stroke="black" stroke-width=".1"></rect>
                            <path d="M-0.625 -1.25 v 1.25 h -1.25 l 0.15 -0.15 h 0.95 v -0.95 z" fill="black" opacity=".5"></path>
                            <path d="M-1.875 0 v -1.25 h 1.25 l -0.15 0.15 h -0.95 v 0.95 z" fill="white" opacity=".5"></path>
                            <path d="M-1.47 -0.99 h 0.44 v 0.15 h -0.44 z" fill="#292929"></path>

                            <rect x="-1.875" y="0" width="1.25" height="1.25" fill="#F96668" stroke="black" stroke-width=".1"></rect>
                            <path d="M-0.625 0 v 1.25 h -1.25 l 0.15 -0.15 h 0.95 v -0.95 z" fill="black" opacity=".5"></path>
                            <path d="M-1.875 1.25 v -1.25 h 1.25 l -0.15 0.15 h -0.95 v 0.95 z" fill="white" opacity=".5"></path>
                            <path d="M-1.47 0.26 h 0.44 v 0.15 h -0.44 z" fill="#292929"></path>

                            <rect x="-0.625" y="-1.25" width="1.25" height="1.25" fill="#F96668" stroke="black" stroke-width=".1"></rect>
                            <path d="M0.625 -1.25 v 1.25 h -1.25 l 0.15 -0.15 h 0.95 v -0.95 z" fill="black" opacity=".5"></path>
                            <path d="M-0.625 0 v -1.25 h 1.25 l -0.15 0.15 h -0.95 v 0.95 z" fill="white" opacity=".5"></path>
                            <path d="M-0.22 -0.99 h 0.44 v 0.15 h -0.44 z" fill="#292929"></path>

                            <rect x="-0.625" y="0" width="1.25" height="1.25" fill="#F96668" stroke="black" stroke-width=".1"></rect>
                            <path d="M0.625 0 v 1.25 h -1.25 l 0.15 -0.15 h 0.95 v -0.95 z" fill="black" opacity=".5"></path>
                            <path d="M-0.625 1.25 v -1.25 h 1.25 l -0.15 0.15 h -0.95 v 0.95 z" fill="white" opacity=".5"></path>
                            <path d="M-0.22 0.26 h 0.44 v 0.15 h -0.44 z" fill="#292929"></path>

                            <rect x="0.625" y="-1.25" width="1.25" height="1.25" fill="#F96668" stroke="black" stroke-width=".1"></rect>
                            <path d="M1.875 -1.25 v 1.25 h -1.25 l 0.15 -0.15 h 0.95 v -0.95 z" fill="black" opacity=".5"></path>
                            <path d="M0.625 0 v -1.25 h 1.25 l -0.15 0.15 h -0.95 v 0.95 z" fill="white" opacity=".5"></path>
                            <path d="M1.03 -0.99 h 0.44 v 0.15 h -0.44 z" fill="#292929"></path>

                            <rect x="0.625" y="0" width="1.25" height="1.25" fill="#F96668" stroke="black" stroke-width=".1"></rect>
                            <path d="M1.875 0 v 1.25 h -1.25 l 0.15 -0.15 h 0.95 v -0.95 z" fill="black" opacity=".5"></path>
                            <path d="M0.625 1.25 v -1.25 h 1.25 l -0.15 0.15 h -0.95 v 0.95 z" fill="white" opacity=".5"></path>
                            <path d="M1.03 0.26 h 0.44 v 0.15 h -0.44 z" fill="#292929"></path>
                        </g><circle transform="translate(0.5, 1.5)" cx="0" cy="0" r=".5" fill="#F5FF4F" stroke="black" stroke-width=".05"></circle>
                    <g fill="#5E4000" stroke="none">
                        <rect x="6.6" y="4.6" width=".8" height=".8"></rect>
                        <rect x="6.6" y="6.6" width=".8" height=".8"></rect>
                    </g>
                    <path stroke-linecap="round" d="M7 5 7 7" fill="none" stroke="#2244dd" stroke-width=".25"></path>

                    <g fill="#5E4000" stroke="none">
                        <rect x="0.6" y="2.6" width=".8" height=".8"></rect>
                        <rect x="2.6" y="2.6" width=".8" height=".8"></rect>
                    </g>
                    <path stroke-linecap="round" d="M1 3 3 3" fill="none" stroke="#dd2222" stroke-width=".25"></path>

                    <g transform="translate(0, 5.5)" fill="#FFFFFF" stroke="black" stroke-width=".05">
                        <circle cx="0" cy="0" r=".4" fill="#ccc"></circle>
                        <path d="M-.2 0 h .4 L .4 -1.5 h -.8 z"></path>
                        <path d="M .4 -1.5 v -.2 h -.8 v .2 z"></path>
                    </g>

                    <g transform="translate(6, 1.5)" fill="#F23E3E" stroke="black" stroke-width=".05">
                        <circle cx="0" cy="0" r=".4" fill="#ccc"></circle>
                        <path d="M-.2 0 h .4 L .4 -1.5 h -.8 z"></path>
                        <path d="M .4 -1.5 v -.2 h -.8 v .2 z"></path>
                    </g>
                </g>
                    </svg>
                </div>
                <h2>On the Subject of Variety</h2>

                <p class="flavour-text">What does it want from me this time?</p>

                <p class="narrow">Begin with a list of the items on the module, sorted into the order shown below.</p>

                <ul id="variety-order"><li>Red keypad</li><li>White switch</li><li>Blue switch</li><li>4×3 maze (wide)</li><li>Key-in-lock</li><li>LED</li><li>3×1 white keypad (wide)</li><li>Yellow switch</li><li>Red knob</li><li>Dark-on-light die</li><li>Blue knob</li><li>Timer (descending)</li><li>4×4 maze</li><li>Red switch</li><li>Red wire</li><li>Vertical slider</li><li>White knob</li><li>Red button</li><li>Blue button</li><li>1×4 white keypad (tall)</li><li>Black knob</li><li>2×2 white keypad</li><li>Light-on-dark die</li><li>White button</li><li>White wire</li><li>Yellow button</li><li>Yellow bulb</li><li>Black wire</li><li>Horizontal slider</li><li>4×1 white keypad (wide)</li><li>Red bulb</li><li>Blue wire</li><li>Letter display</li><li>3×3 maze</li><li>3×4 maze (tall)</li><li>Yellow wire</li><li>Blue keypad</li><li>1×3 white keypad (tall)</li><li>Braille display</li><li>Yellow keypad</li><li>Timer (ascending)</li><li>Digit display</li><li>Yellow knob</li></ul>

                <!-- With the longest flavor text, #variety-order would be moved slightly down, which breaks the formatting. -->
                <p class="wide">Begin with a list of the items on the module, sorted into the order shown on the right.</p>

                <p>Observe the number displayed at the top of the module. Decoding this number involves an iterative process.
                    In each iteration, a number <var>n</var> is relevant. Perform these calculations:</p>

                <ul>
                    <li>Take the number <em>modulo</em> <var>n</var> to obtain a value.</li>
                    <li><em>Divide</em> the number by <var>n</var> (rounding down) to obtain the number for the next iteration.</li>
                </ul>

                <p>First, apply the iteration with <var>n</var> equal to the number of items in your list.
                    The value obtained identifies which item to interact with, numbered from 0.</p>

                <p>Next, apply the iteration in a way described by the below section for the relevant item.
                    In general, <var>n</var> is the number of states the item can be in and the value
                    identifies the state the item must be set to.</p>

                <p>Afterwards, remove the item from your list. Continue this process, each time with the reduced list
                    of remaining items.</p>

                <p>Variety will only issue a strike if an item is interacted with while an item earlier
                    in this process is in an invalid state. Incorrectly cut wires will only cause one strike.
                    All other types of items must be corrected to avoid further strikes.</p>

                <p>In the special case where the last item is put into the correct state, but an incorrectly
                    cut wire causes a strike, an item may need to have its state changed and changed back to disarm the module.</p>

            </div>
            <div class="page-footer relative-footer">Page 1 of 6</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Variety</span>
            </div>
            <div class="page-content">
                <div class='layout'>
                    <div>
                        <h3>White Knobs</h3>
                        <p><var>n</var> is the number of tickmarks. The states are numbered from 0 going clockwise.
                            To find out which tickmark is state 0, start with the up-facing tickmark and move clockwise
                            a number of tickmarks equal to the numeric value of the first character
                            in the serial number (letters are A=1 to Z=26).</p>
                    </div>
                    <div>
                        <h3>White keypads</h3>
                        <p><var>n</var> is the factorial of the number of keys. Obtain the order in which to press
                            the keys by applying the iterative process to the obtained value. In each iteration,
                            the value of <var>n</var> for the nested process is the number of remaining keys, which
                            are numbered from 0 in reading order.</p>
                    </div>
                    <div>
                        <h3>Colored keypads</h3>
                        <table class="keypads-table">
                            <tr><th>Color</th><th><var>k</var></th></tr>
                            <tr><td>Red</td><td class="keypad-color-rule">3</td></tr>
                            <tr><td>Yellow</td><td class="keypad-color-rule">2</td></tr>
                            <tr><td>Blue</td><td class="keypad-color-rule">4</td></tr>
                        </table>
                        <p><var>n</var> is equal to <var>b</var> choose <var>k</var>, where <var>b</var> is the
                            number of buttons and <var>k</var> is obtained from the table based on the keys’ color.</p>
                        <p>You will need to press <var>k</var> of the buttons. Write down all ways of choosing
                            <var>k</var> out of <var>b</var> buttons (with the buttons in reading order) and
                            sort them as if they were binary numbers (1 = press, 0 = no press). The value
                            identifies the combination to press (numbered from 0).</p>
                        <p style="font-size: 9pt">“<var>b</var> choose <var>k</var>” = <var>b</var>! / (<var>k</var>! × (<var>b</var> − <var>k</var>)!).<br>
                            ! is the factorial function.</p>
                    </div>
                    <div>
                        <h3>Sliders</h3>
                        <p><var>n</var> is the number of tickmarks. The states are numbered from 0, starting on the left for
                            horizontal sliders and the top for vertical ones.</p>
                    </div>
                    <div>
                        <h3>LEDs</h3>
                        <p>An LED starts out flashing between two colors. Look up that combination of colors in the following table
                            to obtain a new list of colors. <var>n</var> is the size of that list. The value identifies a color from that list, numbered from 0.</p>
                        <p>Tap the LED once to switch to input mode. The LED will cycle all five possible colors. Tap the LED again
                            when the correct color is shown to submit it.</p>
                        <table id="led-color-rules"><tr><th>R</th><th>Y</th><th>B</th><th>W</th><td class="corner"></td></tr><tr><td>K B Y R W</td><td>K Y W B R</td><td>K Y R W</td><td>B R W K</td><th>K</th></tr><tr><td class="corner"></td><td>Y W K B R</td><td>W B</td><td>B K Y</td><th>R</th></tr><tr><td class="corner"></td><td class="corner"></td><td>R Y K B</td><td>Y W B K</td><th>Y</th></tr><tr><td class="corner"></td><td class="corner"></td><td class="corner"></td><td>R W</td><th>B</th></tr></table>
                        <p style="font-size: 9pt">B = blue, K = black, R = red, W = white, Y = yellow</p>
                    </div>
                    <div>
                        <h3>Digit displays</h3>
                        <p><var>n</var> is the number of prior items in the process excluding wires.
                            The value identifies a prior item, numbered from 0 in the order of the process.</p>
                        <p>Set the display to the digit it showed in blue when that item was interacted with.
                            Entered digits are shown in yellow.</p>
                    </div>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 2 of 6</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Variety</span>
            </div>
            <div class="page-content">
                <div class='layout'>
                    <div>
                        <h3>Wires</h3>
                        <p><var>n</var> is 2. If the condition in the following table is <em>false</em>,
                            1 means “cut” and 0 means “don’t cut”; if it is <em>true</em>, they are reversed.</p>
                        <table class="wire-conditions">
                            <tr><th>Wire&nbsp;color or&nbsp;pattern</th><th>Condition</th></tr>
                            <tr><td><div>Black</div><svg class="wire-diagram" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 2" fill="black"><rect x="0" y="0" width="8" height="2" /></svg></td><td class="edgework-condition">more battery holders than port plates</td></tr>
                            <tr><td><div>Blue</div><svg class="wire-diagram" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 2" fill="black"><rect x="0" y="0" width="1" height="2" /><rect x="2" y="0" width="1" height="2" /><rect x="4" y="0" width="1" height="2" /><rect x="6" y="0" width="1" height="2" /></svg></td><td class="edgework-condition">more letters than digits in the serial number</td></tr>
                            <tr><td><div>Red</div><svg class="wire-diagram" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 2" fill="black"><rect x="0" y="0" width="3" height="2" /><rect x="4" y="0" width="3" height="2" /></svg></td><td class="edgework-condition">more parallel + serial&nbsp;ports than any other ports</td></tr>
                            <tr><td><div>Yellow</div><svg class="wire-diagram" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 2" fill="black"><rect x="0" y="0" width="1" height="2" /><rect x="4" y="0" width="1" height="2" /></svg></td><td class="edgework-condition">more lit than unlit indicators</td></tr>
                            <tr><td><div>White</div><svg class="wire-diagram" xmlns="http://www.w3.org/2000/svg" viewbox="0 0 8 2"></svg></td><td class="edgework-condition">more D&nbsp;batteries than AA&nbsp;batteries</td></tr>
                        </table>
                    </div>
                    <div>
                        <h3>Buttons</h3>
                        <table class="button-table">
                            <tr><th>Color</th><th><var>k</var></th></tr>
                            <tr><td>Red</td><td class="button-color-rule">0</td></tr>
                            <tr><td>Yellow</td><td class="button-color-rule">2</td></tr>
                            <tr><td>Blue</td><td class="button-color-rule">1</td></tr>
                            <tr><td>White</td><td class="button-color-rule">3</td></tr>
                        </table>
                        <p><var>n</var> is <var>k</var> + <var>p</var>, where <var>k</var> is  obtained from the table based
                            on the button’s color, while <var>p</var> is the number of corners of the button’s shape.</p>
                        <p>Let the obtained value be <var>v</var>. If <var>v</var> &lt; <var>k</var>, hold the button across <var>v</var> timer ticks (0 means tap once).
                            Otherwise, subtract <var>k</var> − 2 from the value and tap the button that many times.</p>
                        <p>Then wait for two timer ticks for the input to be recognized.</p>
                        <p style="font-size: 9pt">A “timer tick” is a change in the seconds value of the bomb’s countdown timer.</p>
                    </div>
                    <div>
                        <h3>Letter Displays</h3>
                        <p><var>n</var> is the number of words from the below word list that can be formed using the provided options.
                            The words are numbered from 0 in alphabetical order.</p>
                        <ul id='word-list'><li>ACE</li><li>ACT</li><li>AID</li><li>AIM</li><li>AIR</li><li>ALE</li><li>ALL</li><li>AND</li><li>ANT</li><li>APT</li><li>ARM</li><li>ART</li><li>AWE</li><li>AYE</li><li>BAD</li><li>BAG</li><li>BAR</li><li>BAT</li><li>BAY</li><li>BED</li><li>BEE</li><li>BEG</li><li>BET</li><li>BID</li><li>BIG</li><li>BIT</li><li>BIZ</li><li>BOB</li><li>BOW</li><li>BOY</li><li>BUT</li><li>BUY</li><li>BYE</li><li>CAN</li><li>CAP</li><li>CAR</li><li>CAT</li><li>COP</li><li>COT</li><li>COW</li><li>CUE</li><li>CUP</li><li>CUT</li><li>DAD</li><li>DAM</li><li>DAY</li><li>DIE</li><li>DIG</li><li>DIM</li><li>DIP</li><li>DOG</li><li>DOT</li><li>DRY</li><li>DUE</li><li>DUG</li><li>DUO</li><li>DYE</li><li>EAR</li><li>EAT</li><li>FAN</li><li>FAQ</li><li>FAR</li><li>FAT</li><li>FAX</li><li>FED</li><li>FEE</li><li>FEN</li><li>FEW</li><li>FIN</li><li>FIT</li><li>FIX</li><li>FLY</li><li>FOG</li><li>FOR</li><li>FRK</li><li>FRQ</li><li>FRY</li><li>FUN</li><li>FUR</li><li>GET</li><li>GIG</li><li>GIN</li><li>GUM</li><li>GUT</li><li>GUY</li><li>HAM</li><li>HAT</li><li>HAY</li><li>HEN</li><li>HER</li><li>HEY</li><li>HIM</li><li>HIP</li><li>HIT</li><li>HOP</li><li>HOT</li><li>HOW</li><li>HUT</li><li>ILK</li><li>ILL</li><li>IND</li><li>INK</li><li>IRK</li><li>JAM</li><li>JAR</li><li>JAW</li><li>JOB</li><li>JOY</li><li>KID</li><li>KIN</li><li>KIT</li><li>LAD</li><li>LAP</li><li>LAW</li><li>LAY</li><li>LEG</li><li>LET</li><li>LID</li><li>LIE</li><li>LIP</li><li>LIT</li><li>LOG</li><li>LOO</li><li>LOT</li><li>LOW</li><li>LUA</li><li>LUG</li><li>MAD</li><li>MAN</li><li>MAP</li><li>MAT</li><li>MAX</li><li>MAY</li><li>MIC</li><li>MID</li><li>MIX</li><li>MOB</li><li>MOD</li><li>MUD</li><li>MUG</li><li>MUM</li><li>NET</li><li>NEW</li><li>NIL</li><li>NLL</li><li>NOD</li><li>NOR</li><li>NOT</li><li>NOW</li><li>NUN</li><li>NUT</li><li>OIL</li><li>OPT</li><li>OUR</li><li>OUT</li><li>OWE</li><li>OWL</li><li>PAD</li><li>PAN</li><li>PAR</li><li>PAT</li><li>PAY</li><li>PEG</li><li>PEN</li><li>PER</li><li>PET</li><li>PIE</li><li>PIG</li><li>PIN</li><li>PIT</li><li>POP</li><li>POT</li><li>POW</li><li>PUB</li><li>PUT</li><li>QUA</li><li>QUE</li><li>QUO</li><li>RAG</li><li>RAM</li><li>RAT</li><li>RAW</li><li>RED</li><li>RGB</li><li>RIB</li><li>RID</li><li>RIG</li><li>RIM</li><li>ROB</li><li>ROD</li><li>ROT</li><li>ROW</li><li>RUB</li><li>RUG</li><li>RUM</li><li>RUN</li><li>SAD</li><li>SAW</li><li>SAY</li><li>SEA</li><li>SEE</li><li>SET</li><li>SHE</li><li>SHY</li><li>SIC</li><li>SIG</li><li>SIN</li><li>SIR</li><li>SIT</li><li>SIX</li><li>SLY</li><li>SND</li><li>SUE</li><li>SUM</li><li>SUN</li><li>TAG</li><li>TAP</li><li>TAX</li><li>TEA</li><li>TEE</li><li>TEN</li><li>TGB</li><li>THY</li><li>TIE</li><li>TIN</li><li>TIP</li><li>TOE</li><li>TOO</li><li>TOP</li><li>TOY</li><li>TRN</li><li>TRY</li><li>TUB</li><li>VAT</li><li>VET</li><li>WAR</li><li>WAX</li><li>WAY</li><li>WEE</li><li>WET</li><li>WHY</li><li>WIG</li><li>WIN</li><li>WIT</li><li>WIZ</li><li>WRY</li><li>YEN</li><li>YET</li><li>ZAG</li><li>ZIG</li></ul>
                    </div>
                    <div>
                        <h3>Braille displays</h3>
                        <p><var>n</var> is the number of distinct characters in the serial number.
                            The value identifies which of those characters to input in <a href='https://ktane.timwi.de/HTML/Braille.html'>Braille</a>, numbered from 0 based on their first occurrence. Digits are input
                            as 1=A, …, 9=I, 0=J, except shifted down one row.</p>
                    </div>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 3 of 6</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Variety</span>
            </div>
            <div class="page-content">
                <div class='layout'>
                    <div>

                        <h3>Keys-in-lock</h3>
                        <p><var>n</var> is 10. Turn the key clockwise when the last seconds digit of the bomb’s timer equals the value.</p>
                    </div>
                    <div>
                        <h3>Switches</h3>
                        <p><var>n</var> is the number of positions the switch can be toggled to (between 2 and 4).
                            These positions are numbered from 0 starting from the full “up” position.</p>
                    </div>
                    <div>
                        <h3>Timers</h3>
                        <p><var>n</var> is the maximum displayed time. Possible times are numbered from 0 at 0:0 going up.
                            Press the timer to stop it at the obtained time, or again to restart the timer.</p>
                    </div>
                    <div>
                        <h3>Dice</h3>
                        <p><var>n</var> is 24. Let <var>v</var> be the obtained value modulo 6, and let <var>s</var> be the obtained value divided by 6, rounded down.</p>
                        <p>Rotate the cube such that the face labeled <var>v</var> is visible. (The die has faces labeled 0–5.)</p>
                        <p>Order the faces adjacent to that face in ascending order. Out of these, use <var>s</var> to pick which face should point towards the status light and rotate the cube accordingly.</p>
                    </div>
                    <div>
                        <h3>Colored Knobs</h3>
                        <table class="knobs-table">
                            <tr><th>Color</th><th>Dir</th></tr>
                            <tr><td>Red</td><td class='cardinal-direction'>West</td></tr>
                            <tr><td>Black</td><td class='cardinal-direction'>East</td></tr>
                            <tr><td>Blue</td><td class='cardinal-direction'>South</td></tr>
                            <tr><td>Yellow</td><td class='cardinal-direction'>North</td></tr>
                        </table>
                        <p>The knob makes a click sound when it is turned. <var>n</var> is the number of places where this click is louder. These loud clicks are numbered starting from 0 at the position in the table, going clockwise.</p>
                    </div>
                    <div>
                        <h3>Bulbs</h3>
                        <table class="bulbs-table">
                            <tr><th>Color</th><th>Letter</th></tr>
                            <tr><td>Red</td><td class='base-letter'>A</td></tr>
                            <tr><td>Yellow</td><td class='base-letter'>N</td></tr>
                        </table>
                        <p>The bulb is transmitting <var>n</var> in <a href="Morse Code.html">Morse Code</a>. It is always in the range 5 to 13. Starting at the letter shown in the table based on the bulb’s color, move forwards through the alphabet a number of times equal to the obtained value. Transmit the result in Morse code.</p>
                        <p>Transmitted Morse is interpreted based on gaps between holds of the bulb. Holding for more than double the length of the average gap is considered to be a dash, and anything shorter is considered a dot. An E must be shorter than half of a second, and a T longer. Pressing the bulb again will switch it back to transmitting <var>n</var>.</p>
                    </div>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 4 of 6</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Variety</span>
            </div>
            <div class="page-content">
                <div class="maze-explanation">
                    <h3>Mazes</h3>
                    <p><var>n</var> is the number of positions in the maze (width times height).</p>
                    <p>Use the arrow buttons to move the symbol to the goal position identified by the
                        value. The positions are numbered in reading order from 0 in the top-left corner.</p>
                </div>
                <h3>3×3 mazes</h3>
                <table class="mazes width-3">
                    <tr>
                        <td class='corner'></td>
                        <th>Red</th>
                        <th>Yellow</th>
                        <th>Blue</th>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol plus"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M1 0 1 2 2 2M1 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 0 2 2M0 1 1 1 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 2 3 2M2 1 3 1M1 1 1 2 0 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol star"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 1 2 3M1 1 1 3" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 0 2 1M1 0 1 2 2 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 2 3 2M1 3 1 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol triangle"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 2 3 2M2 1 3 1M1 1 1 2 0 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M2 2 3 2M2 1 3 1M1 0 1 1M0 2 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 3.2">
                    <path d="M1 2 2 2 2 3M1 1 3 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                </table>
                <h3>3×4 mazes</h3>
                <table class="mazes width-3">
                    <tr>
                        <td class='corner'></td>
                        <th>Red</th>
                        <th>Yellow</th>
                        <th>Blue</th>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol plus"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M2 1 3 1M1 4 1 3 2 3M0 2 2 2M1 0 1 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M2 1 3 1M0 3 2 3M1 3 1 2 2 2M1 0 1 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M2 1 1 1 1 2 2 2 2 3 1 3 1 4" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol star"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M1 3 3 3M2 2 3 2M2 1 3 1M1 0 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M2 3 3 3M1 1 1 2 3 2M2 1 2 2M1 3 1 4" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M1 3 2 3 2 2 3 2M3 1 1 1 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol triangle"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M1 3 2 3 2 4M2 0 2 1M0 1 1 1 1 2 2 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M0 3 2 3M0 2 2 2M0 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 3.2 4.2">
                    <path d="M2 1 2 3 0 3M1 2 1 3M0 1 1 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h3v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 5 of 6</div>
        </div>
        <div class="page page-bg-07">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Variety</span>
            </div>
            <div class="page-content">
                <h3>4×3 mazes</h3>
                <table class="mazes width-4">
                    <tr>
                        <td class='corner'></td>
                        <th>Red</th>
                        <th>Yellow</th>
                        <th>Blue</th>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol plus"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M3 0 3 2M2 2 2 1 3 1M1 0 1 1M0 2 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M2 2 4 2M3 1 4 1M2 0 2 1 1 1M0 2 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M3 1 4 1M2 3 2 2 3 2M0 1 2 1M0 2 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol star"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M3 2 3 1 4 1M2 2 2 3M2 0 2 1M1 2 1 3M1 0 1 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M2 1 3 1 3 2M2 0 2 2M1 2 1 3M0 1 1 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M2 1 3 1 3 2M2 0 2 2M1 1 1 2 0 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol triangle"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M3 1 3 3M2 2 2 3M1 1 1 2M0 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M3 0 3 2M2 1 2 2M3 1 1 1 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 3.2">
                    <path d="M3 2 3 3M0 1 3 1M1 1 1 2 2 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v3H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                </table>
                <h3>4×4 mazes</h3>
                <table class="mazes width-4">
                    <tr>
                        <td class='corner'></td>
                        <th>Red</th>
                        <th>Yellow</th>
                        <th>Blue</th>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol plus"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M3 3 4 3M3 0 3 2M2 3 2 4M2 2 2 1 3 1M1 0 1 2M0 3 1 3" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M2 2 3 2 3 3 4 3M2 1 4 1M0 2 1 2 1 3 2 3M0 1 1 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M3 2 3 3M2 2 4 2M3 1 4 1M2 3 2 4M2 0 2 1M1 3 1 4M0 1 1 1 1 2" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol star"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M3 3 3 1 4 1M0 3 2 3M1 1 1 2 2 2M0 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M3 3 4 3M3 1 3 2M4 1 2 1 2 3M1 2 2 2M1 0 1 1M0 3 1 3" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M2 3 4 3M3 2 3 1 4 1M2 0 2 2M1 3 1 4M1 2 1 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                    <tr>
                        <th><div class="maze-symbol triangle"></div></th>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M3 3 3 4M3 0 3 2M2 2 2 4M0 2 1 2 1 3M1 0 1 1 2 1" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M2 1 3 1 3 3 4 3M2 3 2 4M2 2 3 2M1 1 1 4" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                        <td class="maze-td nohighlight">
                <svg viewBox="-.1 -.1 4.2 4.2">
                    <path d="M3 3 4 3M2 1 2 3M2 2 3 2M0 1 3 1M1 1 1 3" fill="none" stroke="black" stroke-width=".05"></path>
                    <path d="M0 0h4v4H0z" fill="none" stroke="black" stroke-width=".1"></path>
                    <rect class="highlightable" x="0" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="0" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="1" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="2" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="0" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="1" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="2" y="3" width="1" height="1" fill="transparent"></rect><rect class="highlightable" x="3" y="3" width="1" height="1" fill="transparent"></rect>
                </svg>
            </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 6 of 6</div>
        </div>
    </div>
</body>
</html>
