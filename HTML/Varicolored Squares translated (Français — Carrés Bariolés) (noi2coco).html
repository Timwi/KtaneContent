<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Carrés Bariolés — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>
        var rules = [];

        function setRules(rnd) {
            var candidates = ["B", "R", "J", "V", "M"];
            var names = ["Rouge", "Bleu", "Vert", "Jaune", "Magenta"];
            var positions = [0, 1, 2, 3, 4];

            // Add more random spread
            for (var i = 0; i < 13; i++) {
                rnd.nextInt();
            }

            for (var i = 0; i < 5; i++) {
                var j = 0;
                rnd.shuffleFisherYates(candidates);
                rules[i] = `<svg class="pentagon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 240 230.4464"><path fill="none" stroke="#000" stroke-dasharray="3.2391 3.2391" stroke-width="1.0797" d="M120.1428 22.4035l97.4535 70.7399-36.959 114.8992H59.594L22.4038 93.1435z" /><path fill="none" stroke="#000" stroke-dasharray="3.2391 3.2391" stroke-width=".5399" d="M120.1434 21.7156l-60.5489 185.639L217.5968 92.4556H22.4043l158.2335 114.8992-60.4944-185.6391" /><g fill="#fff" stroke="#000" stroke-width="1.6196" transform="rotate(-30 -17.8273 -4.7768)"><circle cx="88.0682" cy="87.7471" r="21.5942" /><circle cx="137.0954" cy="197.7363" r="21.5942" /><circle cx="47.6383" cy="278.7625" r="21.5942" /><circle cx="-57.1883" cy="218.2408" r="21.5942" /><circle cx="-31.9463" cy="100.1401" r="21.5942" /></g><g stroke-width=".2857" font-family="sans-serif" font-size="11.4269" font-weight="400" letter-spacing="0" text-anchor="middle" word-spacing="0"><text style="line-height:1.25;text-align:center" x="120.1429" y="41.9267" transform="translate(0 -9.5536)"><tspan x="120.1429" y="41.9267" font-size="27.4246">${candidates[j++]}</tspan></text><text style="line-height:1.25;text-align:center" x="217.5962" y="112.6665" transform="translate(0 -9.5536)"><tspan x="217.5962" y="112.6665" font-size="27.4246">${candidates[j++]}</tspan></text><text style="line-height:1.25;text-align:center" x="180.6372" y="227.5658" transform="translate(0 -9.5536)"><tspan x="180.6372" y="227.5658" font-size="27.4246">${candidates[j++]}</tspan></text><text style="line-height:1.25;text-align:center" x="59.5939" y="227.5658" transform="translate(0 -9.5536)"><tspan x="59.5939" y="227.5658" font-size="27.4246">${candidates[j++]}</tspan></text><text style="line-height:1.25;text-align:center" x="21.8346" y="112.6666" transform="translate(0 -9.5536)"><tspan x="21.8346" y="112.6666" font-size="27.4246">${candidates[j++]}</tspan></text></g><g fill="transparent" transform="rotate(-30 -17.8273 -4.7768)"><circle class="highlightable" cx="88.0682" cy="87.7471" r="21.5942" /><circle class="highlightable" cx="137.0954" cy="197.7363" r="21.5942" /><circle class="highlightable" cx="47.6383" cy="278.7625" r="21.5942" /><circle class="highlightable" cx="-57.1883" cy="218.2408" r="21.5942" /><circle class="highlightable" cx="-31.9463" cy="100.1401" r="21.5942" /></g></svg>`;
            }

            // Random spread
            rnd.nextInt();
            rnd.nextInt();
            rnd.nextInt();

            var directionRules = document.getElementsByClassName('direction-rule');
            for (var i = 0; i < 2; i++) {
                directionRules[i].innerText = rnd.nextMax(2) == 0 ? "anti-horaire" : "horaire";
            }

            var pentagonLabels = document.getElementsByClassName('pentagonLabel');
            var pentagonHolders = document.getElementsByClassName('pentagonHolder');
            rnd.shuffleFisherYates(positions);
            for (var i = 0; i < 5; i++) {
                pentagonLabels[i].innerText = names[positions[i]];
                pentagonHolders[i].innerHTML = rules[positions[i]];
            }

            setLinks(`#${rnd.seed}`);
        }

        function setDefaultRules(rnd) {
            setRules(rnd);
        }

        function setLinks(hash)
        {
            document.querySelectorAll('.link > a').forEach(lnk => {
                lnk.setAttribute('href', /^(.*?)(#.*)?$/.exec(lnk.getAttribute('href'))[1] + hash);
            });
        }
    </script>
    <style>
        .note {
            font-style: italic;
            text-align: center;
        }
            .note em {
                font-style: italic;
            }

        .pentagon {
            width: 230px;
            margin: 0 auto;
            display: block;
        }

        table {
            margin: 0 auto;
        }
        .page1 :not(.flavour-text, h2) { font-size: 11pt; }
        ul { padding: 0 0 0 1.5em; }
        .page1 table td, .page1 table th {
            padding: .2em .5em 0;
            line-height: 1.3;
        }
        h3 { margin: 0; }

        .ruleseed-active .direction-rule {
            font-weight: bold;
            text-decoration: underline;
        }
        .dark svg circle:not(.highlightable) { fill: #222; stroke: #DDD; }
        .dark svg path { stroke: #DDD; }
        .dark svg text { fill: #DDD; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-04 page1">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Carrés Bariolés</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Varicolored Squares.svg">
                <h2>À propos des Carrés Bariolés</h2>
                <p class="flavour-text">La conformité est la clé. Les modèles encouragent la conformité. Trouvez le modèle, et la conformité apparaîtra naturellement.</p>
                <p class="appendix-reference" id="appendix-reference">Voir l’Annexe des <span class="link"><a href="Colored Squares translated (Français — Carrés Colorés) (noi2coco).html">Carrés Colorés</a></span> pour identifier les modules de la famille des Carrés Colorés.</p>
                <ul>
                    <li>En appuyant sur un carré, celui-ci clignote en blanc et peut faire changer la couleur des autres carrés. Faire en sorte que tous les carrés aient la même couleur pour désamorcer le module.</li>
                    <li>En appuyant sur n’importe quelle case de la couleur valide, le module progresse en faisant en sorte que toutes les cases reliées à la case appuyée en premier et correspondant à sa couleur passent à la couleur appuyée. Si cela n’augmente pas en taille après trois appuis, la couleur du carré appuyé changera.</li>
                    <li>Pour commencer, appuyer 4 fois sur un carré de la couleur correspondante. Si les couleurs restantes ne sont pas en 4 groupes de 3, il s'agit d’un module différent.</li>
                    <li>Utiliser ensuite le tableau A pour déterminer la couleur valide suivante.</li>
                    <li>Le fait d’appuyer sur une case incorrecte résultera en l'entregistrement d'une erreur et le module se réinitialisera.</li>
                </ul>

                <h3>Tableau A</h3>
                <p>Considérer la liste des couleurs distinctes adjacentes au carré clignotant et utiliser le tableau ci-dessous. Noter que les cases «&nbsp;adjacentes&nbsp;» sont les cases immédiatement au-dessus, au-dessous, à gauche et à droite d’une case donnée.</p>
                <table>
                    <tr>
                        <th>Couleurs</th>
                        <th>Règle</th>
                    </tr>
                    <tr><th>1</th><td>La couleur valide suivante est la couleur qui se trouve dans le sens <span class="direction-rule">anti-horaire</span> à partir de la couleur adjacente dans le pentagone correct du tableau B.</td></tr>
                    <tr><th rowspan="2">2</th><td>Si les deux couleurs sont adjacentes dans le pentagone correct du tableau B, la couleur valide suivante est la couleur qui est opposée à ces deux couleurs.</td></tr>
                    <tr><td>Sinon, la prochaine couleur valide est la couleur qui se situe entre ces deux couleurs.</td></tr>
                    <tr><th rowspan="2">3</th><td>Si les trois couleurs sont adjacentes dans le pentagone correct du tableau B, la couleur valide suivante est la couleur qui est opposée aux deux couleurs non présentes.</td></tr>
                    <tr><td>Sinon, la couleur valide suivante est la couleur qui se situe entre les deux couleurs non présentes.</td></tr>
                    <tr><th>4</th><td>La couleur valide suivante est la couleur qui n’est pas présente.</td></tr>
                    <tr><td class="note" colspan="2">Note : Si, à un moment quelconque, la couleur valide est la même que <em>la couleur appuyée précédemment</em> ou si aucun carré de la couleur valide n’est présent, la couleur valide devient la couleur <span class="direction-rule">horaire</span> de la couleur valide dans le pentagone correct du tableau B.</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 sur 2</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Carrés Bariolés</span>
            </div>
            <div class="page-content">
                <h3>Tableau B</h3>
                <p>Considérer la couleur de <em>la case qui clignote actuellement</em> et utiliser le tableau ci-dessous. Chaque lettre fait référence à la couleur commençant par cette lettre.</p>
                <table>
                    <tr>
                        <th class="pentagonLabel">Rouge</th>
                        <th class="pentagonLabel">Bleu</th>
                    </tr>
                    <tr>
                        <td class="pentagonHolder nohighlight"></td>
                        <td class="pentagonHolder nohighlight"></td>
                    </tr>
                    <tr>
                        <th class="pentagonLabel">Vert</th>
                        <th class="pentagonLabel">Jaune</th>
                    </tr>
                    <tr>
                        <td class="pentagonHolder nohighlight"></td>
                        <td class="pentagonHolder nohighlight"></td>
                    </tr>
                    <tr>
                        <th class="pentagonLabel" colspan="2">Magenta</th>
                    </tr>
                    <tr>
                        <td class="pentagonHolder nohighlight" colspan="2"></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 2 sur 2</div>
        </div>
    </div>
</body>
</html>