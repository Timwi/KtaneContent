<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>関数 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        td {
            padding: .2em .6em .1em;
        }
        .dark .morse-digits { filter: invert(85%); }
        .list-of-functions {
            line-height: 1.3;
            list-style-type: none;
            padding: 0;
        }
    </style>
    <script>
        var theNumbers = [
            0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 22, 23, 24,
            25, 26, 27, 28, 29, 30, 31, 32, 33, 34, 35, 36, 37, 38, 39, 40, 41,
            //RULESEED NUMBERS BELOW
            42, 43, 44, 45, 46, 47, 48, 49, 50, 51, 52, 53, 54, 55, 56, 57, 58, 59];

        var theFunctions = ["(a + b)の平方の数字根", "aをb倍し、偶数番目の桁を削除した数", "8、奇数の桁の数、偶数の桁の数を順に連結した数", "(a + b)の数字根",
            "(a + b)を1000でモジュロした数", "(a + b)の平方", "最も数字が大きい桁", "桁中に存在しない一桁の数字の個数", "(大きい方の二倍)から小さい方を減算", "各桁がシリアルナンバー内に出現した回数の合計",
            "偶数である数字の個数", "各桁をモールス信号に変換した場合のドット数", "(a + b)と|aからbを引いた数|を連結した数", "(大きい方を小さい方で除算した数))の整数値を1000でモジュロした数", "|aからbを引いた数|の数字根",
            "点灯したインジケーターの個数の63倍", "aのb倍", "(aのb倍)を1000でモジュロした数", "(aの各桁の和)の(bの各桁の和)倍", "小さい方から(大きい方を小さい方でモジュロ)を引いた数",
            "aをb倍し、奇数番目の桁を削除した数", "すべての存在しない桁を1から0まで連結した数", "月の加算", "aをb倍し、奇数の桁を削除した数",
            "(偶数であれば2、奇数であれば1を連結した)各桁を整列した数", "sqrt(a) + sqrt(b)", "(aのb倍)の数字根", "aとbに含まれる桁の202倍",
            "808", "810から(100未満の数字の個数)を引いた数", "大きい方を小さい方でモジュロした数", "各桁の英字数の合計",
            "aの最初と最後の桁とbの最初と最後の桁の積", "sqrt(a + b)", "2つの数字全体の最初と最後の桁の積", "(aの平方) + (bの平方)",
            "(a + b)を12でモジュロした数", "|aからbを引いた数|", "(その桁の出現回数を連結した)各桁を整列した数", "a + b", "大きい方を小さい方で除算した数",
            "(a + b)を(大きい方を小さい方で除算した数)倍",
            // RULESEED FUNCTIONS BELOW
            "(aの10倍) + b", "各桁をモールス信号に変換した場合のダッシュ数", "aとbを連結し、奇数番目の桁を削除した数", "シリアルナンバーの数字の合計",
            "(aの平方) * (bの平方)", "|(aの平方)から((b + 1)の平方)を引いた数|", "(aの平方) + b", "a + (bの平方)", "(aのb倍)を73でモジュロした数", "(aを50でモジュロした数) + b",
            "べき乗数が((bを4でモジュロした数) + 2)の((aを4でモジュロした数) + 2)", "808を(a + b)でモジュロした数", "|aからbを引いた数|を1000でモジュロした数", "(a + b) の(aからbを引いた数)倍", "(a + b)の(大きい方の数)倍", "(a + b)の(小さい方の数)倍",
            "(a + b) * b", "(a + b) * a"];

        //just call Functions 5-8478!

        function setRules(rnd)
        {
            var list = document.getElementsByClassName('rule');
            var list2 = document.getElementsByClassName('rule2');
            var list3 = document.getElementsByClassName('rule3');
            var letterRuleHit = 0;
            var letterRuleMiss = 0;
            var theShuffledNumbers = rnd.shuffleFisherYates(theNumbers.slice(0));
            for (var i = 0; i < 42; i++)
            {
                list[i].innerText = theFunctions[theShuffledNumbers[i]];
            }
            for (var i = 0; i < 26; i++)
            {
                list[i].innerText = theFunctions[theShuffledNumbers[i]];
                letterRuleHit = rnd.next(1, 10);
                letterRuleMiss = rnd.next(1, 10);
                if (letterRuleMiss == letterRuleHit || rnd.next(0, 4) != 0)
                {
                    letterRuleMiss = letterRuleMiss * -1;
                }
                list2[i].innerText = "+" + letterRuleHit;
                if (letterRuleMiss > 0)
                {
                    list3[i].innerText = "+" + letterRuleMiss;
                }
                else
                {
                    list3[i].innerText = letterRuleMiss;
                }

            }
        }

        function setDefaultRules()
        {
            var list = document.getElementsByClassName('rule');
            for (var i = 0; i < list.length; i++)
                list[i].innerText = list[i].getAttribute('data-original');
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">関数</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Functions.svg" class="diagram">
                <h2>モジュール詳細：関数</h2>
                <p class="flavour-text">一体、1と3からどうやって8を入手するんだ！</p>
                <ul>
                    <li>リスト1の42個の中からランダムに問い合わせ関数が選択され、下部のディスプレーには1から999までの2つの数字とその間に英字が表示される。</li>
                    <li>数字のキーパッドを押して数字を入力できる。これらは入力値として中央のディスプレーに表示される。12桁入力すると、新たな桁を配置するために左端の桁が削除される。</li>
                    <li>「a」として入力された数値は、カンマボタン「,」を押すことでメモすることができる。「a」は2変数関数の一つ目の数値である、すると、左上のディスプレーに入力された数値（4桁以上表示されている場合は下4桁のみが入力される）が表示され、中央上のディスプレーにカンマが表示される。その後、二つ目の別の数値を、最初に入力したのと同じ方法で入力することができる。<strong>問い合わせの際、表示された両方の数値が同じか、どちらかの数値が0であれば、ミスが記録される。</strong></li>
                    <li>両方の数字が入力されたら、「Q」ボタンを押す。これにより二つ目の数字(4桁以上表示されている場合は下4桁のみが入力される)が右上のディスプレーに配置される。この値は「b」とする。さらに、入力結果が問い合わせ関数の出力結果に置き換えられる。モジュールを解除するのに必要な回答を含め、計算結果は最大12桁のみが使用され、関数が言及していない限り、表示直前にすべての小数が削除される。それが表示されている限りは、カンマボタンを押しても何も影響を与えず、カンマが入力されていない限り「Q」ボタンを押しても何も影響を与えない。</li>
                    <li>クリアボタン「C」を押すと、上と真ん中の入力内容が全て削除され新たな変数の入力が可能になる。</li>
                    <li>1回以上問い合わせを使用したり、リスト1を使用して、使用されている問い合わせ関数を求め、下段の英字を表2に使用して問い合わせ関数の番号に適用すべき補正値を求めることで、最終的な関数を求める。必要であればループする。</li>
                    <li>下のディスプレーに入力値とした最終的な関数の結果をキーパッドを使って回答し、送信ボタン「S」を押して送信する。</li>
                    <li>最上位桁は左端にあり、最も重みがある桁であるため、1桁よりも10桁の方が上位である。</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 1/4</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">関数</span>
            </div>
            <div class="page-content">
                <h3>リスト1：関数一覧</h3>
                <ul class='list-of-functions'>
                    <li>#0：<span class='rule' data-original='(a + b)の平方の数字根'>(a + b)の平方の数字根</span></li>
                    <li>#1：<span class='rule' data-original='aをb倍し、偶数番目の桁を削除した数'>aをb倍し、偶数番目の桁を削除した数</span></li>
                    <li>#2：<span class='rule' data-original='8、奇数の桁の数、偶数の桁の数を順に連結した数'>8、奇数の桁の数、偶数の桁の数を順に連結した数</span></li>
                    <li>#3：<span class='rule' data-original='(a + b)の数字根'>(a + b)の数字根</span></li>
                    <li>#4：<span class='rule' data-original='(a + b)を1000でモジュロした数'>(a + b)を1000でモジュロした数</span></li>
                    <li>#5：<span class='rule' data-original='(a + b)の平方'>(a + b)の平方</span></li>
                    <li>#6：<span class='rule' data-original='最も数字が大きい桁'>最も数字が大きい桁</span></li>
                    <li>#7：<span class='rule' data-original='桁中に存在しない一桁の数字の個数'>桁中に存在しない一桁の数字の個数</span></li>
                    <li>#8：<span class='rule' data-original='(大きい方の二倍)から小さい方を減算'>(大きい方の二倍)から小さい方を減算</span></li>
                    <li>#9：<span class='rule' data-original='各桁がシリアルナンバー内に出現した回数の合計'>各桁がシリアルナンバー内に出現した回数の合計</span></li>
                    <li>#10：<span class='rule' data-original='偶数である数字の個数'>偶数である数字の個数</span></li>
                    <li>#11：<span class='rule' data-original='各桁をモールス信号に変換した場合のドット数'>各桁をモールス信号に変換した場合のドット数</span></li>
                    <li>#12：<span class='rule' data-original='(a + b)と|aからbを引いた数|を連結した数'>(a + b)と|aからbを引いた数|を連結した数</span></li>
                    <li>#13：<span class='rule' data-original='(大きい方を小さい方で除算した数))の整数値を1000でモジュロした数'>(大きい方を小さい方で除算した数))の整数値を1000でモジュロした数</span></li>
                    <li>#14：<span class='rule' data-original='|aからbを引いた数|の数字根'>|aからbを引いた数|の数字根</span></li>
                    <li>#15：<span class='rule' data-original='点灯したインジケーターの個数の63倍'>点灯したインジケーターの個数の63倍</span></li>
                    <li>#16：<span class='rule' data-original='aのb倍'>aのb倍</span></li>
                    <li>#17：<span class='rule' data-original='(aのb倍)を1000でモジュロした数'>(aのb倍)を1000でモジュロした数</span></li>
                    <li>#18：<span class='rule' data-original='(aの各桁の和)の(bの各桁の和)倍'>(aの各桁の和)の(bの各桁の和)倍</span></li>
                    <li>#19：<span class='rule' data-original='小さい方から(大きい方を小さい方でモジュロ)を引いた数'>小さい方から(大きい方を小さい方でモジュロ)を引いた数</span></li>
                    <li>#20：<span class='rule' data-original='aをb倍し、奇数番目の桁を削除した数'>aをb倍し、奇数番目の桁を削除した数</span></li>
                    <li>#21：<span class='rule' data-original='すべての存在しない桁を1から0まで連結した数'>すべての存在しない桁を1から0まで連結した数</span></li>
                    <li>#22：<span class='rule' data-original='月の加算'>月の加算</span></li>
                    <li>#23：<span class='rule' data-original='aをb倍し、奇数の桁を削除した数'>aをb倍し、奇数の桁を削除した数</span></li>
                    <li>#24：<span class='rule' data-original='(偶数であれば2、奇数であれば1を連結した)各桁を整列した数'>(偶数であれば2、奇数であれば1を連結した)各桁を整列した数</span></li>
                    <li>#25：<span class='rule' data-original='sqrt(a) + sqrt(b)'>sqrt(a) + sqrt(b)</span></li>
                    <li>#26：<span class='rule' data-original='(aのb倍)の数字根'>(aのb倍)の数字根</span></li>
                    <li>#27：<span class='rule' data-original='aとbに含まれる桁の202倍'>aとbに含まれる桁の202倍</span></li>
                    <li>#28：<span class='rule' data-original='808'>808</span></li>
                    <li>#29：<span class='rule' data-original='810から(100未満の数字の個数)を引いた数'>810から(100未満の数字の個数)を引いた数</span></li>
                    <li>#30：<span class='rule' data-original='大きい方を小さい方でモジュロした数'>大きい方を小さい方でモジュロした数</span></li>
                    <li>#31：<span class='rule' data-original='各桁の英字数の合計'>各桁の英字数の合計</span></li>
                    <li>#32：<span class='rule' data-original='aの最初と最後の桁とbの最初と最後の桁の積'>aの最初と最後の桁とbの最初と最後の桁の積</span></li>
                    <li>#33：<span class='rule' data-original='sqrt(a + b)'>sqrt(a + b)</span></li>
                    <li>#34：<span class='rule' data-original='2つの数字全体の最初と最後の桁の積'>2つの数字全体の最初と最後の桁の積</span></li>
                    <li>#35：<span class='rule' data-original='(aの平方) + (bの平方)'>(aの平方) + (bの平方)</span></li>
                    <li>#36：<span class='rule' data-original='(a + b)を12でモジュロした数'>(a plus b) modulo 12</span></li>
                    <li>#37：<span class='rule' data-original='|aからbを引いた数|'>|aからbを引いた数|</span></li>
                    <li>#38：<span class='rule' data-original='(桁の出現回数を連結した)各桁を整列した数'>(その桁の出現回数を連結した)各桁を整列した数</span></li>
                    <li>#39：<span class='rule' data-original='a + b'>a + b</span></li>
                    <li>#40：<span class='rule' data-original='大きい方を小さい方で除算した数'>大きい方を小さい方で除算した数</span></li>
                    <li>#41：<span class='rule' data-original='(a + b)を(大きい方を小さい方で除算した数)倍'>(a + b)を(大きい方を小さい方で除算した数)倍</span></li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 2/4</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">関数</span>
            </div>
            <div class="page-content">
                <h3>表2：英字による補正</h3>
                <table>
                    <tbody>
                        <tr><th>条件</th><th>真</th><th>偽</th></tr>
                        <tr>
                            <td>A：シリアルナンバーにKBUMのいずれかが含まれている？</td>
                            <td><span class='rule2' data-original='+6'>+6</span></td>
                            <td><span class='rule3' data-original='-4'>-4</span></td>
                        </tr>
                        <tr>
                            <td>B：バッテリー、インジケーター、ポートのうちいずれかの個数 = 2？</td>
                            <td><span class='rule2' data-original='+2'>+2</span></td>
                            <td><span class='rule3' data-original='-3'>-3</span></td>
                        </tr>
                        <tr>
                            <td>C：シリアルナンバーの最初の文字は数字？</td>
                            <td><span class='rule2' data-original='+5'>+5</span></td>
                            <td><span class='rule3' data-original='-4'>-4</span></td>
                        </tr>
                        <tr>
                            <td>D：点灯したBOBインジケーターがある？</td>
                            <td><span class='rule2' data-original='+8'>+8</span></td>
                            <td><span class='rule3' data-original='-8'>-8</span></td>
                        </tr>
                        <tr>
                            <td>E：点灯していないBOBインジケーターがある？</td>
                            <td><span class='rule2' data-original='+6'>+6</span></td>
                            <td><span class='rule3' data-original='-2'>-2</span></td>
                        </tr>
                        <tr>
                            <td>F：シリアルナンバーの最初の文字は英字？</td>
                            <td><span class='rule2' data-original='+6'>+6</span></td>
                            <td><span class='rule3' data-original='-5'>-5</span></td>
                        </tr>
                        <tr>
                            <td>G：パラレルポートがあるが、シリアルポートがない？</td>
                            <td><span class='rule2' data-original='+1'>+1</span></td>
                            <td><span class='rule3' data-original='-5'>-5</span></td>
                        </tr>
                        <tr>
                            <td>H：空のポートプレートが少なくとも1つある？</td>
                            <td><span class='rule2' data-original='+1'>+1</span></td>
                            <td><span class='rule3' data-original='-3'>-3</span></td>
                        </tr>
                        <tr>
                            <td>I：バッテリーがない？</td>
                            <td><span class='rule2' data-original='+1'>+1</span></td>
                            <td><span class='rule3' data-original='+5'>+5</span></td>
                        </tr>
                        <tr>
                            <td>J：シリアルナンバーに母音がある？</td>
                            <td><span class='rule2' data-original='+5'>+5</span></td>
                            <td><span class='rule3' data-original='-3'>-3</span></td>
                        </tr>
                        <tr>
                            <td>K：インジケーターの個数 > 3？</td>
                            <td><span class='rule2' data-original='+4'>+4</span></td>
                            <td><span class='rule3' data-original='-1'>-1</span></td>
                        </tr>
                        <tr>
                            <td>L：バッテリーの個数は偶数？</td>
                            <td><span class='rule2' data-original='+6'>+6</span></td>
                            <td><span class='rule3' data-original='+7'>+7</span></td>
                        </tr>
                        <tr>
                            <td>M：ポート > インジケーター？</td>
                            <td><span class='rule2' data-original='+3'>+3</span></td>
                            <td><span class='rule3' data-original='-7'>-7</span></td>
                        </tr>
                        <tr>
                            <td>N：点灯していないインジケーターより点灯したインジケーターの方が多い？</td>
                            <td><span class='rule2' data-original='+3'>+3</span></td>
                            <td><span class='rule3' data-original='-5'>-5</span></td>
                        </tr>
                        <tr>
                            <td>O：インジケーター > バッテリー？</td>
                            <td><span class='rule2' data-original='+6'>+6</span></td>
                            <td><span class='rule3' data-original='-1'>-1</span></td>
                        </tr>
                        <tr>
                            <td>P：インジケーターの個数は偶数？</td>
                            <td><span class='rule2' data-original='+2'>+2</span></td>
                            <td><span class='rule3' data-original='-3'>-3</span></td>
                        </tr>
                        <tr>
                            <td>Q：シリアルナンバーにERISのいずれかが含まれている？</td>
                            <td><span class='rule2' data-original='+1'>+1</span></td>
                            <td><span class='rule3' data-original='-3'>-3</span></td>
                        </tr>
                        <tr>
                            <td>R：シリアルナンバーにちょうど3つの英字が含まれている？</td>
                            <td><span class='rule2' data-original='+3'>+3</span></td>
                            <td><span class='rule3' data-original='-2'>-2</span></td>
                        </tr>
                        <tr>
                            <td>S：バッテリー > ポート？</td>
                            <td><span class='rule2' data-original='+2'>+2</span></td>
                            <td><span class='rule3' data-original='+4'>+4</span></td>
                        </tr>
                        <tr>
                            <td>T：バッテリーの個数 > 4？</td>
                            <td><span class='rule2' data-original='+4'>+4</span></td>
                            <td><span class='rule3' data-original='+1'>+1</span></td>
                        </tr>
                        <tr>
                            <td>U：点灯したインジケーターと点灯していないインジケーターの数が同じ？</td>
                            <td><span class='rule2' data-original='+2'>+2</span></td>
                            <td><span class='rule3' data-original='-2'>-2</span></td>
                        </tr>
                        <tr>
                            <td>V：シリアルナンバーにJQXZのいずれかが含まれている？</td>
                            <td><span class='rule2' data-original='+7'>+7</span></td>
                            <td><span class='rule3' data-original='+1'>+1</span></td>
                        </tr>
                        <tr>
                            <td>W：少なくとも3つのポートがある？</td>
                            <td><span class='rule2' data-original='+3'>+3</span></td>
                            <td><span class='rule3' data-original='-5'>-5</span></td>
                        </tr>
                        <tr>
                            <td>X：インジケーターがない？</td>
                            <td><span class='rule2' data-original='+3'>+3</span></td>
                            <td><span class='rule3' data-original='-3'>-3</span></td>
                        </tr>
                        <tr>
                            <td>Y：シリアルナンバー内の数字の個数が4以上？</td>
                            <td><span class='rule2' data-original='+4'>+4</span></td>
                            <td><span class='rule3' data-original='-1'>-1</span></td>
                        </tr>
                        <tr>
                            <td>Z：ポートがない？</td>
                            <td><span class='rule2' data-original='+5'>+5</span></td>
                            <td><span class='rule3' data-original='-1'>-1</span></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 3/4</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">関数</span>
            </div>
            <div class="page-content">
                <h3>付録F：数学(とその他)の用語</h3>
                <strong>絶対値もしくは|x|</strong>：Xと0との距離。|2 - 6| = 4<br>
                <strong>すべての桁の整列</strong>：重複した桁を無視してから、左から右に読んだ各桁。12814のすべての桁を整列すると1284となる。<br>
                <strong>連結</strong>：つなぎ合わせること。「Cheese」と「burger」を連結させると「Cheeseburger」になる。7と3を連結させると73になる。<br>
                <strong>立方</strong>：自身を乗算し、更に乗算する。2の立方は8。<br>
                <strong>数字根</strong>：各桁同士を、一桁になるまで足し続ける。129の数字根は3である。<br>
                <strong>月の加算</strong>：各桁を合計する代わりに、各位(一の位、十の位など)で大きい方の桁を取得する加算方法、月の算術では、184+229 = 289になる。<br>
                <strong>モジュロ</strong>：除算の剰余を示す。10を3でモジュロすると1になる。<br>
                <strong>べき乗数</strong>：自身を乗算する回数。立方数はべき乗数が3のときの結果と等しい。<br>
                <strong>sqrt(x)</strong>：平方根を示す。sqrt(9) = 3である。技術的には-3も取れるが爆弾解除では正の値にするため、このモジュールでは平方根の負の値は考えなくてよい。<br>
                <strong>立方</strong>：自身を乗算する。5の立方は25である。<br>
                <strong>ゼロ</strong>：0は偶数である。出力が存在しない場合、出力は0になる。<br>
                <img src="img/Morse Code/morse-numerals.svg" class='centered-img morse-digits'>
            </div>
            <div class="page-footer relative-footer">ページ 4/4</div>
        </div>
    </div>
</body>
</html>