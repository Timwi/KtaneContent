<!DOCTYPE html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>ブラックホール — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        
        table.grid {
            margin: 3em auto 0;
            font-size: 14pt;
            font-family: 'Special Elite', 'Courier New', 'Noto Serif JP', serif, monospace;
        }

            table.grid col {
                width: 1.2cm;
            }

            table.grid td {
                text-align: center;
            }

            table.grid tr {
                height: 1.2cm;
            }

        .ruleseed-active .seedable {
            font-weight: bold;
            text-decoration: underline;
        }

        span.footnote-marker {
            vertical-align: super;
            font-size: 70%;
        }
        p.footnote {
            font-size: 70%;
        }
        div.footnotes {
            position: relative;
            margin-top: 2em;
            padding-top: 1em;
        }
        div.footnotes:before {
            border-top: 1px solid black;
            left: 0;
            top: 0;
            position: absolute;
            width: 50mm;
            content: '';
        }
    
    </style>
    <script>
        
        function setRules(rnd)
        {
            // Add extra randomness
            for (var i = rnd.next(0, 10); i > 0; i--)
                rnd.nextDouble();

            var dots2 = 'M45 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z';
            var dots3 = 'M35 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z';
            var dots4 = 'M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z';

            var alternative = [
                { dots: dots4, gest: 'M30 70v10h20V70M70 70v10' },  // • └─•─┘ • | •
                { dots: dots3, gest: 'M40 70v10h20V70' },           // • └─•─┘ •
            ];
            var pool = rnd.shuffleArray([
                { dots: dots3, gest: 'M40 70v10m20-10v10' },                    // • | • | •
                { dots: dots4, gest: 'M52.5 70v10H70V70m-40 0v10h17.5V70' },    // • └─•─┘└─•─┘ •
                { dots: dots4, gest: 'M30 70v10M50 70v10h20V70' },              // • | •  └─•─┘ •
                { dots: dots4, gest: 'M30 70v10h40V70' },                       // • └─•──•─┘ •
                alternative [ rnd.next(0, alternative.length) ],
                { dots: dots4, gest: 'M30 70v10M70 70v10' },                    // • | •   • | •
            ]);

            for (var i = 0; i < 5; i++) {
                document.getElementById(`dots-${i}`).setAttribute('d', pool[i].dots);
                document.getElementById(`gest-${i}`).setAttribute('d', pool[i].gest);
            }

            var c = [
                { dots: dots3, gest: 'M37.5 70v10h20V70M62.5 70v10' },          // • └─•─┘| •
                { dots: dots2, gest: 'M47.5 70v10M52.5 70v10' },                // • || •
                { dots: dots3, gest: 'M37.5 70v10M42.5 70v10h20V70' },          // • |└─•─┘ •
            ][ rnd.next(0, 3) ];
            document.getElementById('dots-C').setAttribute('d', c.dots);
            document.getElementById('gest-C').setAttribute('d', c.gest);

            console.log(rnd.count);

            var arr = [
                "1つ目の数字がx座標となり、2つ目の数字がy座標",
                "2つ目の数字がx座標となり、1つ目の数字がy座標",
                "6文字目の数字の値がx座標となり、3文字目の数字の値がy座標",
                "3文字目の数字の値がx座標となり、6文字目の数字の値がy座標",
                "1つ目の数字がx座標となり、最後の数字がy座標",
                "最後の数字がx座標となり、1つ目の数字がy座標",
            ];
            var elem = arr[rnd.next(0, arr.length)];
            document.getElementById('sn-coords').innerText = elem;

            var directions = [ "東", "南", "西", "北" ];
            document.getElementById('initial-direction').innerText = directions [ rnd.next(0, 4) ];

            var rotations = [ "反時計周り", "時計周り" ];
            document.getElementById('initial-rotation').innerText = rotations [ rnd.next(0, 2) ];
            var rotation2 = rotations [ rnd.next(0, 2) ];
            document.getElementById('rotation-1').innerText = rotation2;
            document.getElementById('rotation-2').innerText = rotation2;

            var widgets = [ "バッテリーとポート", "バッテリーとインジケーター", "バッテリーホルダーとポート", "バッテリーホルダーとインジケーター", "ポートとインジケーター", "ポート", "インジケーター", "バッテリー", "バッテリーホルダー" ];
            document.getElementById('rot-widget').innerText = widgets [ rnd.next(0, widgets.length) ];
        }

        function setDefaultRules(rnd) { setRules(rnd); }
    
    </script>
</head>

<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ブラックホール</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Black Hole.svg" class="diagram">
                <h2>モジュール詳細：ブラックホール</h2>
                <p class="flavour-text">管制塔よりトム少佐へ、聞こえるか?</p>
                <ul>
                    <li>「ブラックホール」モジュールを解除するには、0から4の数字で構成されたコードを求める必要がある。コードの長さは同じ爆弾に存在する「ブラックホール」モジュールの数x7である。どの時点においても、解除されていない「ブラックホール」モジュールに次のコードの数字を入力してよい。</li>
                    <li>コードの数字を入力した後に、別のモジュールを解除するとコードは2桁分短くなる。ただし、「ブラックホール」モジュールが解除された場合を除く。例えば、「ブラックホール」モジュールの数が1つの場合、間に別のモジュールを解除することによって、コードの長さを7から3に減らすことができる。「ブラックホール」モジュールの数が2つの場合、コードの長さを14から6に減らすことができる。
                    </li>
                    <li>次のページの10x10のマスを確認する。シリアルナンバーによって、開始位置を決定する。<span class="seedable" id="sn-coords">3文字目の数字の値がx座標となり、6文字目の数字の値がy座標</span>となる。行と列は、上から下・左から右に0から数える。</li>
                    <li>最初の進行方向を決定する。<span class="seedable" id="initial-direction">北</span>向きから始め、爆弾にある<span class="seedable" id="rot-widget">ポート</span>一つに付き45°<span class="seedable" id="initial-rotation">時計回り</span>に回転する。</li>
                    <li>コードの最初の数字は現在地点のマスの数字である。進行方向に1マス進み、45°<span class="seedable" id="rotation-1">時計回り</span>に回転する。</li>
                    <li>次の数字は、現在地点と進行方向に一マス進んだマスの数字の和をmod 5<span class="footnote-marker">*</span>した値である。そのさらに1マス先に移動し、45°<span class="seedable" id="rotation-2">時計回り</span>に回転する。</li>
                    <li>以降は同様にコードの数字を計算する。ただし、合計を計算するマスの数は桁ごとに1ずつ増える。つまり、n番目の数字は、n個連続したマスの和のmod 5<span class="footnote-marker">*</span>である。</li>
                    <li>マスの端に到達した場合、反対側の端にループする。</li>
                    <li>次のページに、数字の入力方法が書いてある。</li>
                    <li>「C」の入力は、現在までに入力した正しいコードの長さを表示するために使うことができる。</li>
                </ul>
                <div class="footnotes">
                    <p class="footnote"><sup>*</sup> mod 5: 値が0から4の間になるまで5を繰り返し足し引きしたときの値。</p>
                </div>
            </div>
            <div class="page-footer relative-footer">ページ 1/2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">ブラックホール</span>
            </div>
            <div class="page-content">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-2 -2 604 94" font-size="28" font-family="Special Elite" text-anchor="middle">
                    <!-- frame -->
                    <path fill="none" stroke="#000" stroke-width="2" d="M0 40h600v50H0zm100 0v50m100-50v50m100-50v50m100-50v50m100-50v50"></path>

                    <!-- 0 --> <path id="dots-0" transform="translate(000, 0)" d="M35 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"></path>
                    <!-- 0 --> <path id="gest-0" transform="translate(000, 0)" fill="none" stroke="#000" d="M40 70v10h20V70"></path>
                    <!-- 1 --> <path id="dots-1" transform="translate(100, 0)" d="M35 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"></path>
                    <!-- 1 --> <path id="gest-1" transform="translate(100, 0)" fill="none" stroke="#000" d="M40 70v10m20-10v10"></path>
                    <!-- 2 --> <path id="dots-2" transform="translate(200, 0)" d="M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"></path>
                    <!-- 2 --> <path id="gest-2" transform="translate(200, 0)" fill="none" stroke="#000" d="M30 70v10M50 70v10h20V70"></path>
                    <!-- 3 --> <path id="dots-3" transform="translate(300, 0)" d="M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"></path>
                    <!-- 3 --> <path id="gest-3" transform="translate(300, 0)" fill="none" stroke="#000" d="M52.5 70v10H70V70m-40 0v10h17.5V70"></path>
                    <!-- 4 --> <path id="dots-4" transform="translate(400, 0)" d="M25 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"></path>
                    <!-- 4 --> <path id="gest-4" transform="translate(400, 0)" fill="none" stroke="#000" d="M30 70v10h40V70"></path>
                    <!-- C --> <path id="dots-C" transform="translate(500, 0)" d="M45 55a5 5 0 1 1-10 0 5 5 0 0 1 10 0zm20 0a5 5 0 1 1-10 0 5 5 0 0 1 10 0z"></path>
                    <!-- C --> <path id="gest-C" transform="translate(500, 0)" fill="none" stroke="#000" d="M47.5 70v10M52.5 70v10"></path>

                    <text x="50" y="30"><tspan x="50" y="30" fill="#000" stroke="none">0</tspan></text>
                    <text x="250" y="30"><tspan x="250" y="30" fill="#000" stroke="none">2</tspan></text>
                    <text x="150" y="30"><tspan x="150" y="30" fill="#000" stroke="none">1</tspan></text>
                    <text x="350" y="30"><tspan x="350" y="30" fill="#000" stroke="none">3</tspan></text>
                    <text x="450" y="30"><tspan x="450" y="30" fill="#000" stroke="none">4</tspan></text>
                    <text x="550" y="30"><tspan x="550" y="30" fill="#000" stroke="none">C</tspan></text>
                </svg>
                <ul>
                    <li>上記の図において、点は爆弾のカウントダウンタイマーのティック(秒数の減少の瞬間)を表している。時間は左から右に解釈する。</li>
                    <li>縦の棒は、モジュールを押すことを示している。2つのティックの間に押して<em>かつ</em>離さなければならないことに注意する。</li>
                    <li>上向きの括弧は、1つ以上のティックをまたぐ長押しを示している。</li>
                </ul>
                <table class="grid">
                    <colgroup><col><col><col><col><col><col><col><col><col><col></colgroup>
                    <tbody><tr><td>3</td><td>4</td><td>1</td><td>0</td><td>2</td><td>3</td><td>1</td><td>2</td><td>0</td><td>4</td></tr>
                    <tr><td>1</td><td>3</td><td>0</td><td>2</td><td>4</td><td>1</td><td>2</td><td>3</td><td>4</td><td>0</td></tr>
                    <tr><td>3</td><td>2</td><td>4</td><td>2</td><td>1</td><td>3</td><td>0</td><td>0</td><td>1</td><td>4</td></tr>
                    <tr><td>4</td><td>0</td><td>0</td><td>1</td><td>3</td><td>4</td><td>2</td><td>2</td><td>1</td><td>3</td></tr>
                    <tr><td>1</td><td>2</td><td>1</td><td>3</td><td>0</td><td>0</td><td>4</td><td>3</td><td>4</td><td>2</td></tr>
                    <tr><td>4</td><td>0</td><td>2</td><td>3</td><td>4</td><td>1</td><td>3</td><td>0</td><td>2</td><td>1</td></tr>
                    <tr><td>2</td><td>1</td><td>3</td><td>1</td><td>3</td><td>0</td><td>4</td><td>4</td><td>0</td><td>2</td></tr>
                    <tr><td>2</td><td>4</td><td>4</td><td>0</td><td>0</td><td>2</td><td>1</td><td>1</td><td>3</td><td>3</td></tr>
                    <tr><td>0</td><td>1</td><td>3</td><td>4</td><td>2</td><td>2</td><td>0</td><td>4</td><td>3</td><td>1</td></tr>
                    <tr><td>0</td><td>3</td><td>2</td><td>4</td><td>1</td><td>4</td><td>3</td><td>1</td><td>2</td><td>0</td></tr>
                </tbody></table>
            </div>
            <div class="page-footer relative-footer">ページ 2/2</div>
        </div>
    </div>
</body>

</html>