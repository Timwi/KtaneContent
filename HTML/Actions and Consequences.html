<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Actions and Consequences — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .diagram { filter: grayscale(100%); }

        .dark table, table {
            margin: 1em auto;
            border: none;
            text-align: center;
        }

        .squeeze {
            position: absolute;
            white-space: nowrap;
            transform: scaleX(.925);
            transform-origin: left;
            text-decoration: inherit;
        }

        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 3'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Actions and Consequences</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Actions and Consequences.svg" class="diagram">
                <h2><span class='squeeze'>On the Subject of Actions and Consequences</span></h2>
                <h2>&nbsp;</h2>
                <p class="flavour-text">At this point, boss modules use more information than the government.</p>

                <p>This module presents a 3×3 keypad, a display above it and a window to its right. Initially, the display and window will both be empty.
                <p>
                <p>
                    Certain events will cause blocks to drop into the window. Whenever a <strong><a href="../More/Ignore Table.html#mod=ActionsAndConsequences">non-ignored module</a></strong> on the bomb is solved,
                    a green block with a check mark will be added. Whenever <strong>any</strong> module on the bomb strikes,
                    a red block with an X will be added. Additionally, yellow blocks with numbers will sometimes be added randomly throughout the bomb.
                    All three of these events are accompanied by a sound effect. Note that if there are no non-ignored modules on the bomb, every instance of the Actions and Consequences module will solve automatically.
                </p>

                <p>
                    When a block is added while the window is full, the bottom-most block will fall out of the window.
                    Ten seconds after all non-ignored modules on the bomb have been solved, the window will be emptied and the display will be filled with hyphens.
                </p>

                <p>
                    Now, use the keypad to enter a sequence of letters determined by the sequence of solves, strikes and numbers. Your input will be shown on the display above.
                    Pressing a key before the window has been emptied will do nothing. Pressing an incorrect key will cause a strike and set the module to "recovery mode".
                    <i>See Appendix R3C0V3R for information about this mode.</i>
                </p>

                <h3>Calculating the Sequence of Letters</h3>

                <p>The first letter of the sequence can be obtained using the first character of the serial number, with the following rules:</p>
                <ul>
                    <li>If the character is a digit, use the letter in that position in reading order on the keypad, where 0 represents the 9th key.</li>
                    <li>Otherwise, use the letter of the keypad key with this character.
                        <ul><li>If no such key exists, shift this character forwards through the alphabet until such a key exists.</li></ul>
                    </li>
                </ul>

                <p>Then, for each solve / strike / number block in the sequence of blocks, refer to the headings on the next page to obtain the next letter(s) in the sequence.</p>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>

        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Actions and Consequences</span>
            </div>
            <div class="page-content">
                <h4>Solve Blocks</h4>
                <p>
                    Starting on the previous letter in the sequence, move through the keypad (in reading order and wrapping around from the bottom-right key to the top-left key)
                    by a number of keys equal to the number of solve blocks in the sequence so far, including this block, then take the letter of the key you land on.
                </p>
                <h4>Strike Blocks</h4>
                <p>
                    You will be taking ten letters, instead of one. The first of these letters is the previous letter in the sequence.
                    The next eight are the letters that come immediately after it on the keypad (in reading order and wrapping around from the bottom-right key to the top-left key)
                    and the final letter is on the Nth key in reading order, where N = the number of solve blocks preceding this block, modulo nine, plus one.
                </p>
                <h4>Number Blocks</h4>
                <p>
                    Obtain a direction by taking the position of the previous letter in the sequence, relative to the centre of the keypad. 
                    Move from the position obtained from the intersection in the grid below (using the number on the block) 
                    in that direction, and take the letter of the key in this position, in reading order, on the keypad.
                </p>

                <table>
                    <tr><th class="corner"></th><th>_1</th><th>_2</th><th>_3</th><th>_4</th><th>_5</th><th>_6</th><th>_7</th><th>_8</th><th>_9</th></tr>
                    <tr><th>1_</th><td>4</td><td>2</td><td>7</td><td>6</td><td>8</td><td>5</td><td>9</td><td>1</td><td>3</td></tr>
                    <tr><th>2_</th><td>9</td><td>1</td><td>5</td><td>4</td><td>2</td><td>3</td><td>6</td><td>8</td><td>7</td></tr>
                    <tr><th>3_</th><td>6</td><td>8</td><td>3</td><td>9</td><td>7</td><td>1</td><td>2</td><td>5</td><td>4</td></tr>
                    <tr><th>4_</th><td>3</td><td>4</td><td>9</td><td>5</td><td>1</td><td>8</td><td>7</td><td>2</td><td>6</td></tr>
                    <tr><th>5_</th><td>8</td><td>7</td><td>1</td><td>2</td><td>6</td><td>9</td><td>3</td><td>4</td><td>5</td></tr>
                    <tr><th>6_</th><td>2</td><td>5</td><td>6</td><td>7</td><td>3</td><td>4</td><td>8</td><td>9</td><td>1</td></tr>
                    <tr><th>7_</th><td>1</td><td>3</td><td>2</td><td>8</td><td>5</td><td>6</td><td>4</td><td>7</td><td>9</td></tr>
                    <tr><th>8_</th><td>7</td><td>6</td><td>4</td><td>1</td><td>9</td><td>2</td><td>5</td><td>3</td><td>8</td></tr>
                    <tr><th>9_</th><td>5</td><td>9</td><td>8</td><td>3</td><td>4</td><td>7</td><td>1</td><td>6</td><td>2</td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>

        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Actions and Consequences</span>
            </div>
            <div class="page-content">
                <h3>Appendix R3C0V3R</h3>
                <p>
                    Recovery mode allows the defuser to re-obtain the sequence of blocks, in case it is lost.
                    When recovery mode is initiated, the first five blocks in the sequence are displayed.
                    Pressing the second key in reading order will move forwards in the sequence and pressing the eighth key will move backwards.
                    To exit recovery mode, press the fifth key.
                </p>
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>
    </div>
</body>
</html>