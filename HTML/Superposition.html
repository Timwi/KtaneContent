<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Superposition — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .dark table, table {
            margin: 1em auto;
            text-align: center;
            border: none;
        }
        p, li {
            font-size: 11pt;
        }
        .continued {
            text-align: right;
            font-style: italic;
            font-size: 10pt;
        }
        table.small { font-size: 8pt; }
        table.small td { width: 20%; }
        .r { color: #800; }
        .g { color: #080; }
        .b { color: #00A; }
        .white { color: #FFF; }
        .orange { color: #ff8000; }
        .violet { color: #6600b3; }
        .yellow { color: #FF0; }
        .blue { color: #00F; }
        .green { color: #0F0; }
        .red { color: #F00; }
        .white, .yellow, .green {
            display: inline-block;
            height: 20px;
        }
        body:not(.dark) .white,
        body:not(.dark) .yellow,
        body:not(.dark) .green
        {
            background-color: black;
        }
        .centre {
            background-color: black;
            color: #888;
        }
        .dark .centre {
            background-color: white;
        }
        .page {
            box-shadow: #CCC 0.0em 0em 2em;
        }
        body:not(.dark) .page-bg-superposition-01 {
            background-image: url("img/Superposition/superposition-bg-01.png");
        }
        body:not(.dark) .page-bg-superposition-02 {
            background-image: url("img/Superposition/superposition-bg-02.png");
        }
        body:not(.dark) .page-bg-superposition-03 {
            background-image: url("img/Superposition/superposition-bg-03.png");
        }
        body:not(.dark) .page-bg-superposition-04 {
            background-image: url("img/Superposition/superposition-bg-04.png");
        }
        body:not(.dark) .page-bg-superposition-05 {
            background-image: url("img/Superposition/superposition-bg-05.png");
        }
        body:not(.dark) .page-bg-superposition-06 {
            background-image: url("img/Superposition/superposition-bg-06.png");
        }
        .dark .diagram {
            filter: invert(100%);
        }
        .page-bg-superposition-01, .page-bg-superposition-02, .page-bg-superposition-03, .page-bg-superposition-04, .page-bg-superposition-05, .page-bg-superposition-06 {
            position: relative;
            overflow: hidden;
        }
        .dark .page-bg-superposition-01::before {
            content: "";
            position: absolute;
            top: -42mm; left: -35mm;
            width: 310mm; height: 365mm;
            background-image: url("img/Superposition/superposition-bg-01.png");
            filter: invert(100%) hue-rotate(180deg);
            transform: scale(0.775);
        }
        .dark .page-bg-superposition-02::before {
            content: "";
            position: absolute;
            top: -42mm; left: -35mm;
            width: 310mm; height: 365mm;
            background-image: url("img/Superposition/superposition-bg-02.png");
            filter: invert(100%) hue-rotate(180deg);
            transform: scale(0.775);
        }
        .dark .page-bg-superposition-03::before {
            content: "";
            position: absolute;
            top: -42mm; left: -35mm;
            width: 310mm; height: 365mm;
            background-image: url("img/Superposition/superposition-bg-03.png");
            filter: invert(100%) hue-rotate(180deg);
            transform: scale(0.775);
        }
        .dark .page-bg-superposition-04::before {
            content: "";
            position: absolute;
            top: -42mm; left: -35mm;
            width: 310mm; height: 365mm;
            background-image: url("img/Superposition/superposition-bg-04.png");
            filter: invert(100%) hue-rotate(180deg);
            transform: scale(0.775);
        }
        .dark .page-bg-superposition-05::before {
            content: "";
            position: absolute;
            top: -42mm; left: -35mm;
            width: 310mm; height: 365mm;
            background-image: url("img/Superposition/superposition-bg-05.png");
            filter: invert(100%) hue-rotate(180deg);
            transform: scale(0.775);
        }
        .dark .page-bg-superposition-06::before {
            content: "";
            position: absolute;
            top: -42mm; left: -35mm;
            width: 310mm; height: 365mm;
            background-image: url("img/Superposition/superposition-bg-06.png");
            filter: invert(100%) hue-rotate(180deg);
            transform: scale(0.775);
        }
        .page-content, .page-header, .page-footer {
        /* This will make it stack on top of the ::before */
            position: relative;
        }
        @media screen and (min-width: 900px) {
            body {
                background: url('img/Superposition/web-background.jpg');
            }
            body.dark {
                background: url('img/Superposition/web-background-dark.jpg');
            }
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-superposition-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Superposition</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Superposition.svg" class="diagram">
                <h2>On the Subject of Superposition</h2>
                <p class="flavour-text">Is the cat alive or dead? Somehow, the cat is both alive and dead at the same time.</p>

                <p>
                    This module presents a 5×5 grid of magenta buttons — or "cells" — and two displays. If a cell is being highlighted, both displays will show a letter, a number and a colour (always in that order).
                    Otherwise, the displays will default to "SUPER" and "POSITION". Pressing a cell will turn it on [grey]/off [magenta].
                </p>
                <p>
                    The colours that may show up on this module are <span class="red"><em><b>R</b></em>ed</span>, <span class="orange"><em><b>O</b></em>range</span>,
                    <span class="yellow"><em><b>Y</b></em>ellow</span>, <span class="green"><em><b>G</b></em>reen</span>, <span class="blue"><em><b>B</b></em>lue</span>,
                    <span class="violet"><em><b>V</b></em>iolet</span> and <span class="white"><em><b>W</b></em>hite</span>.
                    If colourblind mode is enabled, each display will show the first letter of its colour, in addition to their letters and numbers.
                </p>

                <p>The cells are numbered from 0–24, in reading order.</p>

                <p>
                    One of the two displays will be the "collapsed superposition". To find which display this is, follow the instructions in the section called "Collapsing The Superposition".
                    The information given by the collapsed superposition is called the "wave form". You can completely ignore the other display.
                </p>

                <p>
                    Once you have determined the collapsed superposition, follow the instructions in Steps #1–4. You should receive six valid cells for each section, making a total of twenty-four valid cells. Note that some cells may not be uniquely valid.
                    Once you have the valid cells, configure the cells on the module, such that every non-uniquely valid cell is off and every uniquely valid cell is on, then press the status light to solve the module.
                    Pressing the status light when the cells are in an invalid configuration will cause a strike.
                    <b><em>N.B.: The solution may change, depending on the number of solves / strikes the bomb has, but the wave form will not.</em></b>
                </p>

                <h3>Collapsing the Superposition</h3>

                <p>Find the first condition that applies in the list below to find the collapsed superposition.</p>

                <ul>
                    <li>If one of the wave forms is missing a cell (ie., one cell does not display anything), the other wave form is the collapsed superposition.</li>
                    <li>Otherwise, if there are multiple Superposition modules on the bomb, the top display is the collapsed superposition.</li>
                    <li>Otherwise, if both displays show cell 12 as the same colour, the wave form with the highest number for cell 12 is the collapsed superposition. In the case of a tie, skip this rule.</li>
                </ul>

                <p class="continued">continued on next page...</p>

            </div>
            <div class="page-footer relative-footer">Page 1 of 6</div>
        </div>
        <div class="page page-bg-superposition-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Superposition</span>
            </div>
            <div class="page-content">

                <ul>
                    <li>Otherwise, if the bomb has at least one each DVI-D, PS/2, and RJ-45 ports, the right display is the collapsed superposition.</li>
                    <li>Otherwise, if the sum of the numbers in the first column of exactly one wave Form is greater than 20, this wave form is the collapsed superposition.</li>
                    <li>Otherwise, if the bomb has more lit indicators than unlit indicators, the top display is the collapsed superposition.</li>
                    <li>Otherwise, if exactly one waveform has different colours on each of its corners, this wave form is the collapsed superposition.</li>
                    <li>Otherwise, if the bomb has exactly 3 batteries in 2 battery holders, the right display is the collapsed superposition.</li>
                    <li>Otherwise, if exactly one wave form’s cell 24 shares a letter / number with the bomb’s serial number, the other wave form is the collapsed superposition.</li>
                    <li>Otherwise, if the bomb’s serial number does not contain any vowels, the right display is the collapsed superposition.</li>
                    <li>Otherwise, the top display is the collapsed superposition.</li>
                </ul>

                <h3>Step #1: Letter Ciphers</h3>

                <p>
                    First, you will need a "cipher code". This is initially the bomb’s serial number, but the wave form’s missing letter (the letter of the alphabet which does not appear in the wave form) and any numbers need to be changed.
                    For the missing letter, follow the rules under Missing Letter Conversion. For numbers, follow the rules under Number Conversion.
                </p>

                <h4>Missing Letter Conversion</h4>
                <ul>
                    <li>Take the last digit of the serial number and add 1 to it.</li>
                    <li>Caesar shift [cycle the letter though the alphabet a certain number of times] the letter which is missing from the wave form forwards by this number, then find it in the wave form.</li>
                    <li>
                        Use the serial number and the chart below to determine a direction, then move one cell through the wave form in that direction, wrapping around if necessary.
                        Take the first two characters of the serial number and find the matching direction in the chart where X means any letter and # means any digit:
                    </li>
                </ul>
                <table>
                    <tr><td class="empty"></td><td>XX<td class="empty"></td></tr>
                    <tr><td>X#</td><th class="centre">⬤</th><td>#X</td></tr>
                    <tr><td class="empty"></td><td>##</td><td class="empty"></td></tr>
                </table>
                <ul>
                    <li>(For example, A1 means move one cell to the left.)</li>
                    <li>Take the letter which you are on in the wave form. Replace all occurrences of the missing letter in the cipher code with this letter.</li>
                </ul>

                <p class="continued">continued on next page...</p>

                </div>
            <div class="page-footer relative-footer">Page 2 of 6</div>
        </div>
        <div class="page page-bg-superposition-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Superposition</span>
            </div>
            <div class="page-content">

                <h4>Number Conversion</h4>
                <p>For each number in the cipher code:</p>
                <ul>
                    <li>If the digit is 0, change it to 10.</li>
                    <li>Multiply the digit by its position in the cipher code (eg. 3rd position: ×3).</li>
                    <li>Double the number until it is two digits long.</li>
                    <li>Add the digital root of the number to itself, then modulo the result by 26, then convert the result to a letter using A0Z25 (eg. 8 —> I).</li>
                    <li>If the resulting letter is not in the wave form, Caesar shift it forwards by 1. Replace the digit in the cipher code with this letter.</li>
                </ul>

                <p>Once you have the cipher code, follow the ciphers below in order:</p>

                <h4>Cipher #1: Playfair Cipher</h4>

                <p>Split the cipher code into pairs, such that the letters in positions 1 & 2, 3 & 4 and 5 & 6 are paired. For each pair, find both letters in the wave form.</p>

                <ul>
                    <li>If the letters are identical, they should remain the same.</li>
                    <li>Otherwise, if the letters are in the same column in the wave form, they become the letter below them, wrapping around if necessary.</li>
                    <li>Otherwise, if the letters are in the same row in the wave form, they become the letter to the right of them, wrapping around if necessary.</li>
                    <li>Otherwise, they become the letter in the same row as the original, but in the column of the other letter in the pair.</li>
                </ul>

                <h4>Example</h4>

                <p>Cipher code: <span class="r">VA</span> <span class="g">LL</span> <span class="b">EY</span></p>

                <table>
                    <tr>
                        <td>K</td>
                        <td>J</td>
                        <td>Q</td>
                        <td style="background-color:#00FF0044">L</td>
                        <td>X</td>
                    </tr>
                    <tr>
                        <td>S</td>
                        <td style="background-color:#0000FF44">Y</td>
                        <td>P</td>
                        <td>C</td>
                        <td>H</td>
                    </tr>
                    <tr>
                        <td>M</td>
                        <td style="background-color:#0000FF44">E</td>
                        <td>O</td>
                        <td>I</td>
                        <td style="background-color:#FF000044">A</td>
                    </tr>
                    <tr>
                        <td>Z</td>
                        <td>W</td>
                        <td>G</td>
                        <td>U</td>
                        <td>N</td>
                    </tr>
                    <tr>
                        <td>R</td>
                        <td>F</td>
                        <td>D</td>
                        <td style="background-color:#FF000044">V</td>
                        <td>T</td>
                    </tr>
                </table>

                <ul>
                    <li class="r">VA: Different rows and columns — TI</li>
                    <li class="g">LL: Same letter — LL</li>
                    <li class="b">EY: Same column — WE</li>
                </ul>

                <p class="continued">continued on next page...</p>

                </div>
            <div class="page-footer relative-footer">Page 3 of 6</div>
        </div>
        <div class="page page-bg-superposition-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Superposition</span>
            </div>
            <div class="page-content">

            <h4>Cipher #2: Caesar Cipher</h4>

            <p>
                Take the sum of the digits of the bomb’s serial number. If the last digit of the bomb’s serial number is even,
                Caesar shift each letter in the cipher code forwards by this amount [cycle each letter though the alphabet this many times, forwards], otherwise shift each letter backwards [the same, but in the opposite direction].
            </p>

            <h4>Cipher #3: Atbash Cipher</h4>

            <p>
                Convert each letter in the cipher code into a number using A1Z26 [A = 1, B = 2, ... Z = 26], then subtract each number from 27 and convert these numbers back into letters like before (A1Z26).
                If any of these letters do not appear in the wave form, revert the letters in question back to what they were after Cipher #2.
            </p>

            <p>For each duplicate letter in the cipher code at this point, Caesar shift that letter forwards by 1 until it is no longer a duplicate letter and is present in the wave form. This is your final cipher code.</p>

            <p>This step’s six valid cells are the cells in the wave form which bears any letter in the cipher code.</p>

            <h3>Step #2: Number Math</h3>

            <p>First, determine the "starting number":</p>

            <ul>
            <li>Take the sum of the first row of numbers in the wave form, then subtract the last digit of the serial number from this total.</li>
            <li>Multiply this value by the value in cell (# of batteries on the bomb).</li>
            <li>Take the absolute value of this number, then the digital root of the result.</li>
            <li>Add the number of solved modules, then modulo the result by 25. This is the starting number.</li>
            </ul>

            <p>Cell (starting number) is this step’s first valid cell (eg. if the starting number is 4, then cell E1 is valid). To find the other five, repeat the process below until this stage has six valid cells:</p>

            <ul>
            <li>Define the "cell number" to be the sum of all of the numbers on every valid cell in this step, modulo 25.</li>
            <li>Cell (cell number) is valid.</li>
            <li>If the resulting cell has already been made valid in this step, make the next non-valid cell in this step, in reading order (wrapping around if necessary), valid instead, without changing the cell number.</li>
            </ul>

            <p class="continued">continued on next page...</p>

            </div>
            <div class="page-footer relative-footer">Page 4 of 6</div>
        </div>
        <div class="page page-bg-superposition-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Superposition</span>
            </div>
            <div class="page-content">

            <h3>Step #3: Colour Sequence</h3>

            <p>First, obtain a sequence of colours from the table below, using cell 0’s colour as the column and cell 24’s colour as the row:</p>

            <table style="border: none; font-size: 11pt">
            <tr>
            <th class="empty"></th>
            <th style="background-color:#FF000044">Red</th>
            <th style="background-color:#FF880044">Orange</th>
            <th style="background-color:#FFFF0044">Yellow</th>
            <th style="background-color:#00FF0044">Green</th>
            <th style="background-color:#0000FF44">Blue</th>
            <th style="background-color:#FF00FF44">Violet</th>
            <th style="background-color:#FFFFFF44">White</th>
            </tr>
            <tr>
            <th style="background-color:#FF000044">Red</th>
            <td>ROYBGVW</td>
            <td>BVOGYRW</td>
            <td>OYWVBGR</td>
            <td>WVGRBYO</td>
            <td>YWVBGRO</td>
            <td>VBYROWG</td>
            <td>WRYGVBO</td>
            </tr>
            <tr>
            <th style="background-color:#FF880044">Orange</th>
            <td>YWRVGOB</td>
            <td>ORWGVBY</td>
            <td>BVGORWY</td>
            <td>VGOWBRY</td>
            <td>OYRBWVG</td>
            <td>ROWYVBG</td>
            <td>GYBWOVR</td>
            </tr>
            <tr>
            <th style="background-color:#FFFF0044">Yellow</th>
            <td>BRGWYOV</td>
            <td>VWOYGRB</td>
            <td>YGRWBOV</td>
            <td>BYOWVRG</td>
            <td>ROYWBVG</td>
            <td>BGYWORV</td>
            <td>RGOYWBV</td>
            </tr>
            <tr>
            <th style="background-color:#00FF0044">Green</th>
            <td>GYVRWBO</td>
            <td>RWOBVYG</td>
            <td>GRYOBVW</td>
            <td>GOVBWRY</td>
            <td>GVRWYOB</td>
            <td>YGVWORB</td>
            <td>VOWRGYB</td>
            </tr>
            <tr>
            <th style="background-color:#0000FF44">Blue</th>
            <td>OBYWRVG</td>
            <td>VWRBYOG</td>
            <td>WGOYBVR</td>
            <td>YRWBOVG</td>
            <td>BGVOWYR</td>
            <td>WOBVGRY</td>
            <td>GOBYWVR</td>
            </tr>
            <tr>
            <th style="background-color:#FF00FF44">Violet</th>
            <td>WGVRBYO</td>
            <td>YRVGBOW</td>
            <td>RWYBGVO</td>
            <td>OVBGRWY</td>
            <td>YGORWVB</td>
            <td>VGROYWB</td>
            <td>OVRYBGW</td>
            </tr>
            <tr>
            <th style="background-color:#FFFFFF44">White</th>
            <td>YWBVOGR</td>
            <td>GRBYVWO</td>
            <td>BWVORGY</td>
            <td>WGYVORB</td>
            <td>VORWYBG</td>
            <td>RWGYOBV</td>
            <td>WVGBYOR</td>
            </tr>
            </table>

            <p>For each cell in the wave form, starting from cell 0 and moving in reading order:</p>
            <ul>
            <li>If the cell’s colour matches the first colour of the sequence, this cell is valid.</li>
            <li>Otherwise, move to the next cell.</li>
            </ul>
            <p>If you have reached the end of the wave form and do not have six valid cells, remove the first colour of the colour sequence and repeat the above until you do.</p>

            <h3>Step #4: Cell Matching</h3>

            <p>Find the column with the most true statements in Table A. If there is a tie, use the rightmost tied column.</p>

            <p>
                Start with the first cell in Table B in the resulting column from Table A and move down the column.
                For each cell you encounter, if any of the cells in the wave form follow its condition (where any character other than a letter or number is wild), it is valid.
                For example, a red cell labelled A1 would follow the condition "A#R".
            </p>

            <p>If multiple cells follow the condition of a cell, take the first non-valid cell in reading order in the wave form.</p>

            <p>If you reach the end of a column and you have less than six valid cells, move to the first cell in the column to your right, wrapping around if necessary, and work your way down.</p>

            <p>If you have used every column and still do not have six valid cells, validate cells in the wave form, starting with cell 0, which are not already valid, until you have six valid cells for this step.</p>

            <p class="continued">continued on next page...</p>

            </div>
            <div class="page-footer relative-footer">Page 5 of 6</div>
        </div>
        <div class="page page-bg-superposition-06">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Superposition</span>
            </div>
            <div class="page-content">

            <h4>Table A</h4>

            <table class="small">
                <tr>
                    <td>The last digit of the bomb’s serial number is less than the number of batteries on the bomb.</td>
                    <td>The bomb was started on a weekend.</td>
                    <td>There are no vowels in the first row of the wave form.</td>
                    <td>The bomb’s serial number contains any character in "QU4N7M".</td>
                    <td>The number of warm colours in the wave form (ROYW) is greater than the number of cold colours (GBV).</td>
                </tr>
                <tr>
                    <td>No white cell has the letter A or Z.</td>
                    <td>The bomb is missing batteries, indicators or port plates.</td>
                    <td>The bomb has an indicator which shares any of its letters with the bomb’s serial number.</td>
                    <td>The right display is the collapsed superposition.</td>
                    <td>The bomb has a lit BOB indicator.</td>
                </tr>
                <tr>
                    <td>The bomb has an even number of battery holders.</td>
                    <td>At least six cells in the wave form have the same colour.</td>
                    <td style="background-color: #00FF0044">This module is attached to an explosive device.</td>
                    <td>No parallel port on the bomb shares a port plate with a serial port.</td>
                    <td>The wave form is missing any number or colour.</td>
                </tr>
                <tr>
                    <td>Any green cell in the wave form shares a character with the bomb’s serial number.</td>
                    <td>The last digit (ones digit) of the number of ports on the bomb is present in the serial number.</td>
                    <td>At least one red cell in the wave form has the number 1.</td>
                    <td>At least one cell with the number 0 also has the letter Z.</td>
                    <td>The bomb does not have any unlit indicators.</td>
                </tr>
                <tr>
                    <td>The bomb has no strikes.</td>
                    <td>The serial number contains at least one letter from cells 0 and 24.</td>
                    <td>The sum of the bomb’s serial number’s digits is less than 2 × (the number of batteries on the bomb + the number of lit indicators on the bomb).</td>
                    <td>The bomb does not have any D batteries.</td>
                    <td>The wave form’s missing letter is a vowel.</td>
                </tr>
            </table>

            <h4>Table B</h4>

            <table>
                <tr><td>A#!</td><td>P0!</td><td>B0W</td><td>-8B</td><td>D#R</td></tr>
                <tr><td>Y5Y</td><td>X#V</td><td>-6Y</td><td>-0!</td><td>N2!</td></tr>
                <tr><td>-8R</td><td>R0Y</td><td>-#G</td><td>G#O</td><td>V7!</td></tr>
                <tr><td>-4B</td><td>K#G</td><td>-3!</td><td>L1!</td><td>M7B</td></tr>
                <tr><td>T#G</td><td>-6!</td><td>U2V</td><td>A5!</td><td>-2W</td></tr>
                <tr><td>F1!</td><td>O0O</td><td>-9O</td><td>-#W</td><td>G#Y</td></tr>
                <tr><td>J#O</td><td>-1G</td><td>C7!</td><td>X9B</td><td>-8!</td></tr>
                <tr><td>Q5!</td><td>-#B</td><td>M#G</td><td>H3O</td><td>-6V</td></tr>
                <tr><td>-#R</td><td>Z9!</td><td>W#W</td><td>-8Y</td><td>S4R</td></tr>
                <tr><td>I3V</td><td>-5R</td><td>E4!</td><td>R#G</td><td>Z#!</td></tr>
            </table>

            </div>
            <div class="page-footer relative-footer">Page 6 of 6</div>
        </div>
    </div>
</body>
</html>