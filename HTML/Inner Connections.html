<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Inner Connections — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src='js/ktane-utils.js'></script>
    <script src='js/ruleseed.js'></script>
    <script>
        function setDefaultRules(random)
        {
            setRules(random);
        }

        function setRules(random)
        {
            let colourList = ["Black", "Blue", "Red", "White", "Yellow"];
            let tds = document.querySelectorAll(".first-wire-table td");

            random.shuffleFisherYates(colourList);
            for (let i = 0; i < 9; i++)
            {
                random.shuffleFisherYates(colourList);
                for (let j = 0; j < 5; j++)
                    tds[5 * i + j].innerText = colourList[j];
            }
            random.shuffleFisherYates(colourList);
            for (let i = 0; i < 5; i++)
                document.getElementById(`ratio${i + 1}`).innerText = colourList[i];
            random.shuffleFisherYates(colourList);
            document.getElementById("exception1").innerText = colourList[0];
            document.getElementById("exception2").innerText = colourList[1];
        }
    </script>
    <style>
        .dark table, table {
            border: none;
            text-align: center;
        }
        .dark img.morse {
            filter: invert(90%);
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Inner Connections</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Inner Connections.svg" class="diagram">
                <h2>On the Subject of Inner Connections</h2>
                <p class="flavour-text">So this is what the inside of the bomb looks like.</p>
                <ul>
                    <li>You are presented with a closed door, a red button, and a flashing LED colored blue, black, yellow, red or white.</li>
                    <li>You must use the information on the bomb and the module to determine two wire colors.</li>
                    <li>Upon pressing the button, the door will open, and you have 15 seconds to cut all wires of those colors in each area to disarm the module.</li>
                    <li>To open the door, press the large red button under the door.</li>
                    <li>Use the arrows to cycle between the 3 areas.</li>
                </ul>

                <h3>Finding the first wire colour:</h3>
                <ul>
                    <li>First, decipher the Morse code to find the number the LED is transmitting. If needed, use Appendix 1.</li>
                    <li>If the deciphered number is equal to the number of indicators, the colour of the LED is your first wire.</li>
                    <li>Else, calculate ((the battery count + the deciphered number) × the number of characters in the colour of the LED)%9 (e.g. RED = 3). This will be referred to as your calculated number.</li>
                </ul>
                <p>Use the table below to get the first wire colour from your calculated number and the first port that applies (from left to right):</p>
                <table class="centered">
                    <tr><th class='corner'></th><th>DVI-D</th><th>Parallel</th><th>PS/2</th><th>RJ-45</th><th>Serial</th></tr>
                    <tr><th>0</th><td>Yellow</td><td>Blue</td><td>White</td><td>Red</td><td>Black</td></tr>
                    <tr><th>1</th><td>Black</td><td>White</td><td>Yellow</td><td>Red</td><td>Blue</td></tr>
                    <tr><th>2</th><td>Yellow</td><td>Red</td><td>Black</td><td>Blue</td><td>White</td></tr>
                    <tr><th>3</th><td>Red</td><td>Yellow</td><td>Blue</td><td>Black</td><td>White</td></tr>
                    <tr><th>4</th><td>Blue</td><td>White</td><td>Yellow</td><td>Red</td><td>Black</td></tr>
                    <tr><th>5</th><td>White</td><td>Black</td><td>Yellow</td><td>Red</td><td>Blue</td></tr>
                    <tr><th>6</th><td>Red</td><td>Black</td><td>Blue</td><td>Yellow</td><td>White</td></tr>
                    <tr><th>7</th><td>Yellow</td><td>White</td><td>Blue</td><td>Black</td><td>Red</td></tr>
                    <tr><th>8</th><td>Black</td><td>Blue</td><td>Yellow</td><td>Red</td><td>White</td></tr>
                </table>
                <p>If there are only Stereo RCA ports, the first wire colour is <span id="exception1"></span>.
                <br>If there are no ports, the first wire colour is <span id="exception2"></span>.</p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Inner Connections</span>
            </div>
            <div class="page-content">
                <h3>Finding the second wire colour:</h3>
                <ul>
                    <li>The ratio of solved:unsolved modules will determine the colour of the second wire.</li>
                    <li>If the ratio is less than 1:4, the second wire colour is <span id="ratio1"></span>.</li>
                    <li>If the ratio is less than 1:2, the second wire colour is <span id="ratio2"></span>.</li>
                    <li>If the ratio is less than 1:1, the second wire colour is <span id="ratio3"></span>.</li>
                    <li>If the ratio is less than 2:1, the second wire colour is <span id="ratio4"></span>.</li>
                    <li>Otherwise, the second wire colour is <span id="ratio5"></span>.</li>
                    <li>If the second wire colour is the same as the first, pick the first different colour from the first row of the table (from left to right).</li>
                </ul>
                <h3>Appendix 1:</h3>
                <img class="morse centered-img" src="img/Inner Connections/Morse Table.png" style="width:10cm">
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>