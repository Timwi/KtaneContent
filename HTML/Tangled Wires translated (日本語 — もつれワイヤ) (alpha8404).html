<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>もつれワイヤ — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src='js/ruleseed.js'></script>
    <script>
        var defaultRules = null;
        
        function getDefaultRules()
        {
            if (defaultRules !== null)
                return;
            defaultRules = {};
            for (var finalValue = 0; finalValue <= 9; finalValue++)
                defaultRules[`rule-${finalValue}`] = document.getElementById(`rule-${finalValue}`).innerText;
                console.log("LOG 1")
        }
        function setDefaultRules()
        {
            getDefaultRules();
            for (var finalValue = 0; finalValue <= 9; finalValue++)
                document.getElementById(`rule-${finalValue}`).innerText = defaultRules[`rule-${finalValue}`];
                console.log("LOG 2")
        }
        
        function setRules(rnd)
        {
            var colours = "黒,青,赤,黄".split(',');
            getDefaultRules();
            console.log("LOG 2.5")
            for (var finalValue = 0; finalValue <= 9; finalValue++){
                var span = document.getElementById(`rule-${finalValue}`);
                console.log("LOG 3")
                var rule = { randomValue: rnd.nextMax(4) }
                span.innerText = colours[rule.randomValue];
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">もつれワイヤ</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Tangled Wires.svg" class="diagram">
                <h2>モジュール詳細：もつれワイヤ</h2>
                <p class="flavour-text">この複雑な爆弾を作った人は間違いなくケーブル管理のスキルを欠いている。</p>

                <p>このモジュールを解除するには、まずワイヤのもつれを解き、次に関連するワイヤを切断する必要がある。ワイヤのもつれを解くのに処理担当者が必要な動きが増えるほど、切断すべきワイヤを判断するのが難しくなる！</p>

                <h3>ワイヤのもつれを解く</h3>
                <p>ワイヤのもつれを解くには、オレンジ色のペグを押して、隣接する2つの正方形を入れ替える。ペグの各クリックは1移動としてカウントされる。緑色のペグは中央の入力のみを交換し、クリックすると5移動としてカウントされる。このペグを複数回押す必要はない。</p>
                <h3>ワイヤを切断する</h3>
                <p>シリアルナンバーの最初の数字から開始する。ワイヤのもつれを解くのに要した移動回数を5で除算して切り上げた値に等しい回数分、以下の手順を繰り返す。例えば、17回移動した場合は4回手順を繰り返す必要がある。移動量が60を超える場合は12回繰り返す(それ以上やってはならない)。</p>
                <ul>
                    <li>シリアルナンバーの最後の数字を現在の数字に加算する。</li>
                    <li>2で割る。</li>
                    <li>現在の数字が500より大きい場合、10で除算し数値の整数部分のみを取得する。</li>
                </ul>
                <p>手順の繰り返しが完了したら結果の数字の最下位桁を取得し、以下の表の対応するワイヤを切断する。</p>
                <table>
                    <tr>
                        <th>#</th>
                        <th>切断するワイヤ</th>
                        <th>#</th>
                        <th>切断するワイヤ</th>
                    </tr>
                    <tr>
                        <td>0</td>
                        <td><span class='rule' id='rule-0'>黒</span>いワイヤを切断する。</td>
                        <td>5</td>
                        <td><span class='rule' id='rule-5'>青</span>いワイヤを切断する。</td>
                    </tr>
                    <tr>
                        <td>1</td>
                        <td><span class='rule' id='rule-1'>赤</span>いワイヤを切断する。</td>
                        <td>6</td>
                        <td><span class='rule' id='rule-6'>赤</span>いワイヤを切断する。</td>
                    </tr>
                    <tr>
                        <td>2</td>
                        <td><span class='rule' id='rule-2'>青</span>いワイヤを切断する。</td>
                        <td>7</td>
                        <td><span class='rule' id='rule-7'>黄</span>いワイヤを切断する。</td>
                    </tr>
                    <tr>
                        <td>3</td>
                        <td><span class='rule' id='rule-3'>黄</span>いワイヤを切断する。</td>
                        <td>8</td>
                        <td><span class='rule' id='rule-8'>青</span>いワイヤを切断する。</td>
                    </tr>
                    <tr>
                        <td>4</td>
                        <td><span class='rule' id='rule-4'>黄</span>いワイヤを切断する。</td>
                        <td>9</td>
                        <td><span class='rule' id='rule-9'>赤</span>いワイヤを切断する。</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
</body>
</html>