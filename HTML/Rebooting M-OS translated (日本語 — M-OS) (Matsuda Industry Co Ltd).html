<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>M-OS — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
      <style>
        .table1 {
            text-align: center;
            width: 100%;
            font-size: 150%;
        }
      </style>
</head>
<body> 
        <div class="section">
            <div class="page page-bg-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">M-OS</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/Rebooting M-OS.svg" class="diagram">
                <h2>モジュール詳細：M-OS</h2>
                    <p class="flavour-text">大ブームを巻き起こせ！</p>
                    <p>
                        このモジュールは詳細不明のオペレーティングシステムを使用している。我々はそれを「M-OS」と呼ぶ。爆弾の開始時に、このOSは致命的なエラーメッセージを表示する。 ただし、テキストの代わりに動く四角形のみで表示される。正方形は、赤、緑、青、黄、シアン、マゼンタ、白の7色のうち4色が循環して表示される。
                        モジュールを解除するには、「M-OS」を再起動するだけでよい。残念ながら、爆弾の時間は「M-OS」に大きな影響を与え、再起動がより困難な<i>アドバンスバージョン</i>となっている。
                        例によって、再起動は正方形を3回タップすれば完了する。注意すべきは押すべきタイミングだけである。
                        押すべきタイミングを計算するには、3つの値を取得し、それらに最終演算を適用する。
                    </p>
                    <h2>値Aの取得</h2>
                    <p>
                        値Aを求めるには正方形の色と動作(4つの動きが循環して表示される。)が必要になる。下の表を使い16個のマスを取得し、それらのマスの値をすべて足し算する。得た数値 % 1000を行う。これが値Aである。
                    </p>
                    <table style="font-size: 14.5px">
                        <tr>
                            <th>

                            </th>
                            <th>
                                T
                            </th>
                            <th>
                                B
                            </th>
                            <th>
                                R
                            </th>
                            <th>
                                L
                            </th>
                            <th>
                                BL
                            </th>
                            <th>
                                TR
                            </th>
                            <th>
                                BR
                            </th>
                            <th>
                                TL
                            </th>
                        </tr>
                        <tr>
                            <th>
                                赤
                            </th>
                            <th>
                                60
                            </th>
                            <th>
                                44
                            </th>
                            <th>
                                86
                            </th>
                            <th>
                                89
                            </th>
                            <th>
                                48
                            </th>
                            <th>
                                47
                            </th>
                            <th>
                                54
                            </th>
                            <th>
                                88
                            </th>
                        </tr>
                        <tr>
                            <th>
                                緑
                            </th>
                            <th>
                                45
                            </th>
                            <th>
                                71
                            </th>
                            <th>
                                48
                            </th>
                            <th>
                                65
                            </th>
                            <th>
                                49
                            </th>
                            <th>
                                93
                            </th>
                            <th>
                                98
                            </th>
                            <th>
                                87
                            </th>
                        </tr>
                        <tr>
                            <th>
                                青
                            </th>
                            <th>
                                68
                            </th>
                            <th>
                                92
                            </th>
                            <th>
                                83
                            </th>
                            <th>
                                96
                            </th>
                            <th>
                                77
                            </th>
                            <th>
                                53
                            </th>
                            <th>
                                99
                            </th>
                            <th>
                                64
                            </th>
                        </tr>
                        <tr>
                            <th>
                                黄
                            </th>
                            <th>
                                80
                            </th>
                            <th>
                                70
                            </th>
                            <th>
                                66
                            </th>
                            <th>
                                63
                            </th>
                            <th>
                                74
                            </th>
                            <th>
                                98
                            </th>
                            <th>
                                50
                            </th>
                            <th>
                                48
                            </th>
                        </tr>
                        <tr>
                            <th>
                                シアン
                            </th>
                            <th>
                                54
                            </th>
                            <th>
                                48
                            </th>
                            <th>
                                83
                            </th>
                            <th>
                                53
                            </th>
                            <th>
                                81
                            </th>
                            <th>
                                57
                            </th>
                            <th>
                                61
                            </th>
                            <th>
                                91
                            </th>
                        </tr>
                        <tr>
                            <th>
                                マゼンタ
                            </th>
                            <th>
                                63
                            </th>
                            <th>
                                52
                            </th>
                            <th>
                                58
                            </th>
                            <th>
                                54
                            </th>
                            <th>
                                62
                            </th>
                            <th>
                                50
                            </th>
                            <th>
                                86
                            </th>
                            <th>
                                90
                            </th>
                        </tr>
                        <tr>
                            <th>
                                白
                            </th>
                            <th>
                                46
                            </th>
                            <th>
                                63
                            </th>
                            <th>
                                70
                            </th>
                            <th>
                                72
                            </th>
                            <th>
                                83
                            </th>
                            <th>
                                69
                            </th>
                            <th>
                                58
                            </th>
                            <th>
                                52
                            </th>
                        </tr>
                    </table>
                    <p style="font-size: 14.5px"><i>T -正方形は下から上に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>B -正方形は上から下に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>R -正方形は左から右に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>L -正方形は右から左に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>BL -正方形は右上隅から左下隅に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>TR -正方形は左下隅から右上隅に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>BR -正方形は左上隅から右下隅に移動する。</i></p>
                    <p style="font-size: 14.5px"><i>TL -正方形は右下隅から左上隅に移動する。</i></p>
                </div>
                <div class="page-footer relative-footer">ページ 1/4</div>
            </div>
            <div class="page page-bg-02">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">M-OS</span>
                </div>
                <div class="page-content">
                    <h2>値Bの取得</h2>
                    <p>値Bを求めるには、値Aを修正する必要がある。値Aに、正方形の色に基づく4つの演算を、正方形に現れる順番に適用する。これが値Bである。</p>
                    <em><strong>適用された操作ごとに、常に数値 % 1000を行う。</strong></em>
                    <table class="table1">

                        <tr>
                            <td>赤</td>
                            <th>A<sub>n</sub> = A<sub>n-1</sub> + E</th>
                        </tr>
                        <tr>
                            <td>緑</td>
                            <th>A<sub>n</sub> = A<sub>n-1</sub> - E</th>
                        </tr>
                        <tr>
                            <td>青</td>
                            <th>A<sub>n</sub> = A<sub>n-1</sub> * n</th>
                        </tr>
                        <tr>
                            <td>黄</td>
                            <th>A<sub>n</sub> = 2A<sub>n-1</sub> + E * n</th>
                        </tr>
                        <tr>
                            <td>シアン</td>
                            <th>A<sub>n</sub> = (A<sub>n-1</sub> * n) - E</th>
                        </tr>
                        <tr>
                            <td>マゼンタ</td>
                            <th>A<sub>n</sub> = E<sup>2</sup> - A<sub>n-1</sub></th>
                        </tr>
                        <tr>
                            <td>白</td>
                            <th>A<sub>n</sub> = 2n<sup>2</sup> - (A<sub>n-1</sub> * E)</th>
                        </tr>
                    </table>
                    <p><i>E = シリアルナンバーの数字の合計。</i></p>
                    <p><i>n = 現在のステップ、1から始まる。</i></p>
                    <p><i>A<sub>n-1</sub>は直前に求めた修正された値Aである。n=1の場合は初期段階の値Aである。</i></p>
                </div>
                <div class="page-footer relative-footer">ページ 2/4</div>
            </div>
            <div class="page page-bg-03">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">M-OS</span>
                </div>
                <div class="page-content">
                    <h2>値Cの取得</h2>
                    <p>
                      値Aと値Bを足し、10で割った余りを求めて1桁にする。爆弾のタイマーの下一桁が求めた数字と等しくなったら、ステータスライトを押す。一回押すと、背景が26色のうち2色に点滅する。下の表を使って、この2色を6桁の三進数に変換する。1色目の赤、緑、青の値を取る。次に、2番目の色から同じ順序で値を取る。また、各色自体にもそれぞれ値があり、下の表ではその色自体に書かれている。
                  </p>
                    <i>ステータスライトは、1度押した後は自由に押すことができる。</i>
                    <table style="width: 600px; text-align: center; font-size: 14.5px">
                        <tr>
                            <td>色</td>
                            <td style="background-color:#7F7F7F"></td>
                            <td colspan="3">赤</td>
                            <td colspan="3">赤</td>
                            <td colspan="3">赤</td>
                        </tr>
                        <tr>
                            <td style="background-color:#7F7F7F"></td>
                            <td>数字</td>
                            <td>0</td>
                            <td>1</td>
                            <td>2</td>
                            <td>0</td>
                            <td>1</td>
                            <td>2</td>
                            <td>0</td>
                            <td>1</td>
                            <td>2</td>
                        </tr>
                        <tr>
                            <td style="height:100px" rowspan="3">
                                緑
                          </td>

                            <td>
                                0
                            </td>
                            <td style="background-color:#000000; color:#FFFFFF">99</td>
                            <td style="background-color:#7F0000; color:#FFFFFF">75</td>
                            <td style="background-color:#FF0000; color:#FFFFFF">66</td>
                            <td style="background-color:#00007F; color:#FFFFFF">15</td>
                            <td style="background-color:#7F007F; color:#FFFFFF">38</td>
                            <td style="background-color:#FF007F; color:#FFFFFF">93</td>
                            <td style="background-color:#0000FF; color:#FFFFFF">12</td>
                            <td style="background-color:#7F00FF; color:#FFFFFF">89</td>
                            <td style="background-color:#FF00FF; color:#FFFFFF">46</td>
                        </tr>
                        <tr>
                            <td>
                                1
                            </td>
                            <td style="background-color:#007F00; color:#FFFFFF">33</td>
                            <td style="background-color:#7F7F00; color:#FFFFFF">90</td>
                            <td style="background-color:#FF7F00; color:#FFFFFF">76</td>
                            <td style="background-color:#007F7F; color:#FFFFFF">45</td>
                            <td style="background-color:#7F7F7F; color:#FFFFFF">81</td>
                            <td style="background-color:#FF7F7F; color:#FFFFFF">55</td>
                            <td style="background-color:#007FFF; color:#FFFFFF">19</td>
                            <td style="background-color:#7F7FFF; color:#FFFFFF">27</td>
                            <td style="background-color:#FF7FFF; color:#FFFFFF">91</td>
                        </tr>
                        <tr>
                            <td>
                                2
                            </td>
                            <td style="background-color:#00FF00">63</td>
                            <td style="background-color:#7FFF00">71</td>
                            <td style="background-color:#FFFF00">35</td>
                            <td style="background-color:#00FF7F">42</td>
                            <td style="background-color:#7FFF7F">50</td>
                            <td style="background-color:#FFFF7F">14</td>
                            <td style="background-color:#00FFFF">69</td>
                            <td style="background-color:#7FFFFF">21</td>
                            <td style="background-color:#FFFFFF">99</td>
                        </tr>
                        <tr>
                            <td style="background-color:#7F7F7F"></td>
                            <td>数字</td>
                            <td colspan="3">0</td>
                            <td colspan="3">1</td>
                            <td colspan="3">2</td>
                        </tr>
                        <tr>
                            <td>色</td>
                            <td style="background-color:#7F7F7F"></td>
                            <td colspan="9">青</td>
                        </tr>
                    </table>
                    <p>
                        求めた三進数の値を十進数に変換する。それをシリアルナンバーの最後の数字の分（0なら10）倍にし、そしてmod27を行う。求めた数字を三進数に戻し、上の表で色に変換する。そのあと、新しい色に関連する値を取る。これが値Cである。
                    </p>
                    <h2>最終演算</h2>
                    <p>3つの値をすべて計算したら、下の表を使って、それらに演算を行う。値AまたはBが0の場合、それを1にする。</p>
                    <table style="font-size: 14.5px">
                        <tr>
                            <td>シリアルナンバーの<br>最後の数字</td>
                            <td>演算</td>
                            <td style="background-color:#7F7F7F; width: 50px" rowspan="6"></td>
                            <td>シリアルナンバーの<br>最後の数字</td>
                            <td style="width: 190px">演算</td>
                        </tr>
                        <tr>
                            <td>0</td>
                            <td>A + B + C</td>
                            <td>5</td>
                            <td>3C - (A + B)</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>ABS(B - C) * A</td>
                            <td>6</td>
                            <td>((B - (B % 2)) / 2 - A) * C</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>B<sup>2</sup> - (A + C)</td>
                            <td>7</td>
                            <td>-A + ABS(B - C)</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>2A - (B % C)</td>
                            <td>8</td>
                            <td>A* B * C</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>(A * B) % C</td>
                            <td>9</td>
                            <td>A - B - C</td>
                        </tr>
                    </table>
                    <i>計算値が負の値の場合は、正の値にする。計算された値が1000より大きい場合は、mod1000を行う。計算された値が100より小さい場合は、そうでなくなるまで100を足す。</i>
                </div>
                <div class="page-footer relative-footer">ページ 3/4</div>
            </div>
            <div class="page page-bg-02">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">M-OS</span>
                </div>
                <div class="page-content">
                    <h2>送信方法</h2>
                    <p>最終的な3桁の値を求めれば、モジュールを再起動することができる。爆弾のタイマーの下一桁が値の最初の桁と等しくなったら、正方形をタップし、次に2回目、3回目...と進む。</p>
                    <h2>付録C0L0R:色の名前</h2>
                    <table>
                        <tr>
                            <td style="background-color:#000000; color:#FFFFFF">Black</td>
                            <td style="background-color:#7F0000; color:#FFFFFF">Maroon</td>
                            <td style="background-color:#FF0000; color:#FFFFFF">Red</td>
                            <td style="background-color:#00007F; color:#FFFFFF">Indigo</td>
                            <td style="background-color:#7F007F; color:#FFFFFF">Plum</td>
                            <td style="background-color:#FF007F; color:#FFFFFF">Rose</td>
                            <td style="background-color:#0000FF; color:#FFFFFF">Blue</td>
                            <td style="background-color:#7F00FF; color:#FFFFFF">Violet</td>
                            <td style="background-color:#FF00FF; color:#FFFFFF">Magenta</td>
                        </tr>
                        <tr>
                            <td style="background-color:#007F00; color:#FFFFFF">Forest</td>
                            <td style="background-color:#7F7F00; color:#FFFFFF">Olive</td>
                            <td style="background-color:#FF7F00; color:#FFFFFF">Orange</td>
                            <td style="background-color:#007F7F; color:#FFFFFF">Teal</td>
                            <td style="background-color:#7F7F7F; color:#FFFFFF">Gray</td>
                            <td style="background-color:#FF7F7F; color:#FFFFFF">Salmon</td>
                            <td style="background-color:#007FFF; color:#FFFFFF">Azure</td>
                            <td style="background-color:#7F7FFF; color:#FFFFFF">Maya</td>
                            <td style="background-color:#FF7FFF; color:#FFFFFF">Pink</td>
                        </tr>
                        <tr>
                            <td style="background-color:#00FF00; color:#000000">Green</td>
                            <td style="background-color:#7FFF00; color:#000000">Lime</td>
                            <td style="background-color:#FFFF00; color:#000000">Yellow</td>
                            <td style="background-color:#00FF7F; color:#000000">Jade</td>
                            <td style="background-color:#7FFF7F; color:#000000">Mint</td>
                            <td style="background-color:#FFFF7F; color:#000000">Cream</td>
                            <td style="background-color:#00FFFF; color:#000000">Cyan</td>
                            <td style="background-color:#7FFFFF; color:#000000">Aqua</td>
                            <td style="background-color:#FFFFFF; color:#000000">White</td>
                        </tr>
                    </table>
                    <p></p>
                    <h2>追加情報</h2>
                    <p>各色と各動作の組み合わせは、表示順になっている。</p>
                    <p>4つの動きが終わると、正方形は一瞬消え、再びすべての動きを繰り返す。</p>
                    <p>同じ数字を3つ入力すると、<u><i>色覚異常モード</i></u>が切り替わる。</p>
                    <p>ABS(x)は、xの絶対値を表す。</p>
                    <p>A % B または A mod Bは、A が 0 から B の範囲になるまで、A から B を引くことを表す。</p>
                    <p>Twitchコマンドで設定を送信すると、モジュールは爆弾のタイマーに依存しなくなる。<p>
                </div>
                <div class="page-footer relative-footer">ページ 4/4</div>
            </div>
            </div>   

</body>
</html>
