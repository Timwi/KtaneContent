<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>더블 오 — Keep Talking and Nobody Explodes</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-korean.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/Modules/Double-Oh.css">
    <script src="js/ktane-utils.js"></script>
    <script src='js/ruleseed.js'></script>
    <style>
        .note { word-break: keep-all; }
        .elite, td { font-family: 'Special Elite'; }
    </style>
    <script>
        let sudokus = [
            'abcdefghighiabcdefdefghiabcbcaefdhighigbcaefdefdhigbcacabfdeighighcabfdefdeighcab',
            'abcdefghiighabcdefdefhigabcbcaefdighhigbcaefdefdghibcacabfdehigghicabfdefdeighcab',
            'abcdefghifdehigabcighabcefdefdighcabghicabdefcabfdehighigbcafdebcaefdighdefghibca',
            'abcdefghihigabcfdeefdighabcbcafdeighghibcaefddefhigbcacabefdhigighcabdeffdeghicab',
            'abcdefghidefghiabcghiabcdeffdeighcabighcabfdecabfdeighhigbcaefdbcaefdhigefdhigbca',
            'abcdefghihgiabcdefedfghiabcbcahfgeidgiebdacfhdfhciebgacabfghideihdeabfcgfegicdhab',
            'abcdefghihigabcfdeefdighabcbcafdeighgeibhacfddhfcigbeacabhfdeigigheabdcffdegcihab',
            'abcdefghihgfabicdeedihcgabfbfaciehgddigbhaefccehgfdbiaiabedhfcggcdfabiehfheigcdab',
            'abcdefghihgfabicededigchabfbiacdgefhghebfadiccfdhiebgafabigdhceicheabfdgdegfhciab',
            'abcdefghigihabcdefdfeghiabcbcahfdeighdiegacfbegfcibhdacabidefghihdfagbcefegbchiad',
            'abcdefghigihabcdfedfegihabcbcafgeidhfhgidacebiedchbfgacabefghidegihadbcfhdfbcieag',
            'abcdefghihigabcfdeefdighabcbcafdeighdeighacfbghfcibdeacabhfgeidigheadbcffdebcihag',
            'abcdefghiiehabgcfdfdghicabebgaidefchhiefcadgbcfdghbieaeabcfdhigghfeaibdcdcibgheaf',
            'abcdefghiheiabgdfcdfgihcabebiafcehdgfhegdacibgcdhibfeaeabcfhigdigheadbcfcdfbgieah',
            'abcdefghiifhabgcdeegdhicabfhiacdbefgdcfegahibgebfhidcafaeichbgdbhigadfeccdgbfeiah',
            'abcdefghifihabgcdeedgihcafbigabfhecddhbecaigfcefgidhbahaecdbfiggfdhaibecbcifgedah',
            'abcdefghigeiabhcdffdhgciabebcaidehfghiefgcdabdgfhabieceabcidfghifdehgbcachgbfaeid',
            'abcdefghihfeaigbdcgidbchafefgaedbcihdcbghieafehifacdbgbaghfeicdiehcbdfgacdfigaheb',
            'abcdefghiidhcgbfaeefghiabcdghiabcdeffaeidhcgbbcdefghiadefghiabccgbfaeidhhiabcdefg',
            'abcdefghigdhcibafeefihgabdcihgfbdceafaeichdgbbcdeaghifceaghifbddgbafeichhifbdceag',
            'abcdefghighiabcdefdefghiabcfdehigcabcabfdehighigcabfdeighbcaefdefdighbcabcaefdigh',
            'abcdefghihigcabfdeefdighbcacabfdehigighbcaefddefghiabcbcaefdighghiabcdeffdehigcab',
            'abcdefghihigcabefdfdeighbcacabfdehigighbcadefefdghiabcbcaefdighghiabcfdedefhigcab',
            'abcdefghihigcabefdfdeighbcacabefdhigighbcafdedefghiabcbcafdeighghiabcdefefdhigcab',
            'abcdefghiighcabfdeefdhigbcagaifbcdehhdeigacfbbcfehdaigdeagfihbcchbadeigffigbchead',
            'abcdefghighiabcdefdefghiabcefdhigcabcabefdhighigcabefdighbcafdefdeighbcabcafdeigh',
            'abcdefghihdiabgecfegfchiabdcfheidbgabeagfhdicdigbcahfeicehabfdgfhdigecabgabfdcieh',
            'abcdefghieihabgfcddgfcihabefcdhgebiabeaidchgfghibfaedcidgeabcfhcfeghidabhabfcdieg',
            'abcdefghihigabcfdedefhigcabfdecabhigcabighefdighfdebcabcaghidefghiefdabcefdbcaigh',
            'abcdefghighicabdeffdeighabccabhigfdeighfdecabefdbcaighdefabchigbcaghiefdhigefdbca',
            'abcdefghiighcabdeffdeghiabccabighfdehigfdecabefdbcaighdefabchigbcahigefdghiefdbca',
            'abcdefghiighcabdeffdeghiabccabhigfdeghifdecabefdbcahigdefabcighbcaighefdhigefdbca',
            'abcdefghiighcabefdefdghiabccabighdefhigfdecabdefbcaighfdeabchigbcahigfdeghiefdbca',
            'abcdefghighicabefdefdighabciabhdgcefdghfceiabcefbiadghfieabdhcgbdaghcfiehcgefibda',
            'abcdefghighicabefdefdighabchageidbcfidefbchagbcfghaidefghadecibdeabcifghcibhfgdea',
            'abcdefghiighcabefdefdghiabcghifdecabdefbcahigcabhigdefhigefdbcafdeabcighbcaighfde',
            'abcdefghiighcabefdefdghiabcghiefdcabfdebcahigcabhigfdehigfdebcadefabcighbcaighdef',
            'abcdefghihigabcfdedefhigcabefdcabhigcabighdefighefdbcabcaghiefdghifdeabcfdebcaigh',
            'abcdefghighicabdeffdeighabccabhigefdighefdcabdefbcaighefdabchigbcaghifdehigfdebca',
            'abcdefghighicabefdefdighabchabeigdcfigefdchabdcfbhaigefdhabecigbeagcifdhcighfdbea',
            'abcdefghighicabefdefdighabciahfdgcebdgfbceiahcebhiadgfhieafdbcgfdagbchiebcgehifda',
            'abcdefghighfiabecdeidcghabfhaiecgdfbfgebdihacdcbfhaigecdhafebigieagbcfdhbfghidcea',
            'abcdefghighicabdeffdeighabcighefdcabdefbcaighcabhigefdhigfdebcaefdabchigbcaghifde',
            'abcdefghighicabdeffdeighabchigefdcabdefbcahigcabghiefdighfdebcaefdabcighbcahigfde',
            'abcdefghiighcabdeffdeghiabcghiefdcabdefbcahigcabhigefdhigfdebcaefdabcighbcaighfde',
            'abcdefghigheiabcfdifdcghabecghefdiabfdibcaegheabhigfdchigfdcbeadefabihcgbcaghedif',
            'abcdefghifdihagebceghibcafdhigbcedafdefghacibcabfdihegifdeghbcabceafdighghacibfde',
            'abcdefghighicabdeffdeighabcighefdbcadefabcighbcahigefdhigfdecabefdbcahigcabghifde',
            'abcdefghighicabdeffdeighabchigefdbcadefabchigbcaghiefdighfdecabefdbcaighcabhigfde',
            'abcdefghiighcabdeffdeghiabcghiefdbcadefabchigbcahigefdhigfdecabefdbcaighcabighfde',
            'abcdefghidefighabcghiabcdefighbcaefdfdeghicabcabfdeighhigefdbcabcahigfdeefdcabhig',
            'abcdefghidefighabcighabcfdefdebcaighghifdecabcabhigdefhigefdbcabcaghiefdefdcabhig',
            'abcdefghihifabgcdedeghicfabcdefabhiggabichefdifhgdebcabgachideffhiegdabcecdbfaigh',
            'abcdefghiighcabefdefdghiabcghiefdbcafdeabchigbcahigfdehigfdecabdefbcaighcabighdef',
            'abcdefghighibcadeffdeighbcabcahigefdighefdcabdefcabighefdabchigcabghifdehigfdeabc',
            'abcdefghifdgahibceiehbcgdafhiecabfdgdafighebccgbfdehiabcagfdiehghiebcafdefdhiacgb',
            'abcdefghiefdighabcghicabefdbcaefdighfdeghicabhigabcdefdefhigbcaighbcafdecabfdehig',
            'abcdefghifheaigbcddigbchaefidhcgbfaebcaefidghgefhadibchadibcefgcgbfdehiaefighacdb',
            'abcdefghihidagcfbegefhibacdfgebcdiahcdaghiefbbhifaedgcdagibhcefichefgbdaefbcdahig',
            'abcdefghihigabcfdedefhigcabghibcadeffdeighabccabefdhigighcabefdefdghibcabcafdeigh',
            'abcdefghifhiacgbdegdehbiafchgacfbeiddefighcabicbeadfghbahgicdefefdbhaicgcigfdehba',
            'abcdefghihidacgebfgefbhiadcegahidfcbcdbfgeiahifhcabdgebaegfchiddhiebacfgfcgidhbea',
            'abcdefghidefhigabcighabcdefcabfdehigfdeighcabghicabfdebcaghiefdefdbcaighhigefdbca',
            'abcdefghifdeighcabhigbcaefdehiabgdcfgabfdciehcfdhiebgadgfeabhicichgfdabebeachifdg',
            'abcdefghifdeighcabhigbcaefdehdaigbcfgaifbcdehcfbhdeigaigfeadhbcbchgfiadedeachbfig',
            'abcdefghiefdhigabcighabcfdecabefdhigfdeighcabghicabdefbcaghiefddefbcaighhigfdebca',
            'abcdefghidefghiabcghiabcdefeabfdgichfdgicheabicheabfdgbgahiecfdcfdbgahiehiecfdbga',
            'abcdefghifdehigcabighbcaefdhigabcdefcabfdeighefdghibcadefcabhigghiefdabcbcaighfde',
            'abcdefghifdehigcabighbcaefdhigabcfdecabefdighdefghibcaefdcabhigghifdeabcbcaighdef',
            'abcdefghiefdhigcabighbcafdehigabcefdcabfdeighdefghibcafdecabhigghiefdabcbcaighdef',
            'abcdefghidefghiabcghiabcdefeadfigbchfigbcheadbcheadfigigahdecfbcfbigahdehdecfbiga',
            'abcdefghidefhigabcighabcdefcabfdeighfdeghicabhigcabfdebcaighefdefdbcahigghiefdbca',
            'abcdefghiefdhigabcighabcfdecabfdeighdefghicabhigcabefdbcaighdeffdebcahigghiefdbca',
            'abcdefghidefghiabcghiabcdeffabidecghidecghfabcghfabidebiahfgecdecdbiahfghfgecdbia',
            'abcdefghidefghiabcghiabcdeffaeidhcgbidhcgbfaecgbfaeidhhiaefgbcdbcdhiaefgefgbcdhia',
            'abcdefghidefghicabhigcabefdcabhigdeffdebcahigighfdebcaefdighabcghiabcfdebcaefdigh',
            'abcdefghihdeaigfbcgfibchadeegafbdichicfghedabdhbcaiegfbagefchidcehidabfgfidhgbcea',
        ];
        let validPairs = [
            [0, 2], [0, 4], [1, 2], [1, 4], [3, 4], [4, 18], [4, 24], [17, 18], [20, 21], [20, 22], [20, 23], [20, 24], [21, 25], [22, 25], [23, 25],
            [24, 25], [28, 29], [28, 30], [28, 31], [28, 32], [28, 33], [28, 34], [28, 35], [28, 36], [28, 38], [28, 39], [28, 40], [28, 42], [28, 43],
            [28, 44], [28, 47], [28, 48], [28, 49], [28, 53], [28, 54], [29, 37], [30, 37], [31, 37], [32, 37], [33, 37], [34, 37], [35, 37], [36, 37],
            [37, 38], [37, 39], [37, 40], [37, 41], [37, 42], [37, 43], [37, 44], [37, 45], [37, 46], [37, 47], [37, 48], [37, 49], [37, 50], [37, 51],
            [37, 53], [37, 54], [52, 53], [52, 54], [53, 55], [54, 55], [62, 63], [62, 64], [63, 65], [63, 71], [63, 72], [64, 65], [64, 71], [64, 72],
            [66, 67], [66, 68], [66, 69], [67, 70], [67, 73], [67, 74], [68, 70], [68, 73], [68, 74], [69, 70], [69, 73], [69, 74], [75, 76]
        ];

        function setDefaultRules()
        {
            setGrid('60,2,15,57,36,83,48,71,24,88,46,31,70,22,64,7,55,13,74,27,53,5,41,18,86,30,62,52,10,4,43,85,37,61,28,76,33,65,78,21,0,56,12,44,87,47,81,26,68,14,72,50,3,35,6,38,42,84,63,20,75,17,51,25,73,67,16,58,1,34,82,40,11,54,80,32,77,45,23,66,8'.split(','));
        }

        function setRules(rnd)
        {
            // Add extra randomness
            for (var i = rnd.next(0, 10); i > 0; i--)
                rnd.nextDouble();

            function renumber(grid)
            {
                let gridInt = grid.split('').map(ch => ch.charCodeAt(0) - 97);  // 97 = 'a'
                let middleChar = gridInt[40];
                let numbering = rnd.shuffleFisherYates([...Array(9).keys()].slice(1));
                numbering.splice(middleChar, 0, 0);
                return gridInt.map(i => numbering[i]);
            }
            let randomPair = validPairs [ rnd.next(0, validPairs.length) ].map(ix => renumber(sudokus[ix]));
            setGrid([...Array(81).keys()].map(ix => randomPair[0][ix]*10 + randomPair[1][ix]));
        }

        function setGrid(grid)
        {
            let tds = document.querySelectorAll('td');
            for (let i = 0; i < 81; i++)
                tds[i].innerText = grid[i] < 10 ? `0${grid[i]}` : grid[i];
            
            let spans = document.getElementsByClassName('sq-span');
            for (const sp of spans) {
                let squareContent = grid[parseInt(sp.dataset.square)];
                sp.innerText = squareContent < 10 ? `0${squareContent}` : squareContent;
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">더블 오</span>
            </div>
            <div class="page-content double-oh-content">
                <h2>더블 오에 대하여</h2>
                <img class='diagram' src='img/Component/Double-Oh.svg'>
                <p class='flavour-text'>
                    <span class="strike">모듈 하나, 젓지 말고 흔들어서.</span> <b>이 고물딱지 같으니, 화면도 맛이 가고, 버튼도 고장나고...</b>
                <ul>
                    <li>두 자릿수가 표시된 화면과, 다섯 개의 버튼이 있습니다. 버튼을 이용해, 표시된 수를 00(아래 표의 정중앙에 있음)으로 만들고, 제출 버튼을 누르세요.</li>
                    <li>다섯 개의 버튼 중 네 개의 버튼은 화면의 숫자를 변경합니다. 버튼들은 3×3 격자가 3×3으로 배치되어 있는 아래 표에 기반하여, 다음과 같이 작동합니다.</li>
                    <li>“<span class="elite">↕</span>” 버튼은 현재 숫자를 작은 격자 내에 있는 위아래의 숫자로 변경하며, 모서리를 넘으면 반대편으로 이동합니다. (예시: 00 → <span class="sq-span" data-square="31">85</span> → <span class="sq-span" data-square="49">14</span> → 00)
                    <li>“<span class="elite">↔</span>” 버튼은 현재 숫자를 작은 격자 내에 있는 좌우의 숫자로 변경하며, 모서리를 넘으면 반대편으로 이동합니다. (예시: 00 → <span class="sq-span" data-square="41">56</span> → <span class="sq-span" data-square="39">21</span> → 00)
                    <li>“<span class="elite">⇕</span>” 버튼은 현재 숫자를 위아래의 다음 3×3 격자 안의 같은 위치의 숫자로 변경하며, 모서리를 넘으면 반대편으로 이동합니다. (예시: 00 → <span class="sq-span" data-square="13">22</span> → <span class="sq-span" data-square="67">58</span> → 00)
                    <li>“<span class="elite">⇔</span>” 버튼은 현재 숫자를 좌우의 다음 3×3 격자 안의 같은 위치의 숫자로 변경하며, 모서리를 넘으면 반대편으로 이동합니다. (예시: 00 → <span class="sq-span" data-square="43">44</span> → <span class="sq-span" data-square="37">65</span> → 00)
                    <li>“<span class="elite">▣</span>” 버튼은 제출 버튼입니다. 화면에 00이 표시된 때에 누르면 모듈이 해제되며, 그 외의 경우는 실수로 처리됩니다.
                </ul>
                <p class='note'>주의: 이 모듈은 낡아서, 화면의 첫 번째 자리가 0이면 마지막 자리가 제대로 표시되지 않습니다.
                    게다가, 버튼의 배선이 꼬여 버튼들의 기능이 뒤바뀌어 있을 수 있습니다.
                    다행히, 제출 버튼을 잘못 눌렀을 때에 화면에 표시된 숫자가 10보다 작을 때에만 실제 실수로 처리됩니다.
                <table class='double-oh'>
                    <tr><td>60<td>02<td>15<td>57<td>36<td>83<td>48<td>71<td>24</tr>
                    <tr><td>88<td>46<td>31<td>70<td>22<td>64<td>07<td>55<td>13</tr>
                    <tr><td>74<td>27<td>53<td>05<td>41<td>18<td>86<td>30<td>62</tr>
                    <tr><td>52<td>10<td>04<td>43<td>85<td>37<td>61<td>28<td>76</tr>
                    <tr><td>33<td>65<td>78<td>21<td class='goal'>00<td>56<td>12<td>44<td>87</tr>
                    <tr><td>47<td>81<td>26<td>68<td>14<td>72<td>50<td>03<td>35</tr>
                    <tr><td>06<td>38<td>42<td>84<td>63<td>20<td>75<td>17<td>51</tr>
                    <tr><td>25<td>73<td>67<td>16<td>58<td>01<td>34<td>82<td>40</tr>
                    <tr><td>11<td>54<td>80<td>32<td>77<td>45<td>23<td>66<td>08</tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>
