<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>アビス — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
        <style>
            table {
                margin: 1em auto;
            }
            ol {
                font-size: 14px;
            }
            body:not(.dark) .page-bg-abyss-01 {
                background-image: url("img/Abyss/abyss-bg-01.png");
            }
            body:not(.dark) .page-bg-abyss-02 {
                background-image: url("img/Abyss/abyss-bg-02.png");
            }
            .dark .diagram {
                filter: invert(80%) contrast(80%);
            }
            .page-bg-abyss-01, .page-bg-abyss-02 {
                position: relative;
                overflow: hidden;
            }
            .dark .page-bg-abyss-01::before {
                content: "";
                position: absolute;
                top: -42mm; left: -35mm;
                width: 310mm; height: 365mm;
                background-image: url("img/Abyss/abyss-bg-01.png");
                filter: invert(100%) contrast(80%);
                transform: scale(0.775);
            }
            .dark .page-bg-abyss-02::before {
                content: "";
                position: absolute;
                top: -42mm; left: -35mm;
                width: 310mm; height: 365mm;
                background-image: url("img/Abyss/abyss-bg-02.png");
                filter: invert(100%) contrast(80%);
                transform: scale(0.775);
            }
            .page-content, .page-header, .page-footer {
            /* This will make it stack on top of the ::before */
                position: relative;
            }
        </style>
    </head>
    <body>
        <div class="section">
            <div class="page page-bg-abyss-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">アビス</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/Abyss.svg" class="diagram">
                    <h2>モジュール詳細：アビス</h2>
                    <p class="flavour-text"><strong>球体!</strong></p>

                    <p>このモジュールの初期状態では、8文字の英字が2行表示される。これを結合した長さ16の文字列を「シード」と呼ぶ。また、その下に「Ready」ボタンがあるがこれはまだ押してはならない。このモジュールの目的は、シードを元に求めた8桁のコードをモジュールに入力することである。誤ったコードを入力するとミスが記録されるが、シードは変わらない。</p>

                    <h3>コードの特定</h3>

                    <p>次のステップを利用して8桁のコードを得る。</p>

                    <ol>
                        <li>シードを8つのペアに分割する。</li>
                        <li>ペアがそれぞれ五十二進数の数字(A = 0、B = 1... Z = 25、a = 26... z = 51)であるとして、十進数に変換する。</li>
                        <li>4桁以下の数字については、4桁になるように左に0を追加する。</li>
                        <li>これらを結合して32桁の数字を得る。</li>
                        <li>
                            以下の通りに数字を入れ替える。
                            <ul>
                                <li>バッテリーが奇数である場合、最初の数字と2個目の数字、3個目の数字と4個目の数字、...とすべて入れ替える。</li>
                                <li>そうでない場合、2個目の数字と3個目の数字、4個目の数字と5つ目の数字、...とすべて入れ替え、最後に<strong>32個目の数字と最初の数字を入れ替える</strong>。</li>
                            </ul>
                        </li>
                        <li>数字を8つの4桁の数字に分割する。</li>
                        <li>
                            シリアルナンバーの3つ目と6つ目の文字に従ってこのグループを入れ替える。
                            <ul>
                                <li>どちらも奇数の場合、1と2、3と4、5と6、7と8を入れ替える</li>
                                <li>奇数、偶数の場合、1と3、2と4、5と7、6と8を入れ替える</li>
                                <li>偶数、奇数の場合、1と5、2と6、3と7、4と8を入れ替える</li>
                                <li>どちらも偶数の場合、1と8、2と7、3と6、4と5を入れ替える</li>
                            </ul>
                        </li>
                        <li>それぞれのグループについて、ポートの数の分だけ右にシフトする(例: ポートが1つならば 1234→4123</li>
                        <li>
                            シリアルナンバーを2つに分割し、それぞれから利用するグループを特定する。シリアルナンバーのそれぞれの文字について、
                            <ul>
                                <li>5より小さい、あるいはアルファベットでNより前である場合、右半分を利用しない。</li>
                                <li>そうでない場合、左半分を利用しない。</li>
                            </ul>
                        </li>
                        <li>得られた2つ目の4桁の数字が1つ目の4桁の数字と同じである場合、(手順8からの文字列において)読み順で次にある4桁を、必要に応じてループさせて使用する。</li>
                    </ol>
                    <p>得られた8桁の数字がコードである。「Ready」ボタンを押して進む。</p>

                    <p><i>次のページに続く...</i></p>

                </div>
                <div class="page-footer relative-footer">ページ 1/2</div>
            </div>
            <div class="page page-bg-abyss-02">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Abyss</span>
                </div>
                <div class="page-content">

                    <h3>コードの入力方法</h3>

                    <p>「Ready」を押すとシードとボタンが消失し、代わりに浮遊した球が形成される。<strong>この球に1秒以上カーソルを合わせる行為は入力の一部とみなされることがあるので注意する。</strong></p>

                    <p>これより、この球に1秒以上カーソルを合わせる行為を「オーバードライブ」と呼ぶ。オーバードライブされた球からカーソルを離すことを「イージング」と呼ぶ。</p>

                    <p>数字を入力するには、球を押さずにオーバードライブする。その後、イージングの前に入力したい数字の回数分だけ球を押す。9回以上入力した場合は9回として扱われる。数字が0以外である場合は、オーバードライブ前に押した入力は無視される。</p>

                    <p>オーバライドする前に指定回数押し、オーバーライドされた後に押さずにイージングすると以下の効果がある。</p>

                    <ul>
                        <li>現在の入力を送信する - 1回</li>
                        <li>最後の入力を削除する - 2回</li>
                        <li>全ての入力を削除する - 3回</li>
                    </ul>

                    <p>球には最後に入力した数字が表示される。</p>

                </div>
                <div class="page-footer relative-footer">ページ 2/2</div>
            </div>
        </div>
    </body>
</html>