<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Spatiolocation — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <style>
        .darksetting, .dark .darksetting { background-color: #040404; }

        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 2'; }

        table {
            margin: 1em auto;
            border: 3px solid white;
            border-collapse: collapse;
        }
        th, td {border: 3px solid white;}

        @media screen and (min-width: 900px) {
            body.dark, body {
                background: url("img/Sickening Maze/Traveller.gif");
                background-attachment: fixed;
            }
        }

        a {
            display: inline-block;
            margin-right: .5em;
            text-decoration: none;
            color: white;
            font-size: 80%;
            transition: color .1s;
            background: #008;
            border-radius: 50%;
            width: 1.5em;
            height: 1.5em;
            text-align: center;
            padding-left: .1em;
            box-sizing: border-box;
            font-family: monospace;
        }

            a:hover:not(.failed):not(.playing) {
                color: #ff8;
            }

            a.playing {
                color: #8f8;
            }

            a.failed {
                cursor: not-allowed;
                color: red;
            }
    </style>
    <script>
        $(function () {
            $("span:contains(ping), span:contains(ding), span:contains(sonar)").next().each(function () {
                let audio = $("<audio>")
                    .on("error", function () {
                        button.addClass("failed");
                    })
                    .attr("src", "../HTML/audio/Echolocation/" + $(this).prev().text() + ".mp3")
                    .on("ended", function () {
                        button.removeClass("playing");
                    })
                    .appendTo($(this));

                let button = $("<a href='#' class='play-button'>▶</a>")
                    .click(function () {
                        if (button.hasClass("playing")) {
                            button.removeClass("playing");
                            audio[0].pause();
                            audio[0].currentTime = 0;
                        } else {
                            button.addClass("playing");
                            audio[0].play();
                        }
                        return false;
                    })
                    .appendTo($(this));
            })
        });
    </script>
</head>
<body>
    <div class="section" style="color: #FFFFFF;">
        <div class="page darksetting">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Spatiolocation</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Spatiolocation.svg" class="diagram">
                    <h2>On the Subject of Spatiolocation</h2>
                    <p class="flavour-text">Open your eyes and feel the fabric of reality...</p>
                    <ul>
                        <li>This module shows a black background with a spiraling animation. There are eight invisible buttons.</li>
                        <li>There are 6 arrows that are located in the module. 4 of them point at each cardinal direction, while the remaining 2 are larger arrows that point up and down.</li>
                        <li>Each of the arrows does the following movement:
                        <table>
                        <tr><td>Right Pointing Arrow</td><td>Rotate 90° clockwise relative to original orientation in the Y plane (right)</td><td>(LD+1)%4</td></tr>
                        <tr><td>Left Pointing Arrow</td><td>Rotate 90° counterclockwise relative to original orientation in the Y plane (left)</td><td>((LD-1)+4)%4</td></tr>
                        <tr><td>Small Up Pointing Arrow</td><td>Rotate 90° clockwise relative to original orientation in the Z plane (up)</td><td>(SD+1)%4</td></tr>
                        <tr><td>Small Down Pointing Arrow</td><td>Rotate 90° counterclockwise relative to original orientation in the Z plane (down)</td><td>((SD-1)+4)%4</td></tr>
                        <tr><td>Large Up Pointing Arrow</td><td>Rotate 90° clockwise relative to original orientation in the W plane (ana)</td><td>(FD+1)%4</td></tr>
                        <tr><td>Large Down Pointing Arrow</td><td>Rotate 90° counterclockwise relative to original orientation in the W plane (cata)</td><td>((FD-1)+4)%4</td></tr>
                        </table>
                        </li>
                        <li>For each rotation, your orientation will be adjusted. The direction that you will be facing will be based on a 3-digit rotation number.
                        <ul>
                            <li>The original orientation number (000) will be adjusted based on the amount of rotations in each plane. The original orientation is represented in -X (Forward).</li>
                            <li>The first digit represents the amount of 90° clockwise movement performed in the W plane relative to your original orientation. This rotation must be applied first. Use the XW plane for the rotation.</li>
                            <li>The second digit represents the amount of 90° clockwise movement performed in the Z plane relative to your original orientation. This rotation must be applied second. Use the Z plane with its last corresponding direction from the previous step for the rotation.</li>
                            <li>The last digit represents the amount of 90° clockwise movement performed in the Y plane relative to your original orientation. This rotation must be applied last. Use the Y plane with its last corresponding direction from the previous step for the rotation.</li>
                        </ul>
                        </li>
                    </ul>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>

        <div class="page darksetting">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Spatiolocation</span>
            </div>
            <div class="page-content">
            <ul>
                <li>Use the table below as a guide for clockwise rotations on each plane combination. If you reach the end of a rotation plane, go back to the beginning.
                <table>
                    <tr><td>-X, +Y, +X, -Y</td><td>-X, -Z, +X, +Z</td><td>-X, -W, +X, +W</td></tr>
                    <tr><td>-Y, -Z, +Y, +Z</td><td>-Y, -W, +Y, +W</td><td>-Z, -W, +Z, +W</td></tr>
                </table>
                </li>
                <li>In the center, there are two half circles that have different functionalities.
                <ul>
                <li>The upper half-circle will move you one space in your given direction.</li>
                <li>The lower half-circle is used to make a high-pitched noise.
                <ul>
                    <li>The noise will bounce off of the object and come back to you.</li>
                    <li>The key will make a <span>ping</span><span></span>sound, the exit will make a <span>ding</span><span></span>sound, any walls will make a <span>sonar wave</span><span>-esque</span>sound.</li>
                    <li>The noise takes one second to go one space forward. Once you press the button, the “timer” for the ping starts.</li>
                    <li>The maze has a key and an exit, both of which return distinct noises when a pitch is played in that direction.</li>
                    <li>To pick up the key, go to where it is and hold the lower half-circle button.</li>
                    <li>Once you have the key, simply go to where the hatch is and hold the lower half-circle button to unlock it and solve the module. Doing this without the key will result in a strike as well as doing it anywhere else. A strike will also be received if you try to pick up the key in the wrong place or walk into a wall.</li>
                </ul>
                </li>
                </ul>
                </li>
            </ul>
                <h3>Maze Specifications</h3>
                <ul>
                    <li>The maze is a 3×3×3×3, with the outer edges of the maze being covered completely by walls.</li>
                    <li>The walls, key, and exit location are completely randomized.</li>
                    <li>You are also randomly rotated at the beginning. So while you cannot 100% determine your current rotation, the guide above will be useful for estimating your orientation.</li>
                    <li>You, the key and the exit are always in the center of a square, thus the key and the exit will only make sounds an integer number of seconds after you make a sound. Walls on the other hand are on the edge of squares, and thus will be played half a second more than an integer number of seconds.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
    </div>
</body>
</html>