<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Sysadmin — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css" />
    <link rel="stylesheet" type="text/css" href="css/normalize.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <script src="js/ktane-utils.js"></script>
    <script>
        const data = [
            ["8BP5", "52SA", "G0ST", "6XTT", "7Y79", "0JK0", "FT37", "965B", "Z7C4", "FZY3"],
            ["6ZP8", "6446", "5L1O", "4D9A", "7T7X", "8IWL", "5841", "56OW", "4AX8", "3WY0"],
            ["3EAM", "09R0", "KAY6", "2Z3O", "7004", "012J", "1M67", "2G6X", "006K", "437Y"],
            ["523G", "8MR3", "JW99", "6X6C", "4HZZ", "UMP9", "5UCF", "6S82", "5IM7", "7FX2"],
            ["V0SR", "2TF5", "4958", "CYB6", "2484", "73T1", "88K2", "4Q1F", "4L73", "93HV"],
            ["0P3T", "3X80", "3577", "5JVK", "3W31", "20ZK", "1MD1", "3QB2", "5T5U", "6PHO"],
            ["3O4X", "6N8N", "46UC", "5K27", "0F5V", "74GE", "15UT", "680W", "CMK9", "6WMJ"],
            ["3D40", "K329", "1J7R", "V5Z9", "8LO4", "5U9H", "975Z", "8S8C", "J27H", "8868"],
            ["2E3D", "S5Y5", "7Q12", "0CU2", "Y9DD", "E4DR", "6XXS", "6FVU", "547C", "5TVT"],
            ["6D44", "742X", "D86Q", "S912", "7B2Z", "OEX9", "BB35", "7Y11", "274A", "836C"],
            ["8567", "PT68", "5RN4", "WIQ2", "0KAY", "0PQ8", "6AG0", "M7S4", "2ROV", "6RO0"],
            ["391M", "M4NF", "ZUY2", "67W9", "70CW", "6530", "7F4Q", "5PA5", "693M", "6W2F"],
            ["57T1", "14V2", "0JW4", "8TH7", "WAX1", "6SH6", "7XGD", "250K", "78EU", "4YKZ"],
            ["86V2", "1X2X", "8NWD", "478A", "823O", "L509", "5BI0", "2267", "TL08", "42J0"],
            ["4EUE", "4355", "TGZ2", "4Y7Z", "4769", "5NCR", "8A0V", "A9E1", "212K", "1366"],
            ["1RM6", "6X6O", "1PCO", "7OXG", "X8IZ", "UHW4", "G61J", "01OA", "083J", "2WP1"],
            ["9JZ8", "4768", "2KRB", "5QNO", "Y2GA", "7A4T", "GBZ2", "XKU3", "U291", "65HQ"],
            ["89DE", "J9FZ", "3ZJA", "9MLG", "C7FG", "1ZWL", "81J5", "34LZ", "W73I", "SZG1"],
            ["130Q", "886C", "75ZC", "8IK5", "2C91", "P84G", "7055", "30C2", "FR8H", "8A9S"],
            ["54JH", "0168", "128J", "11JZ", "22HW", "16UD", "2143", "43CU", "7N47", "7S74"],
            ["3G15", "0Z4Z", "6K8I", "Y50L", "961B", "1576", "0L60", "IZ47", "9K77", "049I"],
            ["51P0", "37V1", "HR71", "5J46", "V1VP", "5340", "1ZHJ", "1KRZ", "VF8H", "241X"],
            ["7QU3", "73ND", "4998", "74FU", "E308", "8V94", "6UMZ", "YBZ6", "2Y99", "103Q"],
            ["0K4U", "8EN8", "89N2", "0TZ5", "6648", "923B", "8613", "8F28", "1KV4", "1OD3"],
            ["6ZG0", "0978", "41C5", "8065", "1D21", "23JJ", "57N2", "130U", "30ZB", "P57Y"],
            ["II6C", "9139", "51YS", "F65N", "0346", "9SC5", "25BI", "I38I", "632R", "8NWB"],
            ["924U", "22S8", "44HK", "608D", "7353", "24J3", "CW49", "15QF", "JV7M", "2B7G"],
            ["9988", "UJ98", "44B7", "ZK58", "0C7A", "8Y69", "9MPW", "500G", "634Y", "DY5O"],
            ["B2J7", "55WZ", "GD9L", "7PT6", "H89I", "7J15", "3516", "YBL4", "664P", "9D50"],
            ["L149", "629Q", "0ZQD", "8SV1", "N14K", "243X", "956O", "12O0", "7MZN", "1054"],
        ];
        const lastColumn = [
            "I",
            "S",
            "M",
            "3 + K",
            "F + 5",
            "K",
            "T",
            "7 + E",
            "E",
            "S",
            "T",
            "M",
            "B",
            "M + 2",
            "E",
            "R",
            "T + R",
            "B + 2",
            "4 + M",
            "F",
            "K",
            "8 - S",
            "K - F",
            "B",
            "S",
            "F",
            "T",
            "F + 7",
            "2 + B",
            "B - T",
        ];
        document.addEventListener("DOMContentLoaded", () => {
            const table = document.getElementById("error-codes");
            for (let i = 0; i < data.length; i++) {
                const row = data[i];
                const tr = table.appendChild(document.createElement("tr"));
                for (const error of row) {
                    const td = tr.appendChild(document.createElement("td"));
                    td.innerText = error;
                }
                const lastTd = tr.appendChild(document.createElement("td"));
                lastTd.innerText = lastColumn[i];
            }
        });
    </script>
    <style>
        code {
            background-color: black;
            font-family: 'Consolas';
            padding: 2px 8px;
            color: lightgreen;
            font-weight: bold;
        }

        li {
            margin-top: 4px;
            margin-bottom: 4px;
        }

        .mono {
            font-family: 'Consolas';
        }
    </style>
</head>

<body>
    <div class="section">
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">
                    Keep Talking and Nobody Explodes Mod
                </span>
                <span class="page-header-section-title">Sysadmin</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Sysadmin.svg" class="diagram" />
                <h2>On the Subject of Sysadmin</h2>
                <p class="flavour-text">sudo rm -rf /*</p>

                <p>The module is a console. When it is waiting for command input you will see green <code>&nbsp;> _</code> symbols.</p>

                <p>This console is connected to a bus topology network. The network contains 100 nodes. Each node is numbered from 0 to 99 without repetitions. All nodes are sorted by their id. Up to ten of these nodes are servers, the rest are data storages. Each storage is 1 TB in size. There is a virus on the network that damages the nodes. You can fix it, but you need to do it as soon as possible - the longer you are idle, the more nodes will be damaged.</p>

                <p>If the node is damaged, then find the error code in the table on page #3. Then calculate the value in the last column on the same row (using the table on the current page). If this value is greater than 9 or less than 0, then subtract or add 10 until the number is in the range [0-9]. In the same column as the error code, find all codes that contains the calculated value. The recovering code is equal to the first characters of the found codes, starting from the next one after the error code and further down. This action is looped vertically, so after going through the last row, go back to the first.</p>

                <p>Information on how to solve the module and in what cases the strikes will be received can be found on page #2. Page #2 contains a list and description of the commands available for entering into the console.</p>

                <p>All commands (including codes) are case insensitive.</p>

                <table style="margin: auto;">
                    <tr>
                        <td class="mono">T</td>
                        <td>Starting time in minutes</td>
                    </tr>
                    <tr>
                        <td class="mono">F</td>
                        <td>Recovered nodes count</td>
                    </tr>
                    <tr>
                        <td class="mono">B</td>
                        <td>Batteries count</td>
                    </tr>
                    <tr>
                        <td class="mono">I</td>
                        <td>Indicators count</td>
                    </tr>
                    <tr>
                        <td class="mono">K</td>
                        <td>Max least significant digit of two factor codes.<br>
                            If there are no two factor codes, use solved modules count</td>
                    </tr>
                    <tr>
                        <td class="mono">R</td>
                        <td>Remaining minutes count</td>
                    </tr>
                    <tr>
                        <td class="mono">M</td>
                        <td>Modules count</td>
                    </tr>
                    <tr>
                        <td class="mono">S</td>
                        <td>Min digit in serial number</td>
                    </tr>
                    <tr>
                        <td class="mono">E</td>
                        <td>Strikes count</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 3</div>
        </div>
        <div class="page page-bg-07">
            <div class="page-header">
                <span class="page-header-doc-title">
                    Keep Talking and Nobody Explodes Mod
                </span>
                <span class="page-header-section-title">Sysadmin</span>
            </div>
            <div class="page-content">

                <h2>Commands:</h2>
                <ul>
                    <li><code>serverlist</code> - Displays information about all servers. For each server, information about the id of the node and the required storage size for work will be provided. If storage nodes have already been allocated to this server, then the range of allocated nodes will also be displayed.</li>
                    <li><code>status</code> - Displays general information about the current state of the network. Here you can see the number of servers to which the storage nodes have been allocated; the required number of allocation that need to be made for the module to be solved; number of damaged and recovered nodes.</li>
                    <li><code>allocate {NODE_ID} {DIRECTION}</code> - Allocates the required number of nodes in the specified DIRECTION to the server with the specified NODE_ID. Direction must be one of the following: <code>left</code>, <code>down</code> (decreasing id), <code>right</code> or <code>up</code> (increasing id). In order for the command to work correctly, the following conditions must be met:
                        <ul>
                            <li>The selected node must be a server;</li>
                            <li>* The allocation nodes must be data storages (not servers);</li>
                            <li>There should be no attempts to allocate nodes with id less than 0 or greater than 99;</li>
                            <li>The server node, as well as the allocation nodes, should not be damaged;</li>
                            <li>* The allocation nodes should not be allocated to another server.</li>
                        </ul>
                        If the conditions marked with an asterisk are not met, all allocations will be reverted and the strike will be counted.</li>
                    <li><code>debug {NODE_ID}</code> - Checks the status of a node by its NODE_ID. If it is damaged, then an error code will be displayed in the result.</li>
                    <li><code>recover {NODE_ID} {FIX_CODE}</code> - Attempts to recover data on a node by its NODE_ID using FIX_CODE. If FIX_CODE is correct, then the node will be recovered. If FIX_CODE is incorrect or this node is not damaged, then all allocations will be reverted and a strike will be counted.</li>
                    <li><code>commit</code> - Applies all changes. If the required number of allocations is reached, the module will be solved, otherwise all allocations will be reverted and a strike will be counted.</li>
                    <li><code>revert</code> - Reverts all allocations and gives a strike.</li>
                    <li><code>clear</code> - Clears the console</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 2 of 3</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">
                    Keep Talking and Nobody Explodes Mod
                </span>
                <span class="page-header-section-title">Sysadmin</span>
            </div>
            <div class="page-content">
                <table style="margin: auto;" class="mono">
                    <tbody id="error-codes" style="text-align: center;"></tbody>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 3 of 3</div>
        </div>
    </div>
</body>

</html>
