<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <title>Lion’s Share — Keep Talking and Nobody Explodes Module</title>
    <meta name="viewport" content="initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        p {
            margin: .5em;
        }

        .footnote {
            float: right;
            width: 4.7cm;
            position: relative;
        }
            .footnote .asterisk {
                position: absolute;
                top: 0;
                right: 102%;
                vertical-align: super;
                font-size: 75%;
            }

        .ruleseed-active .rule {
            font-weight: bold;
            text-decoration: underline;
        }
    </style>
    <script>
        var maleNames = ["Abasi","Abdu","Adhama","Amani","Anasa","Ashon","Atieno","Ayo","Azima","Azizi","Badru","Baraka","Barasa","Bayana","Beno","Busar","Busara","Bwana","Chane","Daudi","Duma","Elea","Eli","Fanaka","Faraji","Hali","Hamadi","Hamidi","Hamisi","Hodari","Ikeno","Jafari","Jamba","Jata","Jela","Juma","Jumaane","Kamari","Kiama","Kifeda","Kiira","Kito","Kitwana","Kobe","Koman","Kuende","Maulidi","Mbita","Mhina","Mosi","Moyo","Mpenda","Mshindi","Msia","Murati","Musa","Mwinyi","Mzuzi","Neema","Njogwa","Nyo","Rajabu","Safiri","Salehe","Salene","Sefu","Shani","Shomari","Tabia","Taji","Tambo","Tamu","Tian","Umoja","Usian","Yahya","Zahur","Zakia","Zawadi","Abelo","Amahle","Amehlo","Andile","Anele","Anelisa","Avela","Ayanda","Ayize","Azisa","Bafana","Bandile","Bheka","Bhekifa","Bongani","Busiso","Cakaza","Cashile","Cebo","Cela","Chacha","Chaka","Chakide","Chipo","Chotho","Chweba","Ciko","Cilonga","Cothoza","Cwatha","Dabu","Dabuka","Daza","Delani","Dida","Dinfa","Dingane","Dingani","Donya","Dube","Duma","Dumisa","Dumo","Duna","Dundu","Eethaba","Elethu","Falakhe","Fanyana","Fikile","Fobela","Fokazi","Fowabo","Fowenu","Fudu","Fundani","Fundisa","Fuza","Fuzo","Gabadi","Gangi","Gania","Ganya","Gatsha","Gazi","Gazini","Gebhuza","Geza","Gibeli","Gijimi","Goduka","Guduza","Gugu","Gwala","Gwazi","Gwedi","Gwili","Hlelile","Ibubesi","Ifu","Igama","Ikhanda","Impela","Impi","Impisi","Indlovu","Induna","Ingane","Ingwe","Inyoni","Iqaqa","Iqhunde","Izagala","Izula","Jabu","Jama","Kgabu","Khwezi","Khulani","Kubu","Kufika","Kwanele","Kwazulu","Lethu","Lindani","Lindela","Lindile","Litha","Lizwi","Lunga","Lungelo","Lungile","Luvo","Luyanda","Lwazi","Makhaya","Malusi","Manqoba","Mapoza","Mbube","Mcebo","Mduduzi","Menzi","Mfundo","Mhambi","Mmeli","Mndeni","Mnotho","Mnqobi","Mondli","Mpilo","Mpucuko","Msizi","Mthunzi","Musa","Mvelo","Mzamo","Ndonsa","Nduduzo","Ndumiso","Nhlahla","Nikhil","Njabulo","Nkosi","Nqobani","Nsizwa","Owethu","Phakama","Phila","Philani","Qhude","Qiniso","Sakhile","Sandile","Sanele","Sbu","Sduduzo","Senzo","Sfiso","Sibonele","Sifiso","Sihle","Siphiwe","Sipho","Siyanda","Siza","Sizani","Sizwe","Tandie","Thabo","Thando","Thatha","Themba","Thulani","Ubaba","Ukuza","Ulwazi","Umzuzu","Unathi","Uyise","Vala","Velaphi","Vukani","Vusi","Vuyo","Wandile","Wenzile","Xhegu","Xhibeni","Xolani","Zamani","Zenzele","Zonke"];

        var femaleNames = ["Adhama","Adia","Afiya","Aishia","Akina","Aleela","Aluna","Amana","Amanika","Andaiye","Angalia","Arusi","Ashura","Asya","Atiena","Ayah","Ayubu","Bahati","Bakari","Baraka","Barika","Bavana","Budhya","Busara","Chagina","Chanua","Chiku","Chinira","Dafina","Dalia","Dalila","Dinka","Elea","Elewa","Endana","Endelea","Fanaka","Faraji","Fikira","Gethera","Goma","Halima","Halina","Halisi","Hasana","Hasina","Hawa","Heshima","Himaya","Hodari","Imani","Imara","Inira","Inithia","Itanya","Jaha","Jahaira","Jamaa","Jamani","Jamba","Jehlani","Jiona","Julisha","Kakena","Kalere","Kaluwa","Kamara","Kamaria","Kanene","Kanika","Kanisa","Karama","Kenura","Kesi","Khadija","Kiama","Kiania","Kibibi","Kichea","Kiira","Kilinda","Kinaya","Kinjia","Kito","Koffi","Kudio","Kuende","Kwashi","Lindana","Lindia","Lisha","Madini","Mahiri","Majda","Maji","Majida","Malika","Maliza","Marini","Mashika","Masika","Maulidi","Milima","Mkiwa","Msia","Mwamini","Mwasaa","Mwatabu","Nadira","Najuma","Nbushe","Neema","Nigesa","Nurisha","Nyota","Onyesha","Otesha","Oyana","Panya","Penda","Radhiya","Rasheda","Rashida","Rasida","Raziya","Rehema","Risala","Rukiya","Saada","Safika","Safiri","Salama","Sanura","Sauda","Shani","Shauri","Siti","Subira","Taabu","Tabara","Taji","Tamu","Tia","Tisa","Tuliza","Ujamaa","Ujana","Umija","Usia","Waseme","Winda","Zahra","Zaida","Zakiya","Zawadi","Zawati","Zuri","Zuwena","Amahle","Amehlo","Andile","Anele","Anelisa","Aphiwe","Ayanda","Ayize","Bheka","Bongani","Bongile","Bongiwe","Buhle","Cabanga","Cebile","Dade","Dansa","Davathi","Deliwe","Dida","Didiza","Dumile","Ejaj","Ekuseni","Elethu","Enama","Enanela","Esasa","Ethuka","Ethulo","Ethwasa","Fahlasi","Fakazi","Fikile","Fudu","Fula","Funani","Futhi","Gagasi","Gatsha","Gede","Gonothi","Gqamile","Gugu","Icici","Ifu","Impela","Impisi","Indlovu","Ingani","Ingwe","Inyoni","Ishumi","Izula","Jabhile","Jezile","Kgabu","Khanya","Khaya","Kholiwe","Khule","Khwezi","Kwanele","Lethiwe","Lethu","Lindiwe","Londiwe","Lungelo","Lungile","Luvo","Lwandle","Mbali","Mhambi","Minehle","Mlilo","Mondli","Msizi","Mthunzi","Naledi","Nandi","Ndonsa","Ndumiso","Njabulo","Njabulu","Nobantu","Nobuhle","Nobuntu","Nokwazi","Nolwazi","Nomcebo","Nompilo","Nomsa","Nomusa","Nomvula","Nomzamo","Nonhle","Nosipho","Noxolo","Nozipho","Nozizwe","Nqobile","Ntokozo","Ntombi","Ogogo","Philile","Qhikiza","Qiniso","Ramla","Sakhile","Sandile","Sibahle","Sifiso","Sihle","Siphiwe","Sipho","Siyanda","Siza","Sizani","Sizwe","Sonto","Thabile","Thabisa","Thandie","Thando","Themba","Thembi","Thoko","Thulani","Thulile","Uju","Ukudala","Ukuza","Umakoti","Umzuzu","Unathi","Unina","Usizo","Vala","Velile","Vemvane","Vumela","Vumile","Vuyiswa","Welile","Winile","Xolani","Xolile","Zamani","Zamile","Zandile","Zanele","Zibu","Zinhle","Zodwa","Zola","Zongile","Zonke","Zula"];

        function filterIndexes(list, predicate)
        {
            var result = [];
            for (var i = 0; i < list.length; i++)
                if (predicate(list[i]))
                    result.push(i);
            return result;
        }

        function indexOfPredicate(list, predicate)
        {
            for (var i = 0; i < list.length; i++)
                if (predicate(list[i]))
                    return i;
            return -1;
        }

        function lastIndexOfPredicate(list, predicate)
        {
            for (var i = list.length-1; i >= 0; i--)
                if (predicate(list[i]))
                    return i;
            return -1;
        }

        var LionStatus = {
            Null:     0,
            Unborn:   1,
            Cub:      2,
            Adult:    3,
            Absent:   4,
            King:     5,
            Dead:     6,
            Visiting: 7
        };

        var defaultRules = null;

        function getDefaultRules()
        {
            if (defaultRules !== null)
                return;
            defaultRules = { rules: {}, ruleText: {}, rulePath: {} };
            Array.from(document.getElementsByClassName('rule')).forEach(elem => { defaultRules.rules[elem.getAttribute('id')] = elem.innerText; });
            Array.from(document.getElementsByClassName('rule-text')).forEach(elem => { defaultRules.ruleText[elem.getAttribute('id')] = { text: elem.textContent, fontStyle: elem.getAttribute('font-style') }; });
            Array.from(document.getElementsByClassName('rule-path')).forEach(elem => { defaultRules.rulePath[elem.getAttribute('id')] = elem.getAttribute('d'); });
        }

        function setDefaultRules()
        {
            getDefaultRules();
            Array.from(document.getElementsByClassName('rule')).forEach(elem => { elem.innerText = defaultRules.rules[elem.getAttribute('id')]; });
            Array.from(document.getElementsByClassName('rule-text')).forEach(elem => { elem.textContent = defaultRules.ruleText[elem.getAttribute('id')].text; elem.setAttribute('font-style', defaultRules.ruleText[elem.getAttribute('id')].fontStyle); });
            Array.from(document.getElementsByClassName('rule-path')).forEach(elem => { elem.setAttribute('d', defaultRules.rulePath[elem.getAttribute('id')]); });
        }

        function setRules(rnd)
        {
            getDefaultRules();

            function logPride()
            {
                console.log(pride.map(lion => `${lion.name} (${lion.sex}) = ${lion.status.join('')} (${lion.birthyear}/${lion.mother})`));
            }

            var pride, visiting;
            while (true)
            {
                // Pick 35 lion names
                var allNames = rnd.shuffleFisherYates(maleNames.slice(0).concat(femaleNames.slice(0)));
                var candidate = 0;
                var lions = [];
                while (lions.length < 35)
                {
                    var name = allNames[candidate];
                    candidate++;
                    if (lions.indexOf(name) === -1)
                        lions.push(name);
                }

                // Decide which lions are in the pride and which ones are visiting
                pride = [];
                visiting = [];
                for (var i = 0; i < lions.length; i++)
                    (i < 18 ? pride : visiting).push({ name: lions[i], sex: maleNames.indexOf(lions[i]) === -1 ? 'f' : femaleNames.indexOf(lions[i]) === -1 ? 'm' : 'mf'.substr(rnd.next(0, 2), 1) });

                // Decide on a random birthyear and lifespan for each lion (lifespan includes “unborn” phase)
                for (var i = 0; i < pride.length; i++)
                {
                    var lifespan = rnd.next(2, 15);
                    var cubhood = [1, 2, 2, 2, 2, 2, 3][rnd.next(0, 6)];
                    pride[i].birthyear = rnd.next(Math.max(-5, 2-lifespan), 17);
                    pride[i].status = new Array(16);
                    for (var year = 1; year <= 16; year++)
                        pride[i].status[year-1] =
                            year < pride[i].birthyear ? LionStatus.Null :
                            year === pride[i].birthyear ? LionStatus.Unborn :
                            year < pride[i].birthyear + cubhood + 1 ? LionStatus.Cub :
                            year < pride[i].birthyear + lifespan ? (rnd.next(0, 8) === 0 ? LionStatus.Absent : LionStatus.Adult) :
                            LionStatus.Dead;
                }

                // Make sure there’s an adult male and an adult female in every year so we can always have a king and a lead huntress
                var valid = true;
                var currentKing = null;
                for (var year = 0; (year < 16) && valid; year++)
                {
                    var potentialKings = filterIndexes(pride, lion => lion.sex === 'm' && lion.status[year] === LionStatus.Adult);
                    var potentialMothers = filterIndexes(pride, lion => lion.sex === 'f' && lion.status[year] === LionStatus.Adult);
                    if (potentialKings.length === 0 || potentialMothers.length === 0)
                        valid = false;
                    else
                    {
                        // Assign a king
                        if (currentKing === null || potentialKings.indexOf(currentKing) === -1)
                            currentKing = potentialKings[rnd.next(0, potentialKings.length)];
                        pride[currentKing].status[year] = LionStatus.King;

                        // Give greater weight to younger mothers
                        potentialMothers.sort((a, b) => {
                            var val = pride[b].birthyear - pride[a].birthyear;
                            if (val !== 0)
                                return val;
                            return pride[a].name < pride[b].name ? -1 : 1;
                        });
                        var chooseFrom = [];
                        for (var i = 0; i < potentialMothers.length; i++)
                            for (var j = 0; j <= i; j++)
                                chooseFrom.push(potentialMothers[j]);

                        // Give every unborn cub a mother
                        for (var i = 0; i < pride.length; i++)
                            if (pride[i].status[year] === LionStatus.Unborn)
                                pride[i].mother = pride[chooseFrom[rnd.next(0, chooseFrom.length)]].name;
                    }
                }
                if (!valid)
                    continue;

                // Sort by birthyear and then make sure that the lifespans won’t overlap on the chart
                valid = true;
                pride.sort((a, b) => {
                    var val = a.birthyear - b.birthyear;
                    if (val !== 0)
                        return val;
                    return a.name < b.name ? -1 : 1;
                });
                for (var i = 0; (i < 6) && valid; i++)
                    if (pride[i + 12].status [ pride[i].status.indexOf(LionStatus.Dead) ] !== LionStatus.Null)
                        valid = false;
                if (!valid)
                    continue;

                break;
            }

            // Lion names
            for (var i = 0; i < 18; i++)
            {
                document.getElementById(`lion-${i}`).textContent = pride[i].name;
                document.getElementById(`lion-${i}`).setAttribute('font-style', pride[i].sex === 'm' ? 'italic': 'normal');
            }

            // Colored bars showing the lions’ ages (includes the boxes in the legend)
            var bars = { unborn: 'M30,140h10v10h-10z', cub: 'M72.37,140h10v10h-10z', adult: 'M105,140h10v10h-10z', absent: 'M175.82,140h10v10h-10z', king: 'M141.8,140h10v10h-10z' };
            for (var i = 0; i < 18; i++)
            {
                pride[i].y = 15 + 10*(i < 6 ? 5-i : 17-i);
                var year = indexOfPredicate(pride[i].status, status => status !== LionStatus.Null);
                while (year < 16)
                {
                    var status = pride[i].status[year];
                    var origYear = year;
                    while (year < 16 && pride[i].status[year] === status)
                        year++;
                    var length = year - origYear;
                    var bar = [null, 'unborn', 'cub', 'adult', 'absent', 'king', null, null][status];
                    if (bar !== null)
                        bars[bar] += `M${35 + 10*origYear},${pride[i].y}h${10*length}v10h${-10*length}z`;
                }
            }
            for (var key in bars)
                document.getElementById(`bar-${key}`).setAttribute('d', bars[key]);

            // Dividing lines
            var lines = '';
            for (var y = 0; y < 13; y++)
            {
                var rightLionIxs = y == 0 ? [17] : y === 12 ? [6] : [17-y, 18-y];
                var rx1 = 35 + 10*Math.min(...rightLionIxs.map(ix => indexOfPredicate(pride[ix].status, s => s !== LionStatus.Null)));
                var rx2 = 225;
                var my = 15 + 10*y;

                if (y < 7)
                {
                    var leftLionIxs = y == 0 ? [5] : y === 6 ? [0] : [6-y, 5-y];
                    var lx1 = 5;
                    var lx2 = 35 + 10*Math.max(...leftLionIxs.map(ix => lastIndexOfPredicate(pride[ix].status, s => s !== LionStatus.Dead) + 1));

                    if (lx2 >= rx1 || y === 0)
                    {
                        lines += `M${lx1},${my}H${rx2}`;
                        continue;
                    }
                    else
                        lines += `M${lx1},${my}H${lx2}`;
                }
                lines += `M${rx1},${my}H${rx2}`;
            }
            document.getElementById('dividers').setAttribute('d', lines);

            // Lines showing unborn cubs’ mothers
            lines = 'M5 110v15';
            for (var year = 0; year < 16; year++)
            {
                var unbornCubs = pride.filter(lion => lion.status[year] === LionStatus.Unborn);
                var w = 10 / (unbornCubs.length + 1);
                for (var i = 0; i < unbornCubs.length; i++)
                    lines += `M${35 + 10*year + w*(i+1)},${unbornCubs[i].y + 5}V${pride[indexOfPredicate(pride, lion => lion.name === unbornCubs[i].mother)].y + 5}`;
            }
            document.getElementById('mothers').setAttribute('d', lines);

            // Visiting lions
            for (var i = 0; i < 17; i++)
            {
                document.getElementById(`visiting-${i}`).textContent = visiting[i].name;
                document.getElementById(`visiting-${i}`).setAttribute('font-style', visiting[i].sex === 'm' ? 'italic': 'normal');
            }

            var kingPortion = rnd.next(10, 20);                 // 10–19
            var adultSibling = kingPortion - rnd.next(1, 4);    // 7–18
            var adult = adultSibling - rnd.next(1, 3);          // 5–17
            var cubSibling = adult - rnd.next(1, 4);            // 2–16
            var cub = Math.max(1, cubSibling - rnd.next(1, 4)); // 1–15
            function unit(n) { return n === 1 ? '1 unit' : `${n} units`; }

            document.getElementById('entitlement-king').innerText = unit(kingPortion);
            document.getElementById('entitlement-adult-sibling').innerText = unit(adultSibling);
            document.getElementById('entitlement-adult').innerText = unit(adult);
            document.getElementById('entitlement-cub-sibling').innerText = unit(cubSibling);
            document.getElementById('entitlement-cub').innerText = unit(cub);
            document.getElementById('indicator').innerText = ['each', 'each lit', 'each unlit'][rnd.next(0, 3)];

            var indKing = rnd.next(3, 6);               // 3–5
            var indSibling = indKing - rnd.next(1, 3);  // 1–4
            var indMale = rnd.next(1, 3);
            var indFemale = 3 - indMale;
            var sn = rnd.next(1, 3);

            document.getElementById('entitlement-ind-king').innerText = unit(indKing);
            document.getElementById('entitlement-ind-sibling').innerText = unit(indSibling);
            document.getElementById('entitlement-ind-male').innerText = unit(indMale);
            document.getElementById('entitlement-ind-female').innerText = unit(indFemale);
            document.getElementById('entitlement-sn').innerText = unit(sn);

            document.getElementById('lead-huntress-color').innerText = ['red', 'brown', 'yellow', 'green', 'turquoise', 'dark blue', 'purple', 'pink'][rnd.next(0, 8)];
        }
    </script>
</head>
<body>
    <div id="ManualContent">
        <div class="section">
            <div class="page page-bg-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Lion’s Share</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/Lion’s Share.svg" class="diagram">
                    <h2>On the Subject of the Lion’s Share</h2>
                    <p class="flavour-text">Or: the shallow end of the gene pool.</p>
                    <p>The hunting party has returned from a successful hunt. Apportion the prey according to each lion’s entitlement.</p>
                    <p>The number on the module is the current year. The following timeline chart shows the age of each lion in the pride:</p>
                    <svg viewBox="0 0 275 155" font-family="Agency FB" font-weight="700" style='display: block; width: 16.5cm; margin: 0 auto;'>
                        <defs>
                            <pattern id="ptnCub" patternTransform="rotate(45)" height="1" width="2" patternUnits="userSpaceOnUse">
                                <rect x="0" y="0" width="1" height="2" fill='#aaa' stroke='none'/>
                            </pattern>
                            <pattern id="ptnAdult" patternTransform="rotate(-45)" height="1" width="2" patternUnits="userSpaceOnUse">
                                <rect x="0" y="0" width="1" height="2" fill='#aaa' stroke='none'/>
                            </pattern>
                            <pattern id="ptnUnborn" patternTransform="rotate(90)" height="1" width="2" patternUnits="userSpaceOnUse">
                                <rect x="0" y="0" width="1" height="2" fill='#666' stroke='none'/>
                            </pattern>
                            <pattern id="ptnKing" height="1" width="2" patternUnits="userSpaceOnUse">
                                <rect x="0" y="0" width="1" height="2" fill='#888' stroke='none'/>
                            </pattern>
                        </defs>
                        <g font-size="8">
                            <text class='rule-text' id="lion-17" font-style="italic" x="200" y="23">Kion</text>
                            <text class='rule-text' id="lion-16" x="200" y="33">Kiara</text>
                            <text class='rule-text' id="lion-15" font-style="italic" x="200" y="43">Kopa</text>
                            <text class='rule-text' id="lion-14" font-style="italic" x="200" y="53">Kovu</text>
                            <text class='rule-text' id="lion-13" x="200" y="63">Vitani</text>
                            <text class='rule-text' id="lion-12" font-style="italic" x="200" y="73">Nuka</text>
                            <text class='rule-text' id="lion-11" font-style="italic" x="200" y="83">Mheetu</text>
                            <text class='rule-text' id="lion-10" x="200" y="93">Zira</text>
                            <text class='rule-text' id="lion-9" x="200" y="103">Nala</text>
                            <text class='rule-text' id="lion-8" font-style="italic" x="200" y="113">Simba</text>
                            <text class='rule-text' id="lion-7" x="200" y="123">Sarabi</text>
                            <text class='rule-text' id="lion-6" x="200" y="133">Sarafina</text>
                            <g text-anchor="end">
                                <text class='rule-text' id="lion-5" font-style="italic" x="30" y="23">Taka</text>
                                <text class='rule-text' id="lion-4" font-style="italic" x="30" y="33">Mufasa</text>
                                <text class='rule-text' id="lion-3" x="30" y="43">Uru</text>
                                <text class='rule-text' id="lion-2" font-style="italic" x="30" y="53">Ahadi</text>
                                <text class='rule-text' id="lion-1" x="30" y="63">Zama</text>
                                <text class='rule-text' id="lion-0" font-style="italic" x="30" y="73">Mohatu</text>
                            </g>
                        </g>
                        <g font-weight="400" font-size="8">
                            <text x="155.8" y="148">King</text>
                            <text x="119.3" y="148">Adult</text>
                            <text x="86.3" y="148">Cub</text>
                            <text x="44" y="148">Unborn</text>
                            <text x="190" y="148">Absent</text>
                        </g>
                        <g text-anchor="middle" font-size="7">
                            <text x="40" y="10">1</text>
                            <text x="50" y="10">2</text>
                            <text x="60" y="10">3</text>
                            <text x="70" y="10">4</text>
                            <text x="80" y="10">5</text>
                            <text x="90" y="10">6</text>
                            <text x="100" y="10">7</text>
                            <text x="110" y="10">8</text>
                            <text x="120" y="10">9</text>
                            <text x="130" y="10">10</text>
                            <text x="140" y="10">11</text>
                            <text x="150" y="10">12</text>
                            <text x="160" y="10">13</text>
                            <text x="170" y="10">14</text>
                            <text x="180" y="10">15</text>
                            <text x="190" y="10">16</text>
                        </g>
                        <g font-size="6">
                            <text x="5" y="90">female</text>
                            <text x="5" y="100" font-style="italic">male</text>
                            <text fill-opacity=".6">
                                <tspan x="10" y="114">shows</tspan>
                                <tspan x="10" y="119.1">cub’s</tspan>
                                <tspan x="10" y="124.2">mother</tspan>
                            </text>
                        </g>
                        <text x="240" y="10" text-anchor="start" font-size="7">Visiting lions:</text>
                        <g font-size="7">
                            <text class='rule-text' id='visiting-0' font-style="italic" x="240" y="25">Askari</text>
                            <text class='rule-text' id='visiting-1' font-style="italic" x="240" y="32.4">Chumvi</text>
                            <text class='rule-text' id='visiting-2' font-style="italic" x="240" y="39.8">Malka</text>
                            <text class='rule-text' id='visiting-3' font-style="italic" x="240" y="47.2">Tojo</text>
                            <text class='rule-text' id='visiting-4' x="240" y="54.6">Babu</text>
                            <text class='rule-text' id='visiting-5' x="240" y="62">Boga</text>
                            <text class='rule-text' id='visiting-6' x="240" y="69.4">Diku</text>
                            <text class='rule-text' id='visiting-7' x="240" y="76.8">Kula</text>
                            <text class='rule-text' id='visiting-8' x="240" y="84.2">Naanda</text>
                            <text class='rule-text' id='visiting-9' x="240" y="91.6">Ndona</text>
                            <text class='rule-text' id='visiting-10' x="240" y="99">Rani</text>
                            <text class='rule-text' id='visiting-11' x="240" y="106.4">Sabini</text>
                            <text class='rule-text' id='visiting-12' x="240" y="113.8">Sheena</text>
                            <text class='rule-text' id='visiting-13' x="240" y="121.2">Tama</text>
                            <text class='rule-text' id='visiting-14' x="240" y="128.6">Tiifu</text>
                            <text class='rule-text' id='visiting-15' x="240" y="136">Weena</text>
                            <text class='rule-text' id='visiting-16' x="240" y="143.4">Zuri</text>
                        </g>

                        <path class='rule-path' id='bar-unborn' fill='url(#ptnUnborn)' stroke='black' stroke-width='.3' d="M115 65h10v10h-10zm10-10h10v10h-10zM35 25h10v10H35zm10-10h10v10H45zM30 140h10v10H30zm35-35h10v10H65zm10-10h10v10H75zm10-10h10v10H85zm0-10h10v10H85zm50-30h10v10h-10zm10-10h10v10h-10zm0-10h10v10h-10zm10-10h10v10h-10z"/>
                        <path class='rule-path' id='bar-cub' fill='url(#ptnCub)' stroke='black' stroke-width='.3' d="M35 115h20v10H35zm0 10h20v10H35zm37.4 15h10v10h-10zM45 25h20v10H45zm10-10h20v10H55zm20 90h10v10H75zm10-10h20v10H85zm10-10h20v10H95zm0-10h20v10H95zm30-10h20v10h-20zm10-10h20v10h-20zm10-10h20v10h-20zm10-10h10v10h-10zm0-10h20v10h-20zm10-10h20v10h-20z"/>
                        <path class='rule-path' id='bar-adult' fill='url(#ptnAdult)' stroke='black' stroke-width='.3' d="M115 75h30v10h-30zM35 55h40v10H35zm70.1 85h10v10h-10zM35 45h20v10H35zm0-10h60v10H35zm40-20h10v10H75zM55 125h100v10H55zm0-10h120v10H55zm50-20h30v10h-30zm10-10h50v10h-50zm60-10h20v10h-20zm-30-10h20v10h-20zm10-10h40v10h-40zm10-10h30v10h-30zm-20 50h50v10h-50zm30-70h20v10h-20z"/>
                        <path class='rule-path' id='bar-absent' fill='#eee' stroke='black' stroke-width='.3' d="M145 75h30v10h-30zm-60 30h60v10H85zm90.8 35h10v10h-10zM135 95h10v10h-10z"/>
                        <path class='rule-path' id='bar-king' fill='url(#ptnKing)' stroke='black' stroke-width='.3' d="M35 65h20v10H35zm106.8 75h10v10h-10zM55 45h10v10H55zM65 25h20v10H65zm20-10h60v10H85zm60 90h40v10h-40zM185 15h10v10h-10z"/>

                        <!-- dividing lines -->
                        <path class='rule-path' id='dividers' fill="none" stroke="#444" stroke-width=".3" d="M225 25H5m90 10H5m90 10H5m70 10H5m70 10H5m50 10H5m220 10H85m140 10H75m150 10H65m160 20H35m190 10H35M225 15H5m220 20h-80m80 10h-90m90 10H125m100 10H115m110 10H85m140 40H35"/>

                        <!-- lines showing cubs’ mothers -->
                        <path class='rule-path' id='mothers' fill="none" stroke="black" stroke-opacity=".4" stroke-width=".7" d="M5 110v15M40 30v10m10-20v20m20 70v10m10-20v30m10-40v40m0-50c10 10 10 10 10 40m20-50v20m10-30v30m10-40v40m10-50v60m0-70c10 10 10 10 10 70m0-80c10 10 10 10 10 80"/>

                        <!-- highlightables -->
                        <path class='highlightable' d='M5 15h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M5 25h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M5 35h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M5 45h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M5 55h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M5 65h30v10h-30z' fill='transparent' />

                        <path class='highlightable' d='M195 15h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 25h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 35h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 45h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 55h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 65h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 75h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 85h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 95h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 105h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 115h30v10h-30z' fill='transparent' />
                        <path class='highlightable' d='M195 125h30v10h-30z' fill='transparent' />

                        <path class='highlightable' d='M236 18.5h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 25.9h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 33.3h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 40.7h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 48.1h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 55.5h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 62.9h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 70.3h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 77.7h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 85.1h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 92.5h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 99.9h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 107.3h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 114.7h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 122.1h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 129.5h30v7.5h-30z' fill='transparent' />
                        <path class='highlightable' d='M236 136.9h30v7.5h-30z' fill='transparent' />

                        <path class='highlightable' d='M35 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M45 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M55 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M65 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M75 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M85 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M95 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M105 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M115 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M125 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M135 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M145 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M155 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M165 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M175 2.5h10v135h-10z' fill='transparent' />
                        <path class='highlightable' d='M185 2.5h10v135h-10z' fill='transparent' />
                    </svg>

                    <p>Each lion’s entitlement to prey is assigned and modified as follows:</p>
                    <div class='footnote'><span class='asterisk'>*</span>Siblings are lions with the same mother. Fathership is ignored.</div>
                    <ul>
                        <li>The King, if present, has <span class='rule' id='entitlement-king'>10 units</span> of entitlement.</li>
                        <li>Any adult siblings<sup>*</sup> of the King have <span class='rule' id='entitlement-adult-sibling'>7 units</span>.</li>
                        <li>Other adults have <span class='rule' id='entitlement-adult'>5 units</span>.</li>
                        <li>Any cub siblings of the King have <span class='rule' id='entitlement-cub-sibling'>4 units</span>.</li>
                        <li>Other cubs have <span class='rule' id='entitlement-cub'>3 units</span>.</li>
                        <li>Visiting lions who do not belong to the pride have only 1 unit.</li>
                        <li>For <em class='rule' id='indicator'>each lit</em> indicator on the bomb that contains the lion’s name’s first letter, add <span class='rule' id='entitlement-ind-king'>4 units</span> for the King, <span class='rule' id='entitlement-ind-sibling'>3 units</span> for the King's adult siblings<sup>*</sup>, <span class='rule' id='entitlement-ind-male'>2 units</span> for any other males and <span class='rule' id='entitlement-ind-female'>1 unit</span> for any other females.</li>
                        <li>For each serial# letter a lion’s name contains one or more of, add <span class='rule' id='entitlement-sn'>1 unit</span>.</li>
                        <li>Each unborn cub, if present, adds 1 unit to their mother’s entitlement, but has no entitlement of their own.</li>
                        <li>Lions who are dead or absent have no entitlement.</li>
                    </ul>
                    <p>Apportion the prey in such a way that each lion receives a percentage of prey according to their share of everyone’s entitlement, rounded down. Allocate any left-over prey to the lead huntress, which is the one in <span class='rule' id='lead-huntress-color'>red</span> or all-caps. Long-press the submit button to restore the original display.</p>
                </div>
                <div class="page-footer relative-footer">Page 1 of 1</div>
            </div>
        </div>
    </div>
</body>
</html>