<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Echolocation — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <style>
        table {
            margin: 1em auto;
        }

        a {
            display: inline-block;
            margin-right: .5em;
            text-decoration: none;
            color: white;
            font-size: 80%;
            transition: color .1s;
            background: #008;
            border-radius: 50%;
            width: 1.5em;
            height: 1.5em;
            text-align: center;
            padding-left: .1em;
            box-sizing: border-box;
            font-family: monospace;
        }

            a:hover:not(.failed):not(.playing) {
                color: #ff8;
            }

            a.playing {
                color: #8f8;
            }

            a.failed {
                cursor: not-allowed;
                color: red;
            }
    </style>
    <script>
        $(function () {
            $("span:contains(ping), span:contains(ding), span:contains(sonar)").next().each(function () {
                let audio = $("<audio>")
                    .on("error", function () {
                        button.addClass("failed");
                    })
                    .attr("src", "../HTML/audio/Echolocation/" + $(this).prev().text() + ".mp3")
                    .on("ended", function () {
                        button.removeClass("playing");
                    })
                    .appendTo($(this));

                let button = $("<a href='#' class='play-button'>▶</a>")
                    .click(function () {
                        if (button.hasClass("playing")) {
                            button.removeClass("playing");
                            audio[0].pause();
                            audio[0].currentTime = 0;
                        } else {
                            button.addClass("playing");
                            audio[0].play();
                        }
                        return false;
                    })
                    .appendTo($(this));
            })
        });
    </script>
</head>
    <body>
        <div class="section">
            <div class="page page-bg-01">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                    <span class="page-header-section-title">Echolocation</span>
                </div>
                <div class="page-content">
                    <img src="img/Component/Echolocation.svg" class="diagram">
                    <h2>On the Subject of Echolocation</h2>
                    <p class="flavour-text">Close your eyes and open your mind...</p>

                    <ul>
                        <li>This module is completely black, however there are five invisible buttons.</li>
                        <li>In each cardinal direction there is an “arrow” that when pressed will turn you in that direction, and the one north will move you in that direction.</li>
                        <li>The button in the center is used to make a high pitched noise.</li>
                        <li>The noise will bounce off of the object and come back to you.</li>
                        <li>The key will make a <span>ping</span><span></span>sound, the exit will make a <span>ding</span><span></span>sound, any walls will make a <span>sonar wave</span><span></span>sound.</li>
                        <li>The noise takes one second to go one space forward. Once you press the button, the “timer” for the ping starts.</li>
                        <li>The maze has a key and an exit, both of which return distinct noises when a pitch is played in that direction.</li>
                        <li>To pick up the key, go to where it is and hold the center button.</li>
                        <li>Once you have the key, simply go to where the hatch is and hold the center button to unlock it and solve the module. Doing this without the key will result in a strike as well as doing it anywhere else. A strike will also be received if you try to pick up the key in the wrong place or walk into a wall.</li>
                    </ul>
                    
                    <h3>Maze Specifications</h3>
                        <ul>
                            <li>The maze is a 4×4, with the outer edges of the maze being covered completely by walls.</li>
                            <li>The walls, key, and exit location are completely randomized.</li>
                            <li>A wall can separate two spaces orthogonally.</li>
                            <li>You, the key and the exit are always in the center of a square, thus the key and the exit will only make sounds an integer number of seconds after you make a sound. Walls on the other hand are on the edge of squares, and thus will be played half a second more than an integer number of seconds.</li>
                        </ul>
                </div>
                <div class="page-footer relative-footer">Page 1 of 1</div>
            </div>
        </div>
    </body>
</html>