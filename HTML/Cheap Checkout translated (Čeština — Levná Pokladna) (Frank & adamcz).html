<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Levná pokladna — Keep Talking and Nobody Explodes mod</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/Modules/Cheap Checkout.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>
        let Prices = [
            // Original 34 items
            "Candy Canes,3.51,Sladkost",
            "Ponožky,6.97,Jiné",
            "Lotion,7.97,Pečovací produkt",
            "Sýr,4.49,Mléčný výrobek",
            "Máty,6.39,Sladkost",
            "Hroznové želé,2.98,Sladkost",
            "Med,8.25,Sladkost",
            "Cukr,2.08,Sladkost",
            "Soda,2.05,Sladkost",
            "Kapesníky (Tissues),3.94,Pečovací produkt",
            "Bílý chléb,2.43,Obilniny",
            "Řepkový Olej,2.28,Olej",
            "Hořčice,2.36,Jiné",
            "Deodorant,3.97,Pečovací produkt",
            "Bílé mléko,3.62,Mléčný výrobek",
            "Omáčka na těstoviny,2.30,Zelenina",
            "Lízátka,2.61,Sladkost",
            "Sušenky,2.00,Sladkost",
            "Ubrousky (Paper Towels),9.46,Pečovací produkt",
            "Čaj,2.35,Voda",
            "Kávové zrna,7.85,Jiné",
            "Majonéza,3.99,Olej",
            "Čokoládové mléko,5.68,Mléčný výrobek",
            "Ovocný punč,2.08,Sladkost",
            "Brambůrky,3.25,Olej",
            "Šampón,4.98,Pečovací produkt",
            "Zubní pasta,2.50,Pečovací produkt",
            "Arašídové máslo,5.00,Bílkoviny",
            "Žvýkačka,1.12,Sladkost",
            "Vody,9.37,Voda",
            "Špagety,2.92,Obilniny",
            "Čokoládová tyčinka,2.10,Sladkost",
            "Kečup,3.59,Jiné",
            "Cereálie,4.19,Obilniny",

            // New rule seed items
            "Vajíčka,2.67,Bílkoviny",
            "Pečené fazole,1.14,Bílkoviny",
            "Arašídy,5.98,Bílkoviny",
            "Jogurt,2.72,Mléčný výrobek",
            "Řecký jogurt,3.47,Mléčný výrobek",
            "Máslo,5.86,Mléčný výrobek",
            "Kartáček na zuby,2.24,Pečovací produkt",
            "Lék,3.73,Pečovací produkt",
            "Polévka,1.99,Jiné",
            "Mýdlo,3.97,Pečovací produkt",
            "Preclíky,2.98,Obilniny",
            "Popcorn,2.50,Obilniny",
            "Ovesné vločky,7.98,Obilniny",
            "Rýže,2.02,Obilniny",
            "Mouka,3.49,Obilniny",
            "Lékořice,1.98,Sladkost",
            "Koláč,3.98,Sladkost",
            "Dort,9.98,Sladkost",
            "Gumoví medvídci,7.98,Sladkost",
            "Reliš,2.74,Zelenina",
            "Ubrousky (Napkins),1.09,Pečovací produkt",
            "Náplasti,1.11,Pečovací produkt",
            "Hrací karty,2.13,Jiné",
            "Sušené hovězí,1.23,Jiné",
            "Zmrzlina,4.99,Mléčný výrobek",
            "Salátová směs,2.47,Zelenina",
            "Bagel,4.20,Obilniny",
            "Zeleninový Olej,2.89,Olej",
            "Baterie,4.49,Jiné",
            "Taco shells,5.01,Obilniny",
            "Bělidlo,6.90,Jiné",
            "Prášek do pečiva,0.33,Jiné",
            "Papírové tašky,1.07,Jiné",
            "Papír na tisk,4.49,Jiné",
            "Pleny,6.96,Pečovací produkt",
            "Sprchový gel,1.63,Pečovací produkt",
            "Odličovač,1.02,Pečovací produkt",
            "Prázdné DVD,9.00,Jiné",
            "Lak na nehty,3.13,Pečovací produkt",
            "Fusilli,2.92,Obilniny",
            "Tagliatelle,2.92,Obilniny",
            "Spirelli,2.92,Obilniny",
            "Penne,2.92,Obilniny",
            "Olej na motor auta,3.36,Olej",
            "Petržel,0.69,Koření",
            "Šalvěj,1.75,Koření",
            "Rozmarýn,3.19,Koření",
            "Tymián,2.89,Koření",
            "Bílý pepř,2.49,Koření",
            "Koriandr,0.99,Koření",
            "Oregano,1.59,Koření",
            "Kmín,3.45,Koření",
            "Masala,4.99,Koření",
            "Šafrán,12.79,Koření",
            "Skořice,2.40,Koření",
            "Kajenský pepř,11.27,Koření",
            "Kořen zázvoru,1.00,Koření",
            "Sůl,3.98,Koření",
            "Sezam,3.19,Koření",
            "Vanilkový extrakt,11.82,Koření",
            "Červené víno,20.90,Voda",
            "Bílé víno,18.60,Voda",
            "balení piva po 12,10.49,Voda",
            "balení piva po 6,5.79,Voda",
            "Ocet,2.50,Jiné",
        ];

        let PricesLB = [
            // Original 12 weight based items
            "Krocan,2.98,Bílkoviny",
            "Kuře,1.99,Bílkoviny",
            "Steak,4.97,Bílkoviny",
            "Vepřeové,4.14,Bílkoviny",
            "Salát,1.10,Zelenina",
            "Brambory,0.68,Zelenina",
            "Rajčata,1.80,Ovoce",
            "Brokolice,1.39,Zelenina",
            "Pomeranče,0.80,Ovoce",
            "Citrony,1.74,Ovoce",
            "Banány,0.87,Ovoce",
            "Grapefruit,1.08,Ovoce",

            // New rule seed weight based items
            "Cibule,1.82,Zelenina",
            "Slanina,5.52,Bílkoviny",
            "Jablka,1.32,Ovoce",
            "Hrozny,2.98,Ovoce",
            "Ryba,9.99,Bílkoviny",
            "Melouny,0.32,Ovoce",
            "Mrkve,0.77,Zelenina",
            "Třešně,3.21,Ovoce",
            "Švestky,1.99,Ovoce",
            "Dýně,1.38,Ovoce",
            "Avokáda,2.23,Ovoce",
            "Šunka,2.88,Bílkoviny",
            "Klobásy,3.88,Bílkoviny",
            "Kukuřice,1.14,Zelenina",
            "Hrušky,1.74,Ovoce",
            "Pórek,3.17,Zelenina",
            "Bologna,1.69,Bílkoviny",
            "Mleté hovězí,2.36,Bílkoviny",
            "Česnek,0.97,Zelenina",
            "Tofu,3.11,Bílkoviny",
            "Losos,21.55,Bílkoviny",
        ];

        let SundayValue = 215;
        let MondayPercent = 85;
        let TuesdayExcludedDigit = -1;
        let WednesdayLargeOrSmall = true;
        let WednesdayViceVersa = true;
        let ThursdayOddItems = true;
        let ThursdayPercent = 50;
        let FridayPercent = 125;
        let SaturdayPercent = 65;

        function toDollars(intDollars) {
            const stringDollars = intDollars.toString();
            if (intDollars < 100) return "0." + intDollars;
            else return stringDollars.substring(0, stringDollars.length - 2) + "." + stringDollars.substring(stringDollars.length - 2);
        }

        function toRelativePercent(absolutePercent) {
            if (absolutePercent > 100) return `${absolutePercent - 100}% více`;
            else if (absolutePercent == 50) return "polovinu méně";
            else return `${100 - absolutePercent}% méně`;
        }

        function setDefaultRules(rng) {
            setRules(rng);
        }

        function setRules(rng) {
            var prices, pricesLB;
            if (rng.seed == 1)
            {
                prices = Prices.slice(0, 34);
                pricesLB = PricesLB.slice(0, 12);
            }
            else
            {
                prices = rng.shuffleFisherYates(Prices.slice(0)).slice(0, 34);
                pricesLB = rng.shuffleFisherYates(PricesLB.slice(0)).slice(0, 12);

                for (var [index, item] of prices.entries()) {
                    var split = item.split(",");
                    var intDollars = parseInt(split[1].replace(".", ""));
                    intDollars += rng.next(-10, 11);
                    split[1] = toDollars(intDollars);
                    prices[index] = split.join(",");
                }

                for (var [index, item] of pricesLB.entries()) {
                    var split = item.split(",");
                    var intDollars = parseInt(split[1].replace(".", ""));
                    intDollars += rng.next(-10, 11);
                    split[1] = toDollars(intDollars);
                    pricesLB[index] = split.join(",");
                }

                SundayValue = rng.next(50, 301);
                MondayPercent = rng.next(10, 100);
                TuesdayExcludedDigit = rng.next(-1, 3);
                WednesdayLargeOrSmall = rng.next(0, 2) == 1;
                WednesdayViceVersa = rng.next(0, 2) == 1;
                ThursdayOddItems = rng.next(0, 2) == 1;
                ThursdayPercent = rng.next(25, 76);
                FridayPercent = rng.next(50, 201);
                SaturdayPercent = rng.next(50, 201);
            }

            const seededStrings = [
                toDollars(SundayValue),
                toRelativePercent(MondayPercent),
                TuesdayExcludedDigit == -1 ? "" : `, kromě cifry ${["jednotek", "desítek", "stovek"][TuesdayExcludedDigit]}`,
                WednesdayLargeOrSmall ? "největšího" : "nejmenšího",
                WednesdayLargeOrSmall ? "nejmenšího" : "největšího",
                WednesdayViceVersa ? " a naopak" : "",
                ThursdayOddItems ? "lichých" : "sudých",
                toRelativePercent(ThursdayPercent),
                toRelativePercent(FridayPercent),
                toRelativePercent(SaturdayPercent)
            ];

            const seededSpans = document.querySelectorAll("span.rule-seeded");
            for (const [index, seededSpan] of seededSpans.entries()) {
                seededSpan.textContent = seededStrings[index];
            }

            const rows = Array.from(document.querySelectorAll(".page-bg-02 tr:nth-child(n+2), .page-bg-03 tr"));
            for (const [index, itemString] of prices.concat(pricesLB).sort().entries()) {
                const children = rows[index % rows.length].children;
                const item = itemString.split(",");

                children[0].textContent = item[0];
                children[1].textContent = `$${item[1]}${pricesLB.includes(itemString) ? " per lb" : "" }`;
                children[2].textContent = item[2];
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes mod</span>
                <span class="page-header-section-title">Levná pokladna</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Cheap Checkout.svg">
                <h2>Na téma Levné pokladny</h2>
                <p class="flavour-text">Kdo ve světě si něco takového nakupuje v takovou chvíli?</p>
                <ul>
                    <li>Modul obsahuje nákupní seznam položek, které si zákazník koupil, které mohou být prohlíženy pomocí šipek.</li>
                    <li>Nad tím je zobrazena částka, kterou zaplatil.</li>
                    <li>Sečtěte ceny všech předmětů a použijte slevu na každý předmět na základě dne v týdnu.</li>
                    <li>U váženého zboží nejdříve vypočítejte požadovanou cenu za danou váhu a až poté uplatněte slevu.</li>
                    <li>Pokud zákazník zaplatil dostatečně, stačí správně zadat drobné na vrácení pomocí tlačítek na modulu a následně stisknout tlačítko potvrdit.</li>
                    <li>Jinak, pokud zákazník nezaplatil dostatečně, stiskněte tlačítko potvrdit bez jakéhokoliv vrácení peněz. Dále vyčkejte pro novou sumu peněz od zákazníka.</li>
                    <li>Po stisknutí tlačítka potvrdit bude probíhat vrácení peněz a dokončení modulu.</li>
                </ul>
                <h3>Glosář</h3>
                <ul>
                    <li>Cena předmětu odkazuje na cenu před uplatněním slevy.</li>
                    <li>Předměty s pevnou cenou nemají jejich cenu na základě jejich váhy.</li>
                    <li>Ciferace se vypočítá sečtením všechny cifer dohromady a opakován, dokud nevznikne jednociferné číslo.</li>
                    <li>Obchodní zaokrouhlování je proces, kdy pokud je zaokrouhlovací cifra větší, nebo rovna 5, je zaokrouhleno nahoru, jinak je zaokrouhleno dolů.</li>
                </ul>

                <h3>Slevy:</h3>
                <div style="font-style: italic; font-size: 13px">Den týdnu je den kdy modul na počítači zneškodňovatle byl aktivován.</div>

                <em>Speciální neděle</em>
                <div class="sale">Všechny předměty s pevnou cenou obsahující S jsou o $<span class="rule-seeded">2.15</span> dražší.</div>

                <em>Kujné pondělí</em>
                <div class="sale">1. 3. a 6. předmět na nákupním seznamu stojí o <span class="rule-seeded">15% méně</span>.</div>

                <em>Problémové úterý:</em>
                <div class="sale">Vypočítejte ciferaci ceny předmětu bez desetinné čárky<span class="rule-seeded"></span>. Přidejte tolik dollarů k původní ceně předmětu. Platí pouze pro předměty s pevnou cenou.</div>

                <em>Šílená středa:</em>
                <div class="sale">Změňte každý výskyt <span class="rule-seeded">největšího</span> čísla v ceně s výskytem <span class="rule-seeded">nejmenšího</span> čísla v ceně<span class="rule-seeded"> a naopak</span>.</div>

                <em>Napínavý čtvrtek:</em>
                <div class="sale">Všechny předměty na <span class="rule-seeded">lichých</span> pozicích stojí o <span class="rule-seeded">50% méně</span>.</div>

                <em>Ovocný pátek:</em>
                <div class="sale">Všechno ovoce je o <span class="rule-seeded">25% dražší</span> za libru.</div>

                <em>Sladká sobota:</em>
                <div class="sale">Všechny sladkosti stojí o <span class="rule-seeded">35% méně</span>.</div>
            </div>
            <div class="page-footer relative-footer">Strana 1 ze 3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes mod</span>
                <span class="page-header-section-title">Levná pokladna</span>
            </div>
            <div class="page-content">
                <h3>Ceny předmětů:</h3>
                <div style="font-style: italic; font-size: 14px">Ceny by vždy měly zůstat v dolarech, např. $0.68 místo 68¢. Všechny ceny předmětů jsou zaokrouhleny na 2 desetinná místa. Musíte obchodně zaokrouhlit po výpočtu ceny předmětu a po uplatnění ceny.</div>
                <div class="hstack">
                    <table>
                        <tr><th>Předmět</th><th>Cena</th><th>Kategorie</th>
                        <tr><td>Banány</td><td>87¢ za lb</td><td>Ovoce</td>
                        <tr><td>Brokolice</td><td>$1.39 za lb</td><td>Zelenina</td>
                        <tr><td>Candy Canes</td><td>$3.51</td><td>Sladkost</td>
                        <tr><td>Řepkový olej</td><td>$2.28</td><td>Olej</td>
                        <tr><td>Cereálie</td><td>$4.19</td><td>Obilniny</td>
                        <tr><td>Sýr</td><td>$4.49</td><td>Mléčné výrobky</td>
                        <tr><td>Kuře</td><td>$1.99 za lb</td><td>Bílkoviny</td>
                        <tr><td>Čokoládová tyčinka</td><td>$2.10</td><td>Sladkost</td>
                        <tr><td>Čokoládové mléko</td><td>$5.68</td><td>Mléčné výrobky</td>
                        <tr><td>Kávové zrna</td><td>$7.85</td><td>Jiné</td>
                        <tr><td>Sušenky</td><td>$2.00</td><td>Sladkost</td>
                        <tr><td>Deodorant</td><td>$3.97</td><td>Pečovací produkt</td>
                        <tr><td>Ovocný punč</td><td>$2.08</td><td>Sladkost</td>
                        <tr><td>Hroznové želé</td><td>$2.98</td><td>Sladkost</td>
                        <tr><td>Grapefruit</td><td>$1.08 za lb</td><td>Ovoce</td>
                        <tr><td>Žvýkačka</td><td>$1.12</td><td>Sladkost</td>
                        <tr><td>Med</td><td>$8.25</td><td>Sladkost</td>
                    </table>
                    <table>
                        <tr><th>Předmět</th><th>Cena</th><th>Kategorie</th></tr>
                        <tr><td>Máty</td><td>$6.39</td><td>Sladkost</td></tr>
                        <tr><td>Hořčice</td><td>$2.36</td><td>Jiné</td></tr>
                        <tr><td>Pomeranče</td><td>80¢ za lb</td><td>Ovoce</td></tr>
                        <tr><td>Ubrousky (Paper Towels)</td><td>$9.46</td><td>Pečovací produkt</td></tr>
                        <tr><td>Omáčka na těstoviny</td><td>$2.30</td><td>Zelenina</td></tr>
                        <tr><td>Arašídové máslo</td><td>$5.00</td><td>Bílkoviny</td></tr>
                        <tr><td>Věprové</td><td>$4.14 za lb</td><td>Bílkoviny</td></tr>
                        <tr><td>Brambůrky</td><td>$3.25</td><td>Oleje</td></tr>
                        <tr><td>Brambory</td><td>68¢ za lb</td><td>Zelenina</td></tr>
                        <tr><td>Šampón</td><td>$4.98</td><td>Pečovací produkt</td></tr>
                        <tr><td>Ponožky</td><td>$6.97</td><td>Jiné</td></tr>
                        <tr><td>Soda</td><td>$2.05</td><td>Sladkost</td></tr>
                        <tr><td>Špagety</td><td>$2.92</td><td>Obilniny</td></tr>
                        <tr><td>Steak</td><td>$4.97 za lb</td><td>Bílkoviny</td></tr>
                        <tr><td>Cukr</td><td>$2.08</td><td>Sladkost</td></tr>
                        <tr><td>Čaj</td><td>$2.35</td><td>Voda</td></tr>
                        <tr><td>Kapesníky (Tissues)</td><td>$3.94</td><td>Pečovací produkt</td></tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Strana 2 ze 3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes mod</span>
                <span class="page-header-section-title">Levná pokladna</span>
            </div>
            <div class="page-content">
                <div class="hstack">
                    <table>
                        <tr><td>Kečup</td><td>$3.59</td><td>Jiné</td></tr>
                        <tr><td>Citrony</td><td>$1.74 za lb</td><td>Ovoce</td></tr>
                        <tr><td>Salát</td><td>$1.10 za lb</td><td>Zelenina</td></tr>
                        <tr><td>Lízátka</td><td>$2.61</td><td>Sladkost</td></tr>
                        <tr><td>Lotion</td><td>$7.97</td><td>Pečovací produkt</td></tr>
                        <tr><td>Majonéza</td><td>$3.99</td><td>Olej</td></tr>
                    </table>
                    <table>
                        <tr><td>Rajčata</td><td>$1.80 za lb</td><td>Ovoce</td></tr>
                        <tr><td>Zubní pasta</td><td>$2.50</td><td>Pečovací produkt</td></tr>
                        <tr><td>Krocan</td><td>$2.98 za lb</td><td>Bílkoviny</td></tr>
                        <tr><td>Vody</td><td>$9.37</td><td>Voda</td></tr>
                        <tr><td>Bílý chléb</td><td>$2.43</td><td>Obilniny</td></tr>
                        <tr><td>Bílé mléko</td><td>$3.62</td><td>Mléčné výrobky</td></tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Strana 3 ze 3</div>
        </div>
    </div>
</body>
</html>
