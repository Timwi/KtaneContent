<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta name="viewport" content="initial-scale=1">
	<title>Denial Displays — Keep Talking and Nobody Explodes Module</title>
	<link rel="stylesheet" type="text/css" href="css/font.css">
	<link rel="stylesheet" type="text/css" href="css/normalize.css">
	<link rel="stylesheet" type="text/css" href="css/main.css">
	<script src="js/ktane-utils.js"></script>
	<style>
		.dark table, table {
			border: none;
		}
		.table-i {
			margin: 0em auto;
			width: 100%;
		}
		.table-ii {
			margin: 0em auto;
			width: 100%;
			text-align: center;
		}
		.table-ii td {
			font-size: 10pt;
		}
	</style>
	<script>
		document.addEventListener('DOMContentLoaded', function()
		{
			let pos = [
				{ x: 24, y: 24 },
				{ x: 129, y: 24 },
				{ x: 24, y: 129 },
				{ x: 129, y: 129 },
				{ x: 234, y: 129 },
				{ x: 24, y: 234 },
				{ x: 129, y: 234 },
				{ x: 234, y: 234 }
			];

			let list = [];
			let genDigits = [
				() => `<text x='45' y='76' font-size='88'>${(Math.random()*10) | 0}<${''}/text>`,
				() => `<text x='45' y='67' font-size='64'>${((Math.random()*90) + 10) | 0}<${''}/text>`,
				() => `<text x='45' y='60' font-size='48'>${((Math.random()*900) + 100) | 0}<${''}/text>`
			];

			for (let i = 0; i < 5; i++)
				list.push(genDigits[(Math.random() * 3) | 0]());

			list.push(`
				<path d='M5 20h25v50h-25zM32.5 20h25v50h-25zM60 20h25v50h-25z' fill='black' />
				<path d='m 10,17.5 7.5,-15 7.5,15 -7.5,-2.5 z M 37.5,17.5 l 7.5,-15 7.5,15 -7.5,-2.5 z M 65,17.5 l 7.5,-15 7.5,15 -7.5,-2.5 z M 10,72.5 l 7.5,15 7.5,-15 -7.5,2.5 z M 37.5,72.5 l 7.5,15 7.5,-15 -7.5,2.5 z M 65,72.5 l 7.5,15 7.5,-15 -7.5,2.5 z' />
				<text font-size='32' fill='white' x='17.5' y='55'>${(Math.random()*10)|0}<${''}/text>
				<text font-size='32' fill='white' x='45' y='55'>${(Math.random()*10)|0}<${''}/text>
				<text font-size='32' fill='white' x='72.5' y='55'>${(Math.random()*10)|0}<${''}/text>
			`);

			list.push(`<g font-size='32'><text x='45' y='38'>CON<${''}/text><text x='45' y='73'>FIRM<${''}/text><${''}/g>`);
			list.push(`<g font-size='32'><text x='45' y='38'>DE<${''}/text><text x='45' y='73'>NY<${''}/text><${''}/g>`);

			// Fisher-Yates shuffle
			let i = list.length;
			while (i > 1)
			{
				let index = (Math.random() * i) | 0;
				i--;
				let value = list[index];
				list[index] = list[i];
				list[i] = value;
			}

			document.getElementById('svg-gen').innerHTML = list.map((listElement, ix) => `
				<g transform='translate(${pos[ix].x}, ${pos[ix].y})'>
					<path d='M0 0h90v90H0z' fill='none' stroke='black' stroke-width='3' />
					${listElement}
				<${''}/g>
			`).join('');
		});
	</script>
</head>
<body>
	<div class="section">
		<div class="page page-bg-01">
			<div class="page-header">
				<span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
				<span class="page-header-section-title">Denial Displays</span>
			</div>
			<div class="page-content">
				<svg class='diagram' viewBox="0 0 348 348">
					<path fill='none' d="M5.08 5.776h336.91v337.67H5.08z" stroke-width="2" stroke="#000"/><path fill='none' d="M282.734 40.554c0-8.376 6.966-15.165 15.56-15.165 4.126 0 8.084 1.594 11 4.44 2.92 2.842 4.56 6.7 4.56 10.722 0 8.376-6.967 15.165-15.56 15.165-8.594 0-15.56-6.79-15.56-15.166z" stroke-width="2" stroke="#000"/>
					<g id="svg-gen" text-anchor="middle">
						<g transform="translate(24, 24)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<path d="M5 20h25v50h-25zM32.5 20h25v50h-25zM60 20h25v50h-25z" fill="black" />
							<path d="m 10,17.5 7.5,-15 7.5,15 -7.5,-2.5 z M 37.5,17.5 l 7.5,-15 7.5,15 -7.5,-2.5 z M 65,17.5 l 7.5,-15 7.5,15 -7.5,-2.5 z M 10,72.5 l 7.5,15 7.5,-15 -7.5,2.5 z M 37.5,72.5 l 7.5,15 7.5,-15 -7.5,2.5 z M 65,72.5 l 7.5,15 7.5,-15 -7.5,2.5 z" />
							<text font-size="32" fill="white" x="17.5" y="55">4</text>
							<text font-size="32" fill="white" x="45" y="55">0</text>
							<text font-size="32" fill="white" x="72.5" y="55">4</text>
						</g>
						<g transform="translate(129, 24)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<text x="45" y="76" font-size="88">8</text>
						</g>
						<g transform="translate(24, 129)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<text x="45" y="67" font-size="64">25</text>
						</g>
						<g transform="translate(129, 129)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<text x="45" y="76" font-size="88">9</text>
						</g>
						<g transform="translate(234, 129)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<text x="45" y="67" font-size="64">47</text>
						</g>
						<g transform="translate(24, 234)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<g font-size="32"><text x="45" y="38">CON</text><text x="45" y="73">FIRM</text></g>
						</g>
						<g transform="translate(129, 234)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<text x="45" y="60" font-size="48">350</text>
						</g>
						<g transform="translate(234, 234)">
							<path d="M0 0h90v90H0z" fill="none" stroke="black" stroke-width="3" />
							<g font-size="32"><text x="45" y="38">DE</text><text x="45" y="73">NY</text></g>
						</g>
					</g>
				</svg>
				<h2>On the Subject of Denial Displays</h2>
				<p class="flavour-text">I feel like there may be a bit too much going on here...</p>
				<ul>
					<li>This module contains five black screens, a red screen saying “DENY”, a green screen saying “CONFIRM”, and a blue screen with three dials which can be changed.</li>
					<li>Each of the five black displays will show a 1-3 digit number anywhere from 0 to 999.</li>
					<li>Each time “DENY” is pressed, one display’s number will change. Each display can only change once, therefore “DENY” can only be pressed 5 times. <strong>Pressing “DENY” more than 5 times will result in strikes.</strong></li>
					<li>Use <em>Table I</em> to determine whether “CONFIRM” or “DENY” should be pressed.</li>
					<li><strong>Pressing “DENY” when “CONFIRM” should be pressed will result in a strike.</strong> The module will function as if “DENY” was pressed, and you will be required to continue until you reach another “CONFIRM” scenario or reach 5 denials.</li>
					<li>If “CONFIRM” needs to be pressed, use <em>Table II</em> to determine the 3-digit code that should be submitted (using the dials on the blue screen).</li>
					<li><strong>The dials must be set to the correct code when the “CONFIRM” button is pressed. If the dials are set to the wrong code when “CONFIRM” is pressed, a strike will be given.</strong></li>
				</ul>
				<h3>Table I: Denial</h3>
				<ul>
					<li>This table is based around the 5 displays.</li>
					<li>If a condition applies, add/subtract the value to the overall total depending on the column it’s in. (The starting value is 0.)</li>
					<li>Multiple conditions may apply.</li>
					<li>“For each” conditions may apply multiple times.</li>
					<li>If the total is positive, move onto <em>Table II</em>.</li>
					<li>If the total is 0 or negative, press “DENY” and repeat the process using the new set.</li>
					<li><strong>If “DENY” has been pressed 5 times and the total is still 0 or less,</strong> take the total of all 5 displays, subtract the absolute value of the total received from the table, and subtract 100 until the number is less than 1000. Input this number onto the dials and hit “CONFIRM” to disarm the module.</li>
				</ul>
			</div>
			<div class="page-footer relative-footer">Page 1 of 3</div>
		</div>
		<div class="page page-bg-01">
			<div class="page-header">
				<span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
				<span class="page-header-section-title">Denial Displays</span>
			</div>
			<div class="page-content">
				<table class="table-i">
					<tr>
						<th style="width: 50px;">Value</th>
						<th style="width: 200px;">Add</th>
						<th style="width: 200px;">Subtract</th>
					</tr>
					<tr>
						<th>3</th>
						<td>If every digit* appears exactly once</td>
						<td>If any digit* appears on all five displays</td>
					</tr>
					<tr>
						<th>2</th>
						<td>If every display has 3 digits</td>
						<td>If every display has 1 digit</td>
					</tr>
					<tr>
						<th>2</th>
						<td>If all 5 displays add up to 1500 or more</td>
						<td>If all 5 displays add up to 250 or less</td>
					</tr>
					<tr>
						<th>2</th>
						<td>If there are fewer than 8 digits in total</td>
						<td>If there are more than 11 digits in total</td>
					</tr>
					<tr>
						<th>1</th>
						<td>If there are 3 or more two-digit displays</td>
						<td>If there are 3 or more one-digit displays</td>
					</tr>
					<tr>
						<th>1</th>
						<td>If there is an even number of odd digits</td>
						<td>If there is an odd number of even digits</td>
					</tr>
					<tr>
						<th>1</th>
						<td>If there are more even than odd digits</td>
						<td>If there are more odd than even digits</td>
					</tr>
					<tr>
						<th>1</th>
						<td>For each display in the 600s</td>
						<td>For each display in the 200s</td>
					</tr>
					<tr>
						<th>1</th>
						<td>For each 3-digit display with digits in ascending order**</td>
						<td>For each 3-digit display with digits in descending order**</td>
					</tr>
					<tr>
						<th>1</th>
						<td>For each 2-digit display that is a multiple of 3</td>
						<td>For each 3-digit display that is a multiple of 5</td>
					</tr>
				</table>
				<p style="font-size: 9pt;">*Digits refer to the individual numbers (0-9) on the displays.<br />**Two digits that are the same are NOT considered to be ascending or descending.</p>
				<h3>Table II: Confirmation</h3>
				<ul>
					<li>If you’ve reached this point, the total you got from <em>Table I</em> must’ve been positive, so keep that in mind.</li>
					<li>Take the total from <em>Table I</em>, and add the total number of digits from the 5 displays. Then, take the least significant digit from that total. This is the section of the table you will be looking at.</li>
					<li>Look at the value in the first display, and take the number of digits in the number shown. This is the subsection of the table you will be looking at.</li>
					<li>Solve the equation using the values on the displays when necessary.</li>
				</ul>
			</div>
			<div class="page-footer relative-footer">Page 2 of 3</div>
		</div>
		<div class="page page-bg-01">
			<div class="page-header">
				<span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
				<span class="page-header-section-title">Denial Displays</span>
			</div>
			<div class="page-content">
				<ul>
					<li>The displays are labelled in reading order with A, B, C, D, and E. Any letters found in the table refer to the value shown on that display.</li>
					<li>If the solution contains a decimal, round the solution down.</li>
					<li>If the solution is negative, drop the negative sign.</li>
					<li>If the solution is greater than 999, repeatedly subtract 1000 until it falls into the range of 0-999.</li>
					<li>If the solution is 99 or less, add zeros to the left of it until it becomes 3 digits long.</li>
					<li>Enter that solution into the three dials and press “CONFIRM” to solve the module.</li>
				</ul>
				<table class="table-ii">
					<tr>
						<th style="background-color: #666; color: #FFF;" colspan="3">1</th>
						<th style="background-color: #666; color: #FFF;" colspan="3">2</th>
						<th style="background-color: #666; color: #FFF;" colspan="3">3</th>
					</tr>
					<tr>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
					</tr>
					<tr>
						<td>E<sup>2</sup></td>
						<td>(C+D)÷2</td>
						<td>B×7</td>
						<td>A+C+D</td>
						<td>50×A</td>
						<td>(E+C)×3</td>
						<td>B<sup>2</sup></td>
						<td>C×E</td>
						<td>(D+C)÷2</td>
					</tr>
					<tr>
						<td class="empty" colspan="9"></td>
					</tr>
					<tr>
						<th style="background-color: #666; color: #FFF;" colspan="3">4</th>
						<th style="background-color: #666; color: #FFF;" colspan="3">5</th>
						<th style="background-color: #666; color: #FFF;" colspan="3">6</th>
					</tr>
					<tr>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
					</tr>
					<tr>
						<td>3*D</td>
						<td>C+(A×B)</td>
						<td>548(E)</td>
						<td>D-B</td>
						<td>A(C+D)</td>
						<td>100+C</td>
						<td>C<sup>3</sup></td>
						<td>E÷2</td>
						<td>(B-D)-A</td>
					</tr>
					<tr>
						<td class="empty" colspan="9"></td>
					</tr>
					<tr>
						<th style="background-color: #666; color: #FFF;" colspan="3">7</th>
						<th style="background-color: #666; color: #FFF;" colspan="3">8</th>
						<th style="background-color: #666; color: #FFF;" colspan="3">9</th>
					</tr>
					<tr>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
					</tr>
					<tr>
						<td>B×D</td>
						<td>43×E</td>
						<td>C+A</td>
						<td>D-E</td>
						<td>A<sup>2</sup></td>
						<td>(A+E)÷4</td>
						<td>C×B</td>
						<td>69×D</td>
						<td>(E-B)×4</td>
					</tr>
					<tr>
						<td class="empty" colspan="9"></td>
					</tr>
					<tr>
						<td class="empty" colspan="3"></td>
						<th style="background-color: #666; color: #FFF;" colspan="3">0</th>
						<td class="empty" colspan="3"></td>
					</tr>
					<tr>
						<td class="empty" colspan="3"></td>
						<th style="width: 50px;">1</th>
						<th style="width: 50px;">2</th>
						<th style="width: 50px;">3</th>
						<td class="empty" colspan="3"></td>
					</tr>
					<tr>
						<td class="empty" colspan="3"></td>
						<td>A×E</td>
						<td>D(E)(73)</td>
						<td>C+A</td>
						<td class="empty" colspan="3"></td>
					</tr>
				</table>
			</div>
			<div class="page-footer relative-footer">Page 3 of 3</div>
		</div>
	</div>
</body>
</html>