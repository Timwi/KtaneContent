<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Cipher Machine — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script>
    $(function () {
        //Abreviation,Unique part of filename,Name (only if different than filename + "Cipher")
        const ciphers = [
            "AD,Alphabetical Disorder,",
            "AE,AES,",
            "AF,Affine,",
            "AL,Alberti,",
            "AM,AMSCO,AMSCO Transposition",
            "AS,Arithmetic Sequence,",
            "AT,Atbash,",
            "AU,Autokey,",
            "AX,ADFGX,",
            "BA,Bazeries,",
            "BE,Bellaso,",
            "BG,Binary Gear,",
            "BI,Bit Switch,",
            "BN,Binary,",
            "BO,Book,Book Cipher,Book optimized,(Optimized)",
            "BW,Burrows-Wheeler,Burrows-Wheeler Transform",
            "CA,Caesar,",
            "CB,Chain Bit Rotation,Chain Bit-Rotation Cipher",
            "CD,Condi,",
            "CH,Chaocipher,Chaocipher",
            "CI,Circle,",
            "CM,Conjugated Matrix Bifid,",
            "CO,Collon,",
            "CR,Chain Rotation,Chain-Rotation Cipher",
            "CS,Caesar Shuffle,",
            "CT,Columnar,Columnar Transposition",
            "CU,Cube,",
            "CW,Caesarean Role Switching,Caesarean Role-Switching Cipher",
            "DF,Differential,",
            "DI,Digrafid,",
            "DR,Dreamcipher,Dreamcipher",
            "DS,Double Square Rotation,",
            "DT,Dual Triplex Reflector,",
            "EF,ElsieFour,",
            "EL,Strangely Elusive Letter,",
            "EN,Enigma,Enigma Cipher,Enigma interactive,(Interactive)",
            "ET,Extinction,Extinction Transposition",
            "FM,Fractionated Morse,",
            "FO,Foursquare,",
            "GC,Gracie,",
            "GL,Gridlock,",
            "GN,GRANIT,",
            "GO,Global Offset,",
            "GP,Grandpré,",
            "GR,GROMARK,",
            "GT,Grille,Grille Transposition",
            "HI,Hill,",
            "HO,Homophonic,",
            "IP,Incremental Polyalphabetic,",
            "JL,Composite Spinning Jumping Leapfrog Orphanage,Composite Spinning/Jumping Leapfrog Orphanage Cipher",
            "JO,Jump Over,Jump-Over Cipher",
            "LO,Logic,",
            "LT,Logical Ternary Manipulation,",
            "LZ,Lorenz,",
            "MA,Monoalphabetic,",
            "MC,M209,M-209 Cipher",
            "MD,McDondald's Chicken Nugget Big Mac,McDondald’s™ Chicken Nugget Big Mac Cipher",
            "ME,Mechanical,",
            "MG,Monosodium Glutamate,",
            "MM,Mirrored Matrix,",
            "MO,Morbit,",
            "MR,Monoalphabetic Rubik's Cube,Monoalphabetic Rubik’s Cube",
            "MS,Malespín,",
            "MY,Myszkowski,Myszkowski Transposition",
            "NC,Nicodemus,",
            "ND,Notre Dame,Notre-Dame Cipher",
            "OC,OwO,",
            "PA,Pancake,Pancake Transposition",
            "PC,Parallelogram,",
            "PF,Playfair,",
            "PO,Porta,",
            "PP,Ping Pong Straddling Checkerboard,Ping-Pong Straddling Checkerboard Cipher",
            "PR,Prissy,",
            "PS,Pizza Slice,",
            "PX,Portax,",
            "PZ,Pigpen Maze,",
            "QR,Quadrant Reflection,",
            "QU,Quagmire,",
            "RA,Ragbaby,",
            "RE,Redefence,Redefence Transposition",
            "RM,Chinese Remainder,Chinese Remainder Cipher,Chinese Remainder alternate (Eltrick),(alternate)",
            "RS,RSA,",
            "RT,Route,Route Transposition",
            "RU,Rubik's Cube,Rubik’s Cube",
            "RZ,Rozier,",
            "SB,Stunted Blind Polybius,",
            "SC,Scytale,Scytale Transposition",
            "SE,Sean,",
            "SF,Slidefair,",
            "SM,Smokey,",
            "SO,Solitaire,",
            "SQ,Square,",
            "SR,Semaphore Rotation,",
            "ST,Strip,",
            "SU,Superposition,",
            "TC,Triangle,",
            "TE,Temptation Stairway,",
            "TF,Trifid,",
            "TH,Transposed Halved Polybius,",
            "TR,Tridigital,",
            "TS,Trisquare,",
            "TT,Triple Triplex Reflector,",
            "UT,Ubchi,Ubchi Transposition",
            "VA,Variety,",
            "VI,Vigenère,",
            "VP,VIC Phone,VIC Phone Cipher"
        ];
        const firstPageRows = 15;
        const secondPageRows = 30;
        const cols = 3;
        let table1 = $("table.links1");
        let table2 = $("table.links2");
        let table3 = $("table.links3");
        let c = 0;
        let r = 1;
        for (let i = 0; i < ciphers.length; r++) {
            let tr = $("<tr>");
            for (let c = 0; c < cols && i < ciphers.length; c++) {
                let ciph = ciphers[i].split(",");
                let link1 = encodeURIComponent(`Cipher Machine ${ciph[1]}.html`);
                let name1 = ciph[2].length > 0 ? ciph[2] : `${ciph[1]} Cipher`;
                let th = $("<th>").text(ciph[0]).appendTo(tr);
                let td = $("<td>").appendTo(tr);
                let hl = $(`<a href="${link1}">`).text(name1).appendTo(td);

                if (ciph.length > 4) {
                    let link2 = encodeURIComponent(`Cipher Machine ${ciph[3]}.html`);
                    let name2 = ciph[4].length > 0 ? ciph[4] : `${ciph[1]} Cipher`;
                    hl.after(" ")
                    $(`<a href="${link2}">`).text(name2).appendTo(td);
                }
                i++;
            }
            if (r > secondPageRows)
                tr.appendTo(table3);
            else if (r > firstPageRows)
                tr.appendTo(table2);
            else
                tr.appendTo(table1);
        }
    });
    </script>
    <style>
        .dark table, table {
            margin: 1em auto;
            border: none;
        }
        .strip-change-one td,
        .strip-change-one th {
            padding: .3em .5em .2em;
        }
        .tablea {
            font-size: 20px;
            width: 100%;
        }
        .rotor {
            font-size: 13px;
        }
        .reflector {
            font-size: 14px;
        }
        .alpha {
            font-size: 13px;
        }
        .beta {
            font-size: 11px;
        }

        a::after {
            font-size: .7em;
        }
        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 7'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Cipher Machine.svg" class="diagram">
                <h2>On the Subject of the Cipher Machine</h2>
                <p class="flavour-text">A machine that knows no bounds when it comes to ciphers.</p>
                <ul>
                    <li>The big screens on the left are labeled 1 - 4, top to bottom. The smaller screens on the right are labeled A - D, top to bottom.</li>
                    <li>The screen on the bottom right not only displays the current page number, but also displays what cipher it uses via a 2 letter key. It also acts like a submit button while in submission mode.</li>
                    <li>To enter submission mode, type on the module using the keyboard below. Submit the decrypted word to solve the module.</li>
                </ul>

                <p>The text on the 1st screen on page 1 is the encrypted word. This word can be 4 - 8 letters long. Each page after the first displays the cipher that the module used.</p>
                <p>Each cipher has at least 1 page to display what cipher it uses on the page number/submit button screen. Use the 2 letter key after the page number to determine which cipher it used. Then, follow the steps to decrypt the encrypted word.</p>
                <p>By default, there is a total of 3 ciphers that the word was encrypted by. Follow the instruction for each cipher in page number order to decrypt your encrypted word.</p>
                <p>Sometimes a cipher might say "Convert the letter on screen N to a Value via the Value Table". Use the letter on the Value Table to get a value from it.</p>
                <p>More often, a cipher might say "If the Boolean Expression on screen N is true...". The first letter determines the Boolean Expression it uses. Convert the letter(s) after that via the Value Table to represent X and/or Y.</p>
                <p>If a cipher says to "Create a key using the keyword and the Boolean Expression", do the following instructions:</p>
                <ul>
                    <li>1. Remove any duplicate letters from the keyword, keeping each letter’s first occurrence.</li>
                    <li>2. Then take the alphabet and remove any occurrences of all the letters in your current key.</li>
                    <li>3. If the Boolean expression is true, place the alphabet at the end of your key. Otherwise place the alphabet at the beginning of your key.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <p>On every page with a cipher (except for the last cipher), one of the letters on the keyboard will be colored yellow. The alphabetic position (A1Z26) of this letter is the result of a checksum being done on the encrypted word BEFORE applying the cipher that it is currently on. You
                    can use this to check if you apply the cipher correctly to the encrypted word. To calculate the checksum, use the equation below:</p>
                <p class="centered">(X<sub>1</sub> * 1 + X<sub>2</sub> * 2 + ... + X<sub>N</sub> * N) mod 23 + 1</p>
                <p>X is equal to the alphabetic position (A1Z26) of that letter.</p>
                <h4 class="centered">Value Table</h4>
                <table>
                    <tr><th>A</th><td>Batteries</td><th>J</th><td>1st SN Character (Base 36)</td><th>S</th><td>2nd SN Digit</td></tr>
                    <tr><th>B</th><td>Battery Holders</td><th>K</th><td>2nd SN Character (Base 36)</td><th>T</th><td>Sum of SN Digit</td></tr>
                    <tr><th>C</th><td>D Batteries</td><th>L</th><td>3rd SN Character</td><th>U</th><td>Sum of SN Letters (A1Z26)</td></tr>
                    <tr><th>D</th><td>AA Batteries / 2, rounded up</td><th>M</th><td>4th SN Character (A1Z26)</td><th>V</th><td>Sum of SN Characters (Base 36)</td></tr>
                    <tr><th>E</th><td>Indicators</td><th>N</th><td>5th SN Character (A1Z26)</td><th>W</th><td>Day of the Week* (Sunday is 0)</td></tr>
                    <tr><th>F</th><td>Lit Indicators</td><th>O</th><td>6th SN Character</td><th>X</th><td>Day*</td></tr>
                    <tr><th>G</th><td>Unlit Indicators</td><th>P</th><td>1st SN Letter (A1Z26)</td><th>Y</th><td>Month*</td></tr>
                    <tr><th>H</th><td>Ports</td><th>Q</th><td>2nd SN Letter (A1Z26)</td><th>Z</th><td>Digital Root of (Year* mod 1000)</td></tr>
                    <tr><th>I</th><td>Port Plates</td><th>R</th><td>1st SN Digit</td><th class="corner" colspan="2"></th></tr>
                </table>
                <p>*This is recorded at the time when the bomb started counting down (or up if it’s in ZEN mode).</p>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <table>
                    <tr><th>A</th><td>X is even</td></tr>
                    <tr><th>B</th><td>X is odd</td></tr>
                    <tr><th>C</th><td>X is prime</td></tr>
                    <tr><th>D</th><td>X is composite</td></tr>
                    <tr><th>E</th><td>X is part of the Fibonacci Sequence</td></tr>
                    <tr><th>F</th><td>X is NOT part of the Fibonacci Sequence</td></tr>
                    <tr><th>G</th><td>X modulo 4 is 0 or 1.</td></tr>
                    <tr><th>H</th><td>X modulo 4 is 2 or 3.</td></tr>
                    <tr><th>I</th><td>X and Y share the same parity</td></tr>
                    <tr><th>J</th><td>X and Y are opposite parities</td></tr>
                    <tr><th>K</th><td>X and Y are coprime</td></tr>
                    <tr><th>L</th><td>X and Y are NOT coprime</td></tr>
                    <tr><th>M</th><td>X is greater than or equal to Y</td></tr>
                    <tr><th>N</th><td>X is less than or equal to Y</td></tr>
                    <tr><th>O</th><td>X and Y, modulo 4, is both (0 or 1) OR (2 or 3)</td></tr>
                    <tr><th>P</th><td>X and Y, modulo 4, is (0 or 1) XOR (2 or 3)</td></tr>
                </table>
                <p>The Fibonacci sequence starts with (1, 1) and each number after is determined by the sum of the previous 2 numbers.</p>
                <p>2 numbers are coprime if the Greatest Common Divider/Denominator between them is 1.</p>
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <table class="links1"></table>
            </div>
            <div class="page-footer relative-footer">4</div>
        </div>
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <table class="links2"></table>
            </div>
            <div class="page-footer relative-footer">5</div>
        </div>
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <table class="links3"></table>
            </div>
            <div class="page-footer relative-footer">6</div>
        </div>
        <div class="page page-bg-07">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Cipher Machine</span>
            </div>
            <div class="page-content">
                <h4 class="centered">Configurable Mission Settings</h4>
                <p>This module can be customized to suit any mission maker’s needs/wants. To configure each individual Cipher Machine, use this template for each one and write it in the description of your mission:</p>
                <p class="centered">[Cipher Machine] Len = , Order = , Pick = , Ciphers = </p>
                <p>Len: A list of word lengths you would like to use. Ex: len = 47 will pick a word that has a length of either 4 or 7. The numbers have to be within the range of 4 - 8. By not writing this property, the default list it will use is 4 - 8.</p>
                <p>Order: The type of order you want the ciphers to be in. There are 4 types of orders: Fixed, Random, FixInner, FixOuter. 
                    Fixed will be in the order that you write the ciphers in the ciphers property. 
                    Random will shuffle the ciphers you write in the ciphers property. 
                    FixInner will keep the order of the ciphers in each group fixed while shuffling the order of the groups.
                    FixOuter will shuffle the order of the ciphers in each group while keeping the order of each group fixed.
                    By not writing this property, the default type will be Random.</p>
                <p>Pick: Determines how many ciphers you want to choose from the list of ciphers in the ciphers property. Can be in any of these formats: X, X/Y, A/Y, X/A. 
                   X will pick X ciphers from 1 group of ciphers.
                   X/Y will pick X groups, and then Y ciphers from each group.
                   A/Y will pick all groups, and then Y ciphers from each group.
                   X/A will pick X groups, and then all ciphers from each group.
                   By not writing this property, the default value will be the number of ciphers in the ciphers property.
                   </p>
                <p>Ciphers: A list of ciphers you would like to use in the Cipher Machine. Find the cipher you want and write the 2 letter code that is associated with it. Optionally, you can add the letter E/D to the end of it to make the cipher use the Encrypt/Decrypt rules of that cipher. By not
                    writing down the E/D, it will pick randomly between the 2. You can also use any of these letters to randomize what type of cipher you want: A, T, N. A will choose any cipher. T will choose any pure transposition cipher. N will choose any non-transposition cipher. Make sure to leave a space between each cipher. You can also split up ciphers into groups by use parentheses for ordering purposes. Ex: Ciphers = (AT FO IPD) (RZE T N), the 1st group contains Atbash, Foursquare that will randomly pick between E/D, and Incremental Polyalphabetic using Decrypt Rules while the 2nd group contains Rozier using Encrypt Rules, a random transposition cipher, and a random non-transposition cipher.
                    By not writing this property, it will choose any random cipher from the module.</p>
            </div>
            <div class="page-footer relative-footer">7</div>
        </div>
    </div>
</body>
</html>