<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Secret Santa — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <style>
        .dark table, table {
            margin: 1em auto;
            border: none;
        }
        .corner { visibility: hidden; }
        table.sep2 td:nth-child(2), table.sep2 td:nth-child(4),
        table.sep2 th:nth-child(2), table.sep2 th:nth-child(4),
        table.sep1 td:nth-child(2) { border-right-width: 4px; }

        .dark a, a {
            display: inline-block;
            margin-right: .5em;
            text-decoration: none;
            color: white;
            font-size: 80%;
            transition: color .1s;

            background: #008;
            border-radius: 50%;
            width: 1.5em;
            height: 1.5em;
            text-align: center;
            padding-left: .1em;
            box-sizing: border-box;
            font-family: monospace;
        }

        a:hover:not(.failed):not(.playing) {
            color: #ff8;
        }

        a.playing {
            color: #8f8;
        }

        a.failed {
            cursor: not-allowed;
            color: red;
        }
    </style>
    <script>
        $(function() {
            // Based on code from Samfundev’s Listening interactive
            $("table.sep2 td:nth-child(1), table.sep2 td:nth-child(3), table.sep2 td:nth-child(5)").each(function() {
                var elem = $(this);
                var audio = $("<audio>")
                    .on("error", function() {
                        button.addClass("failed");
                    })
                    .attr("src", "../HTML/audio/Secret Santa/" + elem.text().replace(/[^\w]/g, "") + ".mp3")
                    .on("ended", function() {
                        button.removeClass("playing");
                    })
                    .appendTo(elem);

                var button = $("<a href='#' class='play-button'>▶</a>")
                    .click(function() {
                        if (button.hasClass("playing")) {
                            button.removeClass("playing");
                            audio[0].pause();
                            audio[0].currentTime = 0;
                        } else {
                            button.addClass("playing");
                            audio[0].play();
                        }
                        return false;
                    })
                    .prependTo(elem);
            });
        });
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Secret Santa</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Secret Santa.svg" class="diagram">
                <h2>On the Subject of Secret Santas</h2>
                <p class="flavour-text">Presents are the best way to show someone how much you care. It is like this tangible thing that you can point to and say, “Hey man, I love you this many dollars worth.”</p>

                <ul>
                    <li>Each of the six presents arranged in the circle has a box color, ribbon color, and a sound when shaken. This sound indicates the gift that is inside the box. Each gift has a value between $10 and $99 in value.</li>
                    <li>The price ceiling and price floor have both been predetermined before the exchange, but exactly one person has gone over the maximum and exactly one other person has gone under the minimum. Only one price tag will display a price that is a valid price ceiling or valid price floor. Press the box containing this price tag to solve the module.</li>
                </ul>

                <table class="sep2">
                    <tr>
                        <th>Gift Name</th>
                        <th>Initial Price</th>
                        <th>Gift Name</th>
                        <th>Initial Price</th>
                        <th>Gift Name</th>
                        <th>Initial Price</th>
                    </tr>
                    <tr>
                        <td>Handball (10)</td>
                        <td>$10</td>
                        <td>Wine Glass</td>
                        <td>$15</td>
                        <td>5L of Soda</td>
                        <td>$18</td>
                    </tr>
                    <tr>
                        <td>Foreign Coins</td>
                        <td>$22</td>
                        <td>Kickball</td>
                        <td>$29</td>
                        <td>Live Chicken</td>
                        <td>$31</td>
                    </tr>
                    <tr>
                        <td>Walkie Talkie</td>
                        <td>$35</td>
                        <td>Cookbook</td>
                        <td>$42</td>
                        <td>Shoebill</td>
                        <td>$50</td>
                    </tr>
                    <tr>
                        <td>Pipe Bomb</td>
                        <td>$55</td>
                        <td>Tortured Soul</td>
                        <td>$59</td>
                        <td>Gold Marbles</td>
                        <td>$73</td>
                    </tr>
                    <tr>
                        <td>Toy Piano</td>
                        <td>$79</td>
                        <td>Marimba</td>
                        <td>$80</td>
                        <td>Discord Nitro</td>
                        <td>$95</td>
                    </tr>
                </table>
                <ul>
                    <li>The initial value for each gift must be modified first by its ribbon color. Use the item’s position in the above table, shifted via its ribbon color:</li>
                </ul>
                <table style="text-align:center;">
                    <tr>
                        <td>Reverse the digits.</td>
                        <td>Do nothing.</td>
                        <td>Average with $50, drop decimals.</td>
                    </tr>
                    <tr>
                        <td>Add the digital root*.</td>
                        <td>Reverse the digits.</td>
                        <td>Add $20.</td>
                    </tr>
                    <tr>
                        <td>Subtract $10.</td>
                        <td>Add $10.</td>
                        <td>Reverse the digits.</td>
                    </tr>
                    <tr>
                        <td>Reverse the digits.</td>
                        <td>Subtract $20.</td>
                        <td>Subtract the digital root*.</td>
                    </tr>
                    <tr>
                        <td>Divide by $5.</td>
                        <td>Reverse the digits.</td>
                        <td>Subtract from $100.</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Secret Santa</span>
            </div>
            <div class="page-content">
                <table style="text-align:center;">
                    <tr>
                        <td class="corner"></td>
                        <td style="height:75px;width:75px;">Gold</td>
                        <td class="corner"></td>
                    </tr>
                    <tr>
                        <td style="height:75px;width:75px;">Silver</td>
                        <td style="font-size:40px;">✥</td>
                        <td style="height:75px;width:75px;">White</td>
                    </tr>
                    <tr>
                        <td class="corner"></td>
                        <td style="height:75px;width:75px;">Bronze</td>
                        <td class="corner"></td>
                    </tr>
                </table>
                <ul>
                    <li>For each gift giver, take the color of the gift currently in their position, add the digital root of its current calculated value, and call this T:
                    <ul>
                        <li>If the gift currently in the recipient’s position has a calculated value of less than $45, subtract T from the recipient’s gift’s value. If this would result in the gift’s value being less than $10, add T instead.</li>
                        <li>If the gift currently in the recipient’s position has a calculated value of $45 or greater, add T to the recipient’s gift’s value. If this would result in the gift’s value being greater than $99, subtract T instead.</li>
                    </ul>
                    </li>
                </ul>
                <table class="sep1" style="text-align:center">
                    <tr>
                        <td>Red</td>
                        <td>12</td>
                        <td>Green</td>
                        <td>25</td>
                    </tr>
                    <tr>
                        <td>Orange</td>
                        <td>15</td>
                        <td>Blue</td>
                        <td>18</td>
                    </tr>
                    <tr>
                        <td>Yellow</td>
                        <td>22</td>
                        <td>Purple</td>
                        <td>7</td>
                    </tr>
                </table>
                <p style="margin-top:250px;font-size:12px;">*The digital root is the repeated sum of digits in a number until said number is a singular digit long.</p>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
</body>
</html>