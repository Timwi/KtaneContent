<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>虹色矢印 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        table {
            margin-top: 1em;
            margin-bottom: 1em;
            font-size: 0.875em;
        }

        table .inner-table {
            float: right;
            margin: 1em;
            font-size: 0.9em;
        }

        .maze {
            float: right;
            width: 190px;
        }
        .dark svg line { stroke: #DDD; }
        .dark svg text { fill: #DDD; }

        th.sideways {
            width: 8px;
        }
        th.sideways div.cardinal {
            position: absolute;
            transform-origin: 8px 12px;
            transform: rotate(270deg);
        }
        th.sideways div.diagonal {
            position: absolute;
            transform-origin: 18px 22px;
            transform: rotate(270deg);
        }

        .continued {
            text-align: right;
            font-style: italic;
            font-size: 10pt;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">虹色矢印</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Rainbow Arrows.svg" class="diagram">
                <h2>モジュール詳細：虹色矢印</h2>
                <p class="flavour-text">ポイントはポイントのないポイント。</p>

                <p class="appendix-reference" id="appendix-reference">
                    インジケーターを確認するには「付録A」を参照すること。<br>
                    バッテリーの種類を確認するには「付録B」を参照すること。<br>
                    ポートの種類を確認するには「付録C」を参照すること。<br>
                    これらの付録はこのマニュアルではなく、公式マニュアルに掲載されている。
                </p>

                <ul>
                    <li>このモジュールは、虹色に彩られた8つの矢印ボタンと2桁の数字を表示するディスプレーが中央にある。</li>
                    <li>白色の矢印ボタンの位置を用いて、下の表の開始ルールを特定する。</li>
                    <li>それぞれのルールの方向に従い、押すべき矢印を特定する。</li>
                    <li>虹色のパターンが時計回りの場合、押した後に毎回1つ下のルールに移動する。そうでない場合、代わりに上に移動する。表は循環している。</li>
                    <li>全ての矢印を押す回数は一回ずつでなければならない。既に押されたことがある矢印を押すようにルールが求めた場合、代わりにまだ押されていない、どちらかの方向に最も近い矢印を押す。距離が同じ場合、虹色のパターンと同じ方向に進んで到達した矢印を利用する。</li>
                    <li>間違った矢印ボタンを押すとミスが記録され、その時点での全ての入力をリセットする。しかし、ディスプレーの数字と矢印の色は変化しない。</li>
                    <li>各矢印ボタンが一回ずつ正しく押されると、モジュールは解除される。</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">虹色矢印</span>
            </div>
            <div class="page-content">
                <table>
                    <tr>
                        <th class="sideways">開始</th>
                        <th><br>ルール<br></th>
                    </tr>
                    <tr>
                        <th class="sideways">北</th>
                        <td class="nohighlight">
                            <div class="maze">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="-1 -1 102 82">
                                    <g stroke="black" stroke-linecap="round" stroke-width="1">
                                        <line x1="20" y1="0"  x2="80" y2="0"  />
                                        <line x1="0"  y1="20" x2="20" y2="20" />
                                        <line x1="80" y1="20" x2="100" y2="20" />
                                        <line x1="0"  y1="60" x2="20" y2="60" />
                                        <line x1="80" y1="60" x2="100" y2="60" />
                                        <line x1="20" y1="80" x2="80" y2="80" />

                                        <line x1="0"  y1="20" x2="0"  y2="60" />
                                        <line x1="20" y1="0"  x2="20" y2="20" />
                                        <line x1="20" y1="60" x2="20" y2="80" />
                                        <line x1="80" y1="0"  x2="80" y2="20" />
                                        <line x1="80" y1="60" x2="80" y2="80" />
                                        <line x1="100" y1="20" x2="100" y2="60" />
                                        <line x1="20" y1="10" x2="40" y2="10" />
                                        <line x1="40" y1="20" x2="50" y2="20" />
                                        <line x1="20" y1="30" x2="30" y2="30" />
                                        <line x1="70" y1="30" x2="80" y2="30" />
                                        <line x1="10" y1="40" x2="40" y2="40" />
                                        <line x1="60" y1="40" x2="70" y2="40" />
                                        <line x1="80" y1="40" x2="90" y2="40" />
                                        <line x1="0"  y1="50" x2="30" y2="50" />
                                        <line x1="50" y1="50" x2="60" y2="50" />
                                        <line x1="70" y1="50" x2="80" y2="50" />
                                        <line x1="90" y1="50" x2="100" y2="50" />
                                        <line x1="30" y1="60" x2="50" y2="60" />
                                        <line x1="60" y1="60" x2="80" y2="60" />
                                        <line x1="40" y1="70" x2="60" y2="70" />

                                        <line x1="10" y1="30" x2="10" y2="40" />
                                        <line x1="20" y1="20" x2="20" y2="30" />
                                        <line x1="30" y1="20" x2="30" y2="30" />
                                        <line x1="30" y1="70" x2="30" y2="80" />
                                        <line x1="40" y1="10" x2="40" y2="20" />
                                        <line x1="40" y1="30" x2="40" y2="50" />
                                        <line x1="50" y1="0"  x2="50" y2="10" />
                                        <line x1="50" y1="20" x2="50" y2="30" />
                                        <line x1="50" y1="40" x2="50" y2="60" />
                                        <line x1="60" y1="10" x2="60" y2="40" />
                                        <line x1="60" y1="60" x2="60" y2="70" />
                                        <line x1="70" y1="0"  x2="70" y2="30" />
                                        <line x1="70" y1="40" x2="70" y2="50" />
                                        <line x1="70" y1="70" x2="70" y2="80" />
                                        <line x1="80" y1="30" x2="80" y2="40" />
                                        <line x1="80" y1="50" x2="80" y2="60" />
                                        <line x1="90" y1="20" x2="90" y2="30" />
                                    </g>
                                    <g style="font-size:7px;font-style:italic;text-anchor:middle;">
                                        <text x="24.5" y= "7.5">1</text>
                                        <text x="74.5" y= "7.5">2</text>
                                        <text x= "4.5" y="27.5">3</text>
                                        <text x="24.5" y="27.5">4</text>
                                        <text x="94.5" y="27.5">5</text>
                                        <text x= "4.5" y="57.5">6</text>
                                        <text x="74.5" y="57.5">7</text>
                                        <text x="94.5" y="57.5">8</text>
                                        <text x="24.5" y="77.5">9</text>
                                        <text x="74.5" y="77.5">0</text>
                                    </g>
                                    <g fill="transparent">
                                        <rect class="highlightable" x="20" y="0" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="0" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="0" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="0" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="0" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="0" width="10" height="10" />

                                        <rect class="highlightable" x="20" y="10" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="10" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="10" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="10" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="10" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="10" width="10" height="10" />

                                        <rect class="highlightable" x="0"  y="20" width="10" height="10" />
                                        <rect class="highlightable" x="10" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="20" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="80" y="20" width="10" height="10" />
                                        <rect class="highlightable" x="90" y="20" width="10" height="10" />

                                        <rect class="highlightable" x="0"  y="30" width="10" height="10" />
                                        <rect class="highlightable" x="10" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="20" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="80" y="30" width="10" height="10" />
                                        <rect class="highlightable" x="90" y="30" width="10" height="10" />

                                        <rect class="highlightable" x="0"  y="40" width="10" height="10" />
                                        <rect class="highlightable" x="10" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="20" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="80" y="40" width="10" height="10" />
                                        <rect class="highlightable" x="90" y="40" width="10" height="10" />

                                        <rect class="highlightable" x="0"  y="50" width="10" height="10" />
                                        <rect class="highlightable" x="10" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="20" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="80" y="50" width="10" height="10" />
                                        <rect class="highlightable" x="90" y="50" width="10" height="10" />

                                        <rect class="highlightable" x="20" y="60" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="60" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="60" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="60" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="60" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="60" width="10" height="10" />

                                        <rect class="highlightable" x="20" y="70" width="10" height="10" />
                                        <rect class="highlightable" x="30" y="70" width="10" height="10" />
                                        <rect class="highlightable" x="40" y="70" width="10" height="10" />
                                        <rect class="highlightable" x="50" y="70" width="10" height="10" />
                                        <rect class="highlightable" x="60" y="70" width="10" height="10" />
                                        <rect class="highlightable" x="70" y="70" width="10" height="10" />
                                    </g>
                                </svg>
                            </div>
                           ディスプレーの右の数字を右の迷路のスタートの四角に使用して、シリアルナンバーの最後の数字を含む四角へ、最も少ない移動回数で誘導する。
                            <br>
                            2つの数字が同じ場合、スタートの四角の迷路中央から見た位置に対応した斜め方向の矢印を押し、このセクションの残りを無視する。そうでない場合：
                            <ul>
                                <li>最初2回の移動が同じ軸に沿っている場合、最初の移動方向の矢印から開始する。</li>
                                <li>最初2回の移動が異なる軸に沿っている場合、最初2回の移動を組み合わせた斜め方向の矢印から開始する。</li>
                            </ul>
                            開始矢印から、求めた移動回数の半分(小数点以下切り捨て)と同じ回数だけ時計回りに移動しその位置の矢印を押す。
                        </td>
                    </tr>
                    <tr>
                        <th class="sideways">北東</th>
                        <td>
                            ディスプレーの数字に4を掛けて、360で割った余りを求める。<br>
                            白い矢印の中心から、その度数だけ時計回りに回転させ、その位置から最も近い矢印を押す。 <strong>しかし</strong>、これが4番目または8番目に使用されるルールの場合、代わりにその位置の真逆の位置の矢印を押す。
                        </td>
                    </tr>
                    <tr>
                        <th class="sideways">東</th>
                        <td>
                            以下に従い、最下位から最上位へ、4桁のバイナリ(二進数)を組み立てる。
                            <ul>
                                <li>この時点までに任意の斜めの矢印が押されていたら、ビット1は1である。</li>
                                <li>パラレルポートまたはシリアルポートが存在する場合、ビット2は1である。</li>
                                <li>ディスプレーの数字が(バッテリーの数+1)の倍数の場合、ビット3は1である。</li>
                                <li>少なくともポートプレートの枚数分バッテリーホルダーがある場合、ビット4は1である。</li>
                            </ul>
                            インジケーターの数だけ求めた二進数を右にずらし(最下位の値は最上位に移動する)、十進数に変換する。その数だけ北から時計回りに移動させ、その位置の矢印を押す。
                        </td>
                    </tr>
                    <tr>
                        <th class="sideways">南東</th>
                        <td>
                            これが開始ルールの場合、白の矢印を押す。
                            <br>
                            そうでない場合、最後に押された矢印から、まだ押されていない矢印に到達するまで反時計回りに進む。そして、これまでに押された矢印の数と同じだけ時計回りに移動し、その位置の矢印を押す。</td>
                    </tr>
                </table>
                <p class="continued">次のページへ進む…。</p>
            </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">虹色矢印</span>
            </div>
            <div class="page-content">
                <table>
                    <tr>
                        <th class="sideways">開始</th>
                        <th><br>ルール<br></th>
                    </tr>
                    <tr>
                        <th class="sideways">南</th>
                        <td>
                            白の矢印から時計回りに全ての矢印にAからHの文字を割り当てる。そして、「ABCDEFGH」の文字列から開始し、以下の方法によってこれを調整する：
                            <ul>
                                <li>シリアルナンバーに存在する文字を、シリアルナンバーに登場する順番で文字列の先頭に配置する。</li>
                                <li>シリアルナンバーの最後の数字が偶数なら、シリアルナンバーの最初の数字だけ文字列を右にずらす。</li>
                                <li>バッテリーの個数が奇数の場合、奇数番目の全ての文字を、登場した順番で文字列の先頭に配置する。</li>
                                <li>北か南に母音が割り当てられているなら、文字列を反転させる。</li>
                            </ul>
                            その後、文字列で<i>n</i>番目の文字が割り当てられた矢印を押す。<i>n</i>はディスプレーの数字の数字根から1を引いた数である(<i>n</i>が0以下の場合、1を用いる)。
                        </td>
                    </tr>
                    <tr>
                        <th class="sideways">南西</th>
                        <td class="nohighlight">
                            <table style="float:right;border-top:none;border-bottom:none;">
                                <tr>
                                    <th>単語</th>
                                    <th>#</th>
                                    <th style="border:none"></th>
                                    <th>単語</th>
                                    <th>#</th>
                                </tr>
                                <tr>
                                    <td>RED(赤色)</td>
                                    <td>1</td>
                                    <td style="border:none"></td>
                                    <td>BLUE(青色)</td>
                                    <td>5</td>
                                </tr>
                                <tr>
                                    <td>ORANGE(橙色)</td>
                                    <td>2</td>
                                    <td style="border:none"></td>
                                    <td>INDIGO(藍色)</td>
                                    <td>6</td>
                                </tr>
                                <tr>
                                    <td>YELLOW(黄色)</td>
                                    <td>3</td>
                                    <td style="border:none"></td>
                                    <td>PURPLE(紫色)</td>
                                    <td>7</td>
                                </tr>
                                <tr>
                                    <td>GREEN(緑色)</td>
                                    <td>4</td>
                                    <td style="border:none"></td>
                                    <td>DOUBLE(ダブル)</td>
                                    <td>8</td>
                                </tr>
                            </table>
                            右の表の各単語に対して、シリアルナンバーに存在する文字の数を特定し、名前が「＜単語＞矢印(＜WORD＞ Arrows)」のモジュールの数を足す。最大の値を取得して表内の単語の横の数字を参照する。同点がある場合、低い方の値を用いる。
                            <br>
                            白の矢印から、その数だけ虹色のパターンと同じ方向に進む。そして、その位置の矢印を押す。
                        </td>
                    </tr>
                    <tr>
                        <th class="sideways">西</th>
                        <td class="nohighlight">
                            <table class="inner-table">
                                <tr><td>yoked</td><td>white</td><td>poets</td><td>xysti</td></tr>
                                <tr><td>lower</td><td>tango</td><td>magic</td><td>joust</td></tr>
                                <tr><td>farce</td><td>along</td><td>quirk</td><td>hotel</td></tr>
                                <tr><td>zeros</td><td>royal</td><td>bravo</td><td>vault</td></tr>
                            </table>
                            右の表を用いて、シリアルナンバーと共通する異なる文字の数が最も多い単語を探す。複数ある場合、読み順で最初の単語を用いる。そして、アルファベットで<i>n</i>番目の文字を取得する。<i>n</i>はディスプレーの数字を26で割った余りに1を加えた数である。
                            <br>

                            与えられた単語に隣接する単語(直交または斜め)がその文字から始まる場合、その単語が示す方向の矢印を押す。そうでない場合、アルファベットの次の文字を用いて、そのような単語が見つかるまで繰り返す。必要であればZからAに循環する。表は循環<i>しない</i>。
                            </td>
                    </tr>
                    <tr>
                        <th class="sideways">北西</th>
                        <td>
                            画面から別々に2つの数字を取得し、爆弾のシリアルナンバーと比較する。
                            <br>
                            モジュール上の両方の数字が存在する場合、北を押す。
                            <br>
                            左の数字のみが存在する場合、西を押す。
                            <br>
                            右の数字のみが存在する場合、東を押す。
                            <br>
                            いずれも存在しない場合、南を押す。
                        </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>
</html>
