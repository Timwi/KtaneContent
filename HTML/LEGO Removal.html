<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>LEGO Removal — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        table {
            margin: 0.4em;            
            border: none;             
        }

		ul, ol { margin-top: 0em; margin-bottom: 0em; }
        
		ol.LEGO { margin-left: -1em; }
		ul.LEGO { margin-left: -1em; }

        td {
            text-align: center;
        }
        
		table.ex-sequence td,th { 
			border: 1px solid white;
		}
		table.ex-sequence2 td,th { 
			border: 1px solid white;
			text-align: left;
			align: center;
		}

		table.color-palette td,th {
			width: 124.8px;
			border: none;
			height: 60px;
		}

		td.col {
			border: 1px solid black !important;
			font-weight: bold;
		}

        svg.grid { width: 200px; }
        svg text {
            user-select: none;
            pointer-events: none;
        }

        .dark svg.grid path {
            stroke: #DDD;
        }
        .dark svg.grid text {
            fill: #DDD;
        }

        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 4'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">LEGO Removal</span>
            </div>
            <div class="page-content">
                <img src="img/Component/LEGO Removal.svg" class="diagram">
                <h2>On the Subject of LEGO Removal</h2>
                <p class="flavour-text">You know, people always talk about how painful it is to step on LEGOs. Personally, I think being blown up by them is worse.</p>
                <p>A structure of randomly stacked and assorted LEGO bricks is placed onto a multi-colored 16×16 baseplate. 
				The structure is made up of 42-70 bricks, and is 7-10 layers tall. The baseplate also has three screens and a button.
				<br>Each brick will be one of 12 sizes from the list in <u>Appendix BRICK</u> on page 3, 
				and one of 28 colors from the palette in <u>Appendix COLOR</u> on page 4. </p>
				<p> In order to solve the module, 
				the defuser must dismantle the structure while 
				following three different sequences and an incrementer: </p>
				<ol class="LEGO">
                    <li><u>Base Sequence</u>:</li>
                        <ul class="LEGO">
                            <li>A sequence of digits 0-3, each standing for different removal orders.</li>
							<ul class="LEGO">
							<li><b>0: Color ID</b></li>
								<ul>
									<li>Remove selectables by their Color ID (<u>Appendix COLOR</u>).</li>
								</ul>
							<li><b>1: Size (area)</b></li>
								<ul>
									<li>Remove selectables by their area in studs (<u>Appendix BRICK</u>).</li>
								</ul>
							<li><b>2: Support Studs</b></li>
								<ul>
									<li>Calculate the # of brick studs each selectable is placed on top of. </li>
								</ul>
							<li><b>3: Layer Number</b></li>
								<ul>
									<li>Determine what layer each selectable is placed in.</li>
									<li>The bottom layer is 0, and the top layer will be between 6-9.</li>
								</ul>
							</ul>
                        </ul>
                    <li><u>Direction</u>:</li>
					    <ul>
                            <li>A binary sequence, applied to digits in <u>Base Sequence</u>.</li>
								<ul>
									<li>1 = lowest value first, 0 = highest value first.</li>
								</ul>
                        </ul>

					<li><u>Increment Brick</u>:</li>
					    <ul>
                            <li>A specific size brick. Removing it from the structure will point the module to 
							the next digit in <u>Base Sequence</u> and <u>Direction</u>, looping to the first digit after passing the last one.</li>
                        </ul>
                </ol>
				<p>Attempting to remove a brick in the wrong order will incur a strike. 
				This resets each sequence to the first digit, and resets the Increment Brick. 
				The brick you attempted to remove will be left in its place. Example below: </p>
				<table style="margin: 0px auto;" class="ex-sequence2">
					<tbody>
						<tr> 
							<td style="text-align: right;"> Type of Brick removed:</td>
							<td> Valid </td>
							<td> Valid </td>
							<td> Inc. </td>
							<td> Inc. </td>
							<td> Inc. </td>
							<td> Inc. </td>
							<td> Invalid </td>
						</tr>
						<tr>
							<td style="text-align: right;"> Base Sequence: <br>Direction:<br>&nbsp;</td>
							<td> <u><b>2</b></u>31<br>	
							     <u><b>0</b></u>10<br>	
							     ^
						    </td>
							<td> <u><b>2</b></u>31<br>	
							     <u><b>0</b></u>10<br>	
							     ^
						    </td>
							<td> 2<u><b>3</b></u>1<br>	
							     0<u><b>1</b></u>0<br>	
							     &nbsp;&nbsp;^
						    </td>
							<td> 23<u><b>1</b></u><br>	
							     01<u><b>0</b></u><br>	
							     &nbsp;&nbsp;&nbsp;&nbsp;^
						    </td>
							<td> <u><b>2</b></u>31<br>	
							     <u><b>0</b></u>10<br>	
							     ^
						    </td>
							<td> 2<u><b>3</b></u>1<br>	
							     0<u><b>1</b></u>0<br>	
							     &nbsp;&nbsp;^
						    </td>
							<td> <u><b>2</b></u>31<br>	
							     <u><b>0</b></u>10<br>	
							     ^
						    </td>
						</tr>
					</tbody>
				</table>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">LEGO Removal</span>
            </div>
            <div class="page-content">
				<ol>
					<li>Use the serial # to find the <u>Base Sequence</u>.</li>
					<ul>
						<li>Remove each letter from the serial #.</li>
							<ul><li>“81ACH7” ⇒ “817”</li></ul>
						<li>Replace each digit with the result of this formula:</li>
							<ul><li>(digit + (# of Beams)) mod 4</li></ul>
					</ul> <br>

					<li>Use the serial # to find the <u>Direction</u>.</li>
					<ul>
						<li>Remove each number from the serial #.</li>
							<ul><li>“81ACH7” ⇒ “ACH”</li></ul>
						<li>Convert each letter from Base-36 to Base-10 (A=10, Z=35),
						<br>then replace each with the result of this formula:</li>
							<ul><li>(letter + (# of Stud bricks)) mod 2</li></ul>
					    <li>If the <u>Direction</u> and <u>Base Sequence</u> are of different lengths, <br>you must loop accordingly.</li>
					</ul>
				<table class="ex-sequence">
					<tbody>
						<tr>
							<td> Ex. </td>
							<td> Base Sequence: </td>
							<td> 3210 </td>
							<td> 3, 2, 1, 0&hellip; </td>
							<td> Layer </td>
							<td> Supp. </td>
							<td> Size </td>
							<td> Color </td>
						</tr>
						<tr>
							<td> &nbsp; </td>
							<td> Direction: </td>
							<td> 01 </td>
							<td> 0, 1, 0, 1&hellip; </td>
							<td> High </td>
							<td> Low </td>
							<td> High </td>
							<td> Low </td>
						</tr>
					</tbody>
				</table>
					<li>Find the <u>Increment Brick.</u></li>
					<ul>
						<li>Take the sum of each brick’s size on the current topmost layer,
						<br>modulo 12, then plug it into the brick list in <u>Appendix BRICK</u>. </li>
							<ul><li>0 = the Stud, 11 = the 2×4</li></ul>
						<li>The increment brick will reset upon a strike.</li>
					</ul>
				</ol> 
				<p><br>Only selectables are considered when following sequences 
				(bricks with nothing placed on top of them). If removing a brick completely uncovers another, 
				it becomes a new selectable and is now a part of the sequence. 
				Bricks of the same value may be removed in any order.<br><br></p>

				<h3>The Button</h3>
                <p>Clicking the button will highlight every selectable brick. 
				It’s highly probable for selectables to be hidden behind other bricks, 
				so take care in making sure every selectable is accounted for.</p>
				
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
		<div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">LEGO Removal</span>
            </div>
            <div class="page-content">
				<h2>Appendix BRICK</h2>
				<p>Any of these bricks could appear in the structure.
				In the list below is a top-down view of each brick, 
				plus a side view if they are a 1×1.</p>
				<p>A Beam has a size of 3, and the layer it belongs to is the layer of its base.
				<br>All other 1×1s have a size of 1. Singles placed atop one another will never be
				the same color, and nothing can be placed atop the Stud brick. All other bricks act normally.</p><br><br>
				<img class="centered-img" width="100%" height="100%" src="img/LEGO Removal/legoSizes.svg">
            </div>
            <div class="page-footer relative-footer">3</div>
		</div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">LEGO Removal</span>
            </div>
            <div class="page-content">
				<h2>Appendix COLOR</h2>
				<p>The palette is in ROYGBIV order, plus white. 
				Each color starts with its transparent material, 
				then moves from its shade to its tint. </p>
				<p>Hovering over a brick will display its Color ID on the three screens. 
				<br> "Bright Red," would be displayed on the screens as, “002.”</p>
				<table class="color-palette">
                    <tr>
						<td class="col" style="background-color: #e51f25; color: white;"> T 0 <br> Red </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #7f131f; color: white;"> 1 <br> Maroon </td>
						<td class="col" style="background-color: #e51f25; color: white;"> 2 <br> Bright Red </td>
						<td> &nbsp; </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #e78809;"> T 10 <br> Orange </td>
						<td> &nbsp; </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #e78809;"> 13 <br> Orange </td>
						<td> &nbsp; </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #ffcd03;"> T 20 <br> Yellow </td>
						<td> &nbsp; </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #ffcd03;"> 24 <br> Brgt. Yellow </td>
						<td class="col" style="background-color: #ffeea1;"> 26 <br> Vanilla </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #09a963;"> T 30 <br> Green </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #185436; color: white;"> 32 <br> Earth Green </td>
						<td class="col" style="background-color: #09a963;"> 34 <br> Jade Green </td>
						<td class="col" style="background-color: #a5e2b1;"> 36 <br> Mint </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #49a7ff;"> T 40 <br> Blue </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #003b6d; color: white;"> 42 <br> Earth Blue </td>
						<td class="col" style="background-color: #386dff;"> 44 <br> Azure </td>
						<td class="col" style="background-color: #7fc1ff;"> 46 <br> Cornflower </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #4508ff; color: white;"> T 60 <br> Indigo </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #180278; color: white;"> 62 <br> Night Blue </td>
						<td class="col" style="background-color: #4508ff; color: white;"> 64 <br> Indigo </td>
						<td> &nbsp; </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #9e588d; color: white;"> T 70 <br> Violet </td>
						<td> &nbsp; </td>
						<td class="col" style="background-color: #730a62; color: white;"> 71 <br> Dark Plum </td>
						<td class="col" style="background-color: #9e588d; color: white;"> 72 <br> Violet </td>
						<td class="col" style="background-color: #f9b2db;"> 73 <br> Bright Pink </td>
					</tr>
					<tr>
						<td class="col" style="background-color: #ffffff;"> T 100 <br> White </td>
						<td class="col" style="background-color: #000000; color: white;"> 120 <br> Black </td>
						<td class="col" style="background-color: #616161; color: white;"> 140 <br> Dark Stone </td>
						<td class="col" style="background-color: #c9c9c9;"> 160 <br> Light Stone </td>
						<td class="col" style="background-color: #ffffff;"> 200 <br> White </td>
					</tr>
                </table>
            </div>
            <div class="page-footer relative-footer">4</div>
        </div>
    </div>
</body>
</html>