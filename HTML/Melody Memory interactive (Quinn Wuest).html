<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Melody Memory — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <style>
        .dark table, table {
            border: none;
            margin-left: auto;
            margin-right: auto;
            text-align: center;
        }
        @media screen and (min-width: 900px) {
            .half-column {
                float: left;
                width: 45%;
                padding-right: 5%;
            }
        }
        @media print {
            .half-column {
                float: left;
                width: 45%;
                padding-right: 5%;
            }
        }
        a.play-button {
            margin-left: .5em;
            text-decoration: none;
            color: white;
            font-size: 80%;
            transition: color .1s;

            background: #008;
            border-radius: 50%;
            width: 1.5em;
            height: 1.5em;
            text-align: center;
            padding-left: .1em;
            box-sizing: border-box;
            font-family: monospace;
            float: right;
        }

        a:hover:not(.failed):not(.playing) {
            color: #ff8;
        }

        a.playing {
            color: #8f8;
        }

        a.failed {
            cursor: not-allowed;
            color: red;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Melody Memory</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Melody Memory.svg" class="diagram">
                <h2>On the Subject of Melody Memory</h2>
                <p class="flavour-text">Music make you lose control!</p>
                <ul>
                    <li>This module consists of 4 keys, a play button, a record button, and LEDs indicating the progression of the module. Complete all 5 stages to disarm the module.</li>
                    <li>The 4 keys, when pressed, play 4 different notes, each using a different instrument. The keys can be pressed freely without consequence - input will only be recorded for a stage after the record button is pressed.</li>
                    <li>The play button will play one of the notes present, but with an instrument not present on the module. Use the instrument that plays this note and the color of the key that makes this note in the table below to obtain a letter.</li>
                </ul>
                <table>
                    <tr>
                        <th class='corner'></th>
                        <th>1</th>
                        <th>2</th>
                        <th>3</th>
                        <th>4</th>
                        <th>Red</th>
                        <th>Yellow</th>
                        <th>Green</th>
                        <th>Blue</th>
                    </tr>
                    <tr>
                        <th>Accordion</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>A</td>
                        <td>C</td>
                        <td>B</td>
                        <td>D</td>
                    </tr>
                    <tr>
                        <th>Acoustic Guitar</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>A</td>
                        <td>B</td>
                        <td>C</td>
                        <td>D</td>
                    </tr>
                    <tr>
                        <th>Cello</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>B</td>
                        <td>C</td>
                        <td>A</td>
                        <td>D</td>
                    </tr>
                    <tr>
                        <th>Electric Guitar</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>A</td>
                        <td>D</td>
                        <td>C</td>
                        <td>B</td>
                    </tr>
                    <tr>
                        <th>French Horn</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>C</td>
                        <td>D</td>
                        <td>A</td>
                        <td>B</td>
                    </tr>
                    <tr>
                        <th>Organ</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>B</td>
                        <td>A</td>
                        <td>D</td>
                        <td>C</td>
                    </tr>
                    <tr>
                        <th>Piano</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>B</td>
                        <td>D</td>
                        <td>A</td>
                        <td>C</td>
                    </tr>
                    <tr>
                        <th>Sitar</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>D</td>
                        <td>B</td>
                        <td>A</td>
                        <td>C</td>
                    </tr>
                    <tr>
                        <th>Trumpet</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>C</td>
                        <td>D</td>
                        <td>B</td>
                        <td>A</td>
                    </tr>
                    <tr>
                        <th>Violin</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>B</td>
                        <td>D</td>
                        <td>C</td>
                        <td>A</td>
                    </tr>
                    <tr>
                        <th>Voice</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>D</td>
                        <td>C</td>
                        <td>B</td>
                        <td>A</td>
                    </tr>
                    <tr>
                        <th>Xylophone</th>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td></td>
                        <td>D</td>
                        <td>B</td>
                        <td>C</td>
                        <td>A</td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Melody Memory</span>
            </div>
            <div class="page-content">
                <p>Use the list corresponding to the letter obtained and the current stage to get a key to press.</p>
                <div class='half-column'>
                    <strong>A:</strong>
                    <ol>
                        <li>The red key</li>
                        <li>The key in the position of the green key in stage 1</li>
                        <li>The key with the pitch of the blue key in stage 2</li>
                        <li>The key with the same color as the one pressed in stage 3</li>
                        <li>The key with the color of the key in stage 4 that had the pitch of the yellow key in stage 1</li>
                    </ol>
                    <strong>C:</strong>
                    <ol>
                        <li>The key with the instrument listed third in the table out of the ones present</li>
                        <li>The key with the instrument closest in the table to the instrument of the key pressed in stage 1</li>
                        <li>The key with the instrument closest in the table to the instrument of the red key in stage 2</li>
                        <li>The key with the instrument closest in the table to the instrument of the key with the 2nd lowest pitch in stage 3</li>
                        <li>The key with the instrument closest in the table to the instrument of the key in the 2nd position in stage 4</li>
                    </ol>
                </div>
                <div class='half-column'>
                    <strong>B:</strong>
                    <ol>
                        <li>The key with the 2nd highest pitch</li>
                        <li>The key with the color of the key in stage 1 that had the lowest pitch</li>
                        <li>The key with the pitch of the key pressed in stage 2</li>
                        <li>The key with the opposite pitch to the pitch of the blue key in stage 3</li>
                        <li>The key with the position of the key in stage 4 that had the same color as the key pressed in stage 3</li>
                    </ol>
                    <strong>D:</strong>
                    <ol>
                        <li>The key in the 4th position</li>
                        <li>The key with the color of the key in the 3rd position in stage 1</li>
                        <li>The key with the pitch of the key in the 1st position in stage 2</li>
                        <li>The key in the position in stage 3 that had the color of the key pressed in stage 1</li>
                        <li>The key in the position of the key in stage 4 that had the pitch of the key in stage 2 that had the color of the key pressed in stage 3</li>
                    </ol>
                    <p>N.B.: In any rules that refer to the proximity of instruments, if there is a tie, use the left-most key.</p>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 2 of 2</div>
        </div>
    </div>
    <script>
        const sounds = [
            "Assets_Sounds_accordion1.mp3",
            "Assets_Sounds_accordion2.mp3",
            "Assets_Sounds_accordion3.mp3",
            "Assets_Sounds_accordion4.mp3",
            "Assets_Sounds_acousticguitar1.mp3",
            "Assets_Sounds_acousticguitar2.mp3",
            "Assets_Sounds_acousticguitar3.mp3",
            "Assets_Sounds_acousticguitar4.mp3",
            "Assets_Sounds_cello1.mp3",
            "Assets_Sounds_cello2.mp3",
            "Assets_Sounds_cello3.mp3",
            "Assets_Sounds_cello4.mp3",
            "Assets_Sounds_electricguitar1.mp3",
            "Assets_Sounds_electricguitar2.mp3",
            "Assets_Sounds_electricguitar3.mp3",
            "Assets_Sounds_electricguitar4.mp3",
            "Assets_Sounds_frenchhorn1.mp3",
            "Assets_Sounds_frenchhorn2.mp3",
            "Assets_Sounds_frenchhorn3.mp3",
            "Assets_Sounds_frenchhorn4.mp3",
            "Assets_Sounds_organ1.mp3",
            "Assets_Sounds_organ2.mp3",
            "Assets_Sounds_organ3.mp3",
            "Assets_Sounds_organ4.mp3",
            "Assets_Sounds_piano1.mp3",
            "Assets_Sounds_piano2.mp3",
            "Assets_Sounds_piano3.mp3",
            "Assets_Sounds_piano4.mp3",
            "Assets_Sounds_sitar1.mp3",
            "Assets_Sounds_sitar2.mp3",
            "Assets_Sounds_sitar3.mp3",
            "Assets_Sounds_sitar4.mp3",
            "Assets_Sounds_trumpet1.mp3",
            "Assets_Sounds_trumpet2.mp3",
            "Assets_Sounds_trumpet3.mp3",
            "Assets_Sounds_trumpet4.mp3",
            "Assets_Sounds_violin1.mp3",
            "Assets_Sounds_violin2.mp3",
            "Assets_Sounds_violin3.mp3",
            "Assets_Sounds_violin4.mp3",
            "Assets_Sounds_voice1.mp3",
            "Assets_Sounds_voice2.mp3",
            "Assets_Sounds_voice3.mp3",
            "Assets_Sounds_voice4.mp3",
            "Assets_Sounds_xylophone1.mp3",
            "Assets_Sounds_xylophone2.mp3",
            "Assets_Sounds_xylophone3.mp3",
            "Assets_Sounds_xylophone4.mp3"
        ];
        
        let index = 0;
        $("table").slice(0, 1).find("td:nth-child(2), td:nth-child(3), td:nth-child(4), td:nth-child(5)").each(function() {
            var elem = $(this);
            var i = Math.floor(index / 2);
            if (i <= 60)
                var audio = $("<audio>")
                    .on("error", function() {
                        button.addClass("failed");
                    })
                    .attr("src", "audio/Melody Memory/" + sounds[index])
                    .on("ended", function() {
                        button.removeClass("playing");
                    })
                    .appendTo(elem);
    
                var button = $("<a href='#' class='play-button'>▶</a>")
                    .click(function() {
                        if (button.hasClass("playing")) {
                            button.removeClass("playing");
                            audio[0].pause();
                            audio[0].currentTime = 0;
                        } else {
                            button.addClass("playing");
                            audio[0].play();
                        }
                        return false;
                    })
                    .appendTo(elem);
                index++;
        });
    </script>
</body>
</html>