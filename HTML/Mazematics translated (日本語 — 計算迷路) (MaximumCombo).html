<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>計算迷路 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        ul.no-bullets { list-style: none; }
        td img { width: 100%; }
        .dark td img { filter: invert(90%); }
        .maze { width: 100%; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">計算迷路</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Mazematics.svg" class="diagram">
                <h2>モジュール詳細：計算迷路</h2>
                <p class="flavour-text">迷路の計算に熱弁を振るう。</p>

                <ul>
                    <li>モジュールを解除するには、<b><u>現在値</u></b>を<b><u>目的値</u></b>に変更しなければならない。</li>
                    <li>迷路内の隣接するセルへ移動することで<b><u>現在値</u></b>を変更する。移動先のセルによって<b><u>現在値</u></b>に一定数の数値が加算もしくは減算される。</li>
                    <li><b><u>現在値</u></b>が<b><u>禁止値</u></b>の内のいずれかと一致するのは避ける。禁止値はページ 2 の禁止リストによって決まる。</li>
                </ul>

                <h3>モジュールの起動</h3>
                <ul class="no-bullets">
                    <li>モジュールの初期状態では、<b><u>初期値</u></b>を表示する。<b>モジュールの真ん中の画面を押して起動する。</b></li>
                    <li>起動すると、画面は八つの図形と二つの数値を順番に表示する。(さらに、モジュールが起動すると<b>ランダムな座標</b>を開始地点に選択する - 詳細は次のセクションを参照。)</li>
                    <li>それぞれの図形の値は<b>図形が表示された時の爆弾のタイマーの最後の桁</b> (小数点以下を除く) である。これらの値に基づいて迷路内を移動する。</li>
                    <li><b>爆弾のタイマーの最後の桁が 0 </b>の時に表示される数値が<b><u>目的値</u></b>である。それ以外の時に表示される数値は<b><u>現在値</u></b>である。</li>
                </ul>

                <h3>迷路内の移動</h3>
                <ul class="no-bullets">
                    <li>それぞれのセルは 1-9 の範囲内の数値と数字の正負が割り当てられている。これはセル内の<b>図形と正負記号</b>によって変化する。</li>
                    <li>迷路の開始地点は<b>モジュールが起動するまで</b>選択されない。モジュールの起動時に、開始地点がランダムに選択される。開始地点のセルの図形と正負記号によって、<b><u>初期値</u>に 1–9 の範囲内の数字が加算もしくは減算される</b>。</li>
                    <li>これ以降は、モジュールの矢印ボタンを押して迷路内を移動する。迷路内を移動する度に、<b><u>現在値</u>に</b><b>移動先のセルの数値</b>が加算もしくは減算される。</li>
                    <li>迷路は<b>ループしている</b>。表の枠を超えて反対側のセルへ移動することが可能である。</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">計算迷路</span>
            </div>
            <div class="page-content">
                <ul class="no-bullets">
                    <li><b>このモジュールは画面を押すことでいつでもペナルティなしでリセットすることができる。</b> リセットするとモジュールは起動前の状態に戻る。これはモジュールを操作する前の状態と同じで、<b><u>現在値</u></b>は<b><u>初期値</u></b>へリセットされる。再びモジュールの画面を押して起動する。起動するとモジュールは迷路内の同じ開始地点を選択する。</li>
                </ul>

                <h3>ミスと解除</h3>
                以下の条件を満たすとミスとなる:
                <ul>
                    <li><b><u>現在値</u></b>が<b><u>禁止値</u></b>と一致する。ただし、移動自体は<b>行われ</b>、<b><u>現在値</u></b>と迷路の座標は<b>変化する</b>。</li>
                    <li><b><u>現在値</u></b>が負の値もしくは 49 を超える値に変化する移動を実行する。ただし、移動自体は<b>行われず</b>、<b><u>現在値</u></b>と迷路の座標は<b>変化しない</b>。</li>
                </ul>
                特別な場合として、以下の条件を満たしているとミスとならない:
                <ul>
                    <li><b>最初の移動</b>で<b><u>現在値</u></b>が禁止値と一致する。起動後 (初期状態もしくはリセット後のどちらでも) の最初の移動は必ずミスにならない。</li>
                    <li><b><u>現在値</u></b>が禁止値と一致するが、<b><u>目的値</u></b>も一致する。<b><u>目的値</u></b>が禁止値と一致する場合もある。その場合、その値は禁止値に該当しない。</li>
                </ul>

                <b>二回目以降の移動後</b>に<b><u>現在値</u></b>が<b><u>目的値</u></b>と一致するとモジュールは解除される。一回の移動で<b><u>目的値</u></b>に変化した場合、モジュールは解除されない (ミスにもならない)。解除後にモジュールを操作してもミスにならない。
                <h3>禁止リスト</h3>
                上から順番に読み、最初に該当する条件の禁止値を見る:

                <table>
                    <tr>
                        <th>条件</th>
                        <th>禁止値 (付録を参照)</th>
                    </tr>
                    <tr>
                        <td>迷路の開始地点の図形は四つの頂点からなる</td>
                        <td>
                            三角数<b>*</b>
                        </td>
                    </tr>
                    <tr>
                        <td>起動前の<b><u>初期値</u></b>が 3 の倍数</td>
                        <td>7 の倍数</td>
                    </tr>
                    <tr>
                        <td>迷路の開始地点のセルは正 (+ の記号が記されている)</td>
                        <td>素数<b>**</b></td>
                    </tr>
                    <tr>
                        <td>上記のいずれのルールにも該当しない</td>
                        <td>フィボナッチ数列に含まれる数字<b>***</b></td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>
        <div class="page page-bg-03">
                <div class="page-header">
                    <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">計算迷路</span>
                </div>
                <div class="page-content">
                    <h3>迷路</h3>
                    <table class="maze">
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaM.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staP.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexM.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triM.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirP.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squP.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeM.svg"></td>
                        </tr>
                        <tr>
                            <td><img class="invertible maze-cell" src="img/Mazematics/squM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/neeM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/triP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/staM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/hexP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/heaM.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/cirP.svg"></td>
                            <td><img class="invertible maze-cell" src="img/Mazematics/diaP.svg"></td>
                        </tr>
                </table>

                <h3>付録</h3>

                <p>以下は禁止リストに記されている数学用語の解説である:</p>

                <ul class="no-bullets">
                    <li><b>*</b> <b>三角数の数列</b>の連続した数字二つのペアの差は一つ前のペアの差よりも<b>一つ大きい</b>。 <b>1, 3, 6, 10...</b></li>
                    <li><b>**</b> 1 は素数に含まれない。</li>
                    <li><b>***</b> <b>フィボナッチ数列</b>に含まれる数字はその二つ前の数字の合計に等しい。 0 をフィボナッチ数列に含めることもあるが、この場合は含まれていない。<b>1, 1, 2, 3, 5...</b></li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>
</html>