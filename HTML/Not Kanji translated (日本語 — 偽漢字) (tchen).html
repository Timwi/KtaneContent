<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>偽漢字 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .st2-table {
            width: 100%;
            table-layout: fixed;
        }

        .st2-table td {
            text-align: center;
            font-weight: bold;
        }

        .st2-table .symbol {
            font-size: 40px;
            font-weight: 100;
            font-family: "kosugi";
            line-height: 1.1em;
        }

        @font-face{
            font-family: "kosugi";
            src: url("font/KosugiMaru-Regular.ttf");
        }
        .st1-table {
            text-align: right;
            width: 100%;
        }

        .st1-table .symbol {
            font-family: "kosugi";
            font-size: 16px;
            padding-left: 12px;
        }

        .st1-table .grayed {
            background-color: #aaa;
        }
        .dark .st1-table .grayed {
            background-color: #666;
        }
        
        .footnote {
            font-size: .83em;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">偽漢字</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Not Kanji.svg" class="diagram">
                <h2>モジュール詳細：偽漢字</h2>
                <p class="flavour-text" lang="ja">やなかんじ</p>

                <p>このモジュールには4つのボタンとディスプレーが含まれている。それぞれのボタンには漢字が一文字書かれており、スクリーンには6文字のひらがながある。<em>ひらがなが5文字以下の場合、異なるモジュールを参照している。</em></p>
                <p>モジュールを解除するには、6文字のひらがなの暗号を解読して、それに応じて4つのボタンを正しい順番で押す。</p>
                <h3>ステップ1：ひらがな - 英字暗号</h3>
                <p>それぞれのひらがなは英字か#に対応している。以下のテーブルを利用してひらがなを対応した英字に変換する。グレーの箇所のひらがなは出現しない。</p>
                <table class="st1-table">
                    <tr>
                        <td>w <span class="symbol">わ</span></td>
                        <td>r <span class="symbol">ら</span></td>
                        <td>y <span class="symbol">や</span></td>
                        <td>m <span class="symbol">ま</span></td>
                        <td>p <span class="symbol">は</span></td>
                        <td class="grayed"><span class="symbol">な</span></td>
                        <td>t <span class="symbol">た</span></td>
                        <td class="grayed"><span class="symbol">さ</span></td>
                        <td>g <span class="symbol">か</span></td>
                        <td>a <span class="symbol">あ</span></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td>l <span class="symbol">り</span></td>
                        <td></td>
                        <td class="grayed"><span class="symbol">み</span></td>
                        <td>b <span class="symbol">ひ</span></td>
                        <td class="grayed"><span class="symbol">に</span></td>
                        <td class="grayed"><span class="symbol">ち</span></td>
                        <td>c <span class="symbol">し</span></td>
                        <td>q <span class="symbol">き</span></td>
                        <td>i <span class="symbol">い</span></td>
                    </tr>
                    <tr>
                        <td class="grayed"><span class="symbol">を</span></td>
                        <td class="grayed"><span class="symbol">る</span></td>
                        <td class="grayed"><span class="symbol">ゆ</span></td>
                        <td class="grayed"><span class="symbol">む</span></td>
                        <td>f <span class="symbol">ふ</span></td>
                        <td>n <span class="symbol">ぬ</span></td>
                        <td class="grayed"><span class="symbol">つ</span></td>
                        <td>s <span class="symbol">す</span></td>
                        <td>v <span class="symbol">く</span></td>
                        <td>u <span class="symbol">う</span></td>
                    </tr>
                    <tr>
                        <td></td>
                        <td class="grayed"><span class="symbol">れ</span></td>
                        <td></td>
                        <td class="grayed"><span class="symbol">め</span></td>
                        <td>h <span class="symbol">へ</span></td>
                        <td class="grayed"><span class="symbol">ね</span></td>
                        <td>d <span class="symbol">て</span></td>
                        <td>j <span class="symbol">せ</span></td>
                        <td>k <span class="symbol">け</span></td>
                        <td>e <span class="symbol">え</span></td>
                    </tr>
                    <tr>
                        <td># <span class="symbol">ん</span></td>
                        <td class="grayed"><span class="symbol">ろ</span></td>
                        <td class="grayed"><span class="symbol">よ</span></td>
                        <td class="grayed"><span class="symbol">も</span></td>
                        <td class="grayed"><span class="symbol">ほ</span></td>
                        <td class="grayed"><span class="symbol">の</span></td>
                        <td class="grayed"><span class="symbol">と</span></td>
                        <td>z <span class="symbol">そ</span></td>
                        <td>x <span class="symbol">こ</span></td>
                        <td>o <span class="symbol">お</span></td>
                    </tr>
                </table>
                
                <h3>ステップ2：キューブ暗号</h3>

                <h3>ステップ2.1：キューブの作成</h3>
                <p>英字と#で構成された、2つの3×3×3の行列を作成する。それらをそれぞれキューブAとキューブBと呼ぶ。</p>
                <ul>
                    <li>シリアルナンバーの数字の合計が奇数の場合、キューブAは左上の漢字を利用する。そうでない場合、右上の漢字を利用する。</li>
                    <li>シリアルナンバーの英字をA=1、B=2、...、Z=26と変換し、それらの合計をとる。それが偶数の場合、キューブBは左下の漢字を利用する。そうでない場合、右下の漢字を利用する。</li>
                    <li>それぞれの漢字の英訳を次のページのテーブルから参照する。これをキーワードと呼ぶ。</li>
                    <li>キーワードから空白と重複する英字をすべて取り除く。(例: Inside → Insde)</li>
                    <li>アルファベットの26文字を順に並べて最後に#を追加する。そこからキーワードに含まれる文字をすべて取り除く。</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 一/四</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">偽漢字</span>
            </div>
            <div class="page-content">
                <ul>
                    <li>利用した漢字の横に隣接している漢字の画数が8以上である場合、キーワードの後にアルファベットを追加して27文字の文字列を生成する。そうでない場合、キーワードの前にアルファベットを追加して27文字の文字列を生成する。
                        <ul>
                            <li>画数については、以下のテーブルの右上に記載されている。</li>
                        </ul>
                    </li>
                    <li>
                        キューブの1層目は生成した文字列の最初の9文字を3×3のマス目に読み順*で埋めたものである。2層目はその次の9文字を同様にマス目に埋めたものであり、3層目は最後の9文字を同様にマス目に埋めたものである。
                        <ul>
                            <li>行は上から順に1から3と数え、列は左から順に1から3と数える。</li>
                        </ul>
                    </li>
                </ul>
                
                <table class="st2-table">
                    <tr>
                        <td>
                            ひだり(5)<br>
                            <span class="symbol">左</span><br>
                            Left
                        </td>
                        <td>
                            みぎ(5)<br>
                            <span class="symbol">右</span><br>
                            Right
                        </td>
                        <td>
                            きた(5)<br>
                            <span class="symbol">北</span><br>
                            North
                        </td>
                        <td>
                            ひがし(8)<br>
                            <span class="symbol">東</span><br>
                            East
                        </td>
                        <td>
                            にし(6)<br>
                            <span class="symbol">西</span><br>
                            West
                        </td>
                    </tr>
                    <tr>
                        <td>
                            みなみ(9)<br>
                            <span class="symbol">南</span><br>
                            South
                        </td>
                        <td>
                            そと(5)<br>
                            <span class="symbol">外</span><br>
                            Outside
                        </td>
                        <td>
                            ちいさい(3)<br>
                            <span class="symbol">小</span><br>
                            Small
                        </td>
                        <td>
                            なか(4)<br>
                            <span class="symbol">中</span><br>
                            Inside
                        </td>
                        <td>
                            ながい(8)<br>
                            <span class="symbol">長</span><br>
                            Long
                        </td>
                    </tr>
                    <tr>
                        <td>
                            きん(8)<br>
                            <span class="symbol">金</span><br>
                            Money
                        </td>
                        <td>
                            しろい(5)<br>
                            <span class="symbol">白</span><br>
                            White
                        </td>
                        <td>
                            あめ(8)<br>
                            <span class="symbol">雨</span><br>
                            Rain
                        </td>
                        <td>
                            あき(9)<br>
                            <span class="symbol">秋</span><br>
                            Autumn
                        </td>
                        <td>
                            あさ(12)<br>
                            <span class="symbol">朝</span><br>
                            Morning
                        </td>
                    </tr>
                    <tr>
                        <td>
                            さむらい(8)<br>
                            <span class="symbol">侍</span><br>
                            Samurai
                        </td>
                        <td>
                            こころ(4)<br>
                            <span class="symbol">心</span><br>
                            Heart
                        </td>
                        <td>
                            あい(13)<br>
                            <span class="symbol">愛</span><br>
                            Love
                        </td>
                        <td>
                            うま(10)<br>
                            <span class="symbol">馬</span><br>
                            Horse
                        </td>
                        <td>
                            まつり(11)<br>
                            <span class="symbol">祭</span><br>
                            Festival
                        </td>
                    </tr>
                    <tr>
                        <td>
                            いえ(10)<br>
                            <span class="symbol">家</span><br>
                            House
                        </td>
                        <td>
                            なに(7)<br>
                            <span class="symbol">何</span><br>
                            What
                        </td>
                        <td>
                            はな(7)<br>
                            <span class="symbol">花</span><br>
                            Flower
                        </td>
                        <td>
                            かわ(3)<br>
                            <span class="symbol">川</span><br>
                            River
                        </td>
                        <td>
                            りゅう(16)<br>
                            <span class="symbol">龍</span><br>
                            Dragon
                        </td>
                    </tr>
                    <tr>
                        <td>
                            やま(3)<br>
                            <span class="symbol">山</span><br>
                            Mountain
                        </td>
                        <td>
                            つぎ(6)<br>
                            <span class="symbol">次</span><br>
                            Next
                        </td>
                        <td>
                            ひ(4)<br>
                            <span class="symbol">火</span><br>
                            Fire
                        </td>
                        <td>
                            ひと(2)<br>
                            <span class="symbol">人</span><br>
                            Person
                        </td>
                        <td>
                            みず(4)<br>
                            <span class="symbol">水</span><br>
                            Water
                        </td>
                    </tr>
                </table>
            </div>
            <div class="page-footer relative-footer">ページ 二/四</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">偽漢字</span>
            </div>
            <div class="page-content">
                <h4>ステップ2.2：解読</h4>
                <p>ステップ1の結果(以下、暗号のメッセージ)とキューブAとキューブBを利用して暗号を解読する。解読したメッセージの文字は、キューブBの文字のうち次の条件を満たすものである。</p>
                <ul>
                    <li>解読したメッセージの1文字目:
                        <ul>
                            <li>行番号は、暗号のメッセージの1文字目のキューブAでの位置の行番号と一致する。</li>
                            <li>列番号は、暗号のメッセージの2文字目のキューブAでの位置の列番号と一致する。</li>
                            <li>層番号は、暗号のメッセージの3文字目のキューブAでの位置の層番号と一致する。</li>
                        </ul>
                    </li>
                    <li>解読したメッセージの2文字目:
                        <ul>
                            <li>層番号は、暗号のメッセージの1文字目のキューブAでの位置の層番号と一致する。</li>
                            <li>行番号は、暗号のメッセージの2文字目のキューブAでの位置の行番号と一致する。</li>
                            <li>列番号は、暗号のメッセージの3文字目のキューブAでの位置の列番号と一致する。</li>
                        </ul>
                    </li>
                    <li>解読したメッセージの3文字目:
                        <ul>
                            <li>列番号は、暗号のメッセージの1文字目のキューブAでの位置の列番号と一致する。</li>
                            <li>層番号は、暗号のメッセージの2文字目のキューブAでの位置の層番号と一致する。</li>
                            <li>行番号は、暗号のメッセージの3文字目のキューブAでの位置の行番号と一致する。</li>
                        </ul>
                    </li>
                    <li>暗号のメッセージの1、2、3文字目の代わりに4、5、6文字目を利用して解読したメッセージの4–6文字目を求める。</li>
                </ul>

            </div>
            <div class="page-footer relative-footer">ページ 三/四</div>
        </div>
        <div class="page page-bg-04">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">偽漢字</span>
            </div>
            <div class="page-content">
                <h3>ステップ3：送信</h3>
                <p>以下のテーブルを利用してボタンの押すべき順番を決定する。ボタンは読み順*で1–4と数える。</p>
                <table>
                    <thead>
                        <tr>
                            <th>解読したメッセージ</th>
                            <th>押す順番</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Hizasi</td>
                            <td>1324</td>
                        </tr>
                        <tr>
                            <td>Hiziri</td>
                            <td>1423</td>
                        </tr>
                        <tr>
                            <td>Karate</td>
                            <td>3412</td>
                        </tr>
                        <tr>
                            <td>Karasi</td>
                            <td>4123</td>
                        </tr>
                        <tr>
                            <td>Karuta</td>
                            <td>3412</td>
                        </tr>
                        <tr>
                            <td>Katate</td>
                            <td>1243</td>
                        </tr>
                        <tr>
                            <td>Katana</td>
                            <td>4231</td>
                        </tr>
                        <tr>
                            <td>Katura</td>
                            <td>2314</td>
                        </tr>
                        <tr>
                            <td>Negiri</td>
                            <td>4312</td>
                        </tr>
                        <tr>
                            <td>Negoto</td>
                            <td>4321</td>
                        </tr>
                        <tr>
                            <td>Negura</td>
                            <td>2413</td>
                        </tr>
                        <tr>
                            <td>Sakana</td>
                            <td>3241</td>
                        </tr>
                        <tr>
                            <td>Sakura</td>
                            <td>2143</td>
                        </tr>
                        <tr>
                            <td>Yagate</td>
                            <td>3142</td>
                        </tr>
                        <tr>
                            <td>Yagura</td>
                            <td>1234</td>
                        </tr>
                    </tbody>
                </table>
                <p class="footnote">*左上から右に順に数えて、一番右まで達したら下の段の一番左からまた順に数える順番。英語の読み方の順番。</p>
            </div>
            <div class="page-footer relative-footer">ページ 四/四</div>
        </div>
    </div>
</body>
</html>
