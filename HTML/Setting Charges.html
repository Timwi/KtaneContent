<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Setting Charges — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <script>
        const exampleGrids = [
            [
                "....b.......",
                "...r.....b..",
                "............",
                "bb......r...",
                "......b.....",
                ".....r.....b",
                "...b.......b",
                ".......b.b.."
            ],
            [
                "..b.........",
                ".r.......b..",
                "b...........",
                "........br..",
                "......b.....",
                ".....r...bbb",
                ".b..b.......",
                ".....b......"
            ],
            [
                ".......b....",
                "...br......b",
                "........br..",
                "..........b.",
                ".b.....b....",
                ".........b..",
                "br.......b..",
                ".b..b......."
            ],
            [
                "b.....rb....",
                ".......b....",
                "......b.....",
                ".b.....b....",
                "..b.....b...",
                "b....bbrb...",
                ".r.b.r....b.",
                "..b.b..b.b.."
            ]
        ]
        const colours = { "r": "#f45", "b": "#08f"}

        $(() => {
            $(".example-grid").each(drawExampleGrid)
        })

        function drawExampleGrid(index) {
            const grid = exampleGrids[index]
            const svg = MakeSvgTag(130, 90, -5, -5, { width: "320px" })

            $(this).replaceWith(svg)
            svg.append(MakeSvgElem("rect", { x: -2.5, y: -2.5, class: "invertible", width: 125, height: 85, fill: "#888", stroke: "#000", "stroke-width": 2 }))
            for (const rowIx in grid) {
                for (const colIx in grid[rowIx]) {
                    svg.append(MakeSvgElem("circle", { cx: 5 + colIx * 10, cy: 5 + rowIx * 10, r: 5, class: "invertible" }))
                    if ((char = grid[rowIx][colIx]) !== ".") {
                        svg.append(MakeSvgElem("circle", { cx: 5 + colIx * 10, cy: 5 + rowIx * 10, r: 4.3, fill: colours[char] }))
                    }
                }
            }
        }
    </script>
    <style>
        li { font-size: 15.1px; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Setting Charges</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Setting Charges.svg" class="diagram">
                <h2>On the Subject of Setting Charges</h2>
                <p class="flavour-text">Any problem on Earth can be solved with the careful application of high explosives. The trick is to not be around when they go off.</p>
                <ul>
                    <li>This module contains an 8×12 grid of LED buttons below a red detonate button. If the button is not red or does not say detonate, you are looking at a different module.</li>
                    <li>Solve this module by clearing the grid of all obstacles indicated by the blue LEDs through the use of explosive charges.</li>
                    <li>To set a charge, press any empty LED to turn it red. Removing charges can be done in the same manner. You cannot set a charge on top of any target object. Alternatively, the
                        reset button will remove all charges placed.</li>
                    <li>A limited number of charges have been provided, indicated by the display beside the detonate button. Any attempt to place extra charges will lead to a strike.</li>
                    <li>Pressing the detonate button will explode all charges at once. If there are still obstacles afterward, the module will strike and the minefield will reset.</li>
                    <li>When charges explode, they send a shockwave in all eight cardinal directions until they hit an object or the edge of the grid. Shockwaves will never affect other shockwaves.</li>
                </ul>
                <h3>Solved Puzzle Examples:</h3>
                <div class="hstack wrap"><svg class="example-grid"></svg><svg class="example-grid"></svg></div>
                <div class="hstack wrap"><svg class="example-grid"></svg><svg class="example-grid"></svg></div>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>