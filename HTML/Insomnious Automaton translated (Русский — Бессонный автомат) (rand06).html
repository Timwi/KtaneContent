<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Бессонный автомат — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
        <link rel="stylesheet" type="text/css" href="css/font-cyrillic.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        @font-face {
            font-family: 'GOST Common';
            src: url('font/GOST Common.ttf') format('truetype');
            font-weight: normal;
            font-style: normal;
        }
        table {
            margin: 1em auto;
            border: none;
        }

        body, body.dark{
            background: #000000 url("img/Insomnious Automaton/bg.png");
        }
        .page, .dark .page{
            background-image: none;
        }
        
        .page-bg-00, .dark .page-bg-00{
            background-color: #000010;
            color: #ffffff;
        }
        
        .page-bg-01{
            background-color: #303030;
            color: #ffffff;
        }
        
        .dark .page-bg-01 {
            background-color: #000000;
            color: #ffffff;
        }
        
        .page-bg-02{
            font-family: 'GOST Common';
            font-size: 120%;
        }
        
        .page-bg-02 {
            background-color: #ffffff;
            color: #000000;
        }
        .dark .page-bg-02 {
            background-color: #222222;
            color: #ffffff;
        }
        
        h1{
            text-align: center;
            margin-top: 0;
        }
        
        p{
            margin-bottom: 0;
        }
        
        ul, ol{
            margin-top: 0;
        }
        
        .cell-with-rotated-text span {
            writing-mode: vertical-rl;
  transform: rotate(180deg);
  white-space: nowrap;
        }
        
        .page-footer::before { content: 'Страница '; }
        .page-footer::after { content: ' из 3'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-00">
            <div class="page-content" style="display: grid; place-items: center;">
                <div>
                    <p class="centered"><i>Я уже даже не знаю, что делать. Мне кажется, что я перепробовал всё, что вообще возможно. И безрезультатно.</i></p>
                    <p class="centered"><i>Порой мне приходится врать ему, что я каждый день пытаюсь, что я каждый день пробую что-то новое. Но это не так. Эта череда неудач сильно демотивирует.</i></p>
                    <p class="centered"><i>Мне и вправду жаль его. Но я ничего не могу сделать.</i></p>
                </div>
                <div>
                    <p class="centered"><i>Недавно, когда я был в библиотеке, я заметил пару листков, выпавших из книги.</i></p>
                    <p class="centered"><i>Инструкция по отладке механизма? Какого механизма? Я уже было хотел спрятать её обратно, но потом меня осенило.</i></p>
                    <p class="centered"><i>У него в голове тоже ведь механизм. Может, стоит попробовать? Я ничего не потеряю, если попробую.</i></p>
                    <p class="centered"><i>Думаю, мне стоит изучить эту инструкцию.</i></p>
                </div>

            </div>
        </div>
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Бессонный автомат</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Insomnious Automaton.svg" class="diagram">
                <h2>О Бессонном автомате</h2>
                <p class="flavour-text">Астро, что за книги вы там читаете в своём "книжном клубе"?!</p>

                <p>На модуле есть два экрана и музыкальная шкатулка. Уложите шкатулку спать.</p>
                <ul>
                    <li>Верхний экран показывает три переменные, которые потребуется отправить.</li>
                    <li>Нижний экран показывает состояние шкатулки или текущий ввод, состоящий из стековой и битовой строк.</li>
                    <li>У шкатулки есть 4 состояния:
                        <ol>
                            <li><b>Awake</b>: шкатулка бодрствует. Ввод недоступен.</li>
                            <li><b>Ready</b>: шкатулка пытается уснуть. Ввод доступен.</li>
                            <li><b>Submitting</b>: отправка и проверка переменной.</li>
                            <li><b>Asleep</b>: шкатулка уснула. Модуль решён.</li>
                        </ol>
                    </li>
                    <li>Стороны шкатулки нажимаются и отвечают за разные действия:
                    <ul>
                    <li>Левая и правая стороны вводят 0 и 1 соответственно.</li>
                    <li>Нижняя сторона полностью сбрасывает ввод.</li>
                    <li>Передняя сторона удаляет последний символ верхней (стековой) строки. Слишком частое нажатие (минимум дважды за 0.2 секунды) повлечет за собой регистрацию ошибки.</li>
                    <li>Нажатие крышки отправит ввод. Наведение на крышку в течении 3 секунд переведет шкатулку из состояния <b>Awake</b> в состояние <b>Ready</b>.</li>
                    </ul>
                    </li>
                    <li>Любая ошибка переводит шкатулку в состояние <b>Awake</b>.</li>
                    <li>Зажатие индикатора состояния модуля даст дополнительную визуальную индикацию состояния шкатулки. Повторное зажатие отключит данную индикацию.</li>
                </ul>
            </div>
        </div>

        <div class="page page-bg-02">
            
            <div class="page-content">
                <h1>Отладка механизма: инструкция.</h1>
                <p>Механизм является конечным автоматом. Если значение (в тридцатишестеричной системе счисления) первого символа серийного номера  нечетно, автомат имеет 5 состояний, иначе - 6. Пронумеруйте состояния как q0, q1, ...</p>
                <p>Переключения состояний состоят из:</p>
                    <ul>
                        <li>Начального состояния q(t),</li>
                        <li>Входа x,</li>
                        <li>Конечного состояния q(t+1),</li>
                        <li>Выхода y.</li>
                    </ul>
                
                <p>Данный автомат генерируется по данному правилу:</p>
                    <ul>
                        <li>При входе x0: qi переключается на q(i+z0(i)).</li>
                        <li>При входе x1: qi переключается на q(i+z1(i)).</li>
                        <li>При входе x2: qi переключается на q(|i+z2(i)|).</li>
                    </ul>
                    Функции zi определены на последней странице инструкции.
                    <p>Если состояния под таким номером не существует, то и такого переключения тоже не будет.</p>
                    Выход переключения qi &rarr; qj определяется так:
                    <ul>
                        <li>Если i&lt;j, то выход - y0,</li>
                        <li>Если i&gt;j, то выход - y1,</li>
                        <li>Если i=j, то выход - y2.</li>
                    </ul>
                
                <p>Подсчитайте количество использований для элементов множества конечных состояний, множества входов и множества выходов. Назначьте им двоичные представления так, что:</p>
                    <ul>
                        <li>Элементы, которые не использовались, должны полностью игнорироваться.</li>
                        <li>Представления среди множества <strong>не могут повторяться</strong>.</li>
                        <li>Представления должны иметь минимальную возможную длину. При этом, среди множества, все представления должны быть одинаковой длины.</li>
                        <li>Чем чаще используется элемент, тем меньше единиц должно быть в его представлении.</li>
                        <li>В случае равных количеств использований, элементы с меньшим индексом получают наименьшие возможные числа (если перевести двоичное представление в десятичную систему счисления).</li>
                    </ul>
                    Полное соблюдение этих правил даст единственное <b>и верное</b> представление элементов множеств.
                
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-content">
                <p>Биты представления q называются w0, w1, ...; биты представления x называются u0, ...; биты представления y называются v0, ...</p>
                <p>Составьте таблицу истинности для wi(t+1), vi, а также Ri и Si (или Ji и Ki, если на шкатулке нарисованы облака). Модуль запрашивает Ri или Ji как fi, а Si или Ki как Fi. Таблица составляется от всех возможных значений ui и wi(t). Для получения значений R, S, J и K используйте таблицу ниже:</p>
                    <table>
                        <tr><th>w(t)</th><th>w(t+1)</th><th>R</th><th>S</th><th>J</th><th>K</th></tr>
                        <tr><td>0</td><td>0</td><td>*</td><td>0</td><td>0</td><td>*</td></tr>
                        <tr><td>0</td><td>1</td><td>0</td><td>1</td><td>1</td><td>*</td></tr>
                        <tr><td>1</td><td>0</td><td>1</td><td>0</td><td>*</td><td>1</td></tr>
                        <tr><td>1</td><td>1</td><td>0</td><td>*</td><td>*</td><td>0</td></tr>
                    </table>
                
                <p>Найдите (и, при желании, оптимизируйте (например, с помощью карты Карно)) выражение для требуемых переменных. Поскольку вы можете использовать только 2 оператора (НЕ/NOT и НЕ-ИЛИ/NOR), используйте законы Де-Моргана (!x + !y = !(xy); !x!y = !(x+y)). Создайте стек из элементов ниже:</p>
                    <table>
                        <tr><td>0</td><td>Добавляет в стек w0.</td></tr>
                        <tr><td>1</td><td>Добавляет в стек w1.</td></tr>
                        <tr><td>2</td><td>Добавляет в стек w2.</td></tr>
                        <tr><td>3</td><td>Добавляет в стек u0.</td></tr>
                        <tr><td>4</td><td>Добавляет в стек u1.</td></tr>
                        <tr><td>-</td><td>Инвертирует верхний элемент стека.</td></tr>
                        <tr><td>!</td><td>Применяет NOR для двух верхних элементов стека.</td></tr>
                    </table>
                
                <p>Отправьте стек, заменяя его символы данными 3-битными последовательностями:</p>
                <table>
                        <tr><td>000</td><td>3</td><td>100</td><td>0</td></tr>
                        <tr><td>001</td><td>4</td><td>101</td><td>1</td></tr>
                        <tr><td>010</td><td> </td><td>110</td><td>2</td></tr>
                        <tr><td>011</td><td>-</td><td>111</td><td>!</td></tr>
                    </table>
                
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
        
        <div class="page page-bg-02">
            <div class="page-content">
                <p>Представьте четвертый и пятый символы серийного номера в виде их алфавитных позиций и переведите их в троичную систему счисления. Числа должны иметь три трита, если это не так, то дополните начальными нулями до трех тритов. Для z0 используйте старший трит, для z1 - второй, а для z2 - младший.</p>
                <p>Для столбцов используйте четвертый символ серийного номера, а для строк - пятый.</p>
                <p>Если какая-либо функция вернула значение по модулю большее чем 5, то отнимайте/прибавляйте 3 до тех пор, пока полученное значение не будет в диапазоне [-5; 5].</p>
                    <table style="font-size: 80%">
                        <tr><td>z0</td><td>0</td><td>1</td><td>2</td></tr>
                        <tr><td>0</td><td>SN6 - 5</td><td>AA - D</td><td>LI - UI</td></tr>
                        <tr><td>1</td><td>EMP - NOEMP</td><td>3 - B</td><td>2 * PP - 3</td></tr>
                        <tr><td>2</td><td>BH - I</td><td>PT - 3</td><td>2 * P - SN3 - 2</td></tr>
                    </table>
                    <table style="font-size: 80%">
                        <tr><td>z1</td><td>0</td><td>1</td><td>2</td></tr>
                        <tr><td>0</td><td>SN3 - 2 * i</td><td>3 * B - D - 2 * i</td><td>4 + FRK + TRN - BOB - SND - 2 * i</td></tr>
                        <tr><td>1</td><td>2 + PAR + SER - 2 * i</td><td>floor(SN2 / 4) - 2 * i</td><td>NOEMP + I - 2 * i</td></tr>
                        <tr><td>2</td><td>4 + P - LI - UI - 2 * i</td><td>PT + AA - EMP - 2 * i</td><td>(SN6 % 4) + BH + floor(PP / 2) - 2 * i</td></tr>
                    </table>
                    <table style="font-size: 80%">
                        <tr><td>z2</td><td>0</td><td>1</td><td>2</td></tr>
                        <tr><td>0</td><td>round((SN2 - SN3 - SN6) / 3 - (1 + EMP) * i / (1 + BH))</td><td>2 + B - floor((D + 7) * i / (3 + UI))</td><td>6 - I - 2 * i * (BOB + SIG + MSA + IND)</td></tr>
                        <tr><td>1</td><td>2 + PP - ceil(i * PT / 2)</td><td>1 + AA - i * (I - CLR - CAR - FRQ - NSA)</td><td>LI - i * (1 + RJ + PS + RCA - DVI)</td></tr>
                        <tr><td>2</td><td>3 + UI - i * (round(2 * (5 - SN3) / 3) + BOB)</td><td>4 - i * (1 + floor((1 + P) / (1 + (SN2 % 3))))</td><td>3 + ceil(round(SN6 / 2) / 2) - i * (2 + ceil(NOEMP / 2))</td></tr>
                    </table>
                <p>Переменные в данной таблице:</p>
                <ul>
                    <li>SN2, SN3, SN6 - второй, третий и шестой символы серийного номера соответственно. Для SN2 переведите из тридцатишестеричной системы счисления в десятичную.</li>
                    <li>B, BH, AA, D - общее количество батареек, количество держателей батареек, количество батареек типа AA и типа D соответственно.</li>
                    <li>P, PT, PP, EMP, NOEMP, DVI, PS, RCA, RJ, PAR, SER - количество портов, количество различных типов портов, количество плат для портов, количество пустых и непустых плат, количество портов типа DVI-D, PS/2, Stereo RCA, RJ-45, Parallel и Serial соответственно.</li>
                    <li>I, LI, UI - количество индикаторов, количество горящих и негорящих индикаторов соответственно.</li>
                    <li>&lt;имя индикатора&gt; - наличие индикатора с таким именем. Если такой индикатор имеется, эта переменная равна 1, иначе 0.</li>
                </ul>
            </div>
            <div class="page-footer relative-footer">3</div>
        </div>
    </div>
</body>
</html>