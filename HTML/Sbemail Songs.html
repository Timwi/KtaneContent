<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Sbemail Songs — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        table{
            float:left;
            clear:left;
            margin-right:10px;
            margin-bottom:5px;
            text-align:center;
        }
    </style>
    <script>
        function setDefaultRules(rnd){
            setRules(rnd);
        }
        function setRules(rnd){
            var buttonOrders=
            [
                "56781234",
                "21436587",
                "56341278",
                "12785634",
                "87654321",
                "12563478",
                "78123456",
                "45612378"
            ];
            var boolTypes=
            [
                "AND",
                "OR",
                "XOR",
                "NAND",
                "NOR",
                "XNOR"
            ];
            var operations=
            [
                "Add",
                "Subtract",
                "Multiply by",
                "Modulo"
            ];
            var conditions=
            [
                "Previous digit<br>was from",
                "Stage<br>divisible by",
                "Majority of<br>sequence is",
                "Digit at this<br>point is"
            ];
            var hexDigits="0123456789ABCDEF";
            rnd.shuffleFisherYates(buttonOrders);
            for(var i=0;i<5;i++)
                $(`#buttonOrder${i}`).text(buttonOrders[i]);
            rnd.shuffleFisherYates(boolTypes);
            for(var i=0;i<6;i++)
                $(`#boolType${i}`).text(boolTypes[i]);
            rnd.shuffleFisherYates(conditions);
            var rangeLower=hexDigits.charAt(rnd.next(0,8));
            var rangeUpper=hexDigits.charAt(rnd.next(8,16));
            var parity1=rnd.next(0,2)===0?"even":"odd";
            var parity2=rnd.next(0,2)===0?"even":"odd";
            var divisible=rnd.next(2,4);
            for(var i=0;i<4;i++){
                $(`#condition${i}`).html(conditions[i]);
                switch(conditions[i]){
                    case "Previous digit<br>was from":
                        $(`#then${i}`).html(rangeLower+" to "+rangeUpper+"<br>inclusive");
                        break;
                    case "Stage<br>divisible by":
                        $(`#then${i}`).text(divisible);
                        break;
                    case "Majority of<br>sequence is":
                        $(`#then${i}`).text(parity1);
                        break;
                    case "Digit at this<br>point is":
                        $(`#then${i}`).text(parity2);
                        break;
                }
            }
            rnd.shuffleFisherYates(operations);
            for(var i=0;i<4;i++)
                $(`#operation${i}`).text(operations[i]+" "+hexDigits.charAt(rnd.next(0,16)));
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Sbemail Songs</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Sbemail Songs.svg" class="diagram">
                <h2>On the Subject of Sbemail Songs</h2>
                <p class="flavour-text">Where would I be without my Sbemail Songs?</p>
                    <table>
                        <tr>
                            <th>Wire</th><td id="buttonOrder0"></td>
                        </tr>
                        <tr>
                            <th>Maze</th><td id="buttonOrder1"></td>
                        </tr>
                        <tr>
                            <th>Simon</th><td id="buttonOrder2"></td>
                        </tr>
                        <tr>
                            <th>Morse</th><td id="buttonOrder3"></td>
                        </tr>
                        <tr>
                            <th>Button</th><td id="buttonOrder4"></td>
                        </tr>
                        <tr>
                            <th>(none)</th><td>12345678</td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <th>0-40</th><td id="boolType0"></td>
                        </tr>
                        <tr>
                            <th>41-118</th><td id="boolType1"></td>
                        </tr>
                        <tr>
                            <th>119-209</th><td id="boolType2"></td>
                        </tr>
                        <tr>
                            <th>209-220</th><td id="boolType3"></td>
                        </tr>
                        <tr>
                            <th>220-240</th><td id="boolType4"></td>
                        </tr>
                        <tr>
                            <th>240-255</th><td id="boolType5"></td>
                        </tr>
                    </table>
                    <table>
                        <tr>
                            <th><span id="condition0"></span> <span id="then0"></span></th><td id="operation0"></td>
                        </tr>
                        <tr>
                            <th><span id="condition1"></span> <span id="then1"></span></th><td id="operation1"></td>
                        </tr>
                        <tr>
                            <th><span id="condition2"></span> <span id="then2"></span></th><td id="operation2"></td>
                        </tr>
                        <tr>
                            <th><span id="condition3"></span> <span id="then3"></span></th><td id="operation3"></td>
                        </tr>
                        <tr>
                            <th>None of the<br>above rules<br>applied</th><td>Change digit to<br>10<sub>hex</sub> minus<br>digit</td>
                        </tr>
                    </table>
                <div style="font-size:11.5pt">
                    <p>On this module will be a stage display in hexadecimal, a larger rectangular display below, a play button and a 4x4 grid of hexadecimal digits. Pressing the play button will play a short audio clip called a "sbemail song" that has a number associated with it. Every time a <a href="https://ktane.timwi.de/More/Ignore%20Table.html#mod=sbemailsongs">non-ignored module</a> is solved, this module will change which sbemail song is played. <strong>NOTE: If there are no non-ignored modules present, press the play button to immediately solve.</strong></p>
                    <p>See <a href="http://hrwiki.org/wiki/Strong_Bad_Email_Intros">here</a> for a full list of sbemail song transcriptions. <strong>NOTE: In the case of more than one of the same number, such as 122a/122b or 193/193½ where the transcriptions are completely different, only the first of each can appear on the module.</strong></p>
                    <p>At each stage, take the number associated with the current sbemail song and convert it to binary, with zeros added to the left to make it 8 bits long if needed. Rearrange the binary number as shown in the first table depending on what was in the name of the last solved module. For modules that contain more than one of these names (e.g. Morse-A-Maze), apply all appropriate rearrangements from the top down. For modules that contain the same name more than once (e.g. Simon Simons), only apply the appropriate rearrangement once. For stage 1, before any modules are solved, do not rearrange the binary number. On every pair of bits, perform the bitwise operator corresponding to the resulting number to make the sequence 4 bits long, then convert it to a hexadecimal digit. Modify this digit according to the third table. If the digit exceeds 10<sub>hex</sub> at any point, modulo 10<sub>hex</sub> before continuing.</p>
                    <p>Throughout solving modules, make a sequence of the resulting digits. After every non-ignored module is solved, this module will allow the 4x4 grid of buttons to be pressed. Submit the obtained sequence to solve the module. There is no penalty for attempting to press any of the buttons in the 4x4 grid before this change.</p>
                </div>
            </div>
        <div class="page-footer relative-footer">Page 1 of 1</div>
    </div>
</body>
</html>
