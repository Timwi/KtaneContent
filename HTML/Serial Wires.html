<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Serial Wires — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <style>
        .dark table, table {
            margin: 1em auto;
            border: none;
        }
        
        svg text {
            text-anchor: middle;
            dominant-baseline: mathematical;
        }
        svg .red { fill: #e62222; }
        svg .white { fill: #d9d8d2; }
        svg .blue { fill: #4080ff; }
        
        .dark svg .red { fill: #c62222; }
        .dark svg .white { fill: #ddd; }
        .dark svg .blue { fill: #4070cc; }
        
        div.letter-grid {
            width: 300px;
            float: right;
            --blob-colour: #666;
            --text-colour: #fff;
        }
        .dark div.letter-grid {
            --blob-colour: #ccc;
            --text-colour: #222;
        }
        div.letter-grid .border {
            stroke: #9995;
            stroke-width: 10px;
            fill: none;
        }
        div.letter-grid .connector {
            stroke: var(--blob-colour);
            stroke-width: 20px;
        }
        div.letter-grid .blob { fill: var(--blob-colour); }
        div.letter-grid text {
            fill: var(--text-colour);
            font-size: 64px;
        }

        svg :not(.highlightable, g) {
            user-select: none;
            pointer-events: none;
        }
        svg .highlightable { fill: transparent; }

        .left { 
            float: left; 
            max-width: 45%;
        }
        .clear { clear:both; }

        svg.wire-color-diagram { margin-bottom: -70px }

        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 2'; }
    </style>
    <script>
        const gridCharacters = [
            " V468ZX ",
            "Y7OFLUY7",
            "WM1KIGWM",
            "93SAEQ93",
            "TBØ2HJTB",
            "5DPCRN5D",
            "XV468ZXV",
            " 7OFLUY "
        ];

        $(() => {
            const svg = MakeSvgTag(800, 800).appendTo($(".letter-grid"));
            const defs = MakeSvgElem("defs");
            const blobs = MakeSvgElem("g", { mask: "url(#grid-mask)" });
            svg.append(defs);
            svg.append(blobs);
            
            const mask = MakeSvgElem("mask", { id: "grid-mask", maskUnits: "userSpaceOnUse" });
            mask.append(MakeSvgElem("image", { href: "img/Serial Wires/Grid Mask.svg", x: 0, y: 0, width: 800, height: 800 }));
            defs.append(mask);

            for (let row = 0; row < 8; row++) {
                if (row > 0 && row < 7)
                    blobs.prepend(MakeSvgElem("path", { class: "connector", d: `M50 ${50 + row * 100}h700M${50 + row * 100} 50v700` }));
                for (let col = 0; col < 8; col++) {
                    if (gridCharacters[row].charAt(col) !== " ") {
                        blobs.append(MakeSvgElem("circle", { class: "blob", cx: 50 + col * 100, cy: 50 + row * 100, r: 40 }));
                        blobs.append(MakeSvgElem("circle", { class: "highlightable", cx: 50 + col * 100, cy: 50 + row * 100, r: 40 }));
                        blobs.append(MakeSvgElem("text", { x: 50 + col * 100, y: 50 + row * 100 }, gridCharacters[row].charAt(col)));
                    }
                }
            }
            svg.prepend(MakeSvgElem("rect", { class: "border", x: 100, y: 100, width: 600, height: 600 }));
        });
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">FF: Serial Wires</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Serial Wires.svg" class="diagram">
                <h2>On the Subject of Serial Wires</h2>
                <p class="flavour-text">Serial No.? Serial Yes.!</p>
                <u><i><b>Note:</b> If stars are on the cardboard instead of letters and/or numbers, you are looking at the wrong manual.</i></u>
                <p>A “Serial Wires” module has up to six wires that may be a solid color or striped. Wires connect written letters/numbers to each LED light. However, this isn’t always the case.
                    <br>Use the serial number, written character, and the wire’s color to determine whether to set each LED light yellow, blue, or black (off).
                    <br>Group the first serial number character with the leftmost LED and the leftmost character written on the cardboard. Group the other characters in the serial number with the other five LEDs and characters from left to right. Perform all the steps below for each of the groups and set the LED accordingly.
                </p>
                <h3>Step 1: Minimum Distance Between Both Characters</h3>
                <div class="left">
                    <p>Through only orthogonal movement (Up, down, left, or right) find the minimum distance between both characters in the pair.
                        <br>Know that this grid wraps around in both directions, implied by the connections along the border.
                    </p>                    
                    <ul>
                        <li>If a minimum of 1 or 2 spaces is needed to reach both characters in the pair, write down “<u>yellow</u>”.</li>
                        <li>If a minimum of 4 or 5 spaces is needed to reach both characters in the pair, write down “<u>blue</u>”.</li>
                        <li>Otherwise, write down “<u>black</u>”.</li>
                    </ul>
                </div>
                <div class="letter-grid">
                    <i>On this diagram and on the module, the zero is written with a slash (Ø).</i>
                </div>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>
        
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">FF: Serial Wires</span>
            </div>
            <div class="page-content">
                <h3 class="clear">Step 2: The Wire Color and Pattern</h3>
                <p>Next, look at the wire that connects the written character with the LED light. Wires come in three colors: red, white, and blue. Wires may be a solid color or they may be stripped with two colors.
                    <br>Find the column in the image below that contains the same pattern as the wire. Write the name of the color that's in the center of the column:
                </p>
                <svg class="wire-color-diagram" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 243 120">
                    <defs><linearGradient id="a"><stop offset="0"/><stop offset=".2" stop-color="#fff"/><stop offset=".8" stop-color="#fff"/><stop offset="1"/></linearGradient><linearGradient href="#a" id="b" x1="11.7" x2="11.7" y1="64.2" y2="37.4" gradientTransform="translate(-2)" gradientUnits="userSpaceOnUse"/><linearGradient href="#a" id="c" x1="11.7" x2="11.7" y1="64.2" y2="37.4" gradientTransform="translate(-2 55)" gradientUnits="userSpaceOnUse"/><mask id="d" maskUnits="userSpaceOnUse"><path fill="url(#b)" d="M10 37h243v27H10z"/><path fill="url(#c)" d="M10 92h243v27H10z"/><path stroke="#fff" stroke-width="3.2" d="M92 46v64m80-64v64m79-64v64M12 46v64"/></mask></defs><g mask="url(#d)" transform="translate(-10 -37)"><path class="white" d="M92 119H12V92h80z"/><path class="blue" d="M172 119H92V92h80z"/><path class="red" d="M251 119h-79V92h79zM12 37h80v27H12z"/><path class="white" d="M92 37h80v27H92z"/><path class="blue" d="M172 37h80v27h-80z"/><g class="blue"><path id="e" stroke-width="2" d="m92 110-6 9h6zm-5-18-16 27h8l13-22v-5zm-15 0-16 27h8l15-27zm-16 0-15 27h8l15-27zm-15 0-15 27h7l16-27zm-15 0-14 25v2h6l16-27zm-7 0h-7v12z"/></g><use href="#e" class="white" transform="translate(160)"/><use href="#e" class="red" transform="translate(80)"/><path class="invertible" stroke="#000" stroke-width="3.2" d="M12 29v98m80-98v98m80-98v98m79-98v98"/></g>
                    <text class="invertible" x="42" y="40">Yellow</text>
                    <text class="invertible" x="121.5" y="40">Blue</text>
                    <text class="invertible" x="200" y="40">Black</text>
                </svg>            
                <i>The colors at the top of the image are red, white, and blue in that order.</i>
                <p><b>Note:</b> If there's no wire connecting the written character to the LED, ignore Steps 2 and 3 and set the LED to the color written down in Step 1.</p>
                <h3>Step 3: Combining the Written Colors</h3>
                <p>Look at both of the colors you’ve written down. If they are the same, set the LED to that color. However, if they are different, set the LED to the color that’s <i>absent</i>. Remember that all LEDs have three states: yellow, blue, and “black” (the off state).<br>Pressing an LED cycles it between these three settings. When all six of the LEDs are set to the correct color for more than 3 seconds, the module will solve.</p>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
    </div>
</body>
</html>