<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Caisse Bon Marché — Keep Talking and Nobody Explodes Mod</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/Modules/Cheap Checkout.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>
        let Prices = [
            // Original 34 items
            "Candy Canes,3.51,Sucrerie",
            "Socks,6.97,Autre",
            "Lotion,7.97,Cosmétique",
            "Cheese,4.49,Produit Laitier",
            "Mints,6.39,Sucrerie",
            "Grape Jelly,2.98,Sucrerie",
            "Honey,8.25,Sucrerie",
            "Sugar,2.08,Sucrerie",
            "Soda,2.05,Sucrerie",
            "Tissues,3.94,Cosmétique",
            "White Bread,2.43,Céréale",
            "Canola Oil,2.28,Huile",
            "Mustard,2.36,Autre",
            "Deodorant,3.97,Cosmétique",
            "White Milk,3.62,Produit Laitier",
            "Pasta Sauce,2.30,Légume",
            "Lollipops,2.61,Sucrerie",
            "Cookies,2.00,Sucrerie",
            "Paper Towels,9.46,Cosmétique",
            "Tea,2.35,Boisson",
            "Coffee Beans,7.85,Autre",
            "Mayonnaise,3.99,Huile",
            "Chocolate Milk,5.68,Produit Laitier",
            "Fruit Punch,2.08,Sucrerie",
            "Potato Chips,3.25,Huile",
            "Shampoo,4.98,Cosmétique",
            "Toothpaste,2.50,Cosmétique",
            "Peanut Butter,5.00,Protéine",
            "Gum,1.12,Sucrerie",
            "Water Bottles,9.37,Boisson",
            "Spaghetti,2.92,Céréale",
            "Chocolate Bar,2.10,Sucrerie",
            "Ketchup,3.59,Autre",
            "Cereal,4.19,Céréale",

            // New rule seed items
            "Eggs,2.67,Protéine",
            "Baked Beans,1.14,Protéine",
            "Peanuts,5.98,Protéine",
            "Yogurt,2.72,Produit Laitier",
            "Greek Yogurt,3.47,Produit Laitier",
            "Butter,5.86,Produit Laitier",
            "Toothbrush,2.24,Cosmétique",
            "Medicine,3.73,Cosmétique",
            "Soup,1.99,Autre",
            "Soap,3.97,Cosmétique",
            "Pretzels,2.98,Céréale",
            "Popcorn,2.50,Céréale",
            "Oatmeal,7.98,Céréale",
            "Rice,2.02,Céréale",
            "Flour,3.49,Céréale",
            "Licorice,1.98,Sucrerie",
            "Pie,3.98,Sucrerie",
            "Cake,9.98,Sucrerie",
            "Gummy Bears,7.98,Sucrerie",
            "Relish,2.74,Légume",
            "Napkins,1.09,Cosmétique",
            "Band-Aids,1.11,Cosmétique",
            "Playing Cards,2.13,Autre",
            "Beef Jerky,1.23,Autre",
            "Ice Cream,4.99,Produit Laitier",
            "Salad Mix,2.47,Légume",
            "Bagel,4.20,Céréale",
            "Vegetable Oil,2.89,Huile",
            "Batteries,4.49,Autre",
            "Taco Shells,5.01,Céréale",
            "Bleach,6.90,Autre",
            "Baking Soda,0.33,Autre",
            "Paper Bags,1.07,Autre",
            "Printer Paper,4.49,Autre",
            "Diapers,6.96,Cosmétique",
            "Shower Gel,1.63,Cosmétique",
            "Makeup Remover,1.02,Cosmétique",
            "Blank DVDs,9.00,Autre",
            "Nail Polish,3.13,Cosmétique",
            "Fusilli,2.92,Céréale",
            "Tagliatelle,2.92,Céréale",
            "Spirelli,2.92,Céréale",
            "Penne,2.92,Céréale",
            "Car Engine Oil,3.36,Huile",
            "Parsley,0.69,Spice",
            "Sage,1.75,Spice",
            "Rosemary,3.19,Spice",
            "Thyme,2.89,Spice",
            "White Pepper,2.49,Spice",
            "Coriander,0.99,Spice",
            "Oregano,1.59,Spice",
            "Cumin,3.45,Spice",
            "Masala,4.99,Spice",
            "Saffron,12.79,Spice",
            "Cinnamon,2.40,Spice",
            "Cayenne Pepper,11.27,Spice",
            "Ginger Root,1.00,Spice",
            "Salt,3.98,Spice",
            "Sesame,3.19,Spice",
            "Vanilla Extract,11.82,Spice",
            "Red Wine,20.90,Boisson",
            "White Wine,18.60,Boisson",
            "12-pack Beer,10.49,Boisson",
            "6-pack Beer,5.79,Boisson",
            "Vinegar,2.50,Autre",
        ];

        let PricesLB = [
            // Original 12 weight based items
            "Turkey,2.98,Protéine",
            "Chicken,1.99,Protéine",
            "Steak,4.97,Protéine",
            "Pork,4.14,Protéine",
            "Lettuce,1.10,Légume",
            "Potatoes,0.68,Légume",
            "Tomatoes,1.80,Fruit",
            "Broccoli,1.39,Légume",
            "Oranges,0.80,Fruit",
            "Lemons,1.74,Fruit",
            "Bananas,0.87,Fruit",
            "Grapefruit,1.08,Fruit",

            // New rule seed weight based items
            "Onions,1.82,Légume",
            "Bacon,5.52,Protéine",
            "Apples,1.32,Fruit",
            "Grapes,2.98,Fruit",
            "Fish,9.99,Protéine",
            "Watermelons,0.32,Fruit",
            "Carrots,0.77,Légume",
            "Cherries,3.21,Fruit",
            "Plums,1.99,Fruit",
            "Pumpkins,1.38,Fruit",
            "Avocados,2.23,Fruit",
            "Ham,2.88,Protéine",
            "Sausages,3.88,Protéine",
            "Corn,1.14,Légume",
            "Pears,1.74,Fruit",
            "Leek,3.17,Légume",
            "Bologna,1.69,Protéine",
            "Minced Beef,2.36,Protéine",
            "Garlic,0.97,Légume",
            "Tofu,3.11,Protéine",
            "Salmon,21.55,Protéine",
        ];

        let SundayValue = 215;
        let MondayPercent = 85;
        let TuesdayExcludedDigit = -1;
        let WednesdayLargeOrSmall = true;
        let WednesdayViceVersa = true;
        let ThursdayOddItems = true;
        let ThursdayPercent = 50;
        let FridayPercent = 125;
        let SaturdayPercent = 65;

        function toDollars(intDollars) {
            const stringDollars = intDollars.toString();
            if (intDollars < 100) return "0." + intDollars;
            else return stringDollars.substring(0, stringDollars.length - 2) + "." + stringDollars.substring(stringDollars.length - 2);
        }

        function toRelativePercent(absolutePercent) {
            if (absolutePercent > 100) return `${absolutePercent - 100}% plus cher`;
            else if (absolutePercent == 50) return "moitié prix";
            else return `${100 - absolutePercent}% moins cher`;
        }

        function setDefaultRules(rng) {
            setRules(rng);
        }

        function setRules(rng) {
            var prices, pricesLB;
            if (rng.seed == 1)
            {
                prices = Prices.slice(0, 34);
                pricesLB = PricesLB.slice(0, 12);
            }
            else
            {
                prices = rng.shuffleFisherYates(Prices.slice(0)).slice(0, 34);
                pricesLB = rng.shuffleFisherYates(PricesLB.slice(0)).slice(0, 12);

                for (var [index, item] of prices.entries()) {
                    var split = item.split(",");
                    var intDollars = parseInt(split[1].replace(".", ""));
                    intDollars += rng.next(-10, 11);
                    split[1] = toDollars(intDollars);
                    prices[index] = split.join(",");
                }

                for (var [index, item] of pricesLB.entries()) {
                    var split = item.split(",");
                    var intDollars = parseInt(split[1].replace(".", ""));
                    intDollars += rng.next(-10, 11);
                    split[1] = toDollars(intDollars);
                    pricesLB[index] = split.join(",");
                }

                SundayValue = rng.next(50, 301);
                MondayPercent = rng.next(10, 100);
                TuesdayExcludedDigit = rng.next(-1, 3);
                WednesdayLargeOrSmall = rng.next(0, 2) == 1;
                WednesdayViceVersa = rng.next(0, 2) == 1;
                ThursdayOddItems = rng.next(0, 2) == 1;
                ThursdayPercent = rng.next(25, 76);
                FridayPercent = rng.next(50, 201);
                SaturdayPercent = rng.next(50, 201);
            }

            const seededStrings = [
                toRelativePercent(MondayPercent),
                TuesdayExcludedDigit == -1 ? "" : ` en excluant le chiffre des ${["unités", "dizaines", "centaines"][TuesdayExcludedDigit]}`,
                WednesdayLargeOrSmall ? "grand" : "petit",
                WednesdayLargeOrSmall ? "petit" : "grand",
                WednesdayViceVersa ? ", et vice versa" : "",
                ThursdayOddItems ? "impaire" : "paire",
                toRelativePercent(ThursdayPercent),
                toRelativePercent(FridayPercent),
                toRelativePercent(SaturdayPercent),
                toDollars(SundayValue)
            ];

            const seededSpans = document.querySelectorAll("span.rule-seeded");
            for (const [index, seededSpan] of seededSpans.entries()) {
                seededSpan.textContent = seededStrings[index];
            }

            const rows = Array.from(document.querySelectorAll(".page-bg-02 tr:nth-child(n+2), .page-bg-03 tr"));
            for (const [index, itemString] of prices.concat(pricesLB).sort().entries()) {
                const children = rows[index % rows.length].children;
                const item = itemString.split(",");

                children[0].textContent = item[0];
                children[1].textContent = `${item[1]}$${pricesLB.includes(itemString) ? " par livre" : "" }`;
                children[2].textContent = item[2];
            }
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Caisse Bon Marché</span>
            </div>
            <div class="page-content">
                <img class="diagram" src="img/Component/Cheap Checkout.svg">
                <h2>À propos de la Caisse Bon Marché</h2>
                <p class="flavour-text">Qui dans le monde achète quelque chose à un moment pareil ?</p>
                <ul>
                    <li>Il y a une liste de courses des articles qui sont achetés et qui peuvent être visualisés avec les boutons fléchés.</li>
                    <li>Au-dessus, il indique le montant payé par le client.</li>
                    <li>Calculer le prix de revient de tous les articles, en appliquant la promotion du jour de la semaine.</li>
                    <li>Les articles pondérés doivent avoir leur pondération appliquée avant l’application de la promotion.</li>
                    <li>Si le client a assez payé, il suffit d’entrer le montant exact de monnaie qu’il doit recevoir et d’appuyer sur «&nbsp;Submit&nbsp;».</li>
                    <li>Sinon, si le client n’a pas assez payé, appuyer sur «&nbsp;Submit&nbsp;» sans aucune modification pour alerter le client. Attendre la nouvelle somme d’argent de la part du client et déterminer ensuite la somme à rendre.</li>
                    <li>Après avoir appuyé sur le bouton «&nbsp;Submit&nbsp;», le paiement sera validé.</li>
                </ul>
                <h3>Glossaire</h3>
                <ul>
                    <li>Le prix de l’article est le prix avant que la promotion n’ait été appliquée.</li>
                    <li>Le prix des articles à prix fixe ne varie pas en fonction de leur poids.</li>
                    <li>Une racine numérique est la somme des chiffres d’un nombre. La somme est éventuellement répétée jusqu’à obtenir un seul chiffre.</li>
                    <li>L’arrondi commercial est lorsque le chiffre est supérieur ou égal à 5, le nombre est arrondi à l’unité supérieure, sinon à l’unité inférieure.</li>
                </ul>

                <h3>Promotions :</h3>
                <div style="font-style: italic; font-size: 13px">Le jour de la semaine est la date indiquée sur l’ordinateur du désamorceur lorsque le module est activé.</div>

                <em>Lundi Libre</em>
                <div class="sale">Les 1<sup>er</sup>, 3<sup>e</sup> et 6<sup>e</sup> articles de la liste d’achats coûtent <span class="rule-seeded">15%</span>.</div>

                <em>Mardi Mouvementé</em>
                <div class="sale">Calculer la racine numérique du prix de l’article sans la virgule décimale<span class="rule-seeded"></span>. Ajouter autant de dollars au prix de l’article. Ne s’applique qu’aux articles à prix fixe.</div>

                <em>Mercredi Malade</em>
                <div class="sale">Modifier chaque occurrence du plus <span class="rule-seeded">grand</span> chiffre du prix avec le plus <span class="rule-seeded">petit</span> chiffre du prix<span class="rule-seeded">, et vice versa</span>.</div>

                <em>Jeudi Jubilant</em>
                <div class="sale">Tous les articles ayant une position <span class="rule-seeded">impaire</span> sur la liste de course coûtent <span class="rule-seeded">moitié prix</span>.</div>

                <em>Vendredi Verger</em>
                <div class="sale">Tous les fruits coûtent <span class="rule-seeded">25% de plus</span> par livre.</div>

                <em>Samedi Sucré</em>
                <div class="sale">Toutes les sucreries coûtent <span class="rule-seeded">35% de moins</span>.</div>

                <em>Dimanche Distinct</em>
                <div class="sale">Tous les articles à prix fixe qui contiennent un S coûtent <span class="rule-seeded">2.15</span>$ de plus.</div>

            </div>
                <div class="page-footer relative-footer">Page 1 sur 3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Caisse Bon Marché</span>
            </div>
            <div class="page-content">
                <h3>Prix des articles :</h3>
                <div style="font-style: italic; font-size: 14px">Les prix devraient toujours être exprimés en dollars, par exemple, 0,68$ au lieu de 68¢. Tous les prix des articles sont arrondis à la 2<sup>e</sup> décimale. Arrondir commercialement après avoir calculé le prix de l’article ainsi qu’après avoir appliqué la vente.</div>
                <div class="hstack">
                    <table>
                        <tr><th>Article</th><th>Prix</th><th>Catégorie</th></tr>
                        <tr><td>Bananas</td><td>0.87$ par livre</td><td>Fruit</td></tr>
                        <tr><td>Broccoli</td><td>1.39$ par livre</td><td>Légume</td></tr>
                        <tr><td>Candy Canes</td><td>3.51$</td><td>Sucrerie</td></tr>
                        <tr><td>Canola Oil</td><td>2.28$</td><td>Huile</td></tr>
                        <tr><td>Cereal</td><td>4.19$</td><td>Céréale</td></tr>
                        <tr><td>Cheese</td><td>4.49$</td><td>Produit Laitier</td></tr>
                        <tr><td>Chicken</td><td>1.99$ par livre</td><td>Protéine</td></tr>
                        <tr><td>Chocolate Bar</td><td>2.10$</td><td>Sucrerie</td></tr>
                        <tr><td>Chocolate Milk</td><td>5.68$</td><td>Produit Laitier</td></tr>
                        <tr><td>Coffee Beans</td><td>7.85$</td><td>Autre</td></tr>
                        <tr><td>Cookies</td><td>2.00$</td><td>Sucrerie</td></tr>
                        <tr><td>Deodorant</td><td>3.97$</td><td>Cosmétique</td></tr>
                        <tr><td>Fruit Punch</td><td>2.08$</td><td>Sucrerie</td></tr>
                        <tr><td>Grape Jelly</td><td>2.98$</td><td>Sucrerie</td></tr>
                        <tr><td>Grapefruit</td><td>1.08$ par livre</td><td>Fruit</td></tr>
                        <tr><td>Gum</td><td>1.12$</td><td>Sucrerie</td></tr>
                        <tr><td>Honey</td><td>8.25$</td><td>Sucrerie</td></tr>
                    </table>
                    <table>
                        <tr><th>Article</th><th>Prix</th><th>Catégorie</th></tr>
                        <tr><td>Mints</td><td>6.39$</td><td>Sucrerie</td></tr>
                        <tr><td>Mustard</td><td>2.36$</td><td>Autre</td></tr>
                        <tr><td>Oranges</td><td>0.80$ par livre</td><td>Fruit</td></tr>
                        <tr><td>Paper Towels</td><td>9.46$</td><td>Cosmétique</td></tr>
                        <tr><td>Pasta Sauce</td><td>2.30$</td><td>Légume</td></tr>
                        <tr><td>Peanut Butter</td><td>5.00$</td><td>Protéine</td></tr>
                        <tr><td>Pork</td><td>4.14$ par livre</td><td>Protéine</td></tr>
                        <tr><td>Potato Chips</td><td>3.25$</td><td>Huile</td></tr>
                        <tr><td>Potatoes</td><td>0.68$ par livre</td><td>Légume</td></tr>
                        <tr><td>Shampoo</td><td>4.98$</td><td>Cosmétique</td></tr>
                        <tr><td>Socks</td><td>6.97$</td><td>Autre</td></tr>
                        <tr><td>Soda</td><td>2.05$</td><td>Sucrerie</td></tr>
                        <tr><td>Spaghetti</td><td>2.92$</td><td>Céréale</td></tr>
                        <tr><td>Steak</td><td>4.97$ par livre</td><td>Protéine</td></tr>
                        <tr><td>Sugar</td><td>2.08$</td><td>Sucrerie</td></tr>
                        <tr><td>Tea</td><td>2.35$</td><td>Boisson</td></tr>
                        <tr><td>Tissues</td><td>3.94$</td><td>Cosmétique</td></tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 2 sur 3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Caisse Bon Marché</span>
            </div>
            <div class="page-content">
                <div class="hstack">
                    <table>
                        <tr><td>Ketchup</td><td>3.59$</td><td>Autre</td></tr>
                        <tr><td>Lemons</td><td>1.74$ par livre</td><td>Fruit</td></tr>
                        <tr><td>Lettuce</td><td>1.10$ par livre</td><td>Légume</td></tr>
                        <tr><td>Lollipops</td><td>2.61$</td><td>Sucrerie</td></tr>
                        <tr><td>Lotion</td><td>7.97$</td><td>Cosmétique</td></tr>
                        <tr><td>Mayonnaise</td><td>3.99$</td><td>Huile</td></tr>
                    </table>
                    <table>
                        <tr><td>Tomatoes</td><td>1.80$ par livre</td><td>Fruit</td></tr>
                        <tr><td>Toothpaste</td><td>2.50$</td><td>Cosmétique</td></tr>
                        <tr><td>Turkey</td><td>2.98$ par livre</td><td>Protéine</td></tr>
                        <tr><td>Water Bottles</td><td>9.37$</td><td>Boisson</td></tr>
                        <tr><td>White Bread</td><td>2.43$</td><td>Céréale</td></tr>
                        <tr><td>White Milk</td><td>3.62$</td><td>Produit Laitier</td></tr>
                    </table>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 3 sur 3</div>
        </div>
    </div>
</body>
</html>
