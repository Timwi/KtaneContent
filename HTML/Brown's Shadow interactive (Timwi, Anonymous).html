<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Brown's Shadow — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style media="screen">
        table {
            margin: 1em auto;
        }

        .dark svg text.ondark {
            fill: #DDD;
        }

        .dark svg path.ondark {
            stroke: #DDD;
        }

        #tunnels {
            width: 13.3cm;
            height: 7cm;
            position: relative;
            perspective: 75cm;
            perspective-origin: 200% -150%;
            margin: 0;
        }

        #tunnels>* {
            position: absolute;
            top: 0;
            left: 0;
            transform-origin: 0 0 0;
            transform-style: preserve-3d;
            perspective: 75cm;
        }

        #tunnels>#man {
            width: 2cm;
            height: 2cm;
        }

        #tunnels>#man>.pic {
            position: absolute;
            width: 2cm;
            height: 2cm;
            background: url('img/3D Tunnels/stickman.png');
            background-size: 4cm 2cm;
            background-repeat: no-repeat;
            background-color: rgba(255, 255, 255, .5);
            border-radius: 40%;
            transform-style: preserve-3d;
            backface-visibility: hidden;
        }

        #tunnels>#man>#pic-front {
            background-position: 0 0;
        }

        #tunnels>#man>#pic-back {
            background-position: -2cm 0;
            transform: rotate3d(0, 1, 0, 180deg);
        }

        #controls {
            float: right;
            clear: right;
            width: 4.2cm;
        }

        button {
            width: 1.8cm;
            height: 0.8cm;
            font-size: 16pt;
        }

        .dark button {
            background-color: #BBB;
        }

        #controls>div {
            float: right;
        }

        #controls>div>button {
            width: 1.7cm;
            height: 1.7cm;
        }

        #interactive {
            position: relative;
            min-width: 17.5cm;
        }
    </style>
</head>

<body>
    <div class="section">
        <div class="page page-bg-05">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Brown's Shadow</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Brown's Shadow.svg" class="diagram">
                <h2>On the Subject of 4D Tunnels</h2>
                <p class="flavour-text">A new hyperfixation, if you will.</p>
                <p>This module will display a 3D net of a 4D hypercube. Tap the brown button to move forward in the net.
                    The other buttons will rotate you.</p>
                <p>Three 3D cells in the net will be marked. One will be marked with a color, one with a shape, and one
                    with a number.</p>
                <p>
                    Use the marked cells to determine which cell to submit. Each cell has a label. In the following
                    table, tag the cells corresponding to the marked cells. Submit the cell that is in the remaining
                    untagged column and the row with the majority tags. The non-visible cell is zag.
                </p>
                <p>To submit a cell, move into a wall in that cell. Moving into an incorrect wall will incur a strike.
                </p>
                <p>Note that the hypercube will <em>never</em> be mirrored.</p>
                <table>
                    <tr>
                        <td><button id="cLeft">Left</button></td>
                        <td><button id="cBack">Back</button></td>
                        <td><button id="cDown">Down</button></td>
                        <td><button id="cZig">Zig</button></td>
                    </tr>
                    <tr>
                        <td><button id="cRight">Right</button></td>
                        <td><button id="cFront">Front</button></td>
                        <td><button id="cUp">Up</button></td>
                        <td><button id="cZag">Zag</button></td>
                    </tr>
                </table>
                <div id="interactive">
                    <div id="controls">
                        <h4>Rotate:</h4>
                        <div>X <button id="xCw">⟳</button><button id="xCcw">⟲</button></div>
                        <div>Y <button id="yCw">⟳</button><button id="yCcw">⟲</button></div>
                        <div>Z <button id="zCw">⟳</button><button id="zCcw">⟲</button></div>
                    </div>
                    <div id="tunnels">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="10 0 177.46 136.18" font-size="10">
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M93.81 67.8l-15-6v-24l15 6zM93.81 67.8v-24l21-5v24z" />
                                <path d="M93.81 43.8l-15-6 21-5 15 6z" />
                            </g>
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M57.81 66.8l-15-6v-24l15 6zM57.81 66.8v-24l21-5v24z" />
                                <path d="M57.81 42.8l-15-6 21-5 15 6z" />
                            </g>
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M72.81 120.8l-15-6v-24l15 6zM72.81 120.8v-24l21-5v24z" />
                                <path d="M72.81 96.8l-15-6 21-5 15 6z" />
                            </g>
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M72.81 96.8l-15-6v-24l15 6zM72.81 96.8v-24l21-5v24z" />
                                <path d="M72.81 72.8l-15-6 21-5 15 6z" />
                            </g>
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M87.81 78.8l-15-6v-24l15 6zM87.81 78.8v-24l21-5v24z" />
                                <path d="M87.81 54.8l-15-6 21-5 15 6z" />
                            </g>
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M51.81 77.8l-15-6v-24l15 6zM51.81 77.8v-24l21-5v24z" />
                                <path d="M51.81 53.8l-15-6 21-5 15 6z" />
                            </g>
                            <g fill="#e0e0e060" stroke="#000" stroke-linejoin="round" stroke-width=".5">
                                <path d="M72.81 48.8l-15-6v-24l15 6zM72.81 48.8v-24l21-5v24z" />
                                <path d="M72.81 24.8l-15-6 21-5 15 6z" />
                            </g>
                            <g transform="translate(-80 0)">
                                <path class="ondark" fill="#d4d4d4" stroke="#000"
                                    d="M221.81 48.8l31 12M215.81 59.8l42-10M236.81 30.8v72" />
                                <path stroke="#000" stroke-width=".5" d="M236.81 96.88l6.9 11.84h-13.79z" />
                                <path fill="#ff0" stroke="#000" stroke-width=".5"
                                    d="M236.81 71.25l6.59 3.78v7.54l-6.59 3.78-6.58-3.78v-7.54z" />
                                <ellipse cx="236.81" cy="54.8" fill="#f0f" stroke="#000" stroke-width=".5" rx="6.08"
                                    ry="6.04" />
                                <path fill="#0ff" stroke="#000" stroke-width=".5"
                                    d="M240.52 24.97l-.02 2.16h2.19v7.35l-2.19-.01.02 2.16h-7.41l.01-2.16h-2.18v-7.35l2.18.01-.01-2.16z" />
                                <ellipse cx="216.99" cy="-146.3" fill="#0f0" stroke="#000" stroke-width=".5" rx="8.48"
                                    ry="6.06" transform="scale(1.0036 .99638) rotate(45)" />
                                <path fill="#00f" stroke="#000" stroke-width=".5" d="M215.21-141.04h12.12v12.12h-12.12z"
                                    transform="scale(1.0036 .99638) rotate(45)" />
                                <path fill="#fff" stroke="#000" stroke-width=".5"
                                    d="M221.81 41.97l2.68 3.89 4.55 1.33-2.89 3.73.13 4.7-4.47-1.57-4.46 1.58.13-4.71-2.9-3.73 4.55-1.33z" />
                                <path fill="red" stroke="#000" stroke-width=".5"
                                    d="M209.73 53.76h12.16v12.08h-12.16z" />

                                <text x="221.93" y="52.73" stroke-width=".5" text-anchor="middle">1</text>
                                <text x="257.9" y="53.3" stroke-width=".5" text-anchor="middle">2</text>
                                <text x="216.16" y="63.33" stroke-width=".5" text-anchor="middle">3</text>
                                <text x="252.37" y="64.34" fill="#fff" stroke-width=".5" text-anchor="middle">4</text>
                                <text x="237.01" y="33.94" stroke-width=".5" text-anchor="middle">5</text>
                                <text x="236.93" y="58.31" stroke-width=".5" text-anchor="middle">6</text>
                                <text x="236.98" y="82.12" stroke-width=".5" text-anchor="middle">7</text>
                                <text x="236.96" y="108.18" fill="#fff" stroke-width=".5" text-anchor="middle">8</text>
                            </g>

                            <text class="ondark" x="45" y="-20" stroke-width="5" text-anchor="middle"
                                transform="translate(32.81 28.8)">up</text>
                            <text class="ondark" x="60.26" y="5" stroke-width="5"
                                transform="translate(46.57 28.6)">front</text>
                            <text class="ondark" x="60.73" y="55" stroke-width="5"
                                transform="translate(50 26)">right</text>
                            <text class="ondark" x="31.63" y="40" stroke-width="5" text-anchor="end"
                                transform="translate(2.27 28.63)">back</text>
                            <text class="ondark" x="31.63" y="40" stroke-width="5" text-anchor="end"
                                transform="translate(11.69 -6.37)">left</text>
                            <text class="ondark" x="75" y="55" stroke-width="5" text-anchor="middle"
                                transform="translate(-2.47 76.31)">zig</text>
                            <text class="ondark" x="60.73" y="55" stroke-width="5"
                                transform="translate(49.27 48.6)">down</text>
                            <path class="ondark" fill="#d4d4d4" stroke="#000" d="M108.81 96.8l-20-10" />
                        </svg>
                        <div id='man'>
                            <div class='pic' id='pic-front'></div>
                            <div class='pic' id='pic-back'></div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
    <script>
        var man = document.getElementById('man');
        var rotations = ' rotate3d(0, 1, 0, 45deg)';
        var x = 1.2, y = 0.9, z = 0;

        var scale = 4.4;

        function update() {
            man.style.transform = `translate3d(${scale * x}cm, ${scale * y}cm, -${scale * z}cm) translate3d(-0.4cm, 0.2cm, 0)${rotations} translate3d(-1cm, -1cm, 0)`;
        }

        update();

        document.getElementById('cLeft').onclick = function () { x = 0.97; y = 0.8; z = 0; update(); return false; }
        document.getElementById('cBack').onclick = function () { x = 0.87; y = 0.98; z = 0; update(); return false; }
        document.getElementById('cDown').onclick = function () { x = 1.2; y = 1.3; z = 0; update(); return false; }
        document.getElementById('cZig').onclick = function () { x = 1.2; y = 1.7; z = 0; update(); return false; }
        document.getElementById('cRight').onclick = function () { x = 1.43; y = 1; z = 0; update(); return false; }
        document.getElementById('cFront').onclick = function () { x = 1.53; y = .82; z = 0; update(); return false; }
        document.getElementById('cUp').onclick = function () { x = 1.2; y = 0.5; z = 0; update(); return false; }
        document.getElementById('cZag').onclick = function () { x = 1.2; y = 0.9; z = 0; update(); return false; }

        document.getElementById('xCw').onclick = function () { rotations = ` rotate3d(1, 0, 1, 90deg)${rotations}`; update(); return false; }
        document.getElementById('xCcw').onclick = function () { rotations = ` rotate3d(1, 0, 1, -90deg)${rotations}`; update(); return false; }
        document.getElementById('yCw').onclick = function () { rotations = ` rotate3d(0, 1, 0, -90deg)${rotations}`; update(); return false; }
        document.getElementById('yCcw').onclick = function () { rotations = ` rotate3d(0, 1, 0, 90deg)${rotations}`; update(); return false; }
        document.getElementById('zCw').onclick = function () { rotations = ` rotate3d(-1, 0, 1, 90deg)${rotations}`; update(); return false; }
        document.getElementById('zCcw').onclick = function () { rotations = ` rotate3d(-1, 0, 1, -90deg)${rotations}`; update(); return false; }
    </script>
</body>

</html>