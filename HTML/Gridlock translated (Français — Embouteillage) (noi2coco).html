<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Gridlock — Keep Talking and Nobody Explodes Mod</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/jquery.3.7.0.min.js"></script>
    <script src="js/Utilities/svg-utils.js"></script>
    <script>
    $(function() {
        const rotation = { N: 0, NE: 45, E: 90, SE: 135, S: 180, SW: 225, W: 270, NW: 315 };
        const direction = (
            "SW NE S E "+
            "SW N W NW "+
            "N NW S W "+
            "NE SE SE E "+

            "W SW N NW "+
            "N S NW W "+
            "SE E NE SE "+
            "E S NE SW "+

            "E S NE SW "+
            "W SW N NW "+
            "N S NW W "+
            "SE E NE SE "+

            "W N S NW "+
            "SE SE E NE "+
            "SW E S NE "+
            "NW W SW N "+

            "N NW W SW "+
            "NW W N S "+
            "NE SE SE E "+
            "NE SW E S"
        ).split(" ");
        let cells = $("table.gridlock-1 tr:nth-child(n+2) th");
        cells.each(function(i, e) {
            let svg = MakeSvgTag(100,100,0,0, { class:"arrow" });
            let arrow = MakeArrow(rotation[ direction[i] ], 100,50,50, "thin-v", "thin");
            svg.append(arrow);
            $(this).append(svg);
        });
    });
    </script>
    <style>
        li { margin: .3em 0; }
        .dark table, table { border: none; }

        table.gridlock-1 {
            margin: 1em auto;
            font-size: 18pt;
        }
            table.gridlock-1 td, table.gridlock-1 th {
                text-align: center;
                line-height: 1;
            }
            table.gridlock-1 tr:nth-child(n+2) th {
                padding: 6px 3px 0;
            }
        table.gridlock-2 {
            margin: 1.5em auto;
        }
        svg.arrow { height: 30px; }
        .dark svg .arrow-hs { fill: #DDD; }
        .search-rules li { margin: 0; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Embouteillage</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Gridlock.svg" class="diagram">
                <h2>À propos de l’Embouteillage</h2>
                <p class="flavour-text">Même un embouteillage n’est pas aussi discontinu.</p>

                <ul>
                    <li>Une grille de quatre sur quatre est affichée, avec des carrés marqués avec des couleurs et/ou des formes.
                    <li>La position de départ est le carré marqué d’une étoile.
                    <li>À l’aide du premier tableau de la page suivante, trouver la direction indiquée par l’étoile et la couleur de ce carré.
                    <li>La position suivante est le carré suivi d’un espace dans le sens indiqué par la table de recherche.
                    <li>Appuyer sur le bouton «&nbsp;<em>NEXT</em>&nbsp;». Ceci modifiera les informations affichées sur le module.
                    <li>Continuer à rechercher des positions à l’aide des règles suivantes&nbsp;:
                    <ul class='search-rules'>
                        <li>Si le carré actuel du module comporte une flèche, se déplacer dans le sens indiqué par la flèche. 
                        <li>Si le carré actuel est coloré, utiliser le premier tableau pour rechercher la direction à suivre
                        en fonction du symbole et de la couleur du carré, puis appuyer sur le bouton «&nbsp;<em>NEXT</em>&nbsp;».
                        <li>Si le carré actuel du module est vide, trouver le tableau marqué de la même couleur que le dernier 
                        carré coloré utilisé, et se déplacer dans la direction indiquée en fonction de la position actuelle. 
                    </ul>
                    <li>Si, à un moment donné, un mouvement entraîne une arrivée sur une position précédemment occupée,
                    continuer dans la même direction jusqu’à arriver sur une position encore inutilisée. 
                    <li>La grille tourne en rond, de sorte qu’un mouvement ascendant de la ligne supérieure se déplace vers
                    la ligne inférieure de la même colonne, et de même pour un mouvement gauche/droite en dehors de la grille,
                    ou un mouvement diagonal en dehors de la grille (par exemple, un mouvement nord-est depuis A1 mène à B4). 
                    <li>À un moment donné, une instruction entraînera un blocage, où toutes les positions possibles valides 
                    pour se déplacer auront déjà été utilisées. 
                    <li>La case qui a donné ce mouvement est la solution. Appuyer sur cette case sur la grille désamorce le module. 
                    <li>Appuyer sur n’importe quelle autre case de la grille enregistrera une erreur et le module retournera
                    à son état initial. 
                    <li>Le numéro de page en bas à droite du module indique quel ensemble de symboles le module affiche actuellement.
                    Dans certains cas, il peut être nécessaire de revenir à la première page pour désamorcer le module. 
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 1 sur 2</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Embouteillage</span>
            </div>
            <div class="page-content">


                <table class='gridlock-1'>
                    <tr><th>Mouvement</th><th>Bleu</th><th>Vert</th><th>Jaune</th><th>Rouge</th></tr>
                    <tr><td>△</td><th></th><th></th><th></th><th></th></tr>
                    <tr><td>◇</td><th></th><th></th><th></th><th></th></tr>
                    <tr><td>⎔</td><th></th><th></th><th></th><th></th></tr>
                    <tr><td>☆</td><th></th><th></th><th></th><th></th></tr>
                </table>

                    <table class='gridlock-2'>
                        <tr>
                            <td class="corner">
                                <table class='gridlock-1'>
                                <tr><th>Bleu</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                                <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                                </table>
                            </td><td class="corner">
                                <table class='gridlock-1'>
                                <tr><th>Vert</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                                <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                                </table>
                            </td>
                        </tr>
                        <tr>
                            <td class="corner">
                                <table class='gridlock-1'>
                                <tr><th>Jaune</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                                <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                                </table>
                            </td><td class="corner">
                                <table class='gridlock-1'>
                                <tr><th>Rouge</th><th>A</th><th>B</th><th>C</th><th>D</th></tr>
                                <tr><td>1</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>2</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>3</td><th></th><th></th><th></th><th></th></tr>
                                <tr><td>4</td><th></th><th></th><th></th><th></th></tr>
                                </table>
                            </td>
                        </tr>
                    </table>
            </div>
            <div class="page-footer relative-footer">Page 2 sur 2</div>
        </div>
    </div>
</body>
</html>
