<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Orientation Hypercube — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .page p:not(.flavour-text, .footnote), .page li { font-size: 10.8pt; }

        .dark table, table {
            margin: 1em auto;
            border: none;
        }

        svg {
            float: right;
            margin-left: 10px;
        }
        svg path {
            stroke: #000;
            fill: transparent;
        }
        svg text {
            transform-origin: center;
            user-select: none;
            pointer-events: none;
        }
        .dark svg path { stroke: #DDD; }
        .dark svg text { fill: #DDD; }

        svg.panel {
            padding-top: 3%;
            padding-bottom: 3%;
        }
        svg.arrows path:nth-child(n+7) { fill:#000; }
        svg.arrows path { stroke-linejoin:round; }
        .dark svg.arrows path:nth-child(n+7) { fill: #DDD; }

        .dark .diagram {
            background-color: transparent;
            filter: invert(90%);
        }
        .footnote { font-size: 13px; }
        .page.strip { --strip-color: #000; }
        .page-footer::before { content: 'Page '; }
        .page-footer::after { content: ' of 2'; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01 strip">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Orientation Hypercube</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Orientation Hypercube.svg" class="diagram">
                <h2>On the Subject of Orientation Hypercube</h2>
                <p class="flavour-text">If the bomb doesn’t kill us, a higher-dimensional creature rotating our brains sure will!</p>
                <p>
                    This module houses a four-dimensional hypercube, a nine-segment panel, a six-button keypad, and a large ‘Set’ button.
                    There is also an eye-shaped observer looking at the hypercube.
                </p>
                <p>
                    Use the buttons to input a sequence of rotations which take the hypercube to the target orientation,
                    as determined by the colours of its faces. Then, press the ‘Set’ button to solve the module.
                </p>
                <h3>The Hypercube and Panel</h3>
                <svg class="panel" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg" text-anchor="middle" font-size="10" style="width: 32%">
                    <path class="highlightable" d="M3 1 H97 l-15 15 H18z"/>
                    <path class="highlightable" d="M21 19 H79 l-15 15 H36z"/>
                    <path class="highlightable" d="M3 99 H97 l-15 -15 H18z"/>
                    <path class="highlightable" d="M21 81 H79 l-15 -15 H36z"/>
                    <path class="highlightable" d="M1 3 V97 l15 -15 V18z"/>
                    <path class="highlightable" d="M19 21 V79 l15 -15 V36z"/>
                    <path class="highlightable" d="M99 3 V97 l-15 -15 V18z"/>
                    <path class="highlightable" d="M81 21 V79 l-15 -15 V36z"/>
                    <path class="highlightable" d="M37 37 h26 v26 h-26z"/>
                    <text x="50" y="11.5">Top</text>
                    <text x="50" y="29.5">Back</text>
                    <text x="50" y="94.5">Bottom</text>
                    <text x="50" y="77">Front</text>
                    <text x="50" y="11.5" style="transform:rotate(90deg)">Zag</text>
                    <text x="50" y="29.5" style="transform:rotate(90deg)">Right</text>
                    <text x="50" y="11.5" style="transform:rotate(-90deg)">Zig</text>
                    <text x="50" y="29.5" style="transform:rotate(-90deg)">Left</text>
                </svg>
                <p>
                    The “hypercube” on the module is actually a three-dimensional projection of a <a href="https://en.wikipedia.org/wiki/Tesseract" target="_blank">tesseract</a>,
                    which has eight three-dimensional faces.
                </p>
                <p>
                    Mousing over one the non-centre segments of the panel to the right of the tesseract will highlight its corresponding face
                    according to the diagram on the right. Press the status light to toggle colourblind mode (B = blue, K = black).
                </p>
                <strong class="footnote">Note that these directions are relative to the perspective of the defuser, when looking from below the module.</strong>
                <h3 style="clear:right">The Buttons</h3>
                <svg class="arrows" viewBox="0 0 368.464 315" xml:space="preserve" xmlns="http://www.w3.org/2000/svg" font-size="30" style="width: 32%">
                    <path style="stroke-width:4.56495" d="M47.938 92.106h114.124V206.23H47.938z" transform="translate(-45.495 66.555)"/>
                    <path style="stroke-width:4.56495" transform="rotate(180 -22.747 33.277)" d="M-286.869-206.23h114.124v114.124h-114.124z"/>
                    <path style="stroke-width:4.56495" transform="rotate(180 -22.747 33.277)" d="M-411.676-206.23h114.124v114.124h-114.124z"/>
                    <path style="stroke-width:4.56495" d="M47.777-32.7h114.124V81.424H47.777z" transform="translate(-45.495 66.555)"/>
                    <path style="stroke-width:4.56495" transform="rotate(180 -22.747 33.277)" d="M-286.709-81.424h114.124V32.7h-114.124zM-411.516-81.424h114.124V32.7h-114.124z"/>
                    <path style="stroke-width:11.9156;stroke-linecap:round" d="M384.692 51.256a39.719 39.719 0 0 1-46.523 8.867 39.719 39.719 0 0 1-21.938-41.973 39.719 39.719 0 0 1 33.84-33.135A39.719 39.719 0 0 1 391.573 7.83m-.118.044-17.492-3.32M393.167-9.88l-1.482 17.743M74.601 51.256a39.719 39.719 0 0 0 46.523 8.867 39.719 39.719 0 0 0 21.938-41.973 39.719 39.719 0 0 0-33.84-33.135A39.719 39.719 0 0 0 67.72 7.83m.118.044 17.493-3.32M66.126-9.88 67.61 7.863" transform="translate(-45.495 66.555)"/>
                    <path style="stroke-width:3.43413" d="M99.109 179.995v-19.47h55.164v-22.714H99.109v-19.47L55.727 149.17z" transform="translate(-45.495 66.555)"/>
                    <path style="stroke-width:3.43413" d="m360.506 118.341-.001 19.47h-55.163v22.714h55.164v19.47l43.382-30.828z" transform="translate(-45.495 66.555)"/>
                    <path style="stroke-width:3.13267" d="M216.008 18.988h10.519L214.459 69.31h30.375l-12.069-50.321h10.52l-13.638-39.574z" transform="translate(-45.495 66.555)"/>
                    <path style="stroke-width:3.23085" d="M273.744 154.71H247.96l-12.447-51.898h-11.412l-12.447 51.899h-25.783l43.936 40.814z" transform="translate(-45.495 66.555)"/>
                    <text x="0" y="21">Counter</text>
                    <text x="168" y="21">In</text>
                    <text x="264" y="21">Clock</text>
                    <text x="28" y="305">Left</text>
                    <text x="157" y="305">Out</text>
                    <text x="267" y="305">Right</text>
                </svg>
                <p>The buttons on the module are used to rotate the tesseract in three different ways:</p>
                <ul>
                    <li>The “clock” and “counter” buttons will roll the tesseract in their respective directions. This means that the top face moves
                        to become the right or left face, respectively.
                    </li>
                    <li>
                        The “left” and “right” buttons will yaw the tesseract in their respective directions. This means that the front face moves
                        to become the left or right face, respectively.
                    </li>
                    <li>
                        The “in” and “out” buttons will ‘push’ the front face into, or ‘pull’ the zig face out of, the centre of the projection.
                        This means that the front face moves to become the zig or zag face, respectively.
                    </li>
                </ul>
                <strong class="footnote">
                    Note that these directions are relative to the perspective of the observer (at the time of pressing), which has a chance to move
                    after pressing any button except left and right.
                </strong>
            </div>
            <div class="page-footer relative-footer">1</div>
        </div>

        <div class="page page-bg-02 strip">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Orientation Hypercube</span>
            </div>
            <div class="page-content">
                <h3>Rotation Preview Mode</h3>
                <p>
                    Press the centre square of the panel to enter rotation preview mode.
                    <strong>This can only be done before any rotations are queued.</strong>
                </p>
                <p>
                    The observer will move so that it looks directly at the module. Pressing the rotation buttons in this state will rotate the tesseract
                    accordingly.
                </p>
                <p>Press the centre again to exit this mode. Any rotations done in this mode are ignored.</p>
                <h3>Finding the Target Orientation</h3>
                <table style="text-align: center;float: right;margin-left: 10px;font-size: 13px">
                    <tr><th>Axis</th><th>Negative</th><th>Positive</th><th>Bits</th></tr>
                    <tr><td>X</td><td>Left</td><td>Right</td><td>00</td></tr>
                    <tr><td>Y</td><td>Bottom</td><td>Top</td><td>01</td></tr>
                    <tr><td>Z</td><td>Front</td><td>Back</td><td>10</td></tr>
                    <tr><td>W</td><td>Zig</td><td>Zag</td><td>11</td></tr>
                </table>
                <p>
                    Consider the <a href="https://ktane.timwi.de/HTML/RGB%20Combination.html" target="_blank">RGB components</a> of each face colour as
                    separate binary digits, with the presence of a component representing a 1, and absence representing a 0. Any black faces will instead be absent.
                </p>
                <p>
                    The positive faces and negative faces each form a four-digit binary number for each component, with the X axis giving the
                    most significant bit, followed by Y, then Z, then W.
                </p>
                <p>
                    Cycle the (binary) digits of the number obtained from the negative faces to the left by the number of batteries minus the number
                    of battery holders on the bomb, and cycle the digits of the other number to the right by the number of ports. Finally, for
                    every letter in “XYZW” present in the serial number, invert the bits whose position matches the corresponding letter’s
                    position in “XYZW”.
                </p>
                <p>The final number obtained from the faces correspond to directions, as follows:</p>
                <ul>
                    <li>The first pair of bits corresponds to the axis, according to the table above.</li>
                    <li>The second pair of bits indicates the sign: if they match, use the positive direction; otherwise, use the negative direction.</li>
                </ul>
                <p>
                    To get to the target orientation, rotate the tesseract so that, for each colour component, the face in the direction obtained from
                    the negative faces ends up in the direction obtained from the positive faces.
                </p>

                <h3>Submission</h3>
                <p>
                    Pressing the rotation buttons while not in Rotation Preview Mode will queue the corresponding rotations. Pressing ‘Set’ will reveal the
                    initial red, green, and blue faces from the previous section, and execute the rotations.
                </p>
                <p>On a strike, press ‘Set’ or the centre panel button to return the module to its initial state. The tesseract’s orientation is reset, and the target orientation remains the same.</p>
            </div>
            <div class="page-footer relative-footer">2</div>
        </div>
    </div>
</body>
</html>