<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Valves — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .combinations {
            float: left;
            padding-left: 2em;
            padding-right: 1em;
            margin: .5em 2em 0 0;
            border-right: 1px solid #ccc;
            line-height: 1.5624;
        }
        ul.rules {
            margin-left: 2.6cm;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Valves</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Valves.svg" class="diagram">
                <h2>On the Subject of Valves</h2>
                <p class="flavour-text">Um... Where do I blow the air?</p>
                <ol class="combinations">
                    <li>⚫⚫⚪</li><li>⚫⚫⚫</li><li>⚪⚪⚫</li><li>⚪⚪⚪</li><li>⚫⚪⚪</li><li>⚪⚪⚪</li>
                    <li>⚪⚪⚫</li><li>⚪⚫⚫</li><li>⚪⚫⚪</li><li>⚫⚫⚪</li><li>⚪⚫⚫</li><li>⚫⚪⚪</li>
                    <li>⚪⚪⚫</li><li>⚪⚫⚫</li><li>⚫⚪⚪</li><li>⚪⚪⚪</li><li>⚫⚫⚪</li><li>⚫⚫⚫</li>
                    <li>⚪⚫⚫</li><li>⚫⚫⚫</li><li>⚫⚫⚪</li><li>⚪⚫⚪</li><li>⚫⚪⚪</li><li>⚪⚪⚪</li>
                    <li>⚪⚫⚪</li><li>⚪⚫⚫</li><li>⚪⚫⚪</li><li>⚫⚫⚪</li><li>⚪⚪⚫</li><li>⚫⚫⚫</li>
                    <li>⚪⚪⚪</li><li>⚪⚪⚫</li><li>⚫⚫⚫</li><li>⚪⚫⚪</li><li>⚫⚪⚫</li><li>⚫⚫⚪</li>
                </ol>
                <ul class='rules'>
                    <li>There are 3 valves on the module. This is the <em>module combination</em>. To solve the module, submit the <em>final combination</em>.</li>
                    <li>Start by adding up the digits in the serial number.</li>
                    <li style='clear: right;'>If this sum is 0, the <em>final combination</em> is ⚫⚪⚫.</li>
                    <li>Otherwise, find the <em>current combination</em> in that position in the list on the left.</li>
                    <li>Examine the 1st character of the serial number.
                        <ul>
                            <li>If it is a number, move that many places backwards through the list.</li>
                            <li>If it is a letter, take its alphabetic position (A = 1, B = 2, etc.) modulo 10 and move that many places down the list.</li>
                            <li>Wrap around to the beginning or end of the table when needed.</li>
                        </ul></li>
                    <li>If none of the valves in the combination you land on match the same valve in the <em>current combination</em>, move a space in the same direction.</li>
                    <li>If exactly 1 of the valves matches the same valve in the <em>current combination</em>, invert that valve.</li>
                    <li>Otherwise, if exactly 2 of the valves matches the same valve in the <em>current combination</em>, invert the remaining valve.</li>
                    <li>Otherwise, if the valves match the <em>current combination</em> exactly, this is the <em>target combination</em>. Do not move on to other serial number characters.</li>
                    <li>Repeat these steps with the rest of the serial number characters, using the new combination as the new <em>current combination</em>.</li>
                    <li>After processing all serial number characters, the <em>current combination</em> is now the <em>target combination</em>.</li>
                    <li>After finding the <em>target combination</em>, use the module combination and follow the rules below.
                    <li>If the material of the valves on the module is silver, then toggle the entire <em>target combination.</em></li>
                    <li>Finally, if a valve is black in the module combination, then toggle that valve in the target combination to get the <em>final combination</em>.</li>
                     <li>To enter the solution, press down every valve in the <em>final combination</em> that is black. 3 seconds after any valve is pressed, the module will submit its state.</li>
                </ul>
            </div>
           <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>
