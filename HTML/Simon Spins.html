<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>Simon Spins — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <style>
        .symbol {
            width: 1cm;
            height: 1cm;
            display: block;
            background-size: 3cm 20cm;
            background-repeat: no-repeat;
            background-image: url('img/Simon Spins/Icons.svg');
        }
            .symbol-0-0 { background-position:  0cm  0cm; }
            .symbol-0-1 { background-position: -1cm  0cm; }
            .symbol-0-2 { background-position: -2cm  0cm; }
            .symbol-1-0 { background-position:  0cm -1cm; }
            .symbol-1-1 { background-position: -1cm -1cm; }
            .symbol-1-2 { background-position: -2cm -1cm; }
            .symbol-2-0 { background-position:  0cm -2cm; }
            .symbol-2-1 { background-position: -1cm -2cm; }
            .symbol-2-2 { background-position: -2cm -2cm; }
            .symbol-3-0 { background-position:  0cm -3cm; }
            .symbol-3-1 { background-position: -1cm -3cm; }
            .symbol-3-2 { background-position: -2cm -3cm; }
            .symbol-4-0 { background-position:  0cm -4cm; }
            .symbol-4-1 { background-position: -1cm -4cm; }
            .symbol-4-2 { background-position: -2cm -4cm; }
            .symbol-5-0 { background-position:  0cm -5cm; }
            .symbol-5-1 { background-position: -1cm -5cm; }
            .symbol-5-2 { background-position: -2cm -5cm; }
            .symbol-6-0 { background-position:  0cm -6cm; }
            .symbol-6-1 { background-position: -1cm -6cm; }
            .symbol-6-2 { background-position: -2cm -6cm; }
            .symbol-7-0 { background-position:  0cm -7cm; }
            .symbol-7-1 { background-position: -1cm -7cm; }
            .symbol-7-2 { background-position: -2cm -7cm; }
            .symbol-8-0 { background-position:  0cm -8cm; }
            .symbol-8-1 { background-position: -1cm -8cm; }
            .symbol-8-2 { background-position: -2cm -8cm; }
            .symbol-9-0 { background-position:  0cm -9cm; }
            .symbol-9-1 { background-position: -1cm -9cm; }
            .symbol-9-2 { background-position: -2cm -9cm; }
            .symbol-10-0 { background-position:  0cm -10cm; }
            .symbol-10-1 { background-position: -1cm -10cm; }
            .symbol-10-2 { background-position: -2cm -10cm; }
            .symbol-11-0 { background-position:  0cm -11cm; }
            .symbol-11-1 { background-position: -1cm -11cm; }
            .symbol-11-2 { background-position: -2cm -11cm; }
            .symbol-12-0 { background-position:  0cm -12cm; }
            .symbol-12-1 { background-position: -1cm -12cm; }
            .symbol-12-2 { background-position: -2cm -12cm; }
            .symbol-13-0 { background-position:  0cm -13cm; }
            .symbol-13-1 { background-position: -1cm -13cm; }
            .symbol-13-2 { background-position: -2cm -13cm; }
            .symbol-14-0 { background-position:  0cm -14cm; }
            .symbol-14-1 { background-position: -1cm -14cm; }
            .symbol-14-2 { background-position: -2cm -14cm; }
            .symbol-15-0 { background-position:  0cm -15cm; }
            .symbol-15-1 { background-position: -1cm -15cm; }
            .symbol-15-2 { background-position: -2cm -15cm; }
            .symbol-16-0 { background-position:  0cm -16cm; }
            .symbol-16-1 { background-position: -1cm -16cm; }
            .symbol-16-2 { background-position: -2cm -16cm; }
            .symbol-17-0 { background-position:  0cm -17cm; }
            .symbol-17-1 { background-position: -1cm -17cm; }
            .symbol-17-2 { background-position: -2cm -17cm; }
            .symbol-18-0 { background-position:  0cm -18cm; }
            .symbol-18-1 { background-position: -1cm -18cm; }
            .symbol-18-2 { background-position: -2cm -18cm; }
            .symbol-19-0 { background-position:  0cm -19cm; }
            .symbol-19-1 { background-position: -1cm -19cm; }
            .symbol-19-2 { background-position: -2cm -19cm; }

        .dark table, table {
            border: none;
        }
        th {
            text-align: right;
        }
        td {
            padding: .2em .5em;
        }
        ul {
            padding-left: 1.25em;
        }
        li {
            margin: .75em 0;
        }
        .simon-spins {
            float: left;
        }
        .main-content {
            float: right;
            width: 11.5cm;
        }

        div.footnotes {
            position: relative;
            margin-top: 1em;
            padding-top: 1em;
        }
        div.footnotes:before {
            border-top: 1px solid #888;
            left: 0;
            top: 0;
            position: absolute;
            width: 50mm;
            content: '';
        }
        span.footnote-marker {
            position: absolute;
            left: 0;
        }
        p.footnote {
            font-size: 75%;
            padding-left: 1.2em;
        }
        .rule {
            text-decoration: underline;
        }
        body.ruleseed-active .rule {
            font-weight: bold;
        }
        .mobile {
            display: none;
        }

        @media screen and (max-width: 900px) {
            .simon-spins, .main-content {
                float: none;
                width: auto;
            }
            .mobile {
                display: inline;
            }
            .non-mobile {
                display: none;
            }
        }
    </style>
    <script>
        function setDefaultRules(rnd)
        {
            setRules(rnd);
        }

        function setRules(rnd)
        {
            for (var i = rnd.next(0, 24); i >= 0; i--)
                rnd.nextDouble();

            var properties = [];
            for (var i = 0; i < 20; i++)
                properties.push(i);

            rnd.shuffleFisherYates(properties);

            var propList = document.getElementsByClassName('label');
            var valuesList = document.getElementsByClassName('value');
            for (var i = 0; i < 20; i++)
            {
                var values = [];
                for (var j = 0; j < 3; j++)
                    values.push(j);
                rnd.shuffleFisherYates(values);
                for (var j = 0; j < 3; j++)
                    document.getElementById(`symbol-${i}-${j}`).className = `symbol symbol-${properties[i]}-${values[j]}`;
                document.getElementById(`asterisk-${i}`).innerText = (properties[i] >= 13 && properties[i] <= 15) ? '* ' : '';
            }

            var snRulePairs = [
                [ 'first digit of the serial number', 'last digit of the serial number' ],
                [ 'first digit of the serial number', 'second digit of the serial number' ],
                [ 'third character of the serial number', 'sixth character of the serial number' ],
                [ 'second-last digit of the serial number', 'last digit of the serial number' ],
            ];
            var alternativeNumbers = [
                [
                    'number of indicators',
                    'number of lit indicators',
                    'number of unlit indicators',
                    'number of distinct letters in all indicators',
                    'number of distinct vowels in all indicators',
                    'number of distinct consonants in all indicators',
                    'number of distinct letters in all lit indicators',
                    'number of distinct vowels in all lit indicators',
                    'number of distinct consonants in all lit indicators',
                    'number of distinct letters in all unlit indicators',
                    'number of distinct vowels in all unlit indicators',
                    'number of distinct consonants in all unlit indicators',
                ],
                [
                    'number of ports',
                    'number of port plates',
                    'number of non-empty port plates',
                    'number of port plates with more than one port on it',
                    'number of port types',
                    'number of duplicated port types',
                    'number of parallel ports',
                    'number of serial ports',
                    'number of RJ-45 ports',
                    'number of Stereo RCA ports',
                    'number of DVI-D ports',
                    'number of PS/2 ports',
                    'number of ports other than parallel',
                    'number of ports other than serial',
                    'number of ports other than RJ-45',
                    'number of ports other than Stereo RCA',
                    'number of ports other than DVI-D',
                    'number of ports other than PS/2'
                ],
                [
                    'number of batteries',
                    'number of D batteries',
                    'number of AA batteries, divided by 2, rounded down',
                    'number of modules on the bomb (including needies)',
                    'number of non-needy modules on the bomb'
                ]
            ];

            var rulePair = snRulePairs[rnd.next(0, snRulePairs.length)];
            switch (rnd.next(0, 3))
            {
                case 0:
                    var arr = alternativeNumbers[rnd.next(0, alternativeNumbers.length)];
                    rulePair = [ rulePair[rnd.next(0, 2)], arr[rnd.next(0, arr.length)] ];
                    break;
                case 1:
                    rulePair = [ rulePair[1], rulePair[0] ];
                    break;
                // case 2 simply does nothing
            }

            document.getElementById('rule-1').innerText = rulePair[0];
            document.getElementById('rule-2').innerText = rulePair[1];
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Simon Spins</span>
            </div>
            <div class="page-content">
                <div class='main-content'>
                    <img class="diagram" src="img/Component/Simon Spins.svg">
                    <h2>On the Subject of Simon Spins</h2>
                    <p class="flavour-text">You’re good as long as it’s not your head that’s spinning.</p>

                    <ul>
                        <li>There are three paddles attached to a pivot. These paddles have different properties (colors, shapes, symbols, etc.) that are all listed in the table <span class='non-mobile'>on the left</span><span class='mobile'>below</span>.</li>
                        <li>Use the <span class='rule' id='rule-1'>third character of the serial number</span> to determine which row to start at. If the <span class='rule' id='rule-2'>sixth character of the serial number</span> is odd, add 10.</li>
                        <li>In stage 1, look at the starting row’s <em>leftmost</em> column and find the paddle that has the shown property. <em>Remember</em> which of the properties in the <em>next</em> row applies to the paddle, then press it.</li>
                        <li>In stage 2, press the paddle with the <em>remembered</em> property. Then find the paddle that has the property one to the right in the <em>same</em> row. <em>Remember</em> which property in the <em>next</em> row applies to it, then press it.</li>
                        <li>In each subsequent stage, press the paddles with the previously <em>remembered</em> sequence of properties in the order you remembered them. Go one to the right of the <em>last</em> property you used, find that paddle, <em>remember</em> which property in the <em>next</em> row applies to it and then press it.</li>
                        <li>If you reach the bottom or right edge of the table, wrap around to the top row or left column.</li>
                        <li>There are between 3 and 5 stages to this module.</li>
                        <li>Pressing an incorrect paddle at any time will incur a strike and reset the module to stage 1.</li>
                    </ul>

                    <div class='footnotes'>
                        <p class='footnote'><span class='footnote-marker'>*</span>Properties marked with an asterisk relate to the <em>bottom</em> side of a paddle. You can long-press a paddle to turn it to the other side.</p>
                    </div>
                </div>

                <table class="simon-spins">
                    <tr><th><span id="asterisk-0"></span>0</th><td><div class="symbol symbol-0-2" id="symbol-0-0"></div></td><td><div class="symbol symbol-0-1" id="symbol-0-1"></div></td><td><div class="symbol symbol-0-0" id="symbol-0-2"></div></td></tr>
                    <tr><th><span id="asterisk-1"></span>1</th><td><div class="symbol symbol-8-1" id="symbol-1-0"></div></td><td><div class="symbol symbol-8-2" id="symbol-1-1"></div></td><td><div class="symbol symbol-8-0" id="symbol-1-2"></div></td></tr>
                    <tr><th><span id="asterisk-2">* </span>2</th><td><div class="symbol symbol-15-1" id="symbol-2-0"></div></td><td><div class="symbol symbol-15-2" id="symbol-2-1"></div></td><td><div class="symbol symbol-15-0" id="symbol-2-2"></div></td></tr>
                    <tr><th><span id="asterisk-3"></span>3</th><td><div class="symbol symbol-16-0" id="symbol-3-0"></div></td><td><div class="symbol symbol-16-2" id="symbol-3-1"></div></td><td><div class="symbol symbol-16-1" id="symbol-3-2"></div></td></tr>
                    <tr><th><span id="asterisk-4"></span>4</th><td><div class="symbol symbol-4-1" id="symbol-4-0"></div></td><td><div class="symbol symbol-4-2" id="symbol-4-1"></div></td><td><div class="symbol symbol-4-0" id="symbol-4-2"></div></td></tr>
                    <tr><th><span id="asterisk-5"></span>5</th><td><div class="symbol symbol-2-0" id="symbol-5-0"></div></td><td><div class="symbol symbol-2-1" id="symbol-5-1"></div></td><td><div class="symbol symbol-2-2" id="symbol-5-2"></div></td></tr>
                    <tr><th><span id="asterisk-6"></span>6</th><td><div class="symbol symbol-3-1" id="symbol-6-0"></div></td><td><div class="symbol symbol-3-2" id="symbol-6-1"></div></td><td><div class="symbol symbol-3-0" id="symbol-6-2"></div></td></tr>
                    <tr><th><span id="asterisk-7"></span>7</th><td><div class="symbol symbol-6-2" id="symbol-7-0"></div></td><td><div class="symbol symbol-6-0" id="symbol-7-1"></div></td><td><div class="symbol symbol-6-1" id="symbol-7-2"></div></td></tr>
                    <tr><th><span id="asterisk-8"></span>8</th><td><div class="symbol symbol-12-1" id="symbol-8-0"></div></td><td><div class="symbol symbol-12-2" id="symbol-8-1"></div></td><td><div class="symbol symbol-12-0" id="symbol-8-2"></div></td></tr>
                    <tr><th><span id="asterisk-9"></span>9</th><td><div class="symbol symbol-1-0" id="symbol-9-0"></div></td><td><div class="symbol symbol-1-1" id="symbol-9-1"></div></td><td><div class="symbol symbol-1-2" id="symbol-9-2"></div></td></tr>
                    <tr><th><span id="asterisk-10"></span>10</th><td><div class="symbol symbol-5-2" id="symbol-10-0"></div></td><td><div class="symbol symbol-5-1" id="symbol-10-1"></div></td><td><div class="symbol symbol-5-0" id="symbol-10-2"></div></td></tr>
                    <tr><th><span id="asterisk-11"></span>11</th><td><div class="symbol symbol-7-1" id="symbol-11-0"></div></td><td><div class="symbol symbol-7-0" id="symbol-11-1"></div></td><td><div class="symbol symbol-7-2" id="symbol-11-2"></div></td></tr>
                    <tr><th><span id="asterisk-12"></span>12</th><td><div class="symbol symbol-19-2" id="symbol-12-0"></div></td><td><div class="symbol symbol-19-1" id="symbol-12-1"></div></td><td><div class="symbol symbol-19-0" id="symbol-12-2"></div></td></tr>
                    <tr><th><span id="asterisk-13"></span>13</th><td><div class="symbol symbol-9-2" id="symbol-13-0"></div></td><td><div class="symbol symbol-9-1" id="symbol-13-1"></div></td><td><div class="symbol symbol-9-0" id="symbol-13-2"></div></td></tr>
                    <tr><th><span id="asterisk-14">* </span>14</th><td><div class="symbol symbol-14-0" id="symbol-14-0"></div></td><td><div class="symbol symbol-14-1" id="symbol-14-1"></div></td><td><div class="symbol symbol-14-2" id="symbol-14-2"></div></td></tr>
                    <tr><th><span id="asterisk-15"></span>15</th><td><div class="symbol symbol-18-0" id="symbol-15-0"></div></td><td><div class="symbol symbol-18-2" id="symbol-15-1"></div></td><td><div class="symbol symbol-18-1" id="symbol-15-2"></div></td></tr>
                    <tr><th><span id="asterisk-16">* </span>16</th><td><div class="symbol symbol-13-1" id="symbol-16-0"></div></td><td><div class="symbol symbol-13-0" id="symbol-16-1"></div></td><td><div class="symbol symbol-13-2" id="symbol-16-2"></div></td></tr>
                    <tr><th><span id="asterisk-17"></span>17</th><td><div class="symbol symbol-11-1" id="symbol-17-0"></div></td><td><div class="symbol symbol-11-0" id="symbol-17-1"></div></td><td><div class="symbol symbol-11-2" id="symbol-17-2"></div></td></tr>
                    <tr><th><span id="asterisk-18"></span>18</th><td><div class="symbol symbol-10-1" id="symbol-18-0"></div></td><td><div class="symbol symbol-10-0" id="symbol-18-1"></div></td><td><div class="symbol symbol-10-2" id="symbol-18-2"></div></td></tr>
                    <tr><th><span id="asterisk-19"></span>19</th><td><div class="symbol symbol-17-1" id="symbol-19-0"></div></td><td><div class="symbol symbol-17-2" id="symbol-19-1"></div></td><td><div class="symbol symbol-17-0" id="symbol-19-2"></div></td></tr>
                </table>
            </div>
            <div class="page-footer relative-footer">Page 1 of 1</div>
        </div>
    </div>
</body>
</html>
