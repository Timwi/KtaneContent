<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>六角正規表現 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .footnote {
            vertical-align: super;
        }

        .footnote, .footnote-content {
            font-size: 0.83em;
        }

        .footnote-spacing {
            margin-top: 145px;
        }

        .dark .regex-table, .regex-table {
            margin-left: -1em;
            width: calc(100% + 2em);
            table-layout: fixed;

            font-size: 0.75em;

            /* Just by default */
            border: none;
        }

        @media screen and (max-width: 900px) {
            .regex-table {
                table-layout: auto;
                width: auto;
            }
        }

        .regex-table, .regex-table-caption {
            /* Prevent page background marks from showing through */
            background-color: white;
        }
        .dark .regex-table, .dark .regex-table-caption {
            /* Prevent page background marks from showing through */
            background-color: #272727;
        }

        .regex-table td:nth-child(1), .regex-table th:nth-child(1) {
            font-weight: bold;
            width: 1.5em;
        }

        .dark .regex-table thead th:first-child, .regex-table thead th:first-child {
            border-top: 0;
            border-left: 0;
        }

        code, .regex-table td:nth-child(n+2) {
            font-family: 'Courier New', monospace;
        }

        .regex-table tbody tr:nth-child(2n+1) {
            background-color: #ddd;
        }
        .dark .regex-table tbody tr:nth-child(2n+1) {
            background-color: #444;
        }

        .regex-table-caption {
            padding-top: 0.5em;
            text-align: center;
            font-size: 0.85em;
        }

        .clean-background {
            background-color: white;
        }
        .dark .clean-background {
            background-color: #212121;
        }

        .code-background code, p code {
            background-color: #ccc;
        }
        .dark .code-background code, .dark p code {
            background-color: #484848;
        }

        .hide-when-compact {
            display: block;
        }

        @media screen and (max-width: 900px) {
            .hide-when-compact {
                display: none;
            }
        }
        .small-bug{
         font-size:1%;
         transform:scale(0.5);
         display: inline-block;
         margin: -0.5%;
        }
        .dirty-bug{
         display: inline-block;
         margin-left: -4%;
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">六角正規表現</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Regular Hexpressions.svg" class="diagram">
                <h2>モジュール詳細：六角正規表現</h2>
                <p class="flavour-text">
                    [X]HTMLは正規表現で解析できません。
                    正規表現はHTMLを正常に解析するためのツールではありません。
                    正規表現でHTMLを解析しようと試みるごとに、穢れた子は処女<span class="dirty-bug">鬱鬱</span>血を啜り、ロシアのハッカーはあなたの目覚まし時計を乗っ取ります。
                    もしHTMLを<span class="small-bug">正規</span>表現で解析するならば、あなたは「彼ら」と、基本的な多言言吾平面ではその蜷を表しかねる方のために我々全てを人成らさ<code>゛る役務に</code>従事させる運命への道に出会います、彼は来ます。
                    HTMLの正規表現パーサーの世界を覗き見すればプ<span style="font-style: normal">ログラマーの意<b>識は一</b>瞬にして</span>阿鼻<s>叫喚の世</s>界へと誘われます、彼は来ます、<u>害虫</u>のような<span style="text-decoration: #666 wavy underline;">正規</span><span style="text-decoration: #bbb wavy underline;">表現</span>が、あなたのH T M L パーラーや了┐°└|ヶ─ﾞ/ｮ･/、そしてsOnzAiを常に侵食 て きます。
                </p>
                <p class="flavour-text">
                    代わりに正規表現で爆弾を解除してみましたか？ ― <a href="https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags">とある質問サイトの投稿</a>
                </p>

                <ul>
                    <li>
                        このモジュールには、正六面体の角を表す8つの<em>頂点</em>と、正六面体の辺に相当する6つの面ボタンがある。面ボタンを押すと、対応する 頂点が循環する。各頂点には便宜上、記号が付けられているが、このモジュールを解く上では何の役割も持たない。
                    </li>
                    <li>
                        各頂点は、その頂点が最も上に来た時にディスプレーに表示される関連単語を一つ持つ。以下のルールと表1に従って4つのターゲット<em>正規表現</em>(ターゲット<em>表現</em>)を特定し、各ターゲット表現に<em>一致する</em>頂点の持つ単語を探す<span class="footnote">[1]</span>。
                    </li>
                    <li>
                        モジュールを解除するには、モジュールの中央の列にある頂点の単語が、上から下に順番に4つのターゲット表現に一致するように配置を合わせ、SUBMITボタンを押す。つまり、最も上にある単語は最初のターゲット表現に一致し、その下の単語は二番目のターゲット表現に一致し、その下の単語<span style="font-style: italic;">は</span>三番目のターゲット表現に一致し、最も下にある単語は、四番目のターゲット表現に一致しなければいけない。左右2つずつある頂点の単語の配置は気にしなくてよい。
                    </li>
                    <li>
                        複数の単語が正規表現に一致する場合があるが、中央の列の各単語が対応するターゲット表現に一致するような単語の配置は一通りしか無いことに注意する。
                    </li>
                </ul>
                <div class="footnote-spacing hide-when-compact"></div>
                <hr>
                <p class="footnote-content code-background">
                    [1]
                    正規表現に<em>一致</em>するには、単語全体が一致していなければいけない。ページ3で正規表現の一致の完全メカニズムを説明している。正規表現についてご存知の場合、すべての正規表現は先頭に暗黙の<code>^</code>、末尾に暗黙の<code>$</code>を持つと考えたほうがよい。
                    </p>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">六角正規表現</span>
            </div>
            <div class="page-content">
                <h3>ターゲット正規表現</h3>
                <p>
                    まず、最も上の頂点が移動した際に表示される<em>開始段</em>と<em>開始列</em>を特定する。開始段と開始列はそれぞれ「R」「C」で記されている。
                </p>
                <p>
                    次に、<em>段のオフセット</em>を解除可能な(特殊モジュールを除く)モジュール数を11で割った余りに1を足した数として計算する。
                    これを開始段の数字に足し、12で割った余りが<em>最終段</em>となる。
                    同様に<em>列のオフセット</em>をバッテリーとインジケーターの数を5で割った余りに1を足した数として計算する。
                    これを開始列の数字に足し、6で割った余りが<em>最終列</em>となる。
                </p>
                <p>
                    最後に、表1を使用して開始段および最終段、開始列および最終列にある4つのターゲット表現を探す。ターゲット表現は北西から時計回り(北西、北東、南東、南西)の順番で取得する。
                </p>
                <table class="regex-table">
                    <thead>
                        <tr><th></th>
                            <th>0</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>.*O.*H.*</td>
                            <td>....</td>
                            <td>.*[^O]N.*</td>
                            <td>A.*</td>
                            <td>.*O.*E.*</td>
                            <td>.*(ER|RE).*</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>.*R[^E].*</td>
                            <td>[^ASTERISK]+</td>
                            <td>.*[AEIOU].[AEIOU].*</td>
                            <td>.*(OW|WO).*</td>
                            <td>.*M[^O].*</td>
                            <td>.*W(HA|HI|A).*</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>.*O</td>
                            <td>.*OT.*</td>
                            <td>....?</td>
                            <td>.*[OU][MN].*</td>
                            <td>.*E</td>
                            <td>.*F.*T.*</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>.....</td>
                            <td>.*[^O]T.*</td>
                            <td>D.*</td>
                            <td>.*I.*T.*</td>
                            <td>.*(FI|IF).*</td>
                            <td>.*F[^O].*</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>[^BRACKET]+</td>
                            <td>.*[^AEIOU][^AEIOU].*</td>
                            <td>.*(NO|ON).*</td>
                            <td>.*U[^G].*</td>
                            <td>.*OL?[DT].*</td>
                            <td>.*[AEIOU][AEIOU].*</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>.*HT.*</td>
                            <td>.....?</td>
                            <td>.*[BT][OE].*</td>
                            <td>.*H</td>
                            <td>.*OW.*</td>
                            <td>......</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>.*[^H]T.*</td>
                            <td>H.*</td>
                            <td>.*B.*T.*</td>
                            <td>..</td>
                            <td>.*B[^O].*</td>
                            <td>[^REFUTE]+</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>.*[^AEIOU][^AEIOU].</td>
                            <td>.*(OT|TO).*</td>
                            <td>.*O[^W].*</td>
                            <td>[^STRAIGHT]+</td>
                            <td>.*[AEIOU].*[AEIOU].*</td>
                            <td>.*TH.*</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>(..)?.</td>
                            <td>.*L[AEIOU].*</td>
                            <td>.*P</td>
                            <td>.*ON.*</td>
                            <td>..?</td>
                            <td>.*[^E]A.*</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>W.*</td>
                            <td>.*F.*R.*</td>
                            <td>...</td>
                            <td>.*I[^N].*</td>
                            <td>[^ELIMINATE]+</td>
                            <td>[^AEIOU][^AEIOU].*</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>.*(HT|TH).*</td>
                            <td>.*E[^A].*</td>
                            <td>[^QUESTION]+</td>
                            <td>.*[AEIOU]</td>
                            <td>.*DI.*</td>
                            <td>.*O[^T].*</td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>.[AEIOU].</td>
                            <td>.*Y</td>
                            <td>.*OR.*</td>
                            <td>...?</td>
                            <td>.*[^S]T.*</td>
                            <td>U.*</td>
                        </tr>
                    </tbody>
                </table>
                <p class="regex-table-caption code-background">
                    <span style="font-weight: bold;">表1</span> 正規表現
                    <br>
                    いくつかは、セル内で複数行にまたがっている。
                    <br>
                    例えば、4段目の1列目の正規表現は
                    <code>.*[^AEIOU][^AEIOU].*</code>である。
                </p>
            </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">六角正規表現</span>
            </div>
            <div class="page-content">
                <h3>正規表現の一致</h3>
                各部分の表現が、その単語の表現と空白無しで一致している場合、正規表現は<em>一致する</em>。
                各正規表現の一部分は、基本要素と追加の数量詞で構成されている。

                <h4>基本要素</h4>
                <ul class="code-background clean-background">
                    <li>
                        正規表現内の英字一文字は、単語内のその英字と一致する。
                        例：<code>A</code>はMATCHではAの部分と一致している。<code>E</code>はSEEではEの部分と、一致している。
                    </li>
                    <li>
                        ピリオドは、単語内の任意の文字と一致する。
                        例：<code>.</code>はMATCHではM、A、T、C、Hのいずれかの部分と一致する。
                    </li>
                    <li>
                        四角の括弧で囲まれた英字は、その中のいずれかの英字と一致する。
                        例：<code>[CAT]</code>はMATCHではA、T、Cの部分が一致する。
                    </li>
                    <li>
                        四角の括弧内にある脱字記号(キャレット)と英字は、その英字を除く任意の文字と一致する。
                        例：<code>[^CAT]</code>はMATCHではMとHが一致する。
                    </li>
                    <li>
                        丸の括弧で囲まれた縦線で分割しているリストは、リスト内のそれぞれの文字列と一致する。
                        例：<code>(H|AT)</code>はMATCHではHとATの部分が一致する。
                    </li>
                </ul>

                <h4>数量詞</h4>
                数量詞のない基本要素は、単語内にちょうど一つある場合一致する。数量詞がある場合、基本要素はその数量詞によって、単語の中に0または複数回連続する場合一致する。
                <ul class="code-background clean-background">
                    <li>
                        疑問符は0または1個の基本要素と一致する。
                        例：<code>CH?</code>はCATCHでは最初のCやCHの部分と一致する。
                    </li>
                    <li>
                        アスタリスクは0回以上のの基本要素と一致する。
                        例：<code>A[CTM]*</code>はMATCHではA、AT、ATCの部分と一致する。
                    </li>
                    <li>
                        プラスは1回以上の基本要素と一致する。
                        例：<code>A[CTM]+</code>はMATCHではAT、ATCの部分と一致する。
                    </li>
                </ul>

                <h4>追加の例</h4>
                <ul class="code-background clean-background">
                    <li>
                        <code>A[ES]+</code>はASSESSと一致する。
                        SEEは一致しない。なぜなら、<code>A</code> は単語の中に含まれておらず、<code>SEE</code>の中にもAは含まれていないからである。
                    </li>
                    <li>
                        <code>(SUB|CON)TRACTS?</code> は SUBTRACT、CONTRACT、SUBTRACTS、CONTRACTSと一致する。
                        TRACTは一致しない。なぜなら、<code>(SUB|CON)</code> は単語の中に含まれていないからである。
                    </li>
                    <li>
                        <code>I.*[^AK]</code> はIから始まりAまたはK以外で終わる任意の単語、例えばITやIMPLYやICONICと一致する。ただし、INKやIDEAは一致しない。また、Iも一致しない。なぜなら、 <code>[^AK]</code>は単語の中に含まれていないからである。
                    </li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>
</html>
