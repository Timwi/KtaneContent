<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>カラフル発狂 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <script src="js/ruleseed.js"></script>
    <script>
        function setDefaultRules(rnd)
        {
            setRules(rnd);
        }

        function setRules(rnd)
        {
            var nowPatterns = rnd.shuffleFisherYates(Array.from(Array(25)).map((x, y) => y));
            var colorNames = ["", "R", "O", "Y", "G", "C", "A", "B", "M", "P"];
            var nowColors = [];

            for (var i = 0; i < 9; i++)
            {
                nowColors.push(Array.from(Array(9)).map((x, y) => uniqueString([colorNames[rnd.nextMax(10)], colorNames[rnd.nextMax(10)], colorNames[rnd.nextMax(10)]].join(""))));
            }

            for (var i = 0; i < 9; i++)
            {
                nowColors[i][i] = "X";
            }

            var nowElements = document.getElementsByClassName("patternImages");

            for (var i = 0; i < nowElements.length; i++)
            {
                nowElements[i].src = `img/Colorful Insanity/pattern${nowPatterns[i]}.png`;
            }

            nowElements = document.getElementsByClassName("patternColors");

            for (var i = 0; i < nowElements.length; i++)
            {
                nowElements[i].innerText = nowColors[i % 9][parseInt(i / 9)];
            }
        }

        function uniqueString(nowStr)
        {
            return [...new Set(nowStr.split(""))].join("");
        }
    </script>

    <style>
        table {
            margin: 1em auto;
        }

        td {
            text-align: center;
        }

        .outer > li {
            margin: 1em 0;
        }

        .table-empty {
            border: none;
        }

        .cell-empty {
            border: none;
        }

        .bold {
            font-weight: bold;
        }

        .italic {
            font-style: italic;
        }
    </style>
</head>

<body>
    <div class="section">

        <!--Page 1-->
        <div class="page page-bg-06">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">カラフル発狂</span>
            </div>

            <div class="page-content">
                <img src="img/Component/Colorful Insanity.svg" class="diagram">
                <h2>モジュール詳細：カラフル発狂</h2>
                <p class="flavour-text">狂気よりも最悪なものがある。</p>
                <p>
                    モジュールには３５個のボタンがある。<br>
                    モジュールを解除するには、正しいボタンを押す必要がある。<br>
                    まず、２つのペアを見つける必要がある。
                </p>

                <ol>
                    <li>パターンが同じだが、色が反転している。</li>
                    <li>色もパターンも同じ。</li>
                </ol>

                <p>
                    ペア１を使用し、回答ボタンのパターンを特定する。<br>
                    <span class="bold">パターン表</span>からペア１のパターンを見つけ、そのセルに直接隣接したセル(上下左右)のパターンを回答に使用する。
                </p>

                <p>
                    ペア２を<span class="bold">色の特定表</span>に使用し、回答に使用できる色を特定する。<br>
                    列は<span class="bold">パターン表</span>における黒色の部分の色を使用する。<br>
                    段は白色の部分の色を使用する。<br>
                </p>

                <h3>色の識別一覧</h3>

                <ul>
                    <li><span class="bold italic">X</span>: なし</li>
                    <li><span class="italic">R</span>: 赤</li>
                    <li><span class="italic">O</span>: オレンジ</li>
                    <li><span class="italic">Y</span>: 黄</li>
                    <li><span class="italic">G</span>: 緑</li>
                    <li><span class="italic">C</span>: シアン</li>
                    <li><span class="italic">A</span>: 空色</li>
                    <li><span class="italic">B</span>: 青</li>
                    <li><span class="italic">M</span>: マゼンタ</li>
                    <li><span class="italic">P</span>: 紫</li>
                    <li><span class="italic">Blank</span>: 任意の色</li>
                </ul>
                <p><b>注：</b>空色は、暗めのシアンである。</p>

                <p>
                    特定したパターンと色の両方に該当するボタンを押す必要がある。<br>
                    一致するボタンがない場合は、ペア１・２を押す。
                </p>
            </div>

            <div class="page-footer relative-footer">ページ 1/2</div>
        </div>

        <!--Page 2-->
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">カラフル発狂</span>
            </div>

            <div class="page-content">
                <h2>パターン表</h2>

                <table>
                    <tbody>
                        <tr>
                            <td><img src="img/Colorful Insanity/pattern0.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern1.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern2.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern3.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern4.png" class="patternImages"></td>
                        </tr>

                        <tr>
                            <td><img src="img/Colorful Insanity/pattern5.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern6.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern7.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern8.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern9.png" class="patternImages"></td>
                        </tr>

                        <tr>
                            <td><img src="img/Colorful Insanity/pattern10.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern11.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern12.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern13.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern14.png" class="patternImages"></td>
                        </tr>

                        <tr>
                            <td><img src="img/Colorful Insanity/pattern15.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern16.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern17.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern18.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern19.png" class="patternImages"></td>
                        </tr>

                        <tr>
                            <td><img src="img/Colorful Insanity/pattern20.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern21.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern22.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern23.png" class="patternImages"></td>
                            <td><img src="img/Colorful Insanity/pattern24.png" class="patternImages"></td>
                        </tr>
                    </tbody>
                </table>

                <h2>色の特定表</h2>

                <table class="table-empty">
                    <tbody>
                        <tr>
                            <th class="cell-empty"></th>
                            <th>赤</th>
                            <th>オレンジ</th>
                            <th>黄</th>
                            <th>緑</th>
                            <th>シアン</th>
                            <th>空色</th>
                            <th>青</th>
                            <th>マゼンタ</th>
                            <th>紫</th>
                        </tr>

                        <tr>
                            <th>赤</th>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>オレンジ</th>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>黄</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>緑</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>シアン</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>空色</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>青</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>マゼンタ</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                            <td class="patternColors">R</td>
                        </tr>

                        <tr>
                            <th>紫</th>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <td class="patternColors">R</td>
                            <th class="patternColors">X</th>
                        </tr>
                    </tbody>
                </table>

                <p>色の文字については<span class="bold">色の識別一覧</span>を参照。</p>
            </div>

            <div class="page-footer relative-footer">ページ 2/2</div>
        </div>
    </div>
</body>
</html>
