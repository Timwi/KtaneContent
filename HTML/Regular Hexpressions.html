<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Regular Hexpressions — Keep Talking and Nobody Explodes Module</title>
    <meta name="viewport" content="initial-scale=1">
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        .footnote {
            vertical-align: super;
        }

        .footnote, .footnote-content {
            font-size: 0.83em;
        }

        .footnote-spacing {
            margin-top: 145px;
        }

        .regex-table {
            margin-left: -1em;
            width: calc(100% + 2em);
            table-layout: fixed;

            font-size: 0.75em;

            /* Just by default */
            border: none;
        }

        @media screen and (max-width: 900px) {
            .regex-table {
                table-layout: auto;
                width: auto;
            }
        }

        .regex-table, .regex-table-caption {
            /* Prevent page background marks from showing through */
            background-color: white;
        }

        .regex-table td:nth-child(1), .regex-table th:nth-child(1) {
            font-weight: bold;
            width: 1.5em;
        }

        .regex-table thead th:first-child {
            border-top: 0;
            border-left: 0;
        }

        code, .regex-table td:nth-child(n+2) {
            font-family: 'Courier New', monospace;
        }

        .regex-table tbody tr:nth-child(2n+1) {
            background-color: #ddd;
        }

        .regex-table-caption {
            padding-top: 0.5em;
            text-align: center;
            font-size: 0.85em;
        }

        .clean-background {
            background-color: white;
        }
    
        .code-background code {
            background-color: #ccc;
        }

        .hide-when-compact {
            display: block;
        }

        @media screen and (max-width: 900px) {
            .hide-when-compact {
                display: none;
            }
        }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Regular Hexpressions</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Regular Hexpressions.svg" class="diagram">
                <h2>On the Subject of Regular Hexpressions</h2>
                <p class="flavour-text">
                    You can't parse [X]HTML with regex.
                    Regex is not a tool that can be used to correctly parse HTML.
                    Every time you attempt to parse HTML with regular expressions,
                    the unholy child we̿̔̉eps the blood of virgins,
                    and Russian hackers pwn your alarm clock.
                    If you ₚₐrse HTML with regex you are giving in to Them and their bŀasphemous ways
                    which doom us all to inh<code style="background-color: #ccc;">uman toil fo</code>r
                    the One whose Naᵯe ၚannot be expressed in the Basic Multilinɠuaɬ Plane, he c͒ͪo͛ͫmes.
                    A mere glimpse of the world of
                    reg<span style="font-weight: bold;">ex parsers for HTML will ins</span>tantly
                    transport a
                    p<span style="font-style: normal;">rogrammer's consciousness i</span>nto
                    a world of cease̶less screaminͫg,
                    he comes<s>, the pestilent sl</s>ithy
                    <span style="text-decoration: #666 wavy underline;">regex-in</span><span style="text-decoration: #bbb wavy underline;">fection</span>
                    wil<span style="font-weight: bold;">l đevour your HT</span>ML parᵴer,
                    a𐓄Ᵽ꜕icatiȣn and eⓍiᶊtence Ꞙṑꝵ all tïmé.
                </p>
                <p class="flavour-text">
                    Have you tried using regex to defuse a bomb instead?
                </p>

                <ul>
                    <li>
                        This module has eight <em>Vertices</em> representing the corners of
                        a regular hexahedron,
                        and six Face buttons corresponding to the sides of the hexahedron.
                        Pressing a Face button will cycle the corresponding Vertices.
                        Each Vertex is labeled with a symbol for your convenience;
                        the labels play no role in solving the module.
                    </li>
                    <li>
                        Each Vertex has an associated word,
                        which is shown on the display when the Vertex is at the top of the hexahedron.
                        Use the rules below and Table 1 to determine the four target <em>regular expressions</em>
                        (target <em>regexes</em>),
                        then find the Vertex words that <em>match</em> each target regex<span class="footnote">[1]</span>.
                    </li>
                    <li>
                        To disarm the module,
                        arrange the matching Vertex words in the center column of the module, so that the four words from top 
                        to bottom match the four target regexes in order, and then press the 
                        Submit button.  That is, the topmost word must match the first target regex,
                        the word below that must match the second target regex,
                        the word below <span style="font-style: italic;">that</span> must match the third target regex,
                        and the bottommost word must match the fourth target regex.
                        The arrangement of the two Vertex words on the left
                        and the two on the right
                        do not matter.
                    </li>
                    <li>
                        Note that there may be multiple words matching a given target regex,
                        but there is only one way to arrange the Vertex words so that
                        each word in the center column
                        matches the corresponding target regex.
                    </li>
                </ul>
                <div class="footnote-spacing hide-when-compact"></div>
                <hr>
                <p class="footnote-content code-background">
                    [1]
                    For a word to <em>match</em> a regex,
                    the entire word must match.
                    Page 3 explains the full mechanics of regex matching.
                    If you are familiar with regexes,
                    you should consider every regex to have
                    an implicit <code>^</code> at the beginning
                    and an implicit <code>$</code> at the end.
                </p>
            </div>
            <div class="page-footer relative-footer">Page 1 of 3</div>
        </div>
        <div class="page page-bg-02">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Regular Hexpressions</span>
            </div>
            <div class="page-content">
                <h3>Target Regular Expressions</h3>
                <p>
                    First, determine the <em>initial row</em> and <em>initial column</em>,
                    shown on the display when the top Vertex is moving,
                    and labeled "R" and "C", respectively.
                </p>
                <p>
                    Next, compute the <em>row offset</em>
                    as the number of solvable (non-needy) modules modulo 11, plus 1.
                    Add this to the initial row modulo 12 to obtain the <em>final row</em>.
                    Similarly, compute the <em>column offset</em>
                    as the number of batteries and indicators modulo 5, plus 1.
                    Add this to the initial column modulo 6 to obtain the <em>final column</em>.
                </p>
                <p>
                    Finally, use Table 1 to find the four regexes
                    that are in either the initial or final row,
                    and in either the initial or final column.
                    The target regexes are ordered clockwise starting from the north-west:
                    the first target regex is the north-west one,
                    the second is the north-east,
                    the third is the south-east,
                    and the fourth is the south-west.
                </p>
                <table class="regex-table">
                    <thead>
                        <tr><th></th>
                            <th>0</th>
                            <th>1</th>
                            <th>2</th>
                            <th>3</th>
                            <th>4</th>
                            <th>5</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>0</td>
                            <td>.*O.*H.*</td>
                            <td>....</td>
                            <td>.*[^O]N.*</td>
                            <td>A.*</td>
                            <td>.*O.*E.*</td>
                            <td>.*(ER|RE).*</td>
                        </tr>
                        <tr>
                            <td>1</td>
                            <td>.*R[^E].*</td>
                            <td>[^ASTERISK]+</td>
                            <td>.*[AEIOU].[AEIOU].*</td>
                            <td>.*(OW|WO).*</td>
                            <td>.*M[^O].*</td>
                            <td>.*W(HA|HI|A).*</td>
                        </tr>
                        <tr>
                            <td>2</td>
                            <td>.*O</td>
                            <td>.*OT.*</td>
                            <td>....?</td>
                            <td>.*[OU][MN].*</td>
                            <td>.*E</td>
                            <td>.*F.*T.*</td>
                        </tr>
                        <tr>
                            <td>3</td>
                            <td>.....</td>
                            <td>.*[^O]T.*</td>
                            <td>D.*</td>
                            <td>.*I.*T.*</td>
                            <td>.*(FI|IF).*</td>
                            <td>.*F[^O].*</td>
                        </tr>
                        <tr>
                            <td>4</td>
                            <td>[^BRACKET]+</td>
                            <td>.*[^AEIOU][^AEIOU].*</td>
                            <td>.*(NO|ON).*</td>
                            <td>.*U[^G].*</td>
                            <td>.*OL?[DT].*</td>
                            <td>.*[AEIOU][AEIOU].*</td>
                        </tr>
                        <tr>
                            <td>5</td>
                            <td>.*HT.*</td>
                            <td>.....?</td>
                            <td>.*[BT][OE].*</td>
                            <td>.*H</td>
                            <td>.*OW.*</td>
                            <td>......</td>
                        </tr>
                        <tr>
                            <td>6</td>
                            <td>.*[^H]T.*</td>
                            <td>H.*</td>
                            <td>.*B.*T.*</td>
                            <td>..</td>
                            <td>.*B[^O].*</td>
                            <td>[^REFUTE]+</td>
                        </tr>
                        <tr>
                            <td>7</td>
                            <td>.*[^AEIOU][^AEIOU].</td>
                            <td>.*(OT|TO).*</td>
                            <td>.*O[^W].*</td>
                            <td>[^STRAIGHT]+</td>
                            <td>.*[AEIOU].*[AEIOU].*</td>
                            <td>.*TH.*</td>
                        </tr>
                        <tr>
                            <td>8</td>
                            <td>(..)?.</td>
                            <td>.*L[AEIOU].*</td>
                            <td>.*P</td>
                            <td>.*ON.*</td>
                            <td>..?</td>
                            <td>.*[^E]A.*</td>
                        </tr>
                        <tr>
                            <td>9</td>
                            <td>W.*</td>
                            <td>.*F.*R.*</td>
                            <td>...</td>
                            <td>.*I[^N].*</td>
                            <td>[^ELIMINATE]+</td>
                            <td>[^AEIOU][^AEIOU].*</td>
                        </tr>
                        <tr>
                            <td>10</td>
                            <td>.*(HT|TH).*</td>
                            <td>.*E[^A].*</td>
                            <td>[^QUESTION]+</td>
                            <td>.*[AEIOU]</td>
                            <td>.*DI.*</td>
                            <td>.*O[^T].*</td>
                        </tr>
                        <tr>
                            <td>11</td>
                            <td>.[AEIOU].</td>
                            <td>.*Y</td>
                            <td>.*OR.*</td>
                            <td>...?</td>
                            <td>.*[^S]T.*</td>
                            <td>U.*</td>
                        </tr>
                    </tbody>
                </table>
                <p class="regex-table-caption code-background">
                    <span style="font-weight: bold;">Table 1:</span> Regular expressions.
                    <br>
                    Some regexes are split across multiple lines in their cells.
                    <br>
                    For example, the regex in row 4, column 1 is
                    <code>.*[^AEIOU][^AEIOU].*</code>.
                </p>
            </div>
            <div class="page-footer relative-footer">Page 2 of 3</div>
        </div>
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">Regular Hexpressions</span>
            </div>
            <div class="page-content">
                <h3>Matching Regular Expressions</h3>
                A word <em>matches</em> a regular expression
                if each part of the regex corresponds to a matching part of the word,
                in order and without gaps.
                Each regex part consists of a Basic Element and an optional Quantifier.

                <h4>Basic Elements</h4>
                <ul class="code-background clean-background">
                    <li>
                        An individual letter in a regex matches an individual letter in the word.
                        Examples: <code>A</code> matches the A part in MATCH,
                        and <code>E</code> matches each E part in SEE.
                    </li>
                    <li>
                        A period matches any individual character in the word.
                        Example: <code>.</code> matches the M, A, T, C, and H parts in MATCH.
                    </li>
                    <li>
                        Letters in square brackets
                        match any one of the letters.
                        Example: <code>[CAT]</code> matches the A, T, and C parts in MATCH.
                    </li>
                    <li>
                        A caret and letters in square brackets
                        match any character except those letters.
                        Example: <code>[^CAT]</code> matches the M and H parts in MATCH.
                    </li>
                    <li>
                        A pipe-separated list of strings surrounded by parentheses
                        matches any individual string in the list.
                        Example: <code>(H|AT)</code> matches the AT and H parts in MATCH.
                    </li>
                </ul>

                <h4>Quantifiers</h4>
                A Basic Element without a Quantifier matches exactly one part of a word.
                With a Quantifier, the Basic Element can match zero or multiple consecutive parts of a word,
                depending on the quantifier.
                <ul class="code-background clean-background">
                    <li>
                        The question-mark quantifier matches zero or one of the Basic Element.
                        Example: <code>CH?</code> matches the initial C and the CH part in CATCH.
                    </li>
                    <li>
                        The asterisk quantifier matches zero or more of the Basic Element.
                        Example: <code>A[CTM]*</code> matches the A, AT, and ATC parts in MATCH.
                    </li>
                    <li>
                        The plus quantifier matches one or more of the Basic Element.
                        Example: <code>A[CTM]+</code> matches the AT and ATC parts in in MATCH.
                    </li>
                </ul>

                <h4>More Examples</h4>
                <ul class="code-background clean-background">
                    <li>
                        <code>A[ES]+</code> matches ASSESS.
                        It does not match SEE because <code>A</code> has no matching part of the word,
                        and it does not match A because <code>SEE</code> has no matching word part.
                    </li>
                    <li>
                        <code>(SUB|CON)TRACTS?</code> matches SUBTRACT, CONTRACT, SUBTRACTS, and CONTRACTS.
                        It does not match TRACT because <code>(SUB|CON)</code> has no matching word part.
                    </li>
                    <li>
                        <code>I.*[^AK]</code> matches any word starting with an I
                        and ending with any letter except A or K,
                        such as IT or IMPLY or ICONIC,
                        but not INK or IDEA.
                        It does not match the word I because the <code>[^AK]</code> has no matching word part.
                    </li>
                </ul>
            </div>
            <div class="page-footer relative-footer">Page 3 of 3</div>
        </div>
    </div>
</body>
</html>
