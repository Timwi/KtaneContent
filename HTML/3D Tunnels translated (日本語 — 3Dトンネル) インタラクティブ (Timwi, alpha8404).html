<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>3Dトンネル — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <link rel="stylesheet" type="text/css" href="css/Modules/3D Tunnels.css">
    <script src="js/ruleseed.js"></script>
    <script src="js/ktane-utils.js"></script>
    <script>
        function setDefaultRules()
        {
            setSymbols("ghidefabcpqrmnojklyz.vwxstu");
        }

        function setRules(rnd)
        {
            setSymbols(rnd.shuffleFisherYates(Array.from("ghidefabcpqrmnojklyz.vwxstu")));
        }

        function setSymbols(s)
        {
            let dom = Array.from(document.querySelectorAll('#tunnels>.symbol>span'));
            for (let i = 0; i < dom.length; i++)
                dom[i].innerText = s[i];
        }
    </script>
</head>
<body>
    <div class="section">
        <div class="page page-bg-03">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">3Dトンネル</span>
            </div>
            <div class="page-content">
                <img src="img/Component/3D Tunnels.svg" class="diagram">
                <h2>モジュール詳細：3Dトンネル</h2>
                <p class="flavour-text">別の次元へ</p>
                <div id="interactive">
                    <div id="controls">
                        <div>移動:</div>
                        <div><button id="moveNY">▲</button><button id="moveZ">↗</button></div>
                        <div><button id="moveNX">◀</button><button id="moveX">▶</button></div>
                        <div><button id="moveNZ">↙</button><button id="moveY">▼</button></div>
                        <div>回転:</div>
                        <div>X <button id="xCw">⟳</button><button id="xCcw">⟲</button></div>
                        <div>Y <button id="yCw">⟳</button><button id="yCcw">⟲</button></div>
                        <div>Z <button id="zCw">⟳</button><button id="zCcw">⟲</button></div>
                    </div>
                    <div id='tunnels'>
                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm, -10cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm, -10cm) rotate3d(0, 0, 1, 90deg)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm, 10cm, -5cm) rotate3d(0, 1, 0, 90deg)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm,  -5cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm,  -5cm) rotate3d(0, 0, 1, 90deg)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm,   0cm)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm,   0cm)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm, 10cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm, 10cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm, 10cm,  0cm) rotate3d(0, 1, 0, 90deg)'></div>

                        <div class='tunnel' style='transform: translate3d( 0cm,  0cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  0cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  0cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 0cm,  5cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d( 5cm,  5cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>
                        <div class='tunnel' style='transform: translate3d(10cm,  5cm,   0cm) rotate3d(0, 0, 1, 90deg)'></div>

                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm, 10cm,  -0cm)'><span>g</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm, 10cm,  -0cm)'><span>h</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm, 10cm,  -0cm)'><span>i</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  5cm,  -0cm)'><span>d</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  5cm,  -0cm)'><span>e</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  5cm,  -0cm)'><span>f</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  0cm,  -0cm)'><span>a</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  0cm,  -0cm)'><span>b</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  0cm,  -0cm)'><span>c</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm, 10cm,  -5cm)'><span>p</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm, 10cm,  -5cm)'><span>q</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm, 10cm,  -5cm)'><span>r</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  5cm,  -5cm)'><span>m</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  5cm,  -5cm)'><span>n</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  5cm,  -5cm)'><span>o</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  0cm,  -5cm)'><span>j</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  0cm,  -5cm)'><span>k</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  0cm,  -5cm)'><span>l</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm, 10cm, -10cm)'><span>y</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm, 10cm, -10cm)'><span>z</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm, 10cm, -10cm)'><span>.</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  5cm, -10cm)'><span>v</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  5cm, -10cm)'><span>w</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  5cm, -10cm)'><span>x</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 0cm,  0cm, -10cm)'><span>s</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d( 5cm,  0cm, -10cm)'><span>t</span></div>
                        <div class='symbol' style='transform: translate3d(-.5cm, -.5cm, 0) translate3d(10cm,  0cm, -10cm)'><span>u</span></div>

                        <div id='man' style='transform: translate3d(-1cm, -1cm, 0)'>
                            <div class='pic' id='pic-front'></div>
                            <div class='pic' id='pic-back'></div>
                        </div>
                    </div>
                </div>
                <p>あなたは格子状のトンネルの中のホバークラフトを操作している。格子の交点はそれぞれ特有のシンボルによって特定できる。4つの矢印ボタンを利用して、格子の中を移動する。さらに、シンボルが書かれたボタンも存在し、これは次の目的地の交点を示している。その地点に移動してそのボタンを押す。これを3回繰り返すとモジュールが解除される。</p>
                <ul>
                    <li>
                        シンボルはいくつかの交点以外では非表示になっている。表示されているシンボルを用いて現在地と方向を決定する。
                    </li>
                    <li>
                        矢印ボタンはホバークラフトをその方向に回転させる。直進ボタンは壊れていたので撤去された。（でも直したから心配しないで！）<b>回転が起きる度に</b>、その後に<b>1マス前</b>に進む。
                    </li>
                    <li>
                        壁に衝突するとミスが記録される。

                    </li>
                    <li>
                        ゴールの位置にいないときにシンボルのボタンを押すとミスが記録される。
                    </li>
                </ul>
            </div>
            <div class="page-footer relative-footer">ページ 1/1</div>
        </div>
    </div>
    <script>
        var man = document.getElementById('man');
        var rotations = '';
        var x = 0, y = 0, z = 0;

        function update()
        {
            man.style.transform = `translate3d(${5 * x}cm, ${5 * y}cm, -${5 * z}cm)${rotations} translate3d(-1cm, -1cm, 0)`;
        }
        document.getElementById('moveX').onclick = function() { if (x < 2) x++; update(); return false; };
        document.getElementById('moveNX').onclick = function() { if (x > 0) x--; update(); return false; };
        document.getElementById('moveY').onclick = function() { if (y < 2) y++; update(); return false; };
        document.getElementById('moveNY').onclick = function() { if (y > 0) y--; update(); return false; };
        document.getElementById('moveZ').onclick = function() { if (z < 2) z++; update(); return false; };
        document.getElementById('moveNZ').onclick = function() { if (z > 0) z--; update(); return false; };

        document.getElementById('xCw').onclick = function() { rotations = ` rotate3d(1, 0, 0, -90deg)${rotations}`; update(); return false; }
        document.getElementById('xCcw').onclick = function() { rotations = ` rotate3d(1, 0, 0, 90deg)${rotations}`; update(); return false; }
        document.getElementById('yCw').onclick = function() { rotations = ` rotate3d(0, 1, 0, -90deg)${rotations}`; update(); return false; }
        document.getElementById('yCcw').onclick = function() { rotations = ` rotate3d(0, 1, 0, 90deg)${rotations}`; update(); return false; }
        document.getElementById('zCw').onclick = function() { rotations = ` rotate3d(0, 0, 1, 90deg)${rotations}`; update(); return false; }
        document.getElementById('zCcw').onclick = function() { rotations = ` rotate3d(0, 0, 1, -90deg)${rotations}`; update(); return false; }
    </script>
</body>
</html>