<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="initial-scale=1">
    <title>黄色ハフマン暗号 — Keep Talking and Nobody Explodes Module</title>
    <link rel="stylesheet" type="text/css" href="css/font.css">
    <link rel="stylesheet" type="text/css" href="css/font-japanese.css">
    <link rel="stylesheet" type="text/css" href="css/normalize.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <script src="js/ktane-utils.js"></script>
    <style>
        table {
            margin: 1em auto;
        }
        table.binary-table {
            float: right;
            margin: 0 0 .5cm .5cm;
            clear: both;
        }
            table.binary-table td, table.binary-table th {
                padding: .1em .5em 0 .5em;
            }
        .dark svg path {
            stroke: #DDD;
        }
        .dark svg :is(text.inv, marker) {
            fill: #DDD;
        }
        .page.strip { --strip-color: #C3C523; }
    </style>
</head>
<body>
    <div class="section">
        <div class="page page-bg-01 strip">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">黄色ハフマン暗号</span>
            </div>
            <div class="page-content">
                <img src="img/Component/Blue Huffman Cipher.svg" class="diagram">

                <table class='binary-table'>
                    <tr><th>A</th><td>00000</td></tr>
                    <tr><th>B</th><td>00001</td></tr>
                    <tr><th>C</th><td>00010</td></tr>
                    <tr><th>D</th><td>00011</td></tr>
                    <tr><th>E</th><td>00100</td></tr>
                    <tr><th>F</th><td>00101</td></tr>
                    <tr><th>G</th><td>00110</td></tr>
                    <tr><th>H</th><td>00111</td></tr>
                    <tr><th>I</th><td>01000</td></tr>
                    <tr><th>J</th><td>01001</td></tr>
                    <tr><th>K</th><td>01010</td></tr>
                    <tr><th>L</th><td>01011</td></tr>
                    <tr><th>M</th><td>01100</td></tr>
                    <tr><th>N</th><td>01101</td></tr>
                    <tr><th>O</th><td>01110</td></tr>
                    <tr><th>P</th><td>01111</td></tr>
                    <tr><th>Q</th><td>10000</td></tr>
                    <tr><th>R</th><td>10001</td></tr>
                    <tr><th>S</th><td>10010</td></tr>
                    <tr><th>T</th><td>10011</td></tr>
                    <tr><th>U</th><td>1010</td></tr>
                    <tr><th>V</th><td>1011</td></tr>
                    <tr><th>W</th><td>1100</td></tr>
                    <tr><th>X</th><td>1101</td></tr>
                    <tr><th>Y</th><td>1110</td></tr>
                    <tr><th>Z</th><td>1111</td></tr>
                </table>

                <h2>モジュール詳細：黄色ハフマン暗号</h2>
                <p class="flavour-text">皮肉にも、ハッフルパフよりレイブンクローのほうが似合っている。</p>
                <p>モジュールは、3つのディスプレー、キーボード、左右の矢印、及び現在のページを表示するボタン(送信ボタン)で構成されている。</p>
                <p>矢印を使用してページを移動することができる。ページは全部で2ページある。</p>
                <p>モジュールを解除するには、以下の3ステップに従って単語を復号する。復号された単語を取得したら、キーボードを使用して入力する。入力を開始すると、ディスプレーが空白になり、下のディスプレーに現在入力されている内容が表示される。</p>
                <p>入力を消去するには、いずれかの矢印をクリックする。</p>
                <p>入力に問題がなければ、「SUB」と書かれたボタンを押して、回答を送信する。</p>

                <h3>ステップ1：暗号化二分探索</h3>
                <p>このステップでは、1ページ目の上と真ん中と下のディスプレー、2ページ目の上のディスプレーにある英字を使用する。この順番で英字を連結し、各英字を右の表にあるバイナリコードに置き換え、暗号化された文字列を変換する。</p>

                <h3>ステップ2：ハフマン木の構築</h3>
                <p>2ページ目の下のディスプレーにあるキーワードを取得し、重複する英字を削除する(最初に出現した英字は除外する)。アルファベット全体の文字列を取得し、キーワードに含まれる英字を削除する。</p>
                <p>ポートの個数を4で割った余りが0または1の場合、アルファベットをキーワードの末尾に置く。そうでなければ、アルファベットをキーワードの先頭に置く。</p>
                <p>ステップ1で取得したバイナリ文字列を左から右に読む。「1」であるビットは、2つの節(「左節」「右節」)を持つ二分木の節を作ることを意味している。節に出会ったら、左側の部分木をすべて変換し、その後右側の部分木をすべて変換する。「0」であるビットは葉を意味し、葉には、ある英字のみが含まれる。葉が見つかった時点で、順番にアルファベットキーの英字を割り当てていく。木の構造を解読すると、二進数が残るはずである。</p>
                <p>次のページで、これらのステップの例を提示している。</p>
            </div>
            <div class="page-footer relative-footer">ページ 1/3</div>
        </div>

        <div class="page page-bg-02 strip">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">黄色ハフマン暗号</span>
            </div>
            <div class="page-content">
                <h4>ステップ1の例</h4>
                <p style='margin-bottom: 0'>ディスプレーから取得したコード：WXDIXL</p>
                <p style='margin: 0'>W=1100 X=1101 D=00011 I=01000 X=1101 L=01011</p>
                <p style='margin-top: 0'>暗号化バイナリ：110011010001101000110101011</p>

                <h4>ステップ2の例</h4>
                <p style='margin-bottom: 0'>簡略化のため、アルファベットを先頭6文字(A-F)のみとする。</p>
                <p style='margin: 0'>2ページの下のディスプレー：CAB</p>
                <p style='margin-top: 0'>ポートがない場合のアルファベット：CABDEF</p>

                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" font-size="6" font-family="Special Elite" text-anchor="middle" viewBox="5 0 430 400">
                  <path fill="none" stroke="#000" d="M85 20h15m-7.5-5 7.5 5-7.5 5" />
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(-25 -20)">1</text>
                  <g id="a" stroke="#000" transform="translate(-10 -50)">
                    <path fill="none" d="m25 100 30-30 30 30" />
                    <circle cx="55" cy="70" r="10" fill="#fff" />
                  </g>
                  <path fill="none" stroke="#000" d="M200 20h15m-7.5-5 7.5 5-7.5 5" />
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(95 10)">1</text>
                  <g id="b" transform="translate(-10 -50)">
                    <use xlink:href="#a" transform="translate(120 50)" />
                    <path fill="none" stroke="#000" d="m120 130 15-30 15 30" />
                    <circle cx="135" cy="100" r="10" fill="#fff" stroke="#000" />
                  </g>
                  <g id="c" transform="translate(0 -50)">
                    <use xlink:href="#b" transform="translate(130 50)" />
                    <circle cx="240" cy="130" r="10" fill="#fff" stroke="#000" />
                    <text x="240" y="134" font-size="10">C</text>
                  </g>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(170 40)">0</text>
                  <path fill="none" stroke="#000" d="M325 20h15m-7.5-5 7.5 5-7.5 5" />
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(350 40)">0</text>
                  <g id="d" transform="translate(10 -50)">
                    <use xlink:href="#c" transform="translate(100 50)" />
                    <circle cx="370" cy="130" r="10" fill="#fff" stroke="#000" />
                    <text x="370" y="134" font-size="10">A</text>
                  </g>
                  <path fill="none" stroke="#000" d="M150 130h15m-7.5-5 7.5 5-7.5 5" />
                  <g id="e" transform="translate(10 -40)">
                    <use xlink:href="#d" transform="translate(-310 150)" />
                    <path fill="none" stroke="#000" d="m100 230 15-30 15 30" />
                    <circle cx="115" cy="200" r="10" fill="#fff" stroke="#000" />
                  </g>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(55 120)">1</text>
                  <g id="f" transform="translate(-10 -40)">
                    <use xlink:href="#e" transform="translate(140 40)" />
                    <path fill="none" stroke="#000" d="m235 260 15-30 15 30" />
                    <circle cx="250" cy="230" r="10" fill="#fff" stroke="#000" />
                  </g>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(210 150)">1</text>
                  <path fill="none" stroke="#000" d="M285 130h15m-7.5-5 7.5 5-7.5 5" />
                  <g id="g" transform="translate(-10 -40)">
                    <use xlink:href="#f" transform="translate(160 40)" />
                    <circle cx="385" cy="260" r="10" fill="#fff" stroke="#000" />
                    <text x="385" y="263.5" font-size="10">B</text>
                  </g>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(305 180)">0</text>
                  <path fill="none" stroke="#000" d="M15 130h15m-7.5-5 7.5 5-7.5 5M15 260h15m-7.5-5 7.5 5-7.5 5" />
                  <g id="h" transform="translate(-25 -40)">
                    <path fill="none" stroke="#000" d="m120 420 15-30 15 30" />
                    <use xlink:href="#g" transform="translate(-270 170)" />
                    <circle cx="135" cy="390" r="10" fill="#fff" stroke="#000" />
                  </g>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(80 310)">1</text>
                  <path fill="none" stroke="#000" d="M135 260h15m-7.5-5 7.5 5-7.5 5" />
                  <g id="i" transform="translate(-30 -40)">
                    <use xlink:href="#h" transform="translate(165 40)" />
                    <circle cx="260" cy="420" r="10" fill="#fff" stroke="#000" />
                    <text x="260" y="423.5" font-size="10">D</text>
                    <circle cx="290" cy="420" r="10" fill="#fff" stroke="#000" />
                    <text x="290" y="423.5" font-size="10">E</text>
                  </g>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(160 340)">0</text>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(230 340)">0</text>
                  <use xlink:href="#i" transform="translate(145)" />
                  <path fill="none" stroke="#000" d="M275 260h15m-7.5-5 7.5 5-7.5 5" />
                  <circle cx="405" cy="320" r="10" fill="#fff" stroke="#000" />
                  <text x="405" y="324" font-size="10">F</text>
                  <text class="inv" x="50" y="50" font-size="24" transform="translate(375 280)">0</text>
                </svg>

                <p>残ったバイナリ：1101000110101011</p>

            </div>
            <div class="page-footer relative-footer">ページ 2/3</div>
        </div>

        <div class="page page-bg-03 strip">
            <div class="page-header">
                <span class="page-header-doc-title">Keep Talking and Nobody Explodes Mod</span>
                <span class="page-header-section-title">黄色ハフマン暗号</span>
            </div>
            <div class="page-content">
                <h3>ステップ3：ハフマン木の読み取り</h3>
                <p>ステップ1で取得したハフマン木の根(一番上)から始める。</p>
                <p>残っているバイナリから、先頭のビットを読む。それが0なら左の節に、そうでなければ右の節に移動する。</p>
                <p>葉に到達するまでこれを繰り返す。ここで、到達した英字を記録し、根に戻る。</p>
                <p>バイナリの全ビットを使い切るまで繰り返す。取得した英字が、復号された単語になる。</p>

                <h4>ステップ3の例</h4>
                <p>ステップ2で残ったバイナリ： 1101000110101011 → 復号された単語：FACADE</p>

                <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" font-size="6" font-family="Special Elite" text-anchor="middle" viewBox="5 0 430 370">
                  <defs><marker id="f2" orient="auto" overflow="visible" refX="0" refY="0"><path stroke="#000" stroke-width=".19" d="m-1.93-1.21 3.28 1.2-3.28 1.21c.53-.71.53-1.68 0-2.41z"/></marker><marker id="e2" orient="auto" overflow="visible" refX="0" refY="0"><path stroke="#000" stroke-width=".19" d="m-1.93-1.21 3.28 1.2-3.28 1.21c.53-.71.53-1.68 0-2.41z"/></marker><marker id="c2" orient="auto" overflow="visible" refX="0" refY="0"><path stroke="#000" stroke-width=".19" d="m-1.93-1.21 3.28 1.2-3.28 1.21c.53-.71.53-1.68 0-2.41z"/></marker><marker id="b2" orient="auto" overflow="visible" refX="0" refY="0"><path stroke="#000" stroke-width=".19" d="m-1.93-1.21 3.28 1.2-3.28 1.21c.53-.71.53-1.68 0-2.41z"/></marker><marker id="a2" orient="auto" overflow="visible" refX="0" refY="0"><path stroke="#000" stroke-width=".19" d="m-1.93-1.21 3.28 1.2-3.28 1.21c.53-.71.53-1.68 0-2.41z"/></marker></defs>
                  <circle cx="415" cy="320" r="10" fill="#fff" stroke="#000"/>
                  <text x="415" y="323.5" font-size="10">E</text>
                  <text class="inv" x="415" y="305" stroke-width="5" font-size="13">1</text>
                  <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#a2)" d="m400 290 10.53 21.06"/>
                  <path fill="none" stroke="#000" d="m385 320 15-30"/>
                  <circle cx="235" cy="320" r="10" fill="#fff" stroke="#000"/>
                  <text x="235" y="323.5" font-size="10">D</text>
                  <path fill="none" stroke="#000" d="m340 50 15 30"/>
                  <text class="inv" x="140" y="30" stroke-width="5" font-size="13" transform="translate(-70 145)">11 → F</text>
                  <text class="inv" x="370" y="175" stroke-width="5" font-size="13">00 → C</text>
                  <text class="inv" x="220" y="355" stroke-width="5" font-size="13">1010 → D</text>
                  <text class="inv" x="370.59" y="355" stroke-width="5" font-size="13">1011 → E</text>
                  <path fill="none" stroke="#000" d="m85 80 15-30"/>
                  <g id="d2">
                    <path fill="none" stroke="#000" d="m85 140 15-30 15 30M70 110l15-30 15 30"/>
                    <circle cx="85" cy="80" r="10" fill="#fff" stroke="#000"/>
                    <circle cx="70" cy="110" r="10" fill="#fff" stroke="#000"/>
                    <text x="70" y="113.5" font-size="10">B</text>
                    <circle cx="100" cy="110" r="10" fill="#fff" stroke="#000"/>
                    <circle cx="85" cy="140" r="10" fill="#fff" stroke="#000"/>
                    <text x="85" y="143.5" font-size="10">D</text>
                    <circle cx="115" cy="140" r="10" fill="#fff" stroke="#000"/>
                    <text x="115" y="143.5" font-size="10">E</text>
                  </g>
                  <circle cx="115" cy="80" r="10" fill="#fff" stroke="#000"/>
                  <text x="115" y="84" font-size="10">F</text>
                  <text class="inv" x="115" y="65" stroke-width="5" font-size="13">1</text>
                  <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#b2)" d="m100 50 10.53 21.06"/>
                  <path fill="none" stroke="#000" d="M70 20 40 50"/>
                  <circle cx="100" cy="50" r="10" fill="#fff" stroke="#000"/>
                  <text class="inv" x="90" y="35" stroke-width="5" font-size="13">1</text>
                  <g id="h2">
                    <path fill="none" stroke="#000" d="m25 80 15-30 15 30"/>
                    <circle cx="25" cy="80" r="10" fill="#fff" stroke="#000"/>
                    <text x="25" y="84" font-size="10">C</text>
                    <circle cx="55" cy="80" r="10" fill="#fff" stroke="#000"/>
                    <text x="55" y="84" font-size="10">A</text>
                    <circle cx="40" cy="50" r="10" fill="#fff" stroke="#000"/>
                  </g>
                  <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#c2)" d="m70 20 22.93 22.93"/>
                  <circle cx="70" cy="20" r="10" fill="#fff" stroke="#000"/>
                  <g id="g2">
                    <path fill="none" stroke="#000" d="m220 20 30 30M235 80l15-30 15 30"/>
                    <text class="inv" x="220" y="175" stroke-width="5" font-size="13">01 → A</text>
                    <path fill="none" stroke="#000" d="m175 80 15-30"/>
                    <circle cx="175" cy="80" r="10" fill="#fff" stroke="#000"/>
                    <text x="175" y="84" font-size="10">C</text>
                    <circle cx="205" cy="80" r="10" fill="#fff" stroke="#000"/>
                    <text x="205" y="84" font-size="10">A</text>
                    <circle cx="265" cy="80" r="10" fill="#fff" stroke="#000"/>
                    <text x="265" y="84" font-size="10">F</text>
                    <circle cx="250" cy="50" r="10" fill="#fff" stroke="#000"/>
                    <use xlink:href="#d2" transform="translate(150)"/>
                    <text class="inv" x="205" y="30" stroke-width="5" font-size="13">0</text>
                    <text class="inv" x="205" y="65" stroke-width="5" font-size="13">1</text>
                    <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#b2)" d="m190 50 10.53 21.06"/>
                    <circle cx="190" cy="50" r="10" fill="#fff" stroke="#000"/>
                    <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#e2)" d="m221.04 18.96-22.93 22.93"/>
                    <circle cx="220" cy="20" r="10" fill="#fff" stroke="#000"/>
                  </g>
                  <path fill="none" stroke="#000" d="m370 20 30 30M385 80l15-30 15 30"/>
                  <circle cx="325" cy="80" r="10" fill="#fff" stroke="#000"/>
                  <text x="325" y="84" font-size="10">C</text>
                  <circle cx="355" cy="80" r="10" fill="#fff" stroke="#000"/>
                  <text x="355" y="84" font-size="10">A</text>
                  <circle cx="415" cy="80" r="10" fill="#fff" stroke="#000"/>
                  <text x="415" y="84" font-size="10">F</text>
                  <circle cx="400" cy="50" r="10" fill="#fff" stroke="#000"/>
                  <text class="inv" x="355" y="30" stroke-width="5" font-size="13">0</text>
                  <use xlink:href="#d2" transform="translate(300)"/>
                  <text class="inv" x="325" y="65" stroke-width="5" font-size="13">0</text>
                  <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#f2)" d="m340 50-10.53 21.06"/>
                  <circle cx="340" cy="50" r="10" fill="#fff" stroke="#000"/>
                  <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#e2)" d="m371.04 18.96-22.93 22.93"/>
                  <circle cx="370" cy="20" r="10" fill="#fff" stroke="#000"/>
                  <use xlink:href="#g2" transform="translate(-150 180)"/>
                  <path fill="none" stroke="#000" d="m250 290 15 30"/>
                  <circle cx="265" cy="320" r="10" fill="#fff" stroke="#000"/>
                  <text x="265" y="323.5" font-size="10">E</text>
                  <text class="inv" x="235" y="305" stroke-width="5" font-size="13">0</text>
                  <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#f2)" d="m250 290-10.53 21.06"/>
                  <g id="i2">
                    <path fill="none" stroke="#000" d="m250 230 15 30"/>
                    <text class="inv" x="235" y="245" stroke-width="5" font-size="13">0</text>
                    <path fill="none" stroke="#000" d="m220 290 15-30"/>
                    <circle cx="220" cy="290" r="10" fill="#fff" stroke="#000"/>
                    <text x="220" y="293.5" font-size="10">B</text>
                    <circle cx="265" cy="260" r="10" fill="#fff" stroke="#000"/>
                    <text x="265" y="264" font-size="10">F</text>
                    <path fill="none" stroke="#000" d="m220 200-30 30"/>
                    <text class="inv" x="240" y="215" stroke-width="5" font-size="13">1</text>
                    <text class="inv" x="250" y="275" stroke-width="5" font-size="13">1</text>
                    <circle cx="250" cy="290" r="10" fill="#fff" stroke="#000"/>
                    <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#b2)" d="m235 260 10.53 21.06"/>
                    <circle cx="235" cy="260" r="10" fill="#fff" stroke="#000"/>
                    <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#f2)" d="m250 230-10.53 21.06"/>
                    <circle cx="250" cy="230" r="10" fill="#fff" stroke="#000"/>
                    <path fill="none" stroke="#000" stroke-width="2" marker-end="url(#c2)" d="m220 200 22.93 22.93"/>
                    <circle cx="220" cy="200" r="10" fill="#fff" stroke="#000"/>
                    <use xlink:href="#h2" transform="translate(150 180)"/>
                  </g>
                  <use xlink:href="#i2" transform="translate(150)"/>
                  <circle cx="385" cy="320" r="10" fill="#fff" stroke="#000"/>
                  <text x="385" y="323.5" font-size="10">D</text>
                </svg>
            </div>
            <div class="page-footer relative-footer">ページ 3/3</div>
        </div>
    </div>
</body>
</html>